!function(){var e={},t=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&function(n){for(var r=e[n],o=r.deps,i=r.defn,a=o.length,s=new Array(a),c=0;c<a;++c)s[c]=t(o[c]);var u=i.apply(null,s);if(void 0===u)throw"module ["+n+"] returned undefined";r.instance=u}(n),r.instance},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(e,t){n(e,[],function(){return t})};r("global!Array",Array),r("global!Error",Error),n("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(e){return function(){return e}};return{noop:function(){},noarg:function(e){return function(){return e()}},compose:function(e,t){return function(){return e(t.apply(null,arguments))}},constant:n,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:n(!1),always:n(!0)}}),r("global!window",window),r("global!Object",Object),n("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n,r,o,i,a=e.never,s=e.always,c=function(){return u},u=(i={fold:function(e,t){return e()},is:a,isSome:a,isNone:s,getOr:o=function(e){return e},getOrThunk:r=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:o,orThunk:r,map:c,ap:c,each:function(){},bind:c,flatten:c,exists:a,forall:s,filter:c,equals:n=function(e){return e.isNone()},equals_:n,toArray:function(){return[]},toString:e.constant("none()")},t.freeze&&t.freeze(i),i),l=function(e){var t=function(){return e},n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:s,isNone:a,getOr:t,getOrThunk:t,getOrDie:t,or:n,orThunk:n,map:function(t){return l(t(e))},ap:function(t){return t.fold(c,function(t){return l(t(e))})},each:function(t){t(e)},bind:r,flatten:t,exists:r,forall:r,filter:function(t){return t(e)?o:u},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(a,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o};return{some:l,none:c,from:function(e){return null===e||void 0===e?u:l(e)}}}),r("global!String",String),n("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,r){var o,i=void 0===(o=t.prototype.indexOf)?function(e,t){return f(e,t)}:function(e,t){return o.call(e,t)},a=function(e,t){return i(e,t)>-1},s=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++)o[i]=n(e[i],i,e);return o},c=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},u=function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n],n,e)},l=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},d=function(t,n){for(var r=0,o=t.length;r<o;r++)if(n(t[r],r,t))return e.some(r);return e.none()},f=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},m=t.prototype.push,p=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);m.apply(r,e[o])}return r},h=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0},g=t.prototype.slice;return{map:s,each:c,eachr:u,partition:function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},filter:l,groupBy:function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var s=e[i],c=t(s);c!==n&&(r.push(o),o=[]),n=c,o.push(s)}return 0!==o.length&&r.push(o),r},indexOf:function(t,n){var r=i(t,n);return-1===r?e.none():e.some(r)},foldr:function(e,t,n){return u(e,function(e){n=t(n,e)}),n},foldl:function(e,t,n){return c(e,function(e){n=t(n,e)}),n},find:function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},findIndex:d,flatten:p,bind:function(e,t){var n=s(e,t);return p(n)},forall:h,exists:function(e,t){return d(e,t).isSome()},contains:a,equal:function(e,t){return e.length===t.length&&h(e,function(e,n){return e===t[n]})},reverse:function(e){var t=g.call(e,0);return t.reverse(),t},chunk:function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},difference:function(e,t){return l(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=g.call(e,0);return n.sort(t),n},range:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},head:function(t){return 0===t.length?e.none():e.some(t[0])},last:function(t){return 0===t.length?e.none():e.some(t[t.length-1])}}}),r("global!document",document),n("ephox.katamari.api.Global",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),n("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(e){var t=function(t,n){for(var r=void 0!==n?n:e,o=0;o<t.length&&void 0!==r&&null!==r;++o)r=r[t[o]];return r},n=function(t,n){for(var r,o,i=void 0!==n?n:e,a=0;a<t.length;++a)r=i,o=t[a],void 0!==r[o]&&null!==r[o]||(r[o]={}),i=r[o];return i};return{path:t,resolve:function(e,n){var r=e.split(".");return t(r,n)},forge:n,namespace:function(e,t){var r=e.split(".");return n(r,t)}}}),n("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(e){return{getOrDie:function(t,n){var r=e.resolve(t,n);if(void 0===r)throw t+" not available on this browser";return r}}}),n("ephox.sand.api.URL",["ephox.sand.util.Global"],function(e){var t=function(){return e.getOrDie("URL")};return{createObjectURL:function(e){return t().createObjectURL(e)},revokeObjectURL:function(e){t().revokeObjectURL(e)}}}),r("global!matchMedia",matchMedia),r("global!navigator",navigator),n("tinymce.core.Env",["ephox.sand.api.URL","global!document","global!matchMedia","global!navigator","global!window"],function(e,t,n,r,o){var i,a,s,c,u,l,d,f,m,p,h,g,v,y=r,b=y.userAgent,x=function(e){return"matchMedia"in o&&n(e).matches};return i=o.opera&&o.opera.buildNumber,m=/Android/.test(b),s=(s=!(a=/WebKit/.test(b))&&!i&&/MSIE/gi.test(b)&&/Explorer/gi.test(y.appName))&&/MSIE (\w+)\./.exec(b)[1],c=-1!=b.indexOf("Trident/")&&(-1!=b.indexOf("rv:")||-1!=y.appName.indexOf("Netscape"))&&11,u=-1!=b.indexOf("Edge/")&&!s&&!c&&12,s=s||c||u,l=!a&&!c&&/Gecko/.test(b),d=-1!=b.indexOf("Mac"),f=/(iPad|iPhone)/.test(b),p="FormData"in o&&"FileReader"in o&&"URL"in o&&!!e.createObjectURL,h=x("only screen and (max-device-width: 480px)")&&(m||f),g=x("only screen and (min-width: 800px)")&&(m||f),v=-1!=b.indexOf("Windows Phone"),u&&(a=!1),{opera:i,webkit:a,ie:s,gecko:l,mac:d,iOS:f,android:m,contentEditable:!f||p||b.match(/AppleWebKit\/(\d*)/)[1]>=534,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=s,range:o.getSelection&&"Range"in o,documentMode:s&&!u?t.documentMode||7:10,fileApi:p,ceFalse:!1===s||s>8,canHaveCSP:!1===s||s>11,desktop:!h&&!g,windowsPhone:v}}),r("global!clearInterval",clearInterval),r("global!clearTimeout",clearTimeout),r("global!setInterval",setInterval),r("global!setTimeout",setTimeout),n("tinymce.core.util.Promise",[],function(){if(window.Promise)return window.Promise;var e=r.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)};function t(e,t){return function(){e.apply(t,arguments)}}var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function r(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],c(e,t(i,this),t(a,this))}function o(t){var n=this;null!==this._state?e(function(){var e=n._state?t.onFulfilled:t.onRejected;if(null!==e){var r;try{r=e(n._value)}catch(e){return void t.reject(e)}t.resolve(r)}else(n._state?t.resolve:t.reject)(n._value)}):this._deferreds.push(t)}function i(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void c(t(n,e),t(i,this),t(a,this))}this._state=!0,this._value=e,s.call(this)}catch(e){a.call(this,e)}}function a(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function c(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}return r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=this;return new r(function(r,i){o.call(n,new function(t,n,r,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.resolve=r,this.reject=o}(e,t,r,i))})},r.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&n(arguments[0])?arguments[0]:arguments);return new r(function(t,n){if(0===e.length)return t([]);var r=e.length;function o(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){o(i,e)},n)}e[i]=a,0==--r&&t(e)}catch(e){n(e)}}for(var i=0;i<e.length;i++)o(i,e[i])})},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},r}),n("tinymce.core.util.Delay",["global!clearInterval","global!clearTimeout","global!document","global!setInterval","global!setTimeout","global!window","tinymce.core.util.Promise"],function(e,t,n,r,o,i,a){var s,c=function(e,t){return"number"!=typeof t&&(t=0),o(e,t)},u=function(e,t){return"number"!=typeof t&&(t=1),r(e,t)},l=function(e,n){var r,o;return(o=function(){var o=arguments;t(r),r=c(function(){e.apply(this,o)},n)}).stop=function(){t(r)},o};return{requestAnimationFrame:function(e,t){s?s.then(e):s=new a(function(e){t||(t=n.body),function(e,t){var n,r=i.requestAnimationFrame,o=["ms","moz","webkit"];for(n=0;n<o.length&&!r;n++)r=i[o[n]+"RequestAnimationFrame"];r||(r=function(e){i.setTimeout(e,0)}),r(e,t)}(e,t)}).then(e)},setTimeout:c,setInterval:u,setEditorTimeout:function(e,t,n){return c(function(){e.removed||t()},n)},setEditorInterval:function(t,n,r){var o;return o=u(function(){t.removed?e(o):n()},r)},debounce:l,throttle:l,clearInterval:function(t){return e(t)},clearTimeout:function(e){return t(e)}}}),n("tinymce.core.dom.EventUtils",["global!document","global!window","tinymce.core.Env","tinymce.core.util.Delay"],function(e,t,n,r){"use strict";var o=/^(?:mouse|contextmenu)|click/,i={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},a=function(){return!1},s=function(){return!0},c=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},u=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},l=function(t,r){var c,u,l,d,f,m=r||{};for(c in t)i[c]||(m[c]=t[c]);if(m.target||(m.target=m.srcElement||e),n.experimentalShadowDom&&(m.target=(d=m.target,(l=(u=t).path)&&l.length>0&&(d=l[0]),u.deepPath&&(l=u.deepPath())&&l.length>0&&(d=l[0]),d)),t&&o.test(t.type)&&void 0===t.pageX&&void 0!==t.clientX){var p=m.target.ownerDocument||e,h=p.documentElement,g=p.body;m.pageX=t.clientX+(h&&h.scrollLeft||g&&g.scrollLeft||0)-(h&&h.clientLeft||g&&g.clientLeft||0),m.pageY=t.clientY+(h&&h.scrollTop||g&&g.scrollTop||0)-(h&&h.clientTop||g&&g.clientTop||0)}return m.preventDefault=function(){m.isDefaultPrevented=s,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},m.stopPropagation=function(){m.isPropagationStopped=s,t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)},m.stopImmediatePropagation=function(){m.isImmediatePropagationStopped=s,m.stopPropagation()},0==((f=m).isDefaultPrevented===s||f.isDefaultPrevented===a)&&(m.isDefaultPrevented=a,m.isPropagationStopped=a,m.isImmediatePropagationStopped=a),"undefined"==typeof m.metaKey&&(m.metaKey=!1),m},d=function(e,t,o){var i=e.document,a={type:"ready"};if(o.domLoaded)t(a);else{var s=function(){return"complete"===i.readyState||"interactive"===i.readyState&&i.body},l=function(){o.domLoaded||(o.domLoaded=!0,t(a))},d=function(){s()&&(u(i,"readystatechange",d),l())},f=function(){try{i.documentElement.doScroll("left")}catch(e){return void r.setTimeout(f)}l()};!i.addEventListener||n.ie&&n.ie<11?(c(i,"readystatechange",d),i.documentElement.doScroll&&e.self===e.top&&f()):s()?l():c(e,"DOMContentLoaded",l),c(e,"load",l)}},f=function(){var n,r,o,i,a,s=this,f={};r="mce-data-"+(+new Date).toString(32),i="onmouseenter"in e.documentElement,o="onfocusin"in e.documentElement,a={mouseenter:"mouseover",mouseleave:"mouseout"},n=1,s.domLoaded=!1,s.events=f;var m=function(e,t){var n,r,o,i,a=f[t];if(n=a&&a[e.type])for(r=0,o=n.length;r<o;r++)if((i=n[r])&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return};s.bind=function(e,u,p,h){var g,v,y,b,x,C,w,k=t,S=function(e){m(l(e||k.event),g)};if(e&&3!==e.nodeType&&8!==e.nodeType){for(e[r]?g=e[r]:(g=n++,e[r]=g,f[g]={}),h=h||e,y=(u=u.split(" ")).length;y--;)C=S,x=w=!1,"DOMContentLoaded"===(b=u[y])&&(b="ready"),s.domLoaded&&"ready"===b&&"complete"==e.readyState?p.call(h,l({type:b})):(i||(x=a[b])&&(C=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=l(e||k.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,m(e,g))}),o||"focusin"!==b&&"focusout"!==b||(w=!0,x="focusin"===b?"focus":"blur",C=function(e){(e=l(e||k.event)).type="focus"===e.type?"focusin":"focusout",m(e,g)}),(v=f[g][b])?"ready"===b&&s.domLoaded?p({type:b}):v.push({func:p,scope:h}):(f[g][b]=v=[{func:p,scope:h}],v.fakeName=x,v.capture=w,v.nativeHandler=C,"ready"===b?d(e,C,s):c(e,x||b,C,w)));return e=v=0,p}},s.unbind=function(e,t,n){var o,i,a,c,l,d;if(!e||3===e.nodeType||8===e.nodeType)return s;if(o=e[r]){if(d=f[o],t){for(a=(t=t.split(" ")).length;a--;)if(i=d[l=t[a]]){if(n)for(c=i.length;c--;)if(i[c].func===n){var m=i.nativeHandler,p=i.fakeName,h=i.capture;(i=i.slice(0,c).concat(i.slice(c+1))).nativeHandler=m,i.fakeName=p,i.capture=h,d[l]=i}n&&0!==i.length||(delete d[l],u(e,i.fakeName||l,i.nativeHandler,i.capture))}}else{for(l in d)u(e,(i=d[l]).fakeName||l,i.nativeHandler,i.capture);d={}}for(l in d)return s;delete f[o];try{delete e[r]}catch(t){e[r]=null}}return s},s.fire=function(e,t,n){var o;if(!e||3===e.nodeType||8===e.nodeType)return s;(n=l(null,n)).type=t,n.target=e;do{(o=e[r])&&m(n,o),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!n.isPropagationStopped());return s},s.clean=function(e){var t,n,o=s.unbind;if(!e||3===e.nodeType||8===e.nodeType)return s;if(e[r]&&o(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(o(e),t=(n=e.getElementsByTagName("*")).length;t--;)(e=n[t])[r]&&o(e);return s},s.destroy=function(){f={}},s.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};return(f.Event=new f).bind(t,"ready",function(){}),f}),n("tinymce.core.dom.Sizzle",[],function(){var e,t,n,r,o,i,a,s,c,u,l,d,f,m,p,h,g,v,y="sizzle"+-new Date,b=window.document,x=0,C=0,w=te(),k=te(),S=te(),T=function(e,t){return e===t&&(l=!0),0},E="undefined",R=1<<31,N={}.hasOwnProperty,A=[],D=A.pop,P=A.push,B=A.push,_=A.slice,O=A.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},F="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",I="\\["+F+"*("+M+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+F+"*\\]",L=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|.*)\\)|)",H=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),W=new RegExp("^"+F+"*,"+F+"*"),U=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),z=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),q=new RegExp(L),V=new RegExp("^"+M+"$"),j={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+L),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},$=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,G=/^[^{]+\{\s*\[native \w/,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Y=/[+~]/,J=/'|\\/g,Z=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),Q=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{B.apply(A=_.call(b.childNodes),b.childNodes)}catch(e){B={apply:A.length?function(e,t){P.apply(e,_.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ee(e,n,r,o){var a,c,u,l,m,g,x,C,w,k;if((n?n.ownerDocument||n:b)!==f&&d(n),n=n||f,r=r||[],!e||"string"!=typeof e)return r;if(1!==(l=n.nodeType)&&9!==l)return[];if(p&&!o){if(a=X.exec(e))if(u=a[1]){if(9===l){if(!(c=n.getElementById(u))||!c.parentNode)return r;if(c.id===u)return r.push(c),r}else if(n.ownerDocument&&(c=n.ownerDocument.getElementById(u))&&v(n,c)&&c.id===u)return r.push(c),r}else{if(a[2])return B.apply(r,n.getElementsByTagName(e)),r;if((u=a[3])&&t.getElementsByClassName)return B.apply(r,n.getElementsByClassName(u)),r}if(t.qsa&&(!h||!h.test(e))){if(C=x=y,w=n,k=9===l&&e,1===l&&"object"!==n.nodeName.toLowerCase()){for(g=i(e),(x=n.getAttribute("id"))?C=x.replace(J,"\\$&"):n.setAttribute("id",C),C="[id='"+C+"'] ",m=g.length;m--;)g[m]=C+ue(g[m]);w=Y.test(e)&&se(n.parentNode)||n,k=g.join(",")}if(k)try{return B.apply(r,w.querySelectorAll(k)),r}catch(e){}finally{x||n.removeAttribute("id")}}}return s(e.replace(H,"$1"),n,r,o)}function te(){var e=[];return function t(r,o){return e.push(r+" ")>n.cacheLength&&delete t[e.shift()],t[r+" "]=o}}function ne(e){return e[y]=!0,e}function re(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||R)-(~e.sourceIndex||R);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function oe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ie(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ae(e){return ne(function(t){return t=+t,ne(function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))})})}function se(e){return e&&typeof e.getElementsByTagName!==E&&e}t=ee.support={},o=ee.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},d=ee.setDocument=function(e){var r,i=e?e.ownerDocument||e:b,a=i.defaultView;return i!==f&&9===i.nodeType&&i.documentElement?(f=i,m=i.documentElement,p=!o(i),a&&a!==function(e){try{return e.top}catch(e){}return null}(a)&&(a.addEventListener?a.addEventListener("unload",function(){d()},!1):a.attachEvent&&a.attachEvent("onunload",function(){d()})),t.attributes=!0,t.getElementsByTagName=!0,t.getElementsByClassName=G.test(i.getElementsByClassName),t.getById=!0,n.find.ID=function(e,t){if(typeof t.getElementById!==E&&p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},n.filter.ID=function(e){var t=e.replace(Z,Q);return function(e){return e.getAttribute("id")===t}},n.find.TAG=t.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==E)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},n.find.CLASS=t.getElementsByClassName&&function(e,t){if(p)return t.getElementsByClassName(e)},g=[],h=[],t.disconnectedMatch=!0,h=h.length&&new RegExp(h.join("|")),g=g.length&&new RegExp(g.join("|")),r=G.test(m.compareDocumentPosition),v=r||G.test(m.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},T=r?function(e,n){if(e===n)return l=!0,0;var r=!e.compareDocumentPosition-!n.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(n.ownerDocument||n)?e.compareDocumentPosition(n):1)||!t.sortDetached&&n.compareDocumentPosition(e)===r?e===i||e.ownerDocument===b&&v(b,e)?-1:n===i||n.ownerDocument===b&&v(b,n)?1:u?O.call(u,e)-O.call(u,n):0:4&r?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,o=e.parentNode,a=t.parentNode,s=[e],c=[t];if(!o||!a)return e===i?-1:t===i?1:o?-1:a?1:u?O.call(u,e)-O.call(u,t):0;if(o===a)return re(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;s[r]===c[r];)r++;return r?re(s[r],c[r]):s[r]===b?-1:c[r]===b?1:0},i):f},ee.matches=function(e,t){return ee(e,null,null,t)},ee.matchesSelector=function(e,n){if((e.ownerDocument||e)!==f&&d(e),n=n.replace(z,"='$1']"),t.matchesSelector&&p&&(!g||!g.test(n))&&(!h||!h.test(n)))try{var r=(void 0).call(e,n);if(r||t.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return ee(n,f,null,[e]).length>0},ee.contains=function(e,t){return(e.ownerDocument||e)!==f&&d(e),v(e,t)},ee.attr=function(e,r){(e.ownerDocument||e)!==f&&d(e);var o=n.attrHandle[r.toLowerCase()],i=o&&N.call(n.attrHandle,r.toLowerCase())?o(e,r,!p):void 0;return void 0!==i?i:t.attributes||!p?e.getAttribute(r):(i=e.getAttributeNode(r))&&i.specified?i.value:null},ee.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ee.uniqueSort=function(e){var n,r=[],o=0,i=0;if(l=!t.detectDuplicates,u=!t.sortStable&&e.slice(0),e.sort(T),l){for(;n=e[i++];)n===e[i]&&(o=r.push(i));for(;o--;)e.splice(r[o],1)}return u=null,e},r=ee.getText=function(e){var t,n="",o=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[o++];)n+=r(t);return n},(n=ee.selectors={cacheLength:50,createPseudo:ne,match:j,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,Q),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,Q),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ee.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ee.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return j.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&q.test(n)&&(t=i(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,Q).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=w[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&w(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==E&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var o=ee.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,c){var u,l,d,f,m,p,h=i!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!c&&!s;if(g){if(i){for(;h;){for(d=t;d=d[h];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=h="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&b){for(m=(u=(l=g[y]||(g[y]={}))[e]||[])[0]===x&&u[1],f=u[0]===x&&u[2],d=m&&g.childNodes[m];d=++m&&d&&d[h]||(f=m=0)||p.pop();)if(1===d.nodeType&&++f&&d===t){l[e]=[x,m,f];break}}else if(b&&(u=(t[y]||(t[y]={}))[e])&&u[0]===x)f=u[1];else for(;(d=++m&&d&&d[h]||(f=m=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(b&&((d[y]||(d[y]={}))[e]=[x,f]),d!==t)););return(f-=o)===r||f%r==0&&f/r>=0}}},PSEUDO:function(e,t){var r,o=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ee.error("unsupported pseudo: "+e);return o[y]?o(t):o.length>1?(r=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ne(function(e,n){for(var r,i=o(e,t),a=i.length;a--;)e[r=O.call(e,i[a])]=!(n[r]=i[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:ne(function(e){var t=[],n=[],r=a(e.replace(H,"$1"));return r[y]?ne(function(e,t,n,o){for(var i,a=r(e,null,o,[]),s=e.length;s--;)(i=a[s])&&(e[s]=!(t[s]=i))}):function(e,o,i){return t[0]=e,r(t,null,i,n),!n.pop()}}),has:ne(function(e){return function(t){return ee(e,t).length>0}}),contains:ne(function(e){return e=e.replace(Z,Q),function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}}),lang:ne(function(e){return V.test(e||"")||ee.error("unsupported lang: "+e),e=e.replace(Z,Q).toLowerCase(),function(t){var n;do{if(n=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===m},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return $.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ae(function(){return[0]}),last:ae(function(e,t){return[t-1]}),eq:ae(function(e,t,n){return[n<0?n+t:n]}),even:ae(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ae(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ae(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:ae(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=n.pseudos.eq;for(e in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=oe(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=ie(e);function ce(){}function ue(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function le(e,t,n){var r=t.dir,o=n&&"parentNode"===r,i=C++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,a){var s,c,u=[x,i];if(a){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||o){if((s=(c=t[y]||(t[y]={}))[r])&&s[0]===x&&s[1]===i)return u[2]=s[2];if(c[r]=u,u[2]=e(t,n,a))return!0}}}function de(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function fe(e,t,n,r,o){for(var i,a=[],s=0,c=e.length,u=null!=t;s<c;s++)(i=e[s])&&(n&&!n(i,r,o)||(a.push(i),u&&t.push(s)));return a}function me(e,t,n,r,o,i){return r&&!r[y]&&(r=me(r)),o&&!o[y]&&(o=me(o,i)),ne(function(i,a,s,c){var u,l,d,f=[],m=[],p=a.length,h=i||function(e,t,n){for(var r=0,o=t.length;r<o;r++)ee(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!i&&t?h:fe(h,f,e,s,c),v=n?o||(i?e:p||r)?[]:a:g;if(n&&n(g,v,s,c),r)for(u=fe(v,m),r(u,[],s,c),l=u.length;l--;)(d=u[l])&&(v[m[l]]=!(g[m[l]]=d));if(i){if(o||e){if(o){for(u=[],l=v.length;l--;)(d=v[l])&&u.push(g[l]=d);o(null,v=[],u,c)}for(l=v.length;l--;)(d=v[l])&&(u=o?O.call(i,d):f[l])>-1&&(i[u]=!(a[u]=d))}}else v=fe(v===a?v.splice(p,v.length):v),o?o(null,a,v,c):B.apply(a,v)})}function pe(e){for(var t,r,o,i=e.length,a=n.relative[e[0].type],s=a||n.relative[" "],u=a?1:0,l=le(function(e){return e===t},s,!0),d=le(function(e){return O.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==c)||((t=n).nodeType?l(e,n,r):d(e,n,r))}];u<i;u++)if(r=n.relative[e[u].type])f=[le(de(f),r)];else{if((r=n.filter[e[u].type].apply(null,e[u].matches))[y]){for(o=++u;o<i&&!n.relative[e[o].type];o++);return me(u>1&&de(f),u>1&&ue(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(H,"$1"),r,u<o&&pe(e.slice(u,o)),o<i&&pe(e=e.slice(o)),o<i&&ue(e))}f.push(r)}return de(f)}return ce.prototype=n.filters=n.pseudos,n.setFilters=new ce,i=ee.tokenize=function(e,t){var r,o,i,a,s,c,u,l=k[e+" "];if(l)return t?0:l.slice(0);for(s=e,c=[],u=n.preFilter;s;){r&&!(o=W.exec(s))||(o&&(s=s.slice(o[0].length)||s),c.push(i=[])),r=!1,(o=U.exec(s))&&(r=o.shift(),i.push({value:r,type:o[0].replace(H," ")}),s=s.slice(r.length));for(a in n.filter)!(o=j[a].exec(s))||u[a]&&!(o=u[a](o))||(r=o.shift(),i.push({value:r,type:a,matches:o}),s=s.slice(r.length));if(!r)break}return t?s.length:s?ee.error(e):k(e,c).slice(0)},a=ee.compile=function(e,t){var r,o,a,s,u,l,d=[],m=[],p=S[e+" "];if(!p){for(t||(t=i(e)),r=t.length;r--;)(p=pe(t[r]))[y]?d.push(p):m.push(p);(p=S(e,(u=(o=m).length>0,l=function(e,t,r,i,l){var d,m,p,h=0,g="0",v=e&&[],y=[],b=c,C=e||u&&n.find.TAG("*",l),w=x+=null==b?1:Math.random()||.1,k=C.length;for(l&&(c=t!==f&&t);g!==k&&null!=(d=C[g]);g++){if(u&&d){for(m=0;p=o[m++];)if(p(d,t,r)){i.push(d);break}l&&(x=w)}s&&((d=!p&&d)&&h--,e&&v.push(d))}if(h+=g,s&&g!==h){for(m=0;p=a[m++];)p(v,y,t,r);if(e){if(h>0)for(;g--;)v[g]||y[g]||(y[g]=D.call(i));y=fe(y)}B.apply(i,y),l&&!e&&y.length>0&&h+a.length>1&&ee.uniqueSort(i)}return l&&(x=w,c=b),v},(s=(a=d).length>0)?ne(l):l))).selector=e}return p},s=ee.select=function(e,r,o,s){var c,u,l,d,f,m="function"==typeof e&&e,h=!s&&i(e=m.selector||e);if(o=o||[],1===h.length){if((u=h[0]=h[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&t.getById&&9===r.nodeType&&p&&n.relative[u[1].type]){if(!(r=(n.find.ID(l.matches[0].replace(Z,Q),r)||[])[0]))return o;m&&(r=r.parentNode),e=e.slice(u.shift().value.length)}for(c=j.needsContext.test(e)?0:u.length;c--&&!n.relative[d=(l=u[c]).type];)if((f=n.find[d])&&(s=f(l.matches[0].replace(Z,Q),Y.test(u[0].type)&&se(r.parentNode)||r))){if(u.splice(c,1),!(e=s.length&&ue(u)))return B.apply(o,s),o;break}}return(m||a(e,h))(s,r,!p,o,Y.test(e)&&se(r.parentNode)||r),o},t.sortStable=y.split("").sort(T).join("")===y,t.detectDuplicates=!!l,d(),t.sortDetached=!0,ee}),n("tinymce.core.util.Arr",[],function(){var e=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t=function(e,t,n){var r,o;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1},n=function(e,t,n){var r,o;for(r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1};return{isArray:e,toArray:function(t){var n,r,o=t;if(!e(t))for(o=[],n=0,r=t.length;n<r;n++)o[n]=t[n];return o},each:t,map:function(e,n){var r=[];return t(e,function(t,o){r.push(n(t,o,e))}),r},filter:function(e,n){var r=[];return t(e,function(t,o){n&&!n(t,o,e)||r.push(t)}),r},indexOf:function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},reduce:function(e,t,n,r){var o=0;for(arguments.length<3&&(n=e[0]);o<e.length;o++)n=t.call(r,n,e[o],o);return n},findIndex:n,find:function(e,t,r){var o=n(e,t,r);if(-1!==o)return e[o]},last:function(e){return e[e.length-1]}}}),n("tinymce.core.util.Tools",["global!window","tinymce.core.Env","tinymce.core.util.Arr"],function(e,t,n){var r=/^\s*|\s*$/g,o=function(e){return null===e||void 0===e?"":(""+e).replace(r,"")},i=function(e,t){return t?!("array"!=t||!n.isArray(e))||typeof e==t:void 0!==e},a=function(e,t,r,o){o=o||this,e&&(r&&(e=e[r]),n.each(e,function(e,n){if(!1===t.call(o,e,n,r))return!1;a(e,t,r,o)}))};return{trim:o,isArray:n.isArray,is:i,toArray:n.toArray,makeMap:function(e,t,n){var r;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n},each:n.each,map:n.map,grep:n.filter,inArray:n.indexOf,hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},extend:function(e,t){var n,r,o,i,a=arguments;for(n=1,r=a.length;n<r;n++){t=a[n];for(o in t)t.hasOwnProperty(o)&&void 0!==(i=t[o])&&(e[o]=i)}return e},create:function(e,t,n){var r,o,i,a,s,c=this,u=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),i=e[3].match(/(^|\.)(\w+)$/i)[2],!(o=c.createNS(e[3].replace(/\.\w+$/,""),n))[i]){if("static"==e[2])return o[i]=t,void(this.onCreate&&this.onCreate(e[2],e[3],o[i]));t[i]||(t[i]=function(){},u=1),o[i]=t[i],c.extend(o[i].prototype,t),e[5]&&(r=c.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=o[i],o[i]=u?function(){return r[a].apply(this,arguments)}:function(){return this.parent=r[a],s.apply(this,arguments)},o[i].prototype[i]=o[i],c.each(r,function(e,t){o[i].prototype[t]=r[t]}),c.each(t,function(e,t){r[t]?o[i].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!=i&&(o[i].prototype[t]=e)})),c.each(t.static,function(e,t){o[i][t]=e})}},walk:a,createNS:function(t,n){var r,o;for(n=n||e,t=t.split("."),r=0;r<t.length;r++)n[o=t[r]]||(n[o]={}),n=n[o];return n},resolve:function(t,n){var r,o;for(n=n||e,r=0,o=(t=t.split(".")).length;r<o&&(n=n[t[r]]);r++);return n},explode:function(e,t){return!e||i(e,"array")?e:n.map(e.split(t||","),o)},_addCacheSuffix:function(e){var n=t.cacheSuffix;return n&&(e+=(-1===e.indexOf("?")?"?":"&")+n),e}}}),n("tinymce.core.dom.DomQuery",["global!document","tinymce.core.dom.EventUtils","tinymce.core.dom.Sizzle","tinymce.core.Env","tinymce.core.util.Tools"],function(e,t,n,r,o){var i,a=e,s=Array.prototype.push,c=Array.prototype.slice,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,l=t.Event,d=o.makeMap("children,contents,next,prev"),f=function(e){return"undefined"!=typeof e},m=function(e){return"string"==typeof e},p=function(e,t){var n,r,o;for(o=(t=t||a).createElement("div"),n=t.createDocumentFragment(),o.innerHTML=e;r=o.firstChild;)n.appendChild(r);return n},h=function(e,t,n,r){var o;if(m(t))t=p(t,A(e[0]));else if(t.length&&!t.nodeType){if(t=S.makeArray(t),r)for(o=t.length-1;o>=0;o--)h(e,t[o],n,r);else for(o=0;o<t.length;o++)h(e,t[o],n,r);return e}if(t.nodeType)for(o=e.length;o--;)n.call(e[o],t);return e},g=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},v=function(e,t,n){var r,o;return t=S(t)[0],e.each(function(){var e=this;n&&r==e.parentNode?o.appendChild(e):(r=e.parentNode,o=t.cloneNode(!1),e.parentNode.insertBefore(o,e),o.appendChild(e))}),e},y=o.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),b=o.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),x={for:"htmlFor",class:"className",readonly:"readOnly"},C={float:"cssFloat"},w={},k={},S=function(e,t){return new S.fn.init(e,t)},T=/^\s*|\s*$/g,E=function(e){return null===e||e===i?"":(""+e).replace(T,"")},R=function(e,t){var n,r,o,i;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(i=e[r],r,i))break}else for(o=0;o<n&&!1!==t.call(i=e[o],o,i);o++);return e},N=function(e,t){var n=[];return R(e,function(e,r){t(r,e)&&n.push(r)}),n},A=function(e){return e?9==e.nodeType?e:e.ownerDocument:a};S.fn=S.prototype={constructor:S,selector:"",context:null,length:0,init:function(t,n){var r,o,i=this;if(!t)return i;if(t.nodeType)return i.context=i[0]=t,i.length=1,i;if(n&&n.nodeType)i.context=n;else{if(n)return S(t).attr(n);i.context=n=e}if(m(t)){if(i.selector=t,!(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:u.exec(t)))return S(n).find(t);if(r[1])for(o=p(t,A(n)).firstChild;o;)s.call(i,o),o=o.nextSibling;else{if(!(o=A(n).getElementById(r[2])))return i;if(o.id!==r[2])return i.find(t);i.length=1,i[0]=o}}else this.add(t,!1);return i},toArray:function(){return o.toArray(this)},add:function(e,t){var n,r,o=this;if(m(e))return o.add(S(e));if(!1!==t)for(n=S.unique(o.toArray().concat(S.makeArray(e))),o.length=n.length,r=0;r<n.length;r++)o[r]=n[r];else s.apply(o,S.makeArray(e));return o},attr:function(e,t){var n,r=this;if("object"==typeof e)R(e,function(e,t){r.attr(e,t)});else{if(!f(t)){if(r[0]&&1===r[0].nodeType){if((n=w[e])&&n.get)return n.get(r[0],e);if(b[e])return r.prop(e)?e:i;null===(t=r[0].getAttribute(e,2))&&(t=i)}return t}this.each(function(){var n;if(1===this.nodeType){if((n=w[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=x[e]||e))R(e,function(e,t){n.prop(e,t)});else{if(!f(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1==this.nodeType&&(this[e]=t)})}return n},css:function(e,t){var n,r,o=this,a=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},s=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"==typeof e)R(e,function(e,t){o.css(e,t)});else if(f(t))e=a(e),"number"!=typeof t||y[e]||(t+="px"),o.each(function(){var n=this.style;if((r=k[e])&&r.set)r.set(this,t);else{try{this.style[C[e]||e]=t}catch(e){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(s(e)):n.removeAttribute(e))}});else{if(n=o[0],(r=k[e])&&r.get)return r.get(n);if(n.ownerDocument.defaultView)try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(s(e))}catch(e){return i}else if(n.currentStyle)return n.currentStyle[a(e)]}return o},remove:function(){for(var e,t=this.length;t--;)l.clean(e=this[t]),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this.length;t--;)for(e=this[t];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(f(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(r){S(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(f(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return h(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return h(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?h(this,arguments,function(e){this.parentNode.insertBefore(e,this)}):this},after:function(){return this[0]&&this[0].parentNode?h(this,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):this},appendTo:function(e){return S(e).append(this),this},prependTo:function(e){return S(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return v(this,e)},wrapAll:function(e){return v(this,e,!0)},wrapInner:function(e){return this.each(function(){S(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){S(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),S(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(-1!==e.indexOf(" ")?R(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,r){var o,i;(i=g(r,e))!==t&&(o=r.className,i?r.className=E((" "+o+" ").replace(" "+e+" "," ")):r.className+=o?" "+e:e)}),n)},hasClass:function(e){return g(this[0],e)},each:function(e){return R(this,e)},on:function(e,t){return this.each(function(){l.bind(this,e,t)})},off:function(e,t){return this.each(function(){l.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?l.fire(this,e.type,e):l.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new S(c.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)S.find(e,this[t],r);return S(r)},filter:function(e){return S("function"==typeof e?N(this.toArray(),function(t,n){return e(n,t)}):S.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof S&&(e=e[0]),this.each(function(n,r){for(;r;){if("string"==typeof e&&S(r).is(e)){t.push(r);break}if(r==e){t.push(r);break}r=r.parentNode}}),S(t)},offset:function(e){var t,n,r,o,i=0,a=0;return e?this.css(e):((t=this[0])&&(r=(n=t.ownerDocument).documentElement,t.getBoundingClientRect&&(i=(o=t.getBoundingClientRect()).left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,a=o.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:i,top:a})},push:s,sort:[].sort,splice:[].splice},o.extend(S,{extend:o.extend,makeArray:function(e){return(t=e)&&t==t.window||e.nodeType?[e]:o.toArray(e);var t},inArray:function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},isArray:o.isArray,each:R,trim:E,grep:N,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,contains:n.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!=t[r].nodeType&&t.splice(r,1);return 1===t.length?S.find.matchesSelector(t[0],e)?[t[0]]:[]:S.find.matches(e,t)}});var D=function(e,t,n){var r=[],o=e[t];for("string"!=typeof n&&n instanceof S&&(n=n[0]);o&&9!==o.nodeType;){if(void 0!==n){if(o===n)break;if("string"==typeof n&&S(o).is(n))break}1===o.nodeType&&r.push(o),o=o[t]}return r},P=function(e,t,n,r){var o=[];for(r instanceof S&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&S(e).is(r))break}o.push(e)}return o},B=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType==n)return e;return null};R({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return D(e,"parentNode")},next:function(e){return B(e,"nextSibling",1)},prev:function(e){return B(e,"previousSibling",1)},children:function(e){return P(e.firstChild,"nextSibling",1)},contents:function(e){return o.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){S.fn[e]=function(n){var r=[];return this.each(function(){var e=t.call(r,this,n,r);e&&(S.isArray(e)?r.push.apply(r,e):r.push(e))}),this.length>1&&(d[e]||(r=S.unique(r)),0===e.indexOf("parents")&&(r=r.reverse())),r=S(r),n?r.filter(n):r}}),R({parentsUntil:function(e,t){return D(e,"parentNode",t)},nextUntil:function(e,t){return P(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return P(e,"previousSibling",1,t).slice(1)}},function(e,t){S.fn[e]=function(n,r){var o=[];return this.each(function(){var e=t.call(o,this,n,o);e&&(S.isArray(e)?o.push.apply(o,e):o.push(e))}),this.length>1&&(o=S.unique(o),0!==e.indexOf("parents")&&"prevUntil"!==e||(o=o.reverse())),o=S(o),r?o.filter(r):o}}),S.fn.is=function(e){return!!e&&this.filter(e).length>0},S.fn.init.prototype=S.fn,S.overrideDefaults=function(e){var t,n=function(r,o){return t=t||e(),0===arguments.length&&(r=t.element),o||(o=t.context),new n.fn.init(r,o)};return S.extend(n,this),n};var _=function(e,t,n){R(n,function(n,r){e[n]=e[n]||{},e[n][t]=r})};return r.ie&&r.ie<8&&(_(w,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?i:t},size:function(e){var t=e.size;return 20===t?i:t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?i:t}}),_(w,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),r.ie&&r.ie<9&&(C.float="styleFloat",_(k,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),S.attrHooks=w,S.cssHooks=k,S}),n("ephox.katamari.api.Thunk",[],function(){return{cached:function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(null,arguments)),t}}}}),r("global!Number",Number),n("ephox.sand.detect.Version",["ephox.katamari.api.Arr","global!Number","global!String"],function(e,t,n){var r=function(){return o(0,0)},o=function(e,t){return{major:e,minor:t}};return{nu:o,detect:function(e,i){var a=n(i).toLowerCase();return 0===e.length?r():function(n,r){var i=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,r);if(!i)return{major:0,minor:0};var a=function(e){return t(r.replace(i,"$"+e))};return o(a(1),a(2))}(0,a)},unknown:r}}),n("ephox.sand.core.Browser",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n="Firefox",r=function(e,t){return function(){return t===e}},o=function(e){var t=e.current;return{current:t,version:e.version,isEdge:r("Edge",t),isChrome:r("Chrome",t),isIE:r("IE",t),isOpera:r("Opera",t),isFirefox:r(n,t),isSafari:r("Safari",t)}};return{unknown:function(){return o({current:void 0,version:t.unknown()})},nu:o,edge:e.constant("Edge"),chrome:e.constant("Chrome"),ie:e.constant("IE"),opera:e.constant("Opera"),firefox:e.constant(n),safari:e.constant("Safari")}}),n("ephox.sand.core.OperatingSystem",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n="Windows",r="Android",o="Solaris",i="FreeBSD",a=function(e,t){return function(){return t===e}},s=function(e){var t=e.current;return{current:t,version:e.version,isWindows:a(n,t),isiOS:a("iOS",t),isAndroid:a(r,t),isOSX:a("OSX",t),isLinux:a("Linux",t),isSolaris:a(o,t),isFreeBSD:a(i,t)}};return{unknown:function(){return s({current:void 0,version:t.unknown()})},nu:s,windows:e.constant(n),ios:e.constant("iOS"),android:e.constant(r),linux:e.constant("Linux"),osx:e.constant("OSX"),solaris:e.constant(o),freebsd:e.constant(i)}}),n("ephox.sand.detect.DeviceType",["ephox.katamari.api.Fun"],function(e){return function(t,n,r){var o=t.isiOS()&&!0===/ipad/i.test(r),i=t.isiOS()&&!o,a=t.isAndroid()&&3===t.version.major,s=t.isAndroid()&&4===t.version.major,c=o||a||s&&!0===/mobile/i.test(r),u=t.isiOS()||t.isAndroid(),l=u&&!c,d=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(r);return{isiPad:e.constant(o),isiPhone:e.constant(i),isTablet:e.constant(c),isPhone:e.constant(l),isTouch:e.constant(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:e.constant(d)}}}),n("ephox.sand.detect.UaString",["ephox.katamari.api.Arr","ephox.sand.detect.Version","global!String"],function(e,t,n){var r=function(t,r){var o=n(r).toLowerCase();return e.find(t,function(e){return e.search(o)})};return{detectBrowser:function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})},detectOs:function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})}}}),n("ephox.katamari.str.StrAppend",[],function(){return{addToStart:function(e,t){return t+e},addToEnd:function(e,t){return e+t},removeFromStart:function(e,t){return e.substring(t)},removeFromEnd:function(e,t){return e.substring(0,e.length-t)}}}),n("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],function(e,t){return{first:function(e,t){return e.substr(0,t)},last:function(e,t){return e.substr(e.length-t,e.length)},head:function(t){return""===t?e.none():e.some(t.substr(0,1))},tail:function(t){return""===t?e.none():e.some(t.substring(1))}}}),n("ephox.katamari.api.Strings",["ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","global!Error"],function(e,t,n){var r=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},o=function(e,t){return r(e,t,0)},i=function(e,t){return r(e,t,e.length-t.length)};return{supplant:function(e,t){return e.replace(/\${([^{}]*)}/g,function(e,n){var r,o=t[n];return"string"==(r=typeof o)||"number"===r?o:e})},startsWith:o,removeLeading:function(t,n){return o(t,n)?e.removeFromStart(t,n.length):t},removeTrailing:function(t,n){return i(t,n)?e.removeFromEnd(t,n.length):t},ensureLeading:function(t,n){return o(t,n)?t:e.addToStart(t,n)},ensureTrailing:function(t,n){return i(t,n)?t:e.addToEnd(t,n)},endsWith:i,contains:function(e,t){return-1!==e.indexOf(t)},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},lTrim:function(e){return e.replace(/^\s+/g,"")},rTrim:function(e){return e.replace(/\s+$/g,"")},capitalize:function(e){return t.head(e).bind(function(n){return t.tail(e).map(function(e){return n.toUpperCase()+e})}).getOr(e)}}}),n("ephox.sand.info.PlatformInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Strings"],function(e,t){var n=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,r=function(e){return function(n){return t.contains(n,e)}},o=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return t.contains(e,"edge/")&&t.contains(e,"chrome")&&t.contains(e,"safari")&&t.contains(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,n],search:function(e){return t.contains(e,"chrome")&&!t.contains(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return t.contains(e,"msie")||t.contains(e,"trident")}},{name:"Opera",versionRegexes:[n,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:r("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:r("firefox")},{name:"Safari",versionRegexes:[n,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(t.contains(e,"safari")||t.contains(e,"mobile/"))&&t.contains(e,"applewebkit")}}],i=[{name:"Windows",search:r("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return t.contains(e,"iphone")||t.contains(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:r("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:r("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:r("linux"),versionRegexes:[]},{name:"Solaris",search:r("sunos"),versionRegexes:[]},{name:"FreeBSD",search:r("freebsd"),versionRegexes:[]}];return{browsers:e.constant(o),oses:e.constant(i)}}),n("ephox.sand.core.PlatformDetection",["ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString","ephox.sand.info.PlatformInfo"],function(e,t,n,r,o){return{detect:function(i){var a=o.browsers(),s=o.oses(),c=r.detectBrowser(a,i).fold(e.unknown,e.nu),u=r.detectOs(s,i).fold(t.unknown,t.nu);return{browser:c,os:u,deviceType:n(u,c,i)}}}}),n("ephox.sand.api.PlatformDetection",["ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection","global!navigator"],function(e,t,n){return{detect:e.cached(function(){return t.detect(n.userAgent)})}}),n("global!console",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),n("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","ephox.katamari.api.Option","global!Error","global!console","global!document"],function(e,t,n,r,o){var i=function(t){if(null===t||void 0===t)throw new n("Node cannot be null or undefined");return{dom:e.constant(t)}};return{fromHtml:function(e,t){var n=(t||o).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw r.error("HTML does not have a single root node",e),"HTML must have a single root node";return i(n.childNodes[0])},fromTag:function(e,t){var n=(t||o).createElement(e);return i(n)},fromText:function(e,t){var n=(t||o).createTextNode(e);return i(n)},fromDom:i,fromPoint:function(e,n,r){return t.from(e.dom().elementFromPoint(n,r)).map(i)}}}),n("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),n("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(e){var t=function(e){return e.dom().nodeName.toLowerCase()},n=function(e){return e.dom().nodeType},r=function(e){return function(t){return n(t)===e}},o=r(e.ELEMENT),i=r(e.TEXT),a=r(e.DOCUMENT);return{name:t,type:n,value:function(e){return e.dom().nodeValue},isElement:o,isText:i,isDocument:a,isComment:function(r){return n(r)===e.COMMENT||"#comment"===t(r)}}}),n("ephox.katamari.api.Type",["global!Array","global!String"],function(e,t){var n=function(n){return function(r){return function(n){if(null===n)return"null";var r=typeof n;return"object"===r&&e.prototype.isPrototypeOf(n)?"array":"object"===r&&t.prototype.isPrototypeOf(n)?"string":r}(r)===n}};return{isString:n("string"),isObject:n("object"),isArray:n("array"),isNull:n("null"),isBoolean:n("boolean"),isUndefined:n("undefined"),isFunction:n("function"),isNumber:n("number")}}),n("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],function(e,t){var n,r=void 0===(n=t.keys)?function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}:n,o=function(e,t){for(var n=r(e),o=0,i=n.length;o<i;o++){var a=n[o];t(e[a],a,e)}},i=function(e,t){var n={};return o(e,function(r,o){var i=t(r,o,e);n[i.k]=i.v}),n},a=function(e,t){var n=[];return o(e,function(e,r){n.push(t(e,r))}),n},s=function(e){return a(e,function(e){return e})};return{bifilter:function(e,t){var n={},r={};return o(e,function(e,o){(t(e,o)?n:r)[o]=e}),{t:n,f:r}},each:o,map:function(e,t){return i(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},mapToArray:a,tupleMap:i,find:function(t,n){for(var o=r(t),i=0,a=o.length;i<a;i++){var s=o[i],c=t[s];if(n(c,s,t))return e.some(c)}return e.none()},keys:r,values:s,size:function(e){return s(e).length}}}),n("ephox.sugar.api.properties.Attr",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.sugar.api.node.Node","global!Error","global!console"],function(e,t,n,r,o,i){var a=function(t,n,r){if(!(e.isString(r)||e.isBoolean(r)||e.isNumber(r)))throw i.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new o("Attribute value was not simple");t.setAttribute(n,r+"")},s=function(e,t,n){a(e.dom(),t,n)},c=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},u=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)};return{clone:function(e){return t.foldl(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},set:s,setAll:function(e,t){var r=e.dom();n.each(t,function(e,t){a(r,t,e)})},get:c,has:u,remove:function(e,t){e.dom().removeAttribute(t)},hasNone:function(e){var t=e.dom().attributes;return void 0===t||null===t||0===t.length},transfer:function(e,n,o){r.isElement(e)&&r.isElement(n)&&t.each(o,function(t){var r,o,i;o=n,u(r=e,i=t)&&!u(o,i)&&s(o,i,c(r,i))})}}}),n("ephox.sugar.api.node.Body",["ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","global!document"],function(e,t,n,r){var o=e.cached(function(){return i(t.fromDom(r))}),i=function(e){var n=e.dom().body;if(null===n||void 0===n)throw"Body is not available yet";return t.fromDom(n)};return{body:o,getBody:i,inBody:function(e){var t=n.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)}}}),n("ephox.sugar.impl.Style",[],function(){return{isSupported:function(e){return void 0!==e.style}}}),n("ephox.sugar.api.properties.Css",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Body","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.impl.Style","ephox.katamari.api.Strings","global!Error","global!console","global!window"],function(e,t,n,r,o,i,a,s,c,u,l,d,f){var m=function(t,n,r){if(!e.isString(r))throw d.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new l("CSS value must be a string: "+r);c.isSupported(t)&&t.style.setProperty(n,r)},p=function(e,t){c.isSupported(e)&&e.style.removeProperty(t)},h=function(e,t,n){var r=e.dom();m(r,t,n)},g=function(e,t){return c.isSupported(e)?e.style.getPropertyValue(t):""},v=function(e,t){var n=e.dom(),o=g(n,t);return r.from(o).filter(function(e){return e.length>0})};return{copy:function(e,t){var n=e.dom(),r=t.dom();c.isSupported(n)&&c.isSupported(r)&&(r.style.cssText=n.style.cssText)},set:h,preserve:function(e,t){var n=o.get(e,"style"),r=t(e);return(void 0===n?o.remove:o.set)(e,"style",n),r},setAll:function(e,t){var r=e.dom();n.each(t,function(e,t){m(r,t,e)})},setOptions:function(e,t){var r=e.dom();n.each(t,function(e,t){e.fold(function(){p(r,t)},function(e){m(r,t,e)})})},remove:function(e,t){var n=e.dom();p(n,t),o.has(e,"style")&&""===u.trim(o.get(e,"style"))&&o.remove(e,"style")},get:function(e,t){var n=e.dom(),r=f.getComputedStyle(n).getPropertyValue(t),o=""!==r||i.inBody(e)?r:g(n,t);return null===o?void 0:o},getRaw:v,getAllRaw:function(e){var t={},n=e.dom();if(c.isSupported(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);t[o]=n.style[o]}return t},isValidValue:function(e,t,n){var r=a.fromTag(e);return h(r,t,n),v(r,t).isSome()},reflow:function(e){return e.dom().offsetWidth},transfer:function(e,n,r){s.isElement(e)&&s.isElement(n)&&t.each(r,function(t){var r,o;r=n,v(e,o=t).each(function(e){v(r,o).isNone()&&h(r,o,e)})})}}}),n("ephox.katamari.data.Immutable",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!Array","global!Error"],function(e,t,n,r){return function(){var o=arguments;return function(){for(var i=new n(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];if(o.length!==i.length)throw new r('Wrong number of arguments to struct. Expected "['+o.length+']", got '+i.length+" arguments");var s={};return e.each(o,function(e,n){s[e]=t.constant(i[n])}),s}}}),n("ephox.katamari.util.BagUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!Error"],function(e,t,n){var r=function(e){return e.slice(0).sort()};return{sort:r,reqMessage:function(e,t){throw new n("All required keys ("+r(e).join(", ")+") were not specified. Specified keys were: "+r(t).join(", ")+".")},unsuppMessage:function(e){throw new n("Unsupported keys for object: "+r(e).join(", "))},validateStrArr:function(r,o){if(!t.isArray(o))throw new n("The "+r+" fields must be an array. Was: "+o+".");e.each(o,function(e){if(!t.isString(e))throw new n("The value "+e+" in the "+r+" fields was not a string.")})},invalidTypeMessage:function(e,t){throw new n("All values need to be of type: "+t+". Keys ("+r(e).join(", ")+") were not.")},checkDupes:function(t){var o=r(t);e.find(o,function(e,t){return t<o.length-1&&e===o[t+1]}).each(function(e){throw new n("The field: "+e+" occurs more than once in the combined fields: ["+o.join(", ")+"].")})}}}),n("ephox.katamari.data.MixedBag",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.katamari.util.BagUtils","global!Error","global!Object"],function(e,t,n,r,o,i,a){return function(s,c){var u=s.concat(c);if(0===u.length)throw new i("You must specify at least one required or optional field.");return o.validateStrArr("required",s),o.validateStrArr("optional",c),o.checkDupes(u),function(i){var l=n.keys(i);e.forall(s,function(t){return e.contains(l,t)})||o.reqMessage(s,l);var d=e.filter(l,function(t){return!e.contains(u,t)});d.length>0&&o.unsuppMessage(d);var f={};return e.each(s,function(e){f[e]=t.constant(i[e])}),e.each(c,function(e){f[e]=t.constant(a.prototype.hasOwnProperty.call(i,e)?r.some(i[e]):r.none())}),f}}}),n("ephox.katamari.api.Struct",["ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag"],function(e,t){return{immutable:e,immutableBag:t}}),n("ephox.sugar.alien.Recurse",[],function(){return{toArray:function(e,t){var n=[],r=function(e){return n.push(e),t(e)},o=t(e);do{o=o.bind(r)}while(o.isSome());return n}}}),n("ephox.sand.api.Node",["ephox.sand.util.Global"],function(e){var t=function(){return e.getOrDie("Node")},n=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)};return{documentPositionPreceding:function(e,r){return n(e,r,t().DOCUMENT_POSITION_PRECEDING)},documentPositionContainedBy:function(e,r){return n(e,r,t().DOCUMENT_POSITION_CONTAINED_BY)}}}),n("ephox.sugar.api.search.Selectors",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.node.NodeTypes","global!Error","global!document"],function(e,t,n,r,o,i){var a=r.ELEMENT,s=r.DOCUMENT,c=function(e){return e.nodeType!==a&&e.nodeType!==s||0===e.childElementCount};return{all:function(t,r){var o=void 0===r?i:r.dom();return c(o)?[]:e.map(o.querySelectorAll(t),n.fromDom)},is:function(e,t){var n=e.dom();if(n.nodeType!==a)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new o("Browser lacks native selectors")},one:function(e,r){var o=void 0===r?i:r.dom();return c(o)?t.none():t.from(o.querySelector(e)).map(n.fromDom)}}}),n("ephox.sugar.api.dom.Compare",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors"],function(e,t,n,r,o){var i=function(e,t){return e.dom()===t.dom()},a=r.detect().browser.isIE()?function(e,t){return n.documentPositionContainedBy(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)};return{eq:i,isEqualNode:function(e,t){return e.dom().isEqualNode(t.dom())},member:function(n,r){return e.exists(r,t.curry(i,n))},contains:a,is:o.is}}),n("ephox.sugar.api.search.Traverse",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.alien.Recurse","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t,n,r,o,i,a,s){var c=function(e){return s.fromDom(e.dom().ownerDocument)},u=function(e){var t=e.dom();return r.from(t.parentNode).map(s.fromDom)},l=function(e){var t=e.dom();return r.from(t.previousSibling).map(s.fromDom)},d=function(e){var t=e.dom();return r.from(t.nextSibling).map(s.fromDom)},f=function(e){var n=e.dom();return t.map(n.childNodes,s.fromDom)},m=function(e,t){var n=e.dom().childNodes;return r.from(n[t]).map(s.fromDom)},p=o.immutable("element","offset");return{owner:c,defaultView:function(e){var t=e.dom();return s.fromDom(t.ownerDocument.defaultView)},documentElement:function(e){var t=c(e);return s.fromDom(t.dom().documentElement)},parent:u,findIndex:function(e){return u(e).bind(function(n){var r=f(n);return t.findIndex(r,function(t){return a.eq(e,t)})})},parents:function(t,r){for(var o=e.isFunction(r)?r:n.constant(!1),i=t.dom(),a=[];null!==i.parentNode&&void 0!==i.parentNode;){var c=i.parentNode,u=s.fromDom(c);if(a.push(u),!0===o(u))break;i=c}return a},siblings:function(e){return u(e).map(f).map(function(n){return t.filter(n,function(t){return!a.eq(e,t)})}).getOr([])},prevSibling:l,offsetParent:function(e){var t=e.dom();return r.from(t.offsetParent).map(s.fromDom)},prevSiblings:function(e){return t.reverse(i.toArray(e,l))},nextSibling:d,nextSiblings:function(e){return i.toArray(e,d)},children:f,child:m,firstChild:function(e){return m(e,0)},lastChild:function(e){return m(e,e.dom().childNodes.length-1)},childNodesCount:function(e){return e.dom().childNodes.length},hasChildNodes:function(e){return e.dom().hasChildNodes()},leaf:function(e,t){var n=f(e);return n.length>0&&t<n.length?p(n[t],0):p(e,t)}}}),n("tinymce.core.dom.Position",["ephox.katamari.api.Arr","ephox.sand.api.PlatformDetection","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Css","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i){var a=t.detect().browser,s=function(t){return e.find(t,r.isElement)};return{getPos:function(e,t,c){var u,l,d,f=0,m=0,p=e.ownerDocument;if(c=c||e,t){if(c===e&&t.getBoundingClientRect&&"static"===o.get(n.fromDom(e),"position"))return{x:f=(l=t.getBoundingClientRect()).left+(p.documentElement.scrollLeft||e.scrollLeft)-p.documentElement.clientLeft,y:m=l.top+(p.documentElement.scrollTop||e.scrollTop)-p.documentElement.clientTop};for(u=t;u&&u!==c&&u.nodeType;)f+=u.offsetLeft||0,m+=u.offsetTop||0,u=u.offsetParent;for(u=t.parentNode;u&&u!==c&&u.nodeType;)f-=u.scrollLeft||0,m-=u.scrollTop||0,u=u.parentNode;m+=(d=n.fromDom(t),a.isFirefox()&&"table"===r.name(d)?s(i.children(d)).filter(function(e){return"caption"===r.name(e)}).bind(function(e){return s(i.nextSiblings(e)).map(function(t){var n=t.dom().offsetTop,r=e.dom().offsetTop,o=e.dom().offsetHeight;return n<=r?-o:0})}).getOr(0):0)}return{x:f,y:m}}}}),n("ephox.katamari.api.LazyValue",["ephox.katamari.api.Arr","ephox.katamari.api.Option","global!setTimeout"],function(e,t,n){var r=function(o){var i=t.none(),a=[],s=function(e){c()?u(e):a.push(e)},c=function(){return i.isSome()},u=function(e){i.each(function(t){n(function(){e(t)},0)})};return o(function(n){i=t.some(n),e.each(a,u),a=[]}),{get:s,map:function(e){return r(function(t){s(function(n){t(e(n))})})},isReady:c}};return{nu:r,pure:function(e){return r(function(t){t(e)})}}}),n("ephox.katamari.async.Bounce",["global!Array","global!setTimeout"],function(e,t){return{bounce:function(n){return function(){var r=e.prototype.slice.call(arguments),o=this;t(function(){n.apply(o,r)},0)}}}}),n("ephox.katamari.api.Future",["ephox.katamari.api.LazyValue","ephox.katamari.async.Bounce"],function(e,t){var n=function(r){var o=function(e){r(t.bounce(e))};return{map:function(e){return n(function(t){o(function(n){var r=e(n);t(r)})})},bind:function(e){return n(function(t){o(function(n){e(n).get(t)})})},anonBind:function(e){return n(function(t){o(function(n){e.get(t)})})},toLazy:function(){return e.nu(o)},get:o}};return{nu:n,pure:function(e){return n(function(t){t(e)})}}}),n("ephox.katamari.async.AsyncValues",["ephox.katamari.api.Arr"],function(e){return{par:function(t,n){return n(function(n){var r=[],o=0;0===t.length?n([]):e.each(t,function(e,i){var a;e.get((a=i,function(e){r[a]=e,++o>=t.length&&n(r)}))})})}}}),n("ephox.katamari.api.Futures",["ephox.katamari.api.Arr","ephox.katamari.api.Future","ephox.katamari.async.AsyncValues"],function(e,t,n){var r=function(e){return n.par(e,t.nu)};return{par:r,mapM:function(t,n){var o=e.map(t,n);return r(o)},compose:function(e,t){return function(n){return t(n).bind(e)}}}}),n("ephox.katamari.api.Result",["ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(e,t){var n=function(r){return{is:function(e){return r===e},isValue:e.constant(!0),isError:e.constant(!1),getOr:e.constant(r),getOrThunk:e.constant(r),getOrDie:e.constant(r),or:function(e){return n(r)},orThunk:function(e){return n(r)},fold:function(e,t){return t(r)},map:function(e){return n(e(r))},each:function(e){e(r)},bind:function(e){return e(r)},exists:function(e){return e(r)},forall:function(e){return e(r)},toOption:function(){return t.some(r)}}},r=function(n){return{is:e.constant(!1),isValue:e.constant(!1),isError:e.constant(!0),getOr:e.identity,getOrThunk:function(e){return e()},getOrDie:function(){return e.die(n)()},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return r(n)},each:e.noop,bind:function(e){return r(n)},exists:e.constant(!1),forall:e.constant(!0),toOption:t.none}};return{value:n,error:r}}),n("tinymce.core.dom.StyleSheetLoader",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Future","ephox.katamari.api.Futures","ephox.katamari.api.Result","global!navigator","tinymce.core.util.Delay","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,s){"use strict";return function(c,u){var l,d=0,f={};l=(u=u||{}).maxLoadTime||5e3;var m=function(e){c.getElementsByTagName("head")[0].appendChild(e)},p=function(e,t,n){var r,o,u,p,h=function(){for(var e=p.passed,t=e.length;t--;)e[t]();p.status=2,p.passed=[],p.failed=[]},g=function(){for(var e=p.failed,t=e.length;t--;)e[t]();p.status=3,p.passed=[],p.failed=[]},v=function(e,t){e()||((new Date).getTime()-u<l?a.setTimeout(t):g())},y=function(){v(function(){for(var e,t,n=c.styleSheets,o=n.length;o--;)if((t=(e=n[o]).ownerNode?e.ownerNode:e.owningElement)&&t.id===r.id)return h(),!0},y)},b=function(){v(function(){try{var e=o.sheet.cssRules;return h(),!!e}catch(e){}},b)};if(e=s._addCacheSuffix(e),f[e]?p=f[e]:f[e]=p={passed:[],failed:[]},t&&p.passed.push(t),n&&p.failed.push(n),1!=p.status)if(2!=p.status)if(3!=p.status){if(p.status=1,(r=c.createElement("link")).rel="stylesheet",r.type="text/css",r.id="u"+d++,r.async=!1,r.defer=!1,u=(new Date).getTime(),"onload"in r&&!((x=i.userAgent.match(/WebKit\/(\d*)/))&&x[1]<536))r.onload=y,r.onerror=g;else{if(i.userAgent.indexOf("Firefox")>0)return(o=c.createElement("style")).textContent='@import "'+e+'"',b(),void m(o);y()}var x;m(r),r.href=e}else g();else h()},h=function(e){return n.nu(function(n){p(e,t.compose(n,t.constant(o.value(e))),t.compose(n,t.constant(o.error(e))))})},g=function(e){return e.fold(t.identity,t.identity)};return{load:p,loadAll:function(t,n,o){r.par(e.map(t,h)).get(function(t){var r=e.partition(t,function(e){return e.isValue()});r.fail.length>0?o(r.fail.map(g)):n(r.pass.map(g))})}}}}),n("tinymce.core.dom.TreeWalker",[],function(){return function(e,t){var n=e,r=function(e,n,r,o){var i,a;if(e){if(!o&&e[n])return e[n];if(e!=t){if(i=e[r])return i;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(i=a[r])return i}}};this.current=function(){return n},this.next=function(e){return n=r(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=r(n,"lastChild","previousSibling",e)},this.prev2=function(e){return n=function(e,n,r,o){var i,a,s;if(e){if(i=e.previousSibling,t&&i===t)return;if(i){if(!o)for(s=i[n];s;s=s[n])if(!s[n])return s;return i}if((a=e.parentNode)&&a!==t)return a}}(n,"lastChild",0,e)}}}),n("tinymce.core.dom.ElementType",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.node.Node"],function(e,t,n){var r=function(r){var o;return function(i){return(o=o||e.mapToObject(r,t.constant(!0))).hasOwnProperty(n.name(i))}},o=r(["h1","h2","h3","h4","h5","h6"]),i=r(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]);return{isBlock:i,isInline:function(e){return n.isElement(e)&&!i(e)},isHeading:o,isTextBlock:r(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),isList:r(["ul","ol","dl"]),isListItem:r(["li","dd","dt"]),isVoid:r(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"]),isTableSection:r(["thead","tbody","tfoot"]),isTableCell:r(["td","th"]),isBr:function(e){return n.isElement(e)&&"br"===n.name(e)}}}),n("tinymce.core.dom.NodeType",[],function(){var e=function(e){return function(t){return!!t&&t.nodeType==e}},t=e(1),n=function(e){return e=e.toLowerCase().split(" "),function(t){var n,r;if(t&&t.nodeType)for(r=t.nodeName.toLowerCase(),n=0;n<e.length;n++)if(r===e[n])return!0;return!1}},r=function(e){return function(n){if(t(n)){if(n.contentEditable===e)return!0;if(n.getAttribute("data-mce-contenteditable")===e)return!0}return!1}};return{isText:e(3),isElement:t,isComment:e(8),isDocument:e(9),isBr:n("br"),isContentEditableTrue:r("true"),isContentEditableFalse:r("false"),matchNodeNames:n,hasPropValue:function(e,n){return function(r){return t(r)&&r[e]===n}},hasAttribute:function(e,n){return function(n){return t(n)&&n.hasAttribute(e)}},hasAttributeValue:function(e,n){return function(r){return t(r)&&r.getAttribute(e)===n}},matchStyleValues:function(e,n){return n=n.toLowerCase().split(" "),function(r){var o;if(t(r))for(o=0;o<n.length;o++)if(r.ownerDocument.defaultView.getComputedStyle(r,null).getPropertyValue(e)===n[o])return!0;return!1}},isBogus:function(e){return t(e)&&e.hasAttribute("data-mce-bogus")}}}),n("tinymce.core.dom.TrimNode",["ephox.sugar.api.node.Element","tinymce.core.dom.ElementType","tinymce.core.dom.NodeType","tinymce.core.util.Tools"],function(e,t,n,r){var o=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},i=function(a,s){var c,u=s.childNodes;if(!n.isElement(s)||!o(s)){for(c=u.length-1;c>=0;c--)i(a,u[c]);if(!1===n.isDocument(s)){if(n.isText(s)&&s.nodeValue.length>0){var l=r.trim(s.nodeValue).length;if(a.isBlock(s.parentNode)||l>0)return;if(0===l&&(d=s).previousSibling&&"SPAN"===d.previousSibling.nodeName&&d.nextSibling&&"SPAN"===d.nextSibling.nodeName)return}else if(n.isElement(s)&&(1===(u=s.childNodes).length&&o(u[0])&&s.parentNode.insertBefore(u[0],s),u.length||t.isVoid(e.fromDom(s))))return;a.remove(s)}var d;return s}};return{trimNode:i}}),n("tinymce.core.html.Entities",["ephox.sugar.api.node.Element","tinymce.core.util.Tools"],function(e,t){var n,r,o,i=t.makeMap,a=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&\"\']/g,u=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,l={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};r={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var d=function(e,t){var n,o,i,a={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)o=String.fromCharCode(parseInt(e[n],t)),r[o]||(a[o]=i="&"+e[n+1]+";",a[i]=o);return a}};n=d("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var f={encodeRaw:function(e,t){return e.replace(t?a:s,function(e){return r[e]||e})},encodeAllRaw:function(e){return(""+e).replace(c,function(e){return r[e]||e})},encodeNumeric:function(e,t){return e.replace(t?a:s,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":r[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,o){return o=o||n,e.replace(t?a:s,function(e){return r[e]||o[e]||e})},getEncodeFunc:function(e,t){return t=d(t)||n,(e=i(e.replace(/\+/g,","))).named&&e.numeric?function(e,n){return e.replace(n?a:s,function(e){return void 0!==r[e]?r[e]:void 0!==t[e]?t[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})}:e.named?t?function(e,n){return f.encodeNamed(e,n,t)}:f.encodeNamed:e.numeric?f.encodeNumeric:f.encodeRaw},decode:function(t){return t.replace(u,function(t,r){return r?(r="x"===r.charAt(0).toLowerCase()?parseInt(r.substr(1),16):parseInt(r,10))>65535?(r-=65536,String.fromCharCode(55296+(r>>10),56320+(1023&r))):l[r]||String.fromCharCode(r):o[t]||n[t]||(i=t,(a=e.fromTag("div").dom()).innerHTML=i,a.textContent||a.innerText||i);var i,a})}};return f}),n("tinymce.core.html.Schema",["tinymce.core.util.Tools"],function(e){var t={},n={},r=e.makeMap,o=e.each,i=e.extend,a=e.explode,s=e.inArray,c=function(t,n){return(t=e.trim(t))?t.split(n||" "):[]},u=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),o(e,function(e,o){n[o]=n[o.toUpperCase()]="map"==t?r(e,/[, ]/):a(e,/[, ]/)})),n};return function(e){var l,d,f,m,p,h,g,v,y,b,x,C,w,k,S,T,E,R,N,A,D,P,B,_=this,O={},F={},M=[],I={},L={},H=function(n,o,a){var s=e[n];return s?s=r(s,/[, ]/,r(s.toUpperCase(),/[, ]/)):(s=t[n])||(s=r(o," ",r(o.toUpperCase()," ")),s=i(s,a),t[n]=s),s};D={},P=function(e,t,r){var o,i,a,s=function(e,t){var n,r,o={};for(n=0,r=e.length;n<r;n++)o[e[n]]=t||{};return o};for(r=r||[],t=t||"","string"==typeof r&&(r=c(r)),o=(e=c(e)).length;o--;)a={attributes:s(i=c([S,t].join(" "))),attributesOrder:i,children:s(r,n)},D[e[o]]=a},B=function(e,t){var n,r,o,i;for(n=(e=c(e)).length,t=c(t);n--;)for(r=D[e[n]],o=0,i=t.length;o<i;o++)r.attributes[t[o]]={},r.attributesOrder.push(t[o])},f=t[k=(e=e||{}).schema]?t[k]:(S="id accesskey class dir lang style tabindex title role",T="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",E="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!=k&&(S+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",T+=" article aside details dialog figure header footer hgroup section nav",E+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!=k&&(S+=" xml:lang",E=[E,A="acronym applet basefont big font strike tt"].join(" "),o(c(A),function(e){P(e,"",E)}),T=[T,N="center dir isindex noframes"].join(" "),R=[T,E].join(" "),o(c(N),function(e){P(e,"",R)})),R=R||[T,E].join(" "),P("html","manifest","head body"),P("head","","base command link meta noscript script style title"),P("title hr noscript br"),P("base","href target"),P("link","href rel media hreflang type sizes hreflang"),P("meta","name http-equiv content charset"),P("style","media type scoped"),P("script","src async defer type charset"),P("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",R),P("address dt dd div caption","",R),P("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",E),P("blockquote","cite",R),P("ol","reversed start type","li"),P("ul","","li"),P("li","value",R),P("dl","","dt dd"),P("a","href target rel media hreflang type",E),P("q","cite",E),P("ins del","cite datetime",R),P("img","src sizes srcset alt usemap ismap width height"),P("iframe","src name width height",R),P("embed","src type width height"),P("object","data type typemustmatch name usemap form width height",[R,"param"].join(" ")),P("param","name value"),P("map","name",[R,"area"].join(" ")),P("area","alt coords shape href target rel media hreflang type"),P("table","border","caption colgroup thead tfoot tbody tr"+("html4"==k?" col":"")),P("colgroup","span","col"),P("col","span"),P("tbody thead tfoot","","tr"),P("tr","","td th"),P("td","colspan rowspan headers",R),P("th","colspan rowspan headers scope abbr",R),P("form","accept-charset action autocomplete enctype method name novalidate target",R),P("fieldset","disabled form name",[R,"legend"].join(" ")),P("label","form for",E),P("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),P("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==k?R:E),P("select","disabled form multiple name required size","option optgroup"),P("optgroup","disabled label","option"),P("option","disabled label selected value"),P("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),P("menu","type label",[R,"li"].join(" ")),P("noscript","",R),"html4"!=k&&(P("wbr"),P("ruby","",[E,"rt rp"].join(" ")),P("figcaption","",R),P("mark rt rp summary bdi","",E),P("canvas","width height",R),P("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[R,"track source"].join(" ")),P("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[R,"track source"].join(" ")),P("picture","","img source"),P("source","src srcset type media sizes"),P("track","kind src srclang label default"),P("datalist","",[E,"option"].join(" ")),P("article section nav aside header footer","",R),P("hgroup","","h1 h2 h3 h4 h5 h6"),P("figure","",[R,"figcaption"].join(" ")),P("time","datetime",E),P("dialog","open",R),P("command","type label icon disabled checked radiogroup command"),P("output","for form name",E),P("progress","value max",E),P("meter","value min max low high optimum",E),P("details","open",[R,"summary"].join(" ")),P("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=k&&(B("script","language xml:space"),B("style","xml:space"),B("object","declare classid code codebase codetype archive standby align border hspace vspace"),B("embed","align name hspace vspace"),B("param","valuetype type"),B("a","charset name rev shape coords"),B("br","clear"),B("applet","codebase archive code object alt name width height align hspace vspace"),B("img","name longdesc align border hspace vspace"),B("iframe","longdesc frameborder marginwidth marginheight scrolling align"),B("font basefont","size color face"),B("input","usemap align"),B("select","onchange"),B("textarea"),B("h1 h2 h3 h4 h5 h6 div p legend caption","align"),B("ul","type compact"),B("li","type"),B("ol dl menu dir","compact"),B("pre","width xml:space"),B("hr","align noshade size width"),B("isindex","prompt"),B("table","summary width frame rules cellspacing cellpadding align bgcolor"),B("col","width align char charoff valign"),B("colgroup","width align char charoff valign"),B("thead","align char charoff valign"),B("tr","align char charoff valign bgcolor"),B("th","axis align char charoff valign nowrap bgcolor width height"),B("form","accept"),B("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),B("tfoot","align char charoff valign"),B("tbody","align char charoff valign"),B("area","nohref"),B("body","background bgcolor text link vlink alink")),"html4"!=k&&(B("input button select textarea","autofocus"),B("input textarea","placeholder"),B("a","download"),B("link script img","crossorigin"),B("iframe","sandbox seamless allowfullscreen")),o(c("a form meter progress dfn"),function(e){D[e]&&delete D[e].children[e]}),delete D.caption.children.table,delete D.script,t[k]=D,D),!1===e.verify_html&&(e.valid_elements="*[*]"),l=u(e.valid_styles),d=u(e.invalid_styles,"map"),v=u(e.valid_classes,"map"),m=H("whitespace_elements","pre script noscript style textarea video audio iframe object code"),p=H("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=H("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),g=H("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),b=H("non_empty_elements","td th iframe video audio object script pre code",h),x=H("move_caret_before_on_enter_elements","table",b),C=H("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),y=H("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",C),w=H("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),o((e.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){L[e]=new RegExp("</"+e+"[^>]*>","gi")});var W=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},U=function(e){var t,n,o,i,a,u,l,d,f,m,p,h,g,v,y,b,x,C,w,k=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,S=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,T=/[*?+]/;if(e)for(e=c(e,","),O["@"]&&(b=O["@"].attributes,x=O["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(a=k.exec(e[t])){if(f=a[2],y=a[3],d=a[5],u={attributes:h={},attributesOrder:g=[]},"#"===(v=a[1])&&(u.paddEmpty=!0),"-"===v&&(u.removeEmpty=!0),"!"===a[4]&&(u.removeEmptyAttrs=!0),b){for(C in b)h[C]=b[C];g.push.apply(g,x)}if(d)for(o=0,i=(d=c(d,"|")).length;o<i;o++)if(a=S.exec(d[o])){if(l={},p=a[1],m=a[2].replace(/[\\:]:/g,":"),v=a[3],w=a[4],"!"===p&&(u.attributesRequired=u.attributesRequired||[],u.attributesRequired.push(m),l.required=!0),"-"===p){delete h[m],g.splice(s(g,m),1);continue}v&&("="===v&&(u.attributesDefault=u.attributesDefault||[],u.attributesDefault.push({name:m,value:w}),l.defaultValue=w),":"===v&&(u.attributesForced=u.attributesForced||[],u.attributesForced.push({name:m,value:w}),l.forcedValue=w),"<"===v&&(l.validValues=r(w,"?"))),T.test(m)?(u.attributePatterns=u.attributePatterns||[],l.pattern=W(m),u.attributePatterns.push(l)):(h[m]||g.push(m),h[m]=l)}b||"@"!=f||(b=h,x=g),y&&(u.outputName=f,O[y]=u),T.test(f)?(u.pattern=W(f),M.push(u)):O[f]=u}},z=function(e){O={},M=[],U(e),o(f,function(e,t){F[t]=e.children})},q=function(e){var n=/^(~)?(.+)$/;e&&(t.text_block_elements=t.block_elements=null,o(c(e,","),function(e){var t=n.exec(e),r="~"===t[1],a=r?"span":"div",s=t[2];if(F[s]=F[a],I[s]=a,r||(y[s.toUpperCase()]={},y[s]={}),!O[s]){var c=O[a];delete(c=i({},c)).removeEmptyAttrs,delete c.removeEmpty,O[s]=c}o(F,function(e,t){e[a]&&(F[t]=e=i({},F[t]),e[s]=e[a])})}))},V=function(n){var r=/^([+\-]?)(\w+)\[([^\]]+)\]$/;t[e.schema]=null,n&&o(c(n,","),function(e){var t,n,i=r.exec(e);i&&(t=(n=i[1])?F[i[2]]:F[i[2]]={"#comment":{}},t=F[i[2]],o(c(i[3],"|"),function(e){"-"===n?delete t[e]:t[e]={}}))})},j=function(e){var t,n=O[e];if(n)return n;for(t=M.length;t--;)if((n=M[t]).pattern.test(e))return n};e.valid_elements?z(e.valid_elements):(o(f,function(e,t){O[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},F[t]=e.children}),"html5"!=e.schema&&o(c("strong/b em/i"),function(e){e=c(e,"/"),O[e[1]].outputName=e[0]}),o(c("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){O[e]&&(O[e].removeEmpty=!0)}),o(c("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){O[e].paddEmpty=!0}),o(c("span"),function(e){O[e].removeEmptyAttrs=!0})),q(e.custom_elements),V(e.valid_children),U(e.extended_valid_elements),V("+ol[ul|ol],+ul[ul|ol]"),o({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){O[t]&&(O[t].parentsRequired=c(e))}),e.invalid_elements&&o(a(e.invalid_elements),function(e){O[e]&&delete O[e]}),j("span")||U("span[!data-mce-type|*]"),_.children=F,_.getValidStyles=function(){return l},_.getInvalidStyles=function(){return d},_.getValidClasses=function(){return v},_.getBoolAttrs=function(){return g},_.getBlockElements=function(){return y},_.getTextBlockElements=function(){return C},_.getTextInlineElements=function(){return w},_.getShortEndedElements=function(){return h},_.getSelfClosingElements=function(){return p},_.getNonEmptyElements=function(){return b},_.getMoveCaretBeforeOnEnterElements=function(){return x},_.getWhiteSpaceElements=function(){return m},_.getSpecialElements=function(){return L},_.isValidChild=function(e,t){var n=F[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},_.isValid=function(e,t){var n,r,o=j(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},_.getElementRule=j,_.getCustomElements=function(){return I},_.addValidElements=U,_.setValidElements=z,_.addCustomElements=q,_.addValidChildren=V,_.elements=O}}),n("tinymce.core.html.Styles",[],function(){return function(e,t){var n,r,o,i,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,c=/\s*([^:]+):\s*([^;]+);?/g,u=/\s+$/,l={},d="\ufeff";for(e=e||{},t&&(o=t.getValidStyles(),i=t.getInvalidStyles()),r=("\\\" \\' \\; \\: ; : "+d).split(" "),n=0;n<r.length;n++)l[r[n]]=d+n,l[d+n]=r[n];var f=function(e,t,n,r){var o=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+o(t)+o(n)+o(r)};return{toHex:function(e){return e.replace(a,f)},parse:function(t){var r,o,i,m,p,h,g,v,y={},b=e.url_converter,x=e.url_converter_scope||this,C=function(e,t,r){var o,i,a,s;if((o=y[e+"-top"+t])&&(i=y[e+"-right"+t])&&(a=y[e+"-bottom"+t])&&(s=y[e+"-left"+t])){var c=[o,i,a,s];for(n=c.length-1;n--&&c[n]===c[n+1];);n>-1&&r||(y[e+t]=-1==n?c[0]:c.join(" "),delete y[e+"-top"+t],delete y[e+"-right"+t],delete y[e+"-bottom"+t],delete y[e+"-left"+t])}},w=function(e){var t,n=y[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return y[e]=n[0],!0}},k=function(e){return m=!0,l[e]},S=function(e,t){return m&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return l[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},T=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},E=function(e){return e.replace(/\\[0-9a-f]+/gi,T)},R=function(t,n,r,o,i,a){if(i=i||a)return"'"+(i=S(i)).replace(/\'/g,"\\'")+"'";if(n=S(n||r||o),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return b&&(n=b.call(x,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,k).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,k)});r=c.exec(t);)if(c.lastIndex=r.index+r[0].length,o=r[1].replace(u,"").toLowerCase(),i=r[2].replace(u,""),o&&i){if(o=E(o),i=E(i),-1!==o.indexOf(d)||-1!==o.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"==o||/expression\s*\(|\/\*|\*\//.test(i)))continue;"font-weight"===o&&"700"===i?i="bold":"color"!==o&&"background-color"!==o||(i=i.toLowerCase()),i=(i=i.replace(a,f)).replace(s,R),y[o]=m?S(i,!0):i}C("border","",!0),C("border","-width"),C("border","-color"),C("border","-style"),C("padding",""),C("margin",""),p="border",g="border-style",v="border-color",w(h="border-width")&&w(g)&&w(v)&&(y[p]=y[h]+" "+y[g]+" "+y[v],delete y[h],delete y[g],delete y[v]),"medium none"===y.border&&delete y.border,"none"===y["border-image"]&&delete y["border-image"]}return y},serialize:function(e,t){var n,r,a,s,c="",u=function(t){var n,r,i,a;if(n=o[t])for(r=0,i=n.length;r<i;r++)(a=e[t=n[r]])&&(c+=(c.length>0?" ":"")+t+": "+a+";")};if(t&&o)u("*"),u(t);else for(n in e)!(r=e[n])||i&&(a=n,s=void 0,(s=i["*"])&&s[a]||(s=i[t])&&s[a])||(c+=(c.length>0?" ":"")+n+": "+r+";");return c}}}}),n("tinymce.core.dom.DOMUtils",["global!document","global!window","tinymce.core.Env","tinymce.core.dom.DomQuery","tinymce.core.dom.EventUtils","tinymce.core.dom.Position","tinymce.core.dom.Sizzle","tinymce.core.dom.StyleSheetLoader","tinymce.core.dom.TreeWalker","tinymce.core.dom.TrimNode","tinymce.core.html.Entities","tinymce.core.html.Schema","tinymce.core.html.Styles","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m){var p=m.each,h=m.is,g=m.grep,v=n.ie,y=/^([a-z0-9],?)+$/i,b=/^[ \t\r\n]*$/,x=function(e,t){var n=t.attr("style");(n=e.serializeStyle(e.parseStyle(n),t[0].nodeName))||(n=null),t.attr("data-mce-style",n)},C=function(e,t){var n,r,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!=r||r!=n&&e.nodeValue.length)&&(o++,n=r);return o},w=function(e,n){var i,a,c,u,l,m=this;m.doc=e,m.win=t,m.files={},m.counter=0,m.stdMode=!v||e.documentMode>=8,m.boxModel=!v||"CSS1Compat"==e.compatMode||m.stdMode,m.styleSheetLoader=new s(e),m.boundEvents=[],m.settings=n=n||{},m.schema=n.schema?n.schema:new d({}),m.styles=new f({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),m.fixDoc(e),m.events=n.ownEvents?new o(n.proxy):o.Event,m.attrHooks=(a=m,u={},u={style:{set:function(e,t){null===t||"object"!=typeof t?(l&&e.attr("data-mce-style",t),e.attr("style",t)):e.css(t)},get:function(e){var t=e.attr("data-mce-style")||e.attr("style");return a.serializeStyle(a.parseStyle(t),e[0].nodeName)}}},(l=(c=n).keep_values)&&(u.href=u.src={set:function(e,t,n){c.url_converter&&(t=c.url_converter.call(c.url_converter_scope||a,t,n,e[0])),e.attr("data-mce-"+n,t).attr(n,t)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}}),u),i=m.schema.getBlockElements(),m.$=r.overrideDefaults(function(){return{context:e,element:m.getRoot()}}),m.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!i[e.nodeName]):!!i[e]}};return w.prototype={$$:function(e){return"string"==typeof e&&(e=this.get(e)),this.$(e)},root:null,fixDoc:function(e){var t,n=this.settings;if(v&&n.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(t in n.schema.getCustomElements())e.createElement(t)}},clone:function(e,t){var n,r=this;return!v||1!==e.nodeType||t?e.cloneNode(t):t?n.firstChild:(n=r.doc.createElement(e.nodeName),p(r.getAttribs(e),function(t){r.setAttrib(n,t.nodeName,r.getAttrib(e,t.nodeName))}),n)},getRoot:function(){return this.settings.root_element||this.doc.body},getViewPort:function(e){var t,n;return t=(e=e||this.win).document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n;return e=this.get(e),t=this.getPos(e),n=this.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n;return e=this.get(e),t=this.getStyle(e,"width"),n=this.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,n,r){var o,i=this,a=[];for(e=i.get(e),r=void 0===r,n=n||("BODY"!=i.getRoot().nodeName?i.getRoot().parentNode:null),h(t,"string")&&(o=t,t="*"===t?function(e){return 1==e.nodeType}:function(e){return i.is(e,o)});e&&e!=n&&e.nodeType&&9!==e.nodeType;){if(!t||t(e)){if(!r)return e;a.push(e)}e=e.parentNode}return r?a:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,(e=this.doc.getElementById(e))&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(e,t){return a(e,this.get(t)||this.settings.root_element||this.doc,[])},is:function(e,t){var n;if(!e)return!1;if(void 0===e.length){if("*"===t)return 1==e.nodeType;if(y.test(t)){for(t=t.toLowerCase().split(/,/),e=e.nodeName.toLowerCase(),n=t.length-1;n>=0;n--)if(t[n]==e)return!0;return!1}}if(e.nodeType&&1!=e.nodeType)return!1;var r=e.nodeType?[e]:e;return a(t,r[0].ownerDocument||r[0],null,r).length>0},add:function(e,t,n,r,o){var i=this;return this.run(e,function(e){var a;return a=h(t,"string")?i.doc.createElement(t):t,i.setAttribs(a,n),r&&(r.nodeType?a.appendChild(r):i.setHTML(a,r)),o?a:e.appendChild(a)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r,o="";o+="<"+e;for(r in t)t.hasOwnProperty(r)&&null!==t[r]&&"undefined"!=typeof t[r]&&(o+=" "+r+'="'+this.encode(t[r])+'"');return"undefined"!=typeof n?o+">"+n+"</"+e+">":o+" />"},createFragment:function(e){var t,n,r,o=this.doc;for(r=o.createElement("div"),t=o.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t},remove:function(e,t){return e=this.$$(e),t?e.each(function(){for(var e;e=this.firstChild;)3==e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():e.remove(),e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n),this.settings.update_styles&&x(this,e)},getStyle:function(e,t,r){return e=this.$$(e),r?e.css(t):("float"==(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=n.ie&&n.ie<12?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[t]:void 0)},setStyles:function(e,t){e=this.$$(e).css(t),this.settings.update_styles&&x(this,e)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var r,o,i=this.settings;""===n&&(n=null),r=(e=this.$$(e)).attr(t),e.length&&((o=this.attrHooks[t])&&o.set?o.set(e,n,t):e.attr(t,n),r!=n&&i.onSetAttrib&&i.onSetAttrib({attrElm:e,attrName:t,attrValue:n}))},setAttribs:function(e,t){var n=this;n.$$(e).each(function(e,r){p(t,function(e,t){n.setAttrib(r,t,e)})})},getAttrib:function(e,t,n){var r,o;return(e=this.$$(e)).length&&(o=(r=this.attrHooks[t])&&r.get?r.get(e,t):e.attr(t)),"undefined"==typeof o&&(o=n||""),o},getPos:function(e,t){return i.getPos(this.doc.body,this.get(e),t)},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(t){var n,r,o=this.doc;if(this!==w.DOM&&o===e){var i=w.DOM.addedStyles;if((i=i||[])[t])return;i[t]=!0,w.DOM.addedStyles=i}(r=o.getElementById("mceDefaultStyles"))||((r=o.createElement("style")).id="mceDefaultStyles",r.type="text/css",(n=o.getElementsByTagName("head")[0]).firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)),r.styleSheet?r.styleSheet.cssText+=t:r.appendChild(o.createTextNode(t))},loadCSS:function(t){var n,r=this,o=r.doc;r===w.DOM||o!==e?(t||(t=""),n=o.getElementsByTagName("head")[0],p(t.split(","),function(e){var t;e=m._addCacheSuffix(e),r.files[e]||(r.files[e]=!0,t=r.create("link",{rel:"stylesheet",href:e}),v&&o.documentMode&&o.recalc&&(t.onload=function(){o.recalc&&o.recalc(),t.onload=null}),n.appendChild(t))})):w.DOM.loadCSS(t)},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,!1)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,t,n){this.$$(e).toggleClass(t,n).each(function(){""===this.className&&r(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"==this.$$(e).css("display")},uniqueId:function(e){return(e||"mce_")+this.counter++},setHTML:function(e,t){e=this.$$(e),v?e.each(function(e,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+t,n.removeChild(n.firstChild)}catch(e){r("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}}):e.html(t)},getOuterHTML:function(e){return 1==(e=this.get(e)).nodeType&&"outerHTML"in e?e.outerHTML:r("<div></div>").append(r(e).clone()).html()},setOuterHTML:function(e,t){var n=this;n.$$(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}n.remove(r(this).html(t),!0)})},decode:l.decode,encode:l.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,r;return n=t.parentNode,(r=t.nextSibling)?n.insertBefore(e,r):n.appendChild(e),e})},replace:function(e,t,n){return this.run(t,function(t){return h(t,"array")&&(e=e.cloneNode(!0)),n&&p(g(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n,r=this;return e.nodeName!=t.toUpperCase()&&(n=r.create(t),p(r.getAttribs(e),function(t){r.setAttrib(n,t.nodeName,r.getAttrib(e,t.nodeName))}),r.replace(n,e,1)),n||e},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!=n;)n=n.parentNode;if(r==n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return this.styles.toHex(m.trim(e))},run:function(e,t,n){var r,o=this;return"string"==typeof e&&(e=o.get(e)),!!e&&(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(r=[],p(e,function(e,i){e&&("string"==typeof e&&(e=o.get(e)),r.push(t.call(n,e,i)))}),r))},getAttribs:function(e){var t;return(e=this.get(e))?v?(t=[],"OBJECT"==e.nodeName?e.attributes:("OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"}),e.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t)):e.attributes:[]},isEmpty:function(e,t){var n,r,o,i,a,s,u=this,l=0;if(e=e.firstChild){a=new c(e,e.parentNode),t=t||(u.schema?u.schema.getNonEmptyElements():null),i=u.schema?u.schema.getWhiteSpaceElements():{};do{if(1===(o=e.nodeType)){var d=e.getAttribute("data-mce-bogus");if(d){e=a.next("all"===d);continue}if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){l++,e=a.next();continue}return!1}for(n=(r=u.getAttribs(e)).length;n--;)if("name"===(s=r[n].nodeName)||"data-mce-bookmark"===s)return!1}if(8==o)return!1;if(3===o&&!b.test(e.nodeValue))return!1;if(3===o&&e.parentNode&&i[e.parentNode.nodeName]&&b.test(e.nodeValue))return!1;e=a.next()}while(e)}return l<=1},createRng:function(){return this.doc.createRange()},nodeIndex:C,split:function(e,t,n){var r,o,i,a=this,s=a.createRng();if(e&&t)return s.setStart(e.parentNode,a.nodeIndex(e)),s.setEnd(t.parentNode,a.nodeIndex(t)),r=s.extractContents(),(s=a.createRng()).setStart(t.parentNode,a.nodeIndex(t)+1),s.setEnd(e.parentNode,a.nodeIndex(e)+1),o=s.extractContents(),(i=e.parentNode).insertBefore(u.trimNode(a,r),e),i.insertBefore(n||t,e),i.insertBefore(u.trimNode(a,o),e),a.remove(e),n||t},bind:function(e,t,n,r){var o=this;if(m.isArray(e)){for(var i=e.length;i--;)e[i]=o.bind(e[i],t,n,r);return e}return!o.settings.collect||e!==o.doc&&e!==o.win||o.boundEvents.push([e,t,n,r]),o.events.bind(e,t,n,r||o)},unbind:function(e,t,n){var r,o=this;if(m.isArray(e)){for(r=e.length;r--;)e[r]=o.unbind(e[r],t,n);return e}if(o.boundEvents&&(e===o.doc||e===o.win))for(r=o.boundEvents.length;r--;){var i=o.boundEvents[r];e!=i[0]||t&&t!=i[1]||n&&n!=i[2]||this.events.unbind(i[0],i[1],i[2])}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return e&&1==e.nodeType?(t=e.getAttribute("data-mce-contenteditable"))&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null:null},getContentEditableParent:function(e){for(var t=this.getRoot(),n=null;e&&e!==t&&null===(n=this.getContentEditable(e));e=e.parentNode);return n},destroy:function(){var e=this;if(e.boundEvents){for(var t=e.boundEvents.length;t--;){var n=e.boundEvents[t];this.events.unbind(n[0],n[1],n[2])}e.boundEvents=null}a.setDocument&&a.setDocument(),e.win=e.doc=e.root=e.events=e.frag=null},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var r=this,o=t;if(e)for("string"==typeof o&&(o=function(e){return r.is(e,t)}),e=e[n];e;e=e[n])if(o(e))return e;return null}},w.DOM=new w(e),w.nodeIndex=C,w}),n("tinymce.core.dom.ScriptLoader",["global!document","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(e,t,n){var r=t.DOM,o=n.each,i=n.grep,a=function(e){return"function"==typeof e},s=function(){var t={},s=[],c={},u=[],l=0;this.isDone=function(e){return 2==t[e]},this.markDone=function(e){t[e]=2},this.add=this.load=function(e,n,r,o){void 0==t[e]&&(s.push(e),t[e]=0),n&&(c[e]||(c[e]=[]),c[e].push({success:n,failure:o,scope:r||this}))},this.remove=function(e){delete t[e],delete c[e]},this.loadQueue=function(e,t,n){this.loadScripts(s,e,t,n)},this.loadScripts=function(s,d,f,m){var p,h=[],g=function(e,t){o(c[t],function(t){a(t[e])&&t[e].call(t.scope)}),c[t]=void 0};u.push({success:d,failure:m,scope:f||this}),(p=function(){var c=i(s);if(s.length=0,o(c,function(o){var i,s,c,u,d,f,m;2!==t[o]?3!==t[o]?1!==t[o]&&(t[o]=1,l++,i=o,s=function(){t[o]=2,l--,g("success",o),p()},c=function(){t[o]=3,l--,h.push(o),g("failure",o),p()},m=function(){f.remove(d),u&&(u.onreadystatechange=u.onload=u=null),s()},d=(f=r).uniqueId(),(u=e.createElement("script")).id=d,u.type="text/javascript",u.src=n._addCacheSuffix(i),"onreadystatechange"in u?u.onreadystatechange=function(){/loaded|complete/.test(u.readyState)&&m()}:u.onload=m,u.onerror=function(){a(c)?c():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+i)},(e.getElementsByTagName("head")[0]||e.body).appendChild(u)):g("failure",o):g("success",o)}),!l){var d=u.slice(0);u.length=0,o(d,function(e){0===h.length?a(e.success)&&e.success.call(e.scope):a(e.failure)&&e.failure.call(e.scope,h)})}})()}};return s.ScriptLoader=new s,s}),n("tinymce.core.AddOnManager",["ephox.katamari.api.Arr","tinymce.core.dom.ScriptLoader","tinymce.core.util.Tools"],function(e,t,n){var r=n.each,o=function(){this.items=[],this.urls={},this.lookup={},this._listeners=[]};return o.prototype={get:function(e){if(this.lookup[e])return this.lookup[e].instance},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(e,n){var r=o.language;if(r&&!1!==o.languageLoad){if(n)if(-1!=(n=","+n+",").indexOf(","+r.substr(0,2)+","))r=r.substr(0,2);else if(-1==n.indexOf(","+r+","))return;t.ScriptLoader.add(this.urls[e]+"/langs/"+r+".js")}},add:function(t,n,o){this.items.push(n),this.lookup[t]={instance:n,dependencies:o};var i=e.partition(this._listeners,function(e){return e.name===t});return this._listeners=i.fail,r(i.pass,function(e){e.callback()}),n},remove:function(e){delete this.urls[e],delete this.lookup[e]},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(e,n){var o=this.urls[e];r(n,function(e){t.ScriptLoader.add(o+"/"+e)})},load:function(e,n,i,a,s){var c=this,u=n,l=function(){var o=c.dependencies(e);r(o,function(e){var t=c.createUrl(n,e);c.load(t.resource,t,void 0,void 0)}),i&&i.call(a||t)};c.urls[e]||("object"==typeof n&&(u=n.prefix+n.resource+n.suffix),0!==u.indexOf("/")&&-1==u.indexOf("://")&&(u=o.baseURL+"/"+u),c.urls[e]=u.substring(0,u.lastIndexOf("/")),c.lookup[e]?l():t.ScriptLoader.add(u,l,a,s))},waitFor:function(e,t){this.lookup.hasOwnProperty(e)?t():this._listeners.push({name:e,callback:t})}},o.PluginManager=new o,o.ThemeManager=new o,o}),n("tinymce.core.text.Zwsp",[],function(){var e="\ufeff";return{isZwsp:function(t){return t===e},ZWSP:e,trim:function(t){return t.replace(new RegExp(e,"g"),"")}}}),n("tinymce.core.caret.CaretContainer",["global!document","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(e,t,n){var r=t.isElement,o=t.isText,i=function(e){return o(e)&&(e=e.parentNode),r(e)&&e.hasAttribute("data-mce-caret")},a=function(e){return o(e)&&n.isZwsp(e.data)},s=function(e){return i(e)||a(e)},c=function(e){return o(e)&&e.data[0]==n.ZWSP},u=function(e){return o(e)&&e.data[e.data.length-1]==n.ZWSP};return{isCaretContainer:s,isCaretContainerBlock:i,isCaretContainerInline:a,showCaretContainerBlock:function(e){return e&&e.hasAttribute("data-mce-caret")?(n=e.getElementsByTagName("br"),t.isBogus(r=n[n.length-1])&&r.parentNode.removeChild(r),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null;var n,r},insertInline:function(e,t){var r,i,a;if(i=e.ownerDocument.createTextNode(n.ZWSP),a=e.parentNode,t){if(o(r=e.previousSibling)){if(s(r))return r;if(u(r))return r.splitText(r.data.length-1)}a.insertBefore(i,e)}else{if(o(r=e.nextSibling)){if(s(r))return r;if(c(r))return r.splitText(1),r}e.nextSibling?a.insertBefore(i,e.nextSibling):a.appendChild(i)}return i},prependInline:function(e){if(t.isText(e)){var r=e.data;return r.length>0&&r.charAt(0)!==n.ZWSP&&e.insertData(0,n.ZWSP),e}return null},appendInline:function(e){if(t.isText(e)){var r=e.data;return r.length>0&&r.charAt(r.length-1)!==n.ZWSP&&e.insertData(r.length,n.ZWSP),e}return null},isBeforeInline:function(e){return e&&t.isText(e.container())&&e.container().data.charAt(e.offset())===n.ZWSP},isAfterInline:function(e){return e&&t.isText(e.container())&&e.container().data.charAt(e.offset()-1)===n.ZWSP},insertBlock:function(t,n,r){var o,i,a;return(o=n.ownerDocument.createElement(t)).setAttribute("data-mce-caret",r?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(((a=e.createElement("br")).setAttribute("data-mce-bogus","1"),a)),i=n.parentNode,r?i.insertBefore(o,n):n.nextSibling?i.insertBefore(o,n.nextSibling):i.appendChild(o),o},hasContent:function(e){return e.firstChild!==e.lastChild||!t.isBr(e.firstChild)},startsWithCaretContainer:c,endsWithCaretContainer:u}}),n("tinymce.core.caret.CaretCandidate",["tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.caret.CaretContainer"],function(e,t,n){var r=e.isContentEditableTrue,o=e.isContentEditableFalse,i=e.isBr,a=e.isText,s=e.matchNodeNames("script style textarea"),c=e.matchNodeNames("img input textarea hr iframe video audio object"),u=e.matchNodeNames("table"),l=n.isCaretContainer,d=function(e){return!l(e)&&(a(e)?!s(e.parentNode):c(e)||i(e)||u(e)||o(e))},f=function(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode){if(o(e))return!1;if(r(e))return!0}return!0};return{isCaretCandidate:d,isInEditable:f,isAtomic:function(e){return c(e)||!!o(n=e)&&!0!==t.reduce(n.getElementsByTagName("*"),function(e,t){return e||r(t)},!1);var n},isEditableCaretCandidate:function(e,t){return d(e)&&f(e,t)}}}),n("tinymce.core.geom.ClientRect",[],function(){var e=Math.round,t=function(t){return t?{left:e(t.left),top:e(t.top),bottom:e(t.bottom),right:e(t.right),width:e(t.width),height:e(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},n=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2},r=function(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&n(t.top-e.bottom,e,t)},o=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&n(t.bottom-e.top,e,t)},i=function(e,t){return e.left<t.left},a=function(e,t){return e.right>t.right};return{clone:t,collapse:function(e,n){return e=t(e),n?e.right=e.left:(e.left=e.left+e.width,e.right=e.left),e.width=0,e},isEqual:function(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right},isAbove:r,isBelow:o,isLeft:i,isRight:a,compare:function(e,t){return r(e,t)?-1:o(e,t)?1:i(e,t)?-1:a(e,t)?1:0},containsXY:function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom}}}),n("tinymce.core.selection.RangeNodes",[],function(){return{getSelectedNode:function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset==n+1?t.childNodes[n]:null},getNode:function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e}}}),n("tinymce.core.text.ExtendingChar",[],function(){var e=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]");return{isExtendingChar:function(t){return"string"==typeof t&&t.charCodeAt(0)>=768&&e.test(t)}}}),n("tinymce.core.util.Fun",[],function(){var e=[].slice,t=function(n){var r=e.call(arguments);return r.length-1>=n.length?n.apply(this,r.slice(1)):function(){var e=r.concat([].slice.call(arguments));return t.apply(this,e)}};return{constant:function(e){return function(){return e}},negate:function(e){return function(t){return!e(t)}},and:function(){var t=e.call(arguments);return function(e){for(var n=0;n<t.length;n++)if(!t[n](e))return!1;return!0}},or:function(){var t=e.call(arguments);return function(e){for(var n=0;n<t.length;n++)if(t[n](e))return!0;return!1}},curry:t,compose:function(e,t){return function(n){return e(t(n))}},noop:function(){}}}),n("tinymce.core.caret.CaretPosition",["tinymce.core.caret.CaretCandidate","tinymce.core.dom.DOMUtils","tinymce.core.dom.NodeType","tinymce.core.geom.ClientRect","tinymce.core.selection.RangeNodes","tinymce.core.text.ExtendingChar","tinymce.core.util.Fun"],function(e,t,n,r,o,i,a){var s=n.isElement,c=e.isCaretCandidate,u=n.matchStyleValues("display","block table"),l=n.matchStyleValues("float","left right"),d=a.and(s,c,a.negate(l)),f=a.negate(n.matchStyleValues("white-space","pre pre-line pre-wrap")),m=n.isText,p=n.isBr,h=t.nodeIndex,g=o.getNode,v=function(e){return"createRange"in e?e.createRange():t.DOM.createRng()},y=function(e){return e&&/[\r\n\t ]/.test(e)},b=function(e){var t,n=e.startContainer,r=e.startOffset;return!(!y(e.toString())||!f(n.parentNode)||!y((t=n.data)[r-1])&&!y(t[r+1]))},x=function(e,t,n){var o=function(){return n||(n=function(e){var t,n,o=[],a=function(e){var t,n,o,i,a,s,c,u;return n=e.getClientRects(),t=r.clone(n.length>0?n[0]:e.getBoundingClientRect()),p(e)&&0===t.left?(s=v(a=(o=e).ownerDocument),c=a.createTextNode("\xa0"),(u=o.parentNode).insertBefore(c,o),s.setStart(c,0),s.setEnd(c,1),i=r.clone(s.getBoundingClientRect()),u.removeChild(c),i):t},c=function(e,t){return(e=r.collapse(e,t)).width=1,e.right=e.left+1,e},l=function(e){0!==e.height&&(o.length>0&&r.isEqual(e,o[o.length-1])||o.push(e))},f=function(e,t){var n=v(e.ownerDocument);if(t<e.data.length){if(i.isExtendingChar(e.data[t]))return o;if(i.isExtendingChar(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!b(n)))return l(c(a(n),!1)),o}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),b(n)||l(c(a(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),b(n)||l(c(a(n),!0)))};if(m(e.container()))return f(e.container(),e.offset()),o;if(s(e.container()))if(e.isAtEnd())n=g(e.container(),e.offset()),m(n)&&f(n,n.data.length),d(n)&&!p(n)&&l(c(a(n),!1));else{if(n=g(e.container(),e.offset()),m(n)&&f(n,0),d(n)&&e.isAtEnd())return l(c(a(n),!1)),o;t=g(e.container(),e.offset()-1),d(t)&&!p(t)&&(u(t)||u(n)||!d(n))&&l(c(a(t),!1)),d(n)&&l(c(a(n),!0))}return o}(new x(e,t))),n};return{container:a.constant(e),offset:a.constant(t),toRange:function(){var n;return(n=v(e.ownerDocument)).setStart(e,t),n.setEnd(e,t),n},getClientRects:o,isVisible:function(){return o().length>0},isAtStart:function(){return m(e),0===t},isAtEnd:function(){return m(e)?t>=e.data.length:t>=e.childNodes.length},isEqual:function(n){return n&&e===n.container()&&t===n.offset()},getNode:function(n){return g(e,n?t-1:t)}}};return x.fromRangeStart=function(e){return new x(e.startContainer,e.startOffset)},x.fromRangeEnd=function(e){return new x(e.endContainer,e.endOffset)},x.after=function(e){return new x(e.parentNode,h(e)+1)},x.before=function(e){return new x(e.parentNode,h(e))},x.isAtStart=function(e){return!!e&&e.isAtStart()},x.isAtEnd=function(e){return!!e&&e.isAtEnd()},x.isTextPosition=function(e){return!!e&&n.isText(e.container())},x}),n("tinymce.core.caret.CaretUtils",["tinymce.core.util.Fun","tinymce.core.dom.TreeWalker","tinymce.core.dom.NodeType","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretCandidate"],function(e,t,n,r,o,i){var a=n.isContentEditableTrue,s=n.isContentEditableFalse,c=n.matchStyleValues("display","block table table-cell table-caption list-item"),u=o.isCaretContainer,l=o.isCaretContainerBlock,d=e.curry,f=n.isElement,m=i.isCaretCandidate,p=function(e){return e>0},h=function(e){return e<0},g=function(e,t){for(var n;n=e(t);)if(!l(n))return n;return null},v=function(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode)if(a(e))return e;return t},y=function(e,t){for(;e&&e!=t;){if(c(e))return e;e=e.parentNode}return null},b=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},x=function(e,t,n){var r,o,i,a;for(o=e?"previousSibling":"nextSibling";n&&n!=t;){if(u(r=n[o])&&(r=r[o]),s(r)){if(a=n,y(r,i=t)==y(a,i))return r;break}if(m(r))break;n=n.parentNode}return null},C=d(b,!0),w=d(b,!1),k=function(e,t){return s((n=e,(r=t)?(o=r.container(),i=r.offset(),f(o)?o.childNodes[i+n]:null):null));var n,r,o,i};return{isForwards:p,isBackwards:h,findNode:function(e,n,r,o,i){var a=new t(e,o);if(h(n)){if((s(e)||l(e))&&r(e=g(a.prev,!0)))return e;for(;e=g(a.prev,i);)if(r(e))return e}if(p(n)){if((s(e)||l(e))&&r(e=g(a.next,!0)))return e;for(;e=g(a.next,i);)if(r(e))return e}return null},getEditingHost:v,getParentBlock:y,isInSameBlock:function(e,t,n){return y(e.container(),n)==y(t.container(),n)},isInSameEditingHost:function(e,t,n){return v(e.container(),n)==v(t.container(),n)},isBeforeContentEditableFalse:d(k,0),isAfterContentEditableFalse:d(k,-1),normalizeRange:function(e,t,r){var i,a,c,l,m=d(x,!0,t),p=d(x,!1,t);if(c=r.startOffset,o.isCaretContainerBlock(a=r.startContainer)){if(f(a)||(a=a.parentNode),"before"==(l=a.getAttribute("data-mce-caret"))&&s(i=a.nextSibling))return C(i);if("after"==l&&s(i=a.previousSibling))return w(i)}if(!r.collapsed)return r;if(n.isText(a)){if(u(a)){if(1===e){if(i=p(a))return C(i);if(i=m(a))return w(i)}if(-1===e){if(i=m(a))return w(i);if(i=p(a))return C(i)}return r}if(o.endsWithCaretContainer(a)&&c>=a.data.length-1)return 1===e&&(i=p(a))?C(i):r;if(o.startsWithCaretContainer(a)&&c<=1)return-1===e&&(i=m(a))?w(i):r;if(c===a.data.length)return(i=p(a))?C(i):r;if(0===c)return(i=m(a))?w(i):r}return r}}}),n("tinymce.core.caret.CaretWalker",["tinymce.core.dom.NodeType","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.util.Arr","tinymce.core.util.Fun"],function(e,t,n,r,o,i){var a=e.isContentEditableFalse,s=e.isText,c=e.isElement,u=e.isBr,l=r.isForwards,d=r.isBackwards,f=t.isCaretCandidate,m=t.isAtomic,p=t.isEditableCaretCandidate,h=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},g=function(e,t){if(l(e)){if(f(t.previousSibling)&&!s(t.previousSibling))return n.before(t);if(s(t))return n(t,0)}if(d(e)){if(f(t.nextSibling)&&!s(t.nextSibling))return n.after(t);if(s(t))return n(t,t.data.length)}return d(e)?u(t)?n.before(t):n.after(t):n.before(t)},v=function(t,y,b){var x,C,w,k,S,T,E,R,N,A;if(!c(b)||!y)return null;if(y.isEqual(n.after(b))&&b.lastChild){if(E=n.after(b.lastChild),d(t)&&f(b.lastChild)&&c(b.lastChild))return u(b.lastChild)?n.before(b.lastChild):E}else E=y;if(x=E.container(),C=E.offset(),s(x)){if(d(t)&&C>0)return n(x,--C);if(l(t)&&C<x.length)return n(x,++C);w=x}else{if(d(t)&&C>0&&(k=h(x,C-1),f(k)))return!m(k)&&(S=r.findNode(k,t,p,k))?s(S)?n(S,S.data.length):n.after(S):s(k)?n(k,k.data.length):n.before(k);if(l(t)&&C<x.childNodes.length&&(k=h(x,C),f(k)))return N=b,e.isBr(R=k)&&(A=v(1,n.after(R),N))&&!r.isInSameBlock(n.before(R),n.before(A),N)?v(t,n.after(k),b):!m(k)&&(S=r.findNode(k,t,p,k))?s(S)?n(S,0):n.before(S):s(k)?n(k,0):n.after(k);w=E.getNode()}return(l(t)&&E.isAtEnd()||d(t)&&E.isAtStart())&&(w=r.findNode(w,t,i.constant(!0),b,!0),p(w))?g(t,w):(k=r.findNode(w,t,p,b),!(T=o.last(o.filter(function(e,t){for(var n=[];e&&e!=t;)n.push(e),e=e.parentNode;return n}(x,b),a)))||k&&T.contains(k)?k?g(t,k):null:E=l(t)?n.after(T):n.before(T))};return function(e){return{next:function(t){return v(1,t,e)},prev:function(t){return v(-1,t,e)}}}}),n("tinymce.core.InsertList",["tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretWalker","tinymce.core.dom.NodeType","tinymce.core.util.Tools"],function(e,t,n,r){var o=function(e){return r.grep(e.childNodes,function(e){return"LI"===e.nodeName})},i=function(e){return e.length>0&&(!(o=e[e.length-1]).firstChild||(t=o)&&t.firstChild&&t.firstChild===t.lastChild&&("\xa0"===(r=t.firstChild).data||n.isBr(r)))?e.slice(0,-1):e;var t,r,o},a=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},s=function(n,r){var o=e.after(n),i=new t(r).prev(o);return i?i.toRange():null};return{isListFragment:function(e,t){var n,r,o,i,a,s,c=t.firstChild,u=t.lastChild;return c&&"meta"===c.name&&(c=c.next),u&&"mce_marker"===u.attr("id")&&(u=u.prev),r=u,s=(n=e).getNonEmptyElements(),r&&(r.isEmpty(s)||(o=r,n.getBlockElements()[o.name]&&(a=o).firstChild&&a.firstChild===a.lastChild&&("br"===(i=o.firstChild).name||"\xa0"===i.value)))&&(u=u.prev),!(!c||c!==u||"ul"!==c.name&&"ol"!==c.name)},insertAtCaret:function(n,c,u,l){var d,f,m,p,h,g,v,y,b,x,C,w,k,S,T,E,R,N,A,D,P,B,_,O=(d=c,h=n.serialize(l),p=(f=d.createFragment(h)).lastChild,(m=f.firstChild)&&"META"===m.nodeName&&m.parentNode.removeChild(m),p&&"mce_marker"===p.id&&p.parentNode.removeChild(p),f),F=a(c,u.startContainer),M=i(o(O.firstChild)),I=c.getRoot(),L=function(n){var r=e.fromRangeStart(u),o=new t(c.getRoot()),i=1===n?o.prev(r):o.next(r);return!i||a(c,i.getNode())!==F};return L(1)?(A=I,_=(N=F).parentNode,r.each(M,function(e){_.insertBefore(e,N)}),D=A,P=e.before(N),(B=new t(D).next(P))?B.toRange():null):L(2)?(g=F,y=I,c.insertAfter((v=M).reverse(),g),s(v[0],y)):(x=M,C=I,w=b=F,S=(k=u).cloneRange(),T=k.cloneRange(),S.setStartBefore(w),T.setEndAfter(w),E=[S.cloneContents(),T.cloneContents()],(R=b.parentNode).insertBefore(E[0],b),r.each(x,function(e){R.insertBefore(e,b)}),R.insertBefore(E[1],b),R.removeChild(b),s(x[x.length-1],C))},isParentBlockLi:function(e,t){return!!a(e,t)},trimListItems:i,listItems:o}}),n("tinymce.core.caret.CaretBookmark",["tinymce.core.dom.NodeType","tinymce.core.dom.DOMUtils","tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.caret.CaretPosition"],function(e,t,n,r,o){var i=e.isText,a=e.isBogus,s=t.nodeIndex,c=function(e){var t=e.parentNode;return a(t)?c(t):t},u=function(e){return e?r.reduce(e.childNodes,function(e,t){return a(t)&&"BR"!=t.nodeName?e=e.concat(u(t)):e.push(t),e},[]):[]},l=function(e){return function(t){return e===t}},d=function(t){var n,o,a,s;return(i(t)?"text()":t.nodeName.toLowerCase())+"["+(o=u(c(n=t)),a=r.findIndex(o,l(n),n),o=o.slice(0,a+1),s=r.reduce(o,function(e,t,n){return i(t)&&i(o[n-1])&&e++,e},0),o=r.filter(o,e.matchNodeNames(n.nodeName)),(a=r.findIndex(o,l(n),n))-s)+"]"};return{create:function(t,o){var a,s,c,u,l,f=[];return a=o.container(),s=o.offset(),i(a)?c=function(e,t){for(;(e=e.previousSibling)&&i(e);)t+=e.data.length;return t}(a,s):(s>=(u=a.childNodes).length?(c="after",s=u.length-1):c="before",a=u[s]),f.push(d(a)),l=function(e,t,n){var r=[];for(t=t.parentNode;t!=e;t=t.parentNode)r.push(t);return r}(t,a),l=r.filter(l,n.negate(e.isBogus)),(f=f.concat(r.map(l,function(e){return d(e)}))).reverse().join("/")+","+c},resolve:function(t,n){var a,c,l;return n?(n=(a=n.split(","))[0].split("/"),l=a.length>1?a[1]:"before",(c=r.reduce(n,function(t,n){return(n=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(n))?("text()"===n[1]&&(n[1]="#text"),o=t,a=n[1],s=parseInt(n[2],10),c=u(o),c=r.filter(c,function(e,t){return!i(e)||!i(c[t-1])}),(c=r.filter(c,e.matchNodeNames(a)))[s]):null;var o,a,s,c},t))?i(c)?function(e,t){for(var n,r=e,a=0;i(r);){if(n=r.data.length,t>=a&&t<=a+n){e=r,t-=a;break}if(!i(r.nextSibling)){e=r,t=n;break}a+=n,r=r.nextSibling}return t>e.data.length&&(t=e.data.length),new o(e,t)}(c,parseInt(l,10)):(l="after"===l?s(c)+1:s(c),new o(c.parentNode,l)):null):null}}}),n("tinymce.core.dom.GetBookmark",["ephox.katamari.api.Fun","tinymce.core.caret.CaretBookmark","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.selection.RangeNodes","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,s){var c=o.isContentEditableFalse,u=function(e,t,n,r,i){var a,s=r[i?"startContainer":"endContainer"],c=r[i?"startOffset":"endOffset"],u=[],l=0,d=e.getRoot();for(o.isText(s)?u.push(n?function(e,t,n){var r,i;for(i=e(t.data.slice(0,c)).length,r=t.previousSibling;r&&o.isText(r);r=r.previousSibling)i+=e(r.data).length;return i}(t,s):c):(c>=(a=s.childNodes).length&&a.length&&(l=1,c=Math.max(0,a.length-1)),u.push(e.nodeIndex(a[c],n)+l));s&&s!==d;s=s.parentNode)u.push(e.nodeIndex(s,n));return u},l=function(e){o.isText(e)&&0===e.data.length&&e.parentNode.removeChild(e)},d=function(e,t,n){var r=0;return s.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++}),r},f=function(e,t){var n,r,i,a=t?"start":"end";r=e[a+"Offset"],o.isElement(n=e[a+"Container"])&&"TR"===n.nodeName&&(n=(i=n.childNodes)[Math.min(t?r:r-1,i.length-1)])&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r))},m=function(e){return f(e,!0),f(e,!1),e},p=function(e,t){var r;if(o.isElement(e)&&(e=i.getNode(e,t),c(e)))return e;if(n.isCaretContainer(e)){if(o.isText(e)&&n.isCaretContainerBlock(e)&&(e=e.parentNode),c(r=e.previousSibling))return r;if(c(r=e.nextSibling))return r}},h=function(e,t,n){var r,o,i,a,s,l,f,m=n.getNode(),h=m?m.nodeName:null,g=n.getRng();return c(m)||"IMG"===h?{name:h,index:d(n.dom,h,m)}:(m=p((r=g).startContainer,r.startOffset)||p(r.endContainer,r.endOffset))?{name:h=m.tagName,index:d(n.dom,h,m)}:((f={}).start=u(l=(i=n).dom,o=e,a=t,s=g,!0),i.isCollapsed()||(f.end=u(l,o,a,s,!1)),f)};return{getBookmark:function(e,n,o){return 2===n?h(a.trim,o,e):3===n?(s=(i=e).getRng(),{start:t.create(i.dom.getRoot(),r.fromRangeStart(s)),end:t.create(i.dom.getRoot(),r.fromRangeEnd(s))}):n?{rng:e.getRng()}:function(e){var t=e.dom,n=e.getRng(),r=t.uniqueId(),o=e.isCollapsed(),i="overflow:hidden;line-height:0px",a=e.getNode(),s=a.nodeName,c="&#xFEFF;";if("IMG"===s)return{name:s,index:d(t,s,a)};var u=m(n.cloneRange());if(!o){u.collapse(!1);var f=t.create("span",{"data-mce-type":"bookmark",id:r+"_end",style:i},c);u.insertNode(f),l(f.nextSibling)}(n=m(n)).collapse(!0);var p=t.create("span",{"data-mce-type":"bookmark",id:r+"_start",style:i},c);return n.insertNode(p),l(p.previousSibling),e.moveToBookmark({id:r,keep:1}),{id:r}}(e);var i,s},getUndoBookmark:e.curry(h,e.identity,!0)}}),n("ephox.katamari.api.Options",["ephox.katamari.api.Option"],function(e){return{cat:function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},findMap:function(t,n){for(var r=0;r<t.length;r++){var o=n(t[r],r);if(o.isSome())return o}return e.none()},liftN:function(t,n){for(var r=[],o=0;o<t.length;o++){var i=t[o];if(!i.isSome())return e.none();r.push(i.getOrDie())}return e.some(n.apply(null,r))}}}),n("tinymce.core.dom.ResolveBookmark",["ephox.katamari.api.Option","ephox.katamari.api.Options","tinymce.core.Env","tinymce.core.caret.CaretBookmark","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a){var s=function(e,t){return!e.isBlock(t)||t.innerHTML||n.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t},c=function(e,t,n,r){var o,i,a,s,c=n[t?"start":"end"],u=e.getRoot();if(c){for(a=c[0],i=u,o=c.length-1;o>=1;o--){if(c[o]>(s=i.childNodes).length-1)return;i=s[c[o]]}3===i.nodeType&&(a=Math.min(c[0],i.nodeValue.length)),1===i.nodeType&&(a=Math.min(c[0],i.childNodes.length)),t?r.setStart(i,a):r.setEnd(i,a)}return!0},u=function(t,r,s){var c,u,l,d,f,m,p=t.get(s.id+"_"+r),h=s.keep;if(p){if(c=p.parentNode,h?(c=p.firstChild,u=1):u=t.nodeIndex(p),f=c,m=u,!h){for(d=p.previousSibling,l=p.nextSibling,a.each(a.grep(p.childNodes),function(e){i.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});p=t.get(s.id+"_"+r);)t.remove(p,1);d&&l&&d.nodeType===l.nodeType&&i.isText(d)&&!n.opera&&(u=d.nodeValue.length,d.appendData(l.nodeValue),t.remove(l),f=d,m=u)}return e.some(o(f,m))}return e.none()};return{resolve:function(n,o){var i,l,d,f,m,p,h,g,v,y,b,x,C,w,k,S=n.dom;if(o){if(a.isArray(o.start))return w=o,k=(C=S).createRng(),c(C,!0,w,k)&&c(C,!1,w,k)?e.some(k):e.none();if("string"==typeof o.start)return e.some((y=o,b=(v=S).createRng(),x=r.resolve(v.getRoot(),y.start),b.setStart(x.container(),x.offset()),x=r.resolve(v.getRoot(),y.end),b.setEnd(x.container(),x.offset()),b));if(o.id)return h=u(d=S,"start",f=o),g=u(d,"end",f),t.liftN([h,(m=g,p=h,m.isSome()?m:p)],function(e,t){var n=d.createRng();return n.setStart(s(d,e.container()),e.offset()),n.setEnd(s(d,t.container()),t.offset()),n});if(o.name)return e.from((i=S).select((l=o).name)[l.index]).map(function(e){var t=i.createRng();return t.selectNode(e),t});if(o.rng)return e.some(o.rng)}return e.none()}}}),n("tinymce.core.dom.Bookmarks",["tinymce.core.dom.GetBookmark","tinymce.core.dom.ResolveBookmark"],function(e,t){return{getBookmark:function(t,n,r){return e.getBookmark(t,n,r)},moveToBookmark:function(e,n){t.resolve(e,n).each(function(t){e.setRng(t)})},isBookmarkNode:function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")}}}),n("tinymce.core.dom.ElementUtils",["tinymce.core.dom.Bookmarks","tinymce.core.util.Tools"],function(e,t){var n=t.each;return function(t){this.compare=function(r,o){if(r.nodeName!=o.nodeName)return!1;var i=function(e){var r={};return n(t.getAttribs(e),function(n){var o=n.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&0!==o.indexOf("data-")&&(r[o]=t.getAttrib(e,o))}),r},a=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if("undefined"==typeof(n=t[r]))return!1;if(e[r]!=n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0};return!(!a(i(r),i(o))||!a(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(o,"style")))||e.isBookmarkNode(r)||e.isBookmarkNode(o))}}}),n("ephox.sugar.api.dom.Insert",["ephox.sugar.api.search.Traverse"],function(e){var t=function(t,n){e.parent(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},n=function(e,t){e.dom().appendChild(t.dom())};return{before:t,after:function(r,o){e.nextSibling(r).fold(function(){e.parent(r).each(function(e){n(e,o)})},function(e){t(e,o)})},prepend:function(t,r){e.firstChild(t).fold(function(){n(t,r)},function(e){t.dom().insertBefore(r.dom(),e.dom())})},append:n,appendAt:function(r,o,i){e.child(r,i).fold(function(){n(r,o)},function(e){t(e,o)})},wrap:function(e,r){t(e,r),n(r,e)}}}),n("ephox.sugar.api.dom.InsertAll",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert"],function(e,t){return{before:function(n,r){e.each(r,function(e){t.before(n,e)})},after:function(n,r){e.each(r,function(e,o){t.after(0===o?n:r[o-1],e)})},prepend:function(n,r){e.each(r.slice().reverse(),function(e){t.prepend(n,e)})},append:function(n,r){e.each(r,function(e){t.append(n,e)})}}}),n("ephox.sugar.api.dom.Remove",["ephox.katamari.api.Arr","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)};return{empty:function(t){t.dom().textContent="",e.each(n.children(t),function(e){r(e)})},remove:r,unwrap:function(e){var o=n.children(e);o.length>0&&t.before(e,o),r(e)}}}),n("ephox.sugar.impl.NodeValue",["ephox.sand.api.PlatformDetection","ephox.katamari.api.Option","global!Error"],function(e,t,n){return function(r,o){var i=function(e){return r(e)?t.from(e.dom().nodeValue):t.none()},a=e.detect().browser,s=a.isIE()&&10===a.version.major?function(e){try{return i(e)}catch(e){return t.none()}}:i;return{get:function(e){if(!r(e))throw new n("Can only get "+o+" value of a "+o+" node");return s(e).getOr("")},getOption:s,set:function(e,t){if(!r(e))throw new n("Can only set raw "+o+" value of a "+o+" node");e.dom().nodeValue=t}}}}),n("ephox.sugar.api.node.Text",["ephox.sugar.api.node.Node","ephox.sugar.impl.NodeValue"],function(e,t){var n=t(e.isText,"text");return{get:function(e){return n.get(e)},getOption:function(e){return n.getOption(e)},set:function(e,t){n.set(e,t)}}}),n("ephox.sugar.api.search.PredicateFilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Body","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(t,o){var i=[];return e.each(n.children(t),function(e){o(e)&&(i=i.concat([e])),i=i.concat(r(e,o))}),i};return{all:function(e){return r(t.body(),e)},ancestors:function(t,r,o){return e.filter(n.parents(t,o),r)},siblings:function(t,r){return e.filter(n.siblings(t),r)},children:function(t,r){return e.filter(n.children(t),r)},descendants:r}}),n("ephox.sugar.api.search.SelectorFilter",["ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.Selectors"],function(e,t){return{all:function(e){return t.all(e)},ancestors:function(n,r,o){return e.ancestors(n,function(e){return t.is(e,r)},o)},siblings:function(n,r){return e.siblings(n,function(e){return t.is(e,r)})},children:function(n,r){return e.children(n,function(e){return t.is(e,r)})},descendants:function(e,n){return t.all(n,e)}}}),n("tinymce.core.dom.PaddingBr",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.Traverse","tinymce.core.dom.ElementType"],function(e,t,n,r,o,i,a,s,c){var u=function(e){return o.isText(e)?"\xa0"===i.get(e):c.isBr(e)};return{removeTrailingBr:function(t){var o=a.descendants(t,"br"),i=e.filter(function(e){for(var n=[],o=t.dom();o;)n.push(r.fromDom(o)),o=o.lastChild;return n}().slice(-1),c.isBr);o.length===i.length&&e.each(i,n.remove)},fillWithPaddingBr:function(e){n.empty(e),t.append(e,r.fromHtml('<br data-mce-bogus="1">'))},isPaddedElement:function(t){return 1===e.filter(s.children(t),u).length},trimBlockTrailingBr:function(e){s.lastChild(e).each(function(t){s.prevSibling(t).each(function(r){c.isBlock(e)&&c.isBr(t)&&c.isBlock(r)&&n.remove(t)})})}}}),n("tinymce.core.html.Writer",["tinymce.core.html.Entities","tinymce.core.util.Tools"],function(e,t){var n=t.makeMap;return function(t){var r,o,i,a,s,c=[];return r=(t=t||{}).indent,o=n(t.indent_before||""),i=n(t.indent_after||""),a=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),s="html"==t.element_format,{start:function(e,t,n){var u,l,d,f;if(r&&o[e]&&c.length>0&&(f=c[c.length-1]).length>0&&"\n"!==f&&c.push("\n"),c.push("<",e),t)for(u=0,l=t.length;u<l;u++)c.push(" ",(d=t[u]).name,'="',a(d.value,!0),'"');c[c.length]=!n||s?">":" />",n&&r&&i[e]&&c.length>0&&(f=c[c.length-1]).length>0&&"\n"!==f&&c.push("\n")},end:function(e){var t;c.push("</",e,">"),r&&i[e]&&c.length>0&&(t=c[c.length-1]).length>0&&"\n"!==t&&c.push("\n")},text:function(e,t){e.length>0&&(c[c.length]=t?e:a(e))},cdata:function(e){c.push("<![CDATA[",e,"]]>")},comment:function(e){c.push("\x3c!--",e,"--\x3e")},pi:function(e,t){t?c.push("<?",e," ",a(t),"?>"):c.push("<?",e,"?>"),r&&c.push("\n")},doctype:function(e){c.push("<!DOCTYPE",e,">",r?"\n":"")},reset:function(){c.length=0},getContent:function(){return c.join("").replace(/\n$/,"")}}}}),n("tinymce.core.html.Serializer",["tinymce.core.html.Writer","tinymce.core.html.Schema"],function(e,t){return function(n,r){var o=new e(n);(n=n||{}).validate=!("validate"in n)||n.validate,this.schema=r=r||new t,this.writer=o,this.serialize=function(e){var t,i;i=n.validate,t={3:function(e){o.text(e.value,e.raw)},8:function(e){o.comment(e.value)},7:function(e){o.pi(e.name,e.value)},10:function(e){o.doctype(e.value)},4:function(e){o.cdata(e.value)},11:function(e){if(e=e.firstChild)do{a(e)}while(e=e.next)}},o.reset();var a=function(e){var n,s,c,u,l,d,f,m,p,h=t[e.type];if(h)h(e);else{if(n=e.name,s=e.shortEnded,c=e.attributes,i&&c&&c.length>1&&((d=[]).map={},p=r.getElementRule(e.name))){for(f=0,m=p.attributesOrder.length;f<m;f++)(u=p.attributesOrder[f])in c.map&&(d.map[u]=l=c.map[u],d.push({name:u,value:l}));for(f=0,m=c.length;f<m;f++)(u=c[f].name)in d.map||(d.map[u]=l=c.map[u],d.push({name:u,value:l}));c=d}if(o.start(e.name,c,s),!s){if(e=e.firstChild)do{a(e)}while(e=e.next);o.end(n)}}};return 1!=e.type||n.inner?t[11](e):a(e),o.getContent()}}}),n("tinymce.core.caret.CaretFinder",["ephox.katamari.api.Fun","ephox.katamari.api.Option","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a){var s=function(e){return r.isTextPosition(e)?0===e.offset():n.isCaretCandidate(e.getNode())},c=function(e){return r.isTextPosition(e)?e.offset()===e.container().data.length:n.isCaretCandidate(e.getNode(!0))},u=function(e,t){return!r.isTextPosition(e)&&!r.isTextPosition(t)&&e.getNode()===t.getNode(!0)},l=function(e,n,r){var o=new i(n);return t.from(e?o.next(r):o.prev(r))},d=function(e,o){var i,s,c,u,d,f=e?o.firstChild:o.lastChild;return a.isText(f)?t.some(new r(f,e?0:f.data.length)):f?n.isCaretCandidate(f)?t.some(e?r.before(f):a.isBr(d=f)?r.before(d):r.after(d)):(s=o,c=f,u=(i=e)?r.before(c):r.after(c),l(i,s,u)):t.none()};return{fromPosition:l,nextPosition:e.curry(l,!0),prevPosition:e.curry(l,!1),navigate:function(e,n,i){return l(e,n,i).bind(function(d){return o.isInSameBlock(i,d,n)&&(f=i,m=d,e?!u(f,m)&&(r.isTextPosition(p=f)||!a.isBr(p.getNode()))&&c(f)&&s(m):!u(m,f)&&s(f)&&c(m))?l(e,n,d):t.some(d);var f,m,p})},positionIn:d,firstPositionIn:e.curry(d,!0),lastPositionIn:e.curry(d,!1)}}),n("tinymce.core.selection.RangeNormalizer",["global!document","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils"],function(e,t,n,r){return{normalize:function(o){return(u=o).collapsed?u:(a=n.fromRangeStart(i=u),s=n.fromRangeEnd(i),t.fromPosition(!1,c=i.commonAncestorContainer,s).map(function(t){return!r.isInSameBlock(a,s,c)&&r.isInSameBlock(a,t,c)?(n=a.container(),o=a.offset(),u=t.container(),l=t.offset(),(d=e.createRange()).setStart(n,o),d.setEnd(u,l),d):i;var n,o,u,l,d}).getOr(i));var i,a,s,c,u}}}),n("tinymce.core.InsertContent",["ephox.katamari.api.Option","ephox.sugar.api.node.Element","tinymce.core.Env","tinymce.core.InsertList","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretWalker","tinymce.core.dom.ElementUtils","tinymce.core.dom.NodeType","tinymce.core.dom.PaddingBr","tinymce.core.html.Serializer","tinymce.core.selection.RangeNormalizer","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,s,c,u,l,d){var f=s.matchNodeNames("td th");return{insertAtCaret:function(s,m){var p,h,g="string"!=typeof(p=m)?(h=d.extend({paste:p.paste,data:{paste:p.paste}},p),{content:p.content,details:h}):{content:p,details:{}};!function(s,m,p){var h,g,v,y,b,x,C,w,k,S,T,E,R=s.schema.getTextInlineElements(),N=s.selection,A=s.dom;if(/^ | $/.test(m)&&(m=function(e){var t,n,r;r=(t=N.getRng(!0)).startOffset;var o=function(e){return n[e]&&3==n[e].nodeType};return 3==(n=t.startContainer).nodeType&&(r>0?e=e.replace(/^&nbsp;/," "):o("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),r<n.length?e=e.replace(/&nbsp;(<br>|)$/," "):o("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}(m)),h=s.parser,E=p.merge,g=new u({validate:s.settings.validate},s.schema),T='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',(x=s.fire("BeforeSetContent",x={content:m,format:"html",selection:!0,paste:p.paste})).isDefaultPrevented())s.fire("SetContent",{content:x.content,format:"html",selection:!0,paste:p.paste});else{-1==(m=x.content).indexOf("{$caret}")&&(m+="{$caret}"),m=m.replace(/\{\$caret\}/,T);var D,P,B,_,O=(w=N.getRng()).startContainer||(w.parentElement?w.parentElement():null),F=s.getBody();O===F&&N.isCollapsed()&&A.isBlock(F.firstChild)&&(D=F.firstChild)&&!s.schema.getShortEndedElements()[D.nodeName]&&A.isEmpty(F.firstChild)&&((w=A.createRng()).setStart(F.firstChild,0),w.setEnd(F.firstChild,0),N.setRng(w)),N.isCollapsed()||(s.selection.setRng(l.normalize(s.selection.getRng())),s.getDoc().execCommand("Delete",!1,null),_=(P=N.getRng(!0)).startOffset,3==(B=P.startContainer).nodeType&&P.collapsed&&("\xa0"===B.data[_]?(B.deleteData(_,1),/[\u00a0| ]$/.test(m)||(m+=" ")):"\xa0"===B.data[_-1]&&(B.deleteData(_-1,1),/[\u00a0| ]$/.test(m)||(m=" "+m))));var M,I,L,H={context:(v=N.getNode()).nodeName.toLowerCase(),data:p.data,insert:!0};if(b=h.parse(m,H),!0===p.paste&&r.isListFragment(s.schema,b)&&r.isParentBlockLi(A,v))return w=r.insertAtCaret(g,A,s.selection.getRng(!0),b),s.selection.setRng(w),void s.fire("SetContent",x);if(function(e){for(var t=b;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(),"mce_marker"==(k=b.lastChild).attr("id"))for(C=k,k=k.prev;k;k=k.walk(!0))if(3==k.type||!A.isBlock(k.name)){s.schema.isValidChild(k.parent.name,"span")&&k.parent.insert(C,k,"br"===k.name);break}if(s._selectionOverrides.showBlockCaretContainer(v),H.invalid){for(N.setContent(T),v=N.getNode(),y=s.getBody(),9==v.nodeType?v=k=y:k=v;k!==y;)v=k,k=k.parentNode;m=v==y?y.innerHTML:A.getOuterHTML(v),m=g.serialize(h.parse(m.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return g.serialize(b)}))),v==y?A.setHTML(y,m):A.setOuterHTML(v,m)}else m=g.serialize(b),function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild;!r||r===n.lastChild&&"BR"===r.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t)}}(s,m,v);!function(){if(E){var e=s.getBody(),t=new a(A);d.each(A.select("*[data-mce-fragment]"),function(n){for(var r=n.parentNode;r&&r!=e;r=r.parentNode)R[n.nodeName.toLowerCase()]&&t.compare(r,n)&&A.remove(n,!0)})}}(),function(e){var t,r,a;if(e){if(N.scrollIntoView(e),t=function(e){for(var t=s.getBody();e&&e!==t;e=e.parentNode)if("false"===s.dom.getContentEditable(e))return e;return null}(e))return A.remove(e),void N.select(t);w=A.createRng(),(k=e.previousSibling)&&3==k.nodeType?(w.setStart(k,k.nodeValue.length),n.ie||(S=e.nextSibling)&&3==S.nodeType&&(k.appendData(S.data),S.parentNode.removeChild(S))):(w.setStartBefore(e),w.setEndBefore(e)),r=A.getParent(e,A.isBlock),A.remove(e),r&&A.isEmpty(r)&&(s.$(r).empty(),w.setStart(r,0),w.setEnd(r,0),f(r)||r.getAttribute("data-mce-fragment")||!(a=function(e){var t=o.fromRangeStart(w);if(t=new i(s.getBody()).next(t))return t.toRange()}())?A.add(r,A.create("br",{"data-mce-bogus":"1"})):(w=a,A.remove(r))),N.setRng(w)}}(A.get("mce_marker")),M=s.getBody(),d.each(M.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")}),I=s.dom,L=s.selection.getStart(),e.from(I.getParent(L,"td,th")).map(t.fromDom).each(c.trimBlockTrailingBr),s.fire("SetContent",x),s.addVisual()}}(s,g.content,g.details)}}}),n("ephox.sugar.impl.ClosestOrAncestor",["ephox.katamari.api.Type","ephox.katamari.api.Option"],function(e,t){return function(n,r,o,i,a){return n(o,i)?t.some(o):e.isFunction(a)&&a(o)?t.none():r(o,i,a)}}),n("ephox.sugar.api.search.PredicateFind",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Body","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n,r,o,i,a,s){var c=function(t,o,i){for(var s=t.dom(),c=e.isFunction(i)?i:n.constant(!1);s.parentNode;){var u=a.fromDom(s=s.parentNode);if(o(u))return r.some(u);if(c(u))break}return r.none()},u=function(e,r){return t.find(e.dom().childNodes,n.compose(r,a.fromDom)).map(a.fromDom)},l=function(e,t){var n=function(e){for(var o=0;o<e.childNodes.length;o++){if(t(a.fromDom(e.childNodes[o])))return r.some(a.fromDom(e.childNodes[o]));var i=n(e.childNodes[o]);if(i.isSome())return i}return r.none()};return n(e.dom())};return{first:function(e){return l(o.body(),e)},ancestor:c,closest:function(e,t,n){return s(function(e){return t(e)},c,e,t,n)},sibling:function(e,t){var n=e.dom();return n.parentNode?u(a.fromDom(n.parentNode),function(n){return!i.eq(e,n)&&t(n)}):r.none()},child:u,descendant:l}}),n("tinymce.core.EditorSettings",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.katamari.api.Strings","ephox.katamari.api.Struct","ephox.katamari.api.Type","ephox.sand.api.PlatformDetection","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,s,c){var u=i.immutable("sections","settings"),l=s.detect().deviceType.isTouch(),d=["lists","autolink","autosave"],f={theme:"mobile"},m=function(t){var n=a.isArray(t)?t.join(" "):t,r=e.map(a.isString(n)?n.split(" "):[],o.trim);return e.filter(r,function(e){return e.length>0})},p=function(e,t){return e.sections().hasOwnProperty(t)},h=function(r,o,i,a){var s,l,h,g,v,y,b,x,C,w,k,S,T,E,R,N,A,D,P,B=(s=["mobile"],l=n.bifilter(a,function(t,n){return e.contains(s,n)}),u(l.t,l.f));return T=r,E=B,R=c.extend(o,i,B.settings(),(w=r,S=(k=B).settings().inline,w&&p(k,"mobile")&&!S?(y="mobile",b=f,C=(x=B.sections()).hasOwnProperty(y)?x[y]:{},c.extend({},b,C)):{}),{validate:!0,content_editable:B.settings().inline,external_plugins:(h=i,g=B.settings(),v=g.external_plugins?g.external_plugins:{},h&&h.external_plugins?c.extend({},h.external_plugins,v):v)}),A=m(i.forced_plugins),D=m(R.plugins),N=T&&p(E,"mobile")?e.filter(D,t.curry(e.contains,d)):D,P=[].concat(m(A)).concat(m(N)),c.extend(R,{plugins:P.join(" ")})};return{getEditorSettings:function(e,t,n,r,o){var i,a={id:t,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:n,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:(i=e).convertURL,url_converter_scope:i,ie7_compat:!0};return h(l,a,r,o)},get:function(e,t){return r.from(e.settings[t])},getString:t.curry(function(e,t,n){return r.from(t.settings[n]).filter(e)},a.isString),combineSettings:h}}),n("tinymce.core.text.Bidi",[],function(){var e=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/;return{hasStrongRtl:function(t){return e.test(t)}}}),n("tinymce.core.keyboard.InlineUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.search.Selectors","tinymce.core.EditorSettings","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.DOMUtils","tinymce.core.dom.NodeType","tinymce.core.text.Bidi"],function(e,t,n,r,o,i,a,s,c,u,l,d){var f=function(e,t){var n=t.container(),r=t.offset();return e?a.isCaretContainerInline(n)?l.isText(n.nextSibling)?new s(n.nextSibling,0):s.after(n):a.isBeforeInline(t)?new s(n,r+1):t:a.isCaretContainerInline(n)?l.isText(n.previousSibling)?new s(n.previousSibling,n.previousSibling.data.length):s.before(n):a.isAfterInline(t)?new s(n,r-1):t};return{isInlineTarget:function(e,t){var n=i.getString(e,"inline_boundaries_selector").getOr("a[href],code");return o.is(r.fromDom(t),n)},findRootInline:function(t,r,o){var i,a,s=(i=t,a=r,e.filter(u.DOM.getParents(o.container(),"*",a),i));return n.from(s[s.length-1])},isRtl:function(e){return"rtl"===u.DOM.getStyle(e,"direction",!0)||d.hasStrongRtl(e.textContent)},isAtZwsp:function(e){return a.isBeforeInline(e)||a.isAfterInline(e)},normalizePosition:f,normalizeForwards:t.curry(f,!0),normalizeBackwards:t.curry(f,!1),hasSameParentBlock:function(e,t,n){var r=c.getParentBlock(t,e),o=c.getParentBlock(n,e);return r&&r===o}}}),n("tinymce.core.delete.DeleteUtils",["ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.PredicateFind","tinymce.core.caret.CaretFinder","tinymce.core.dom.ElementType","tinymce.core.keyboard.InlineUtils"],function(e,t,n,r,o,i,a,s){return{getParentBlock:function(t,i){return n.contains(t,i)?o.closest(i,function(e){return a.isTextBlock(e)||a.isListItem(e)},(s=t,function(e){return n.eq(s,r.fromDom(e.dom().parentNode))})):e.none();var s},paddEmptyBody:function(e){var t,n,r;e.dom.isEmpty(e.getBody())&&(e.setContent(""),r=(n=(t=e).getBody()).firstChild&&t.dom.isBlock(n.firstChild)?n.firstChild:n,t.selection.setCursorLocation(r,0))},willDeleteLastPositionInElement:function(e,n,r){return t.liftN([i.firstPositionIn(r),i.lastPositionIn(r)],function(t,o){var a=s.normalizePosition(!0,t),c=s.normalizePosition(!1,o),u=s.normalizePosition(!1,n);return e?i.nextPosition(r,u).map(function(e){return e.isEqual(c)&&n.isEqual(a)}).getOr(!1):i.prevPosition(r,u).map(function(e){return e.isEqual(a)&&n.isEqual(c)}).getOr(!1)}).getOr(!0)}}}),n("ephox.sugar.api.search.SelectorFind",["ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n){var r=function(n,r,o){return e.ancestor(n,function(e){return t.is(e,r)},o)};return{first:function(e){return t.one(e)},ancestor:r,sibling:function(n,r){return e.sibling(n,function(e){return t.is(e,r)})},child:function(n,r){return e.child(n,function(e){return t.is(e,r)})},descendant:function(e,n){return t.one(n,e)},closest:function(e,o,i){return n(t.is,r,e,o,i)}}}),n("ephox.sugar.api.search.SelectorExists",["ephox.sugar.api.search.SelectorFind"],function(e){return{any:function(t){return e.first(t).isSome()},ancestor:function(t,n,r){return e.ancestor(t,n,r).isSome()},sibling:function(t,n){return e.sibling(t,n).isSome()},child:function(t,n){return e.child(t,n).isSome()},descendant:function(t,n){return e.descendant(t,n).isSome()},closest:function(t,n,r){return e.closest(t,n,r).isSome()}}}),n("tinymce.core.dom.Empty",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorExists","tinymce.core.caret.CaretCandidate","tinymce.core.dom.NodeType","tinymce.core.dom.TreeWalker"],function(e,t,n,r,o,i,a){var s=function(a,s){return o.isCaretCandidate(s)&&!1===(u=a,i.isText(l=s)&&/^[ \t\r\n]*$/.test(l.data)&&!1===(d=l,f=n.fromDom(u),m=n.fromDom(d),r.ancestor(m,"pre,code",e.curry(t.eq,f))))||i.isElement(p=s)&&"A"===p.nodeName&&p.hasAttribute("name")||c(s);var u,l,d,f,m,p},c=i.hasAttribute("data-mce-bookmark"),u=i.hasAttribute("data-mce-bogus"),l=i.hasAttributeValue("data-mce-bogus","all");return{isEmpty:function(e){return function(e){var t,n,r=0;if(s(e,e))return!1;if(!(n=e.firstChild))return!0;t=new a(n,e);do{if(l(n))n=t.next(!0);else if(u(n))n=t.next();else if(i.isBr(n))r++,n=t.next();else{if(s(e,n))return!1;n=t.next()}}while(n);return r<=1}(e.dom())}}}),n("tinymce.core.delete.BlockBoundary",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.katamari.api.Struct","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.delete.DeleteUtils","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p){var h=o.immutable("block","position"),g=o.immutable("from","to"),v=function(e,t){var n=a.fromDom(e),r=a.fromDom(t.container());return f.getParentBlock(n,r).map(function(e){return h(e,t)})};return{read:function(e,t,o){return o.collapsed?(s=t,f=(c=v(a=e,d.fromRangeStart(o))).bind(function(e){return l.fromPosition(s,a,e.position()).bind(function(e){return v(a,e).map(function(e){return t=a,r=s,p.isBr((o=e).position().getNode())&&!1===m.isEmpty(o.block())?l.positionIn(!1,o.block().dom()).bind(function(e){return e.isEqual(o.position())?l.fromPosition(r,t,e).bind(function(e){return v(t,e)}):n.some(o)}).getOr(o):o;var t,r,o})})}),r.liftN([c,f],g).filter(function(e){return!1===i.eq((r=e).from().block(),r.to().block())&&u.parent((n=e).from().block()).bind(function(e){return u.parent(n.to().block()).filter(function(t){return i.eq(e,t)})}).isSome()&&!1===p.isContentEditableFalse((t=e).from().block())&&!1===p.isContentEditableFalse(t.to().block());var t,n,r})):n.none();var a,s,c,f}}}),n("tinymce.core.dom.Parents",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(e,r,o){return t.contains(r,e)?n.parents(e,function(e){return o(e)||t.eq(e,r)}).slice(0,-1):[]},o=function(t,n){return r(t,n,e.constant(!1))};return{parentsUntil:r,parents:o,parentsAndSelf:function(e,t){return[e].concat(o(e,t))}}}),n("tinymce.core.delete.MergeBlocks",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.dom.ElementType","tinymce.core.dom.Empty","tinymce.core.dom.NodeType","tinymce.core.dom.PaddingBr","tinymce.core.dom.Parents"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m){var p=function(e,t){s.positionIn(e,t.dom()).each(function(e){var t=e.getNode();d.isBr(t)&&o.remove(i.fromDom(t))})},h=function(t,n){var r=m.parentsAndSelf(n,t);return e.find(r.reverse(),l.isEmpty).each(o.remove)},g=function(i,d,m){if(l.isEmpty(m))return o.remove(m),l.isEmpty(d)&&f.fillWithPaddingBr(d),s.firstPositionIn(d.dom());p(!0,d),p(!1,m);var g,v,y,b,x=(g=a.children(d),v=e.findIndex(g,u.isBlock).fold(function(){return g},function(e){return g.slice(0,e)}),e.each(v,function(e){o.remove(e)}),v);return(y=d,b=m,n.contains(b,y)?a.parent(y).bind(function(e){return n.eq(e,b)?t.some(y):(r=b,o=a.parents(y,function(e){return n.eq(e,r)}),t.from(o[o.length-2]));var r,o}):t.none()).fold(function(){h(i,d);var t=s.lastPositionIn(m.dom());return e.each(x,function(e){r.append(m,e)}),t},function(t){var n=s.prevPosition(m.dom(),c.before(t.dom()));return e.each(x,function(e){r.before(t,e)}),h(i,d),n})};return{mergeBlocks:function(e,t,n,r){return t?g(e,r,n):g(e,n,r)}}}),n("tinymce.core.delete.BlockBoundaryDelete",["ephox.sugar.api.node.Element","tinymce.core.delete.BlockBoundary","tinymce.core.delete.MergeBlocks"],function(e,t,n){return{backspaceDelete:function(r,o){var i,a=e.fromDom(r.getBody());return(i=t.read(a.dom(),o,r.selection.getRng()).bind(function(e){return n.mergeBlocks(a,o,e.from().block(),e.to().block())})).each(function(e){r.selection.setRng(e.toRange())}),i.isSome()}}}),n("tinymce.core.delete.BlockRangeDelete",["ephox.katamari.api.Fun","ephox.katamari.api.Options","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.PredicateFind","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.delete.DeleteUtils","tinymce.core.delete.MergeBlocks","tinymce.core.dom.ElementType"],function(e,t,n,r,o,i,a,s,c,u){var l=function(t,i){var a=r.fromDom(i),s=e.curry(n.eq,t);return o.ancestor(a,u.isTableCell,s).isSome()};return{backspaceDelete:function(e,o){return!e.selection.isCollapsed()&&(u=e,e.selection.getRng(),C=r.fromDom(u.getBody()),g=u.selection.getRng(),b=i.prevPosition((h=C).dom(),a.fromRangeStart(g)).isNone(),x=i.nextPosition(h.dom(),a.fromRangeEnd(g)).isNone(),!l(v=h,(y=g).startContainer)&&!l(v,y.endContainer)&&b&&x?((p=u).setContent(""),p.selection.setCursorLocation(),!0):(d=C,m=(f=u.selection).getRng(),t.liftN([s.getParentBlock(d,r.fromDom(m.startContainer)),s.getParentBlock(d,r.fromDom(m.endContainer))],function(e,t){return!1===n.eq(e,t)&&(m.deleteContents(),c.mergeBlocks(d,!0,e,t).each(function(e){f.setRng(e.toRange())}),!0)}).getOr(!1)));var u,d,f,m,p,h,g,v,y,b,x,C}}}),n("ephox.katamari.api.Adt",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Type","global!Array","global!Error","global!console"],function(e,t,n,r,o,i){return{generate:function(a){if(!n.isArray(a))throw new o("cases must be an array");if(0===a.length)throw new o("there must be at least one case");var s=[],c={};return e.each(a,function(u,l){var d=t.keys(u);if(1!==d.length)throw new o("one and only one name per case");var f=d[0],m=u[f];if(void 0!==c[f])throw new o("duplicate key detected:"+f);if("cata"===f)throw new o("cannot have a case named cata (sorry)");if(!n.isArray(m))throw new o("case arguments must be an array");s.push(f),c[f]=function(){var n=arguments.length;if(n!==m.length)throw new o("Wrong number of arguments to case "+f+". Expected "+m.length+" ("+m+"), got "+n);for(var c=new r(n),u=0;u<c.length;u++)c[u]=arguments[u];return{fold:function(){if(arguments.length!==a.length)throw new o("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[l].apply(null,c)},match:function(n){var r=t.keys(n);if(s.length!==r.length)throw new o("Wrong number of arguments to match. Expected: "+s.join(",")+"\nActual: "+r.join(","));if(!e.forall(s,function(t){return e.contains(r,t)}))throw new o("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+s.join(", "));return n[f].apply(null,c)},log:function(e){i.log(e,{constructors:s,constructor:f,params:c})}}}}),c}}}),n("tinymce.core.delete.CefDeleteAction",["ephox.katamari.api.Adt","ephox.katamari.api.Option","ephox.sugar.api.node.Element","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.delete.DeleteUtils","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a,s,c){var u=e.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),l=function(e,r,o,i){var c=i.getNode(!1===r);return a.getParentBlock(n.fromDom(e),n.fromDom(o.getNode())).map(function(e){return s.isEmpty(e)?u.remove(e.dom()):u.moveToElement(c)}).orThunk(function(){return t.some(u.moveToElement(c))})},d=function(e,n,o){return r.fromPosition(n,e,o).bind(function(r){return n&&c.isContentEditableFalse(r.getNode())?l(e,n,o,r):!1===n&&c.isContentEditableFalse(r.getNode(!0))?l(e,n,o,r):n&&i.isAfterContentEditableFalse(o)?t.some(u.moveToPosition(r)):!1===n&&i.isBeforeContentEditableFalse(o)?t.some(u.moveToPosition(r)):t.none()})};return{read:function(e,n,r){var a,s,l,f,m,p,h,g,v=i.normalizeRange(n?1:-1,e,r),y=o.fromRangeStart(v);return!1===n&&i.isAfterContentEditableFalse(y)?t.some(u.remove(y.getNode(!0))):n&&i.isBeforeContentEditableFalse(y)?t.some(u.remove(y.getNode())):(a=e,h=(l=y).getNode(!1===(p=s=n)),g=p?"after":"before",c.isElement(h)&&h.getAttribute("data-mce-caret")===g?(f=s,m=l.getNode(!1===s),f&&c.isContentEditableFalse(m.nextSibling)?t.some(u.moveToElement(m.nextSibling)):!1===f&&c.isContentEditableFalse(m.previousSibling)?t.some(u.moveToElement(m.previousSibling)):t.none()).fold(function(){return d(a,s,l)},t.some):d(a,s,l).bind(function(e){return n=a,r=l,e.fold(function(e){return t.some(u.remove(e))},function(e){return t.some(u.moveToElement(e))},function(e){return i.isInSameBlock(r,e,n)?t.none():t.some(u.moveToPosition(e))});var n,r}))}}}),n("tinymce.core.delete.DeleteElement",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m){var p=function(e,t){return r=e,o=(n=t).container(),i=n.offset(),!1===d.isTextPosition(n)&&o===r.parentNode&&i>d.before(r).offset()?new d(t.container(),t.offset()-1):t;var n,r,o,i},h=function(e){return u.isCaretCandidate(e.previousSibling)?t.some(m.isText(n=e.previousSibling)?new d(n,n.data.length):d.after(n)):e.previousSibling?l.lastPositionIn(e.previousSibling):t.none();var n},g=function(e){return u.isCaretCandidate(e.nextSibling)?t.some(m.isText(n=e.nextSibling)?new d(n,0):d.before(n)):e.nextSibling?l.firstPositionIn(e.nextSibling):t.none();var n},v=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})},y=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(a.name(t))},b=function(e){if(f.isEmpty(e)){var n=i.fromHtml('<br data-mce-bogus="1">');return o.empty(e),r.append(e,n),t.some(d.before(n.dom()))}return t.none()};return{deleteElement:function(r,i,a){var u,f,x,C,w,k,S,T,E,R,N,A,D,P=(C=i,w=r.getBody(),k=a.dom(),(N=C,A=w,D=k,N?(E=A,R=D,g(R).orThunk(function(){return h(R)}).orThunk(function(){return l.nextPosition(e=E,d.after(n=R)).fold(function(){return l.prevPosition(e,d.before(n))},t.some);var e,n})):(S=A,T=D,h(T).orThunk(function(){return g(T)}).orThunk(function(){return e=S,r=d.before((n=T).previousSibling?n.previousSibling:n.parentNode),l.prevPosition(e,r).fold(function(){return l.nextPosition(e,d.after(n))},t.some);var e,n,r}))).map(e.curry(p,k))),B=s.ancestor(a,e.curry(y,r),(u=r.getBody(),function(e){return e.dom()===u})),_=(x=P,n.liftN([c.prevSibling(f=a),c.nextSibling(f),x],function(e,t,n){var r,i=e.dom(),a=t.dom();return m.isText(i)&&m.isText(a)?(r=i.data.length,i.appendData(a.data),o.remove(t),o.remove(f),n.container()===a?new d(i,r):n):(o.remove(f),n)}).orThunk(function(){return o.remove(f),x}));r.dom.isEmpty(r.getBody())?(r.setContent(""),r.selection.setCursorLocation()):B.bind(b).fold(function(){v(r,i,_)},function(e){v(r,i,t.some(e))})}}}),n("tinymce.core.delete.CefDelete",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFilter","tinymce.core.caret.CaretPosition","tinymce.core.delete.CefDeleteAction","tinymce.core.delete.DeleteElement","tinymce.core.delete.DeleteUtils","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a,s,c){return{backspaceDelete:function(u,l){return u.selection.isCollapsed()?(g=l,i.read((h=u).getBody(),g,h.selection.getRng()).map(function(e){return e.fold((s=h,c=g,function(e){return s._selectionOverrides.hideFakeCaret(),a.deleteElement(s,c,n.fromDom(e)),!0}),(r=h,i=g,function(e){var t=i?o.before(e):o.after(e);return r.selection.setRng(t.toRange()),!0}),(t=h,function(e){return t.selection.setRng(e.toRange()),!0}));var t,r,i,s,c}).getOr(!1)):(f=l,p=(d=u).selection.getNode(),!!c.isContentEditableFalse(p)&&(m=n.fromDom(d.getBody()),e.each(r.descendants(m,".mce-offscreen-selection"),t.remove),a.deleteElement(d,f,n.fromDom(d.selection.getNode())),s.paddEmptyBody(d),!0));var d,f,m,p,h,g},paddEmptyElement:function(e){var t,n=function(e,t){for(;t&&t!==e;){if(c.isContentEditableTrue(t)||c.isContentEditableFalse(t))return t;t=t.parentNode}return null}(e.getBody(),e.selection.getNode());return c.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)&&(t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng(o.before(t).toRange())),!0}}}),n("tinymce.core.caret.CaretContainerInline",["ephox.katamari.api.Fun","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(e,t,n){var r=t.isText,o=function(e){return r(e)&&e.data[0]===n.ZWSP},i=function(e){return r(e)&&e.data[e.data.length-1]===n.ZWSP},a=function(e){return e.ownerDocument.createTextNode(n.ZWSP)},s=function(e,t){return e?function(e){if(r(e.previousSibling))return i(e.previousSibling)?e.previousSibling:(e.previousSibling.appendData(n.ZWSP),e.previousSibling);if(r(e))return o(e)?e:(e.insertData(0,n.ZWSP),e);var t=a(e);return e.parentNode.insertBefore(t,e),t}(t):function(e){if(r(e.nextSibling))return o(e.nextSibling)?e.nextSibling:(e.nextSibling.insertData(0,n.ZWSP),e.nextSibling);if(r(e))return i(e)?e:(e.appendData(n.ZWSP),e);var t=a(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}(t)};return{insertInline:s,insertInlineBefore:e.curry(s,!0),insertInlineAfter:e.curry(s,!1)}}),n("tinymce.core.caret.CaretContainerRemove",["ephox.katamari.api.Arr","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(e,t,n,r,o){var i=r.isElement,a=r.isText,s=function(e){var t=e.parentNode;t&&t.removeChild(e)},c=function(e,t){0===t.length?s(e):e.nodeValue=t},u=function(e){var t=o.trim(e);return{count:e.length-t.length,text:t}},l=function(e,t){return d(e),t},d=function(e){if(i(e)&&t.isCaretContainer(e)&&(t.hasContent(e)?e.removeAttribute("data-mce-caret"):s(e)),a(e)){var n=o.trim(function(e){try{return e.nodeValue}catch(e){return""}}(e));c(e,n)}};return{removeAndReposition:function(t,r){return n.isTextPosition(r)?(p=t,(h=r).container()===p?(y=u((g=p).data.substr(0,(v=h).offset())),b=u(g.data.substr(v.offset())),(x=y.text+b.text).length>0?(c(g,x),new n(g,v.offset()-y.count)):v):l(p,h)):(o=t,(i=r).container()===o.parentNode?(a=o,f=(s=i).container(),m=e.indexOf(f.childNodes,a).map(function(e){return e<s.offset()?new n(f,s.offset()-1):s}).getOr(s),d(a),m):l(o,i));var o,i,a,s,f,m,p,h,g,v,y,b,x},remove:d}}),n("tinymce.core.keyboard.BoundaryCaret",["ephox.katamari.api.Option","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretContainerInline","tinymce.core.caret.CaretContainerRemove","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.keyboard.InlineUtils"],function(e,t,n,r,o,i,a,s){var c=function(e,t){return a.isText(e.container())?n.insertInline(t,e.container()):n.insertInline(t,e.getNode())},u=function(e,n){var r=n.get();return r&&e.container()===r&&t.isCaretContainerInline(r)};return{renderCaret:function(t,a){return a.fold(function(o){r.remove(t.get());var a=n.insertInlineBefore(o);return t.set(a),e.some(new i(a,a.length-1))},function(e){return o.firstPositionIn(e).map(function(e){if(u(e,t))return new i(t.get(),1);r.remove(t.get());var n=c(e,!0);return t.set(n),new i(n,1)})},function(e){return o.lastPositionIn(e).map(function(e){if(u(e,t))return new i(t.get(),t.get().length-1);r.remove(t.get());var n=c(e,!1);return t.set(n),new i(n,n.length-1)})},function(o){r.remove(t.get());var a=n.insertInlineAfter(o);return t.set(a),e.some(new i(a,1))})}}}),n("tinymce.core.fmt.FormatUtils",["tinymce.core.dom.TreeWalker"],function(e){var t=function(e){return e&&/^(IMG)$/.test(e.nodeName)},n=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},r=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t};return{isInlineBlock:t,moveStart:function(r,o,i){var a,s,c,u=i.startContainer,l=i.startOffset;if((i.startContainer!==i.endContainer||!t(i.startContainer.childNodes[i.startOffset]))&&(3===u.nodeType&&l>=u.nodeValue.length&&(l=r.nodeIndex(u),u=u.parentNode),1===u.nodeType))for(l<(c=u.childNodes).length?a=new e(u=c[l],r.getParent(u,r.isBlock)):(a=new e(u=c[c.length-1],r.getParent(u,r.isBlock))).next(!0),s=a.current();s;s=a.next())if(3===s.nodeType&&!n(s))return i.setStart(s,0),void o.setRng(i)},getNonWhiteSpaceSibling:function(e,t,r){if(e)for(t=t?"nextSibling":"previousSibling",e=r?e:e[t];e;e=e[t])if(1===e.nodeType||!n(e))return e},isTextBlock:function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},isValid:function(e,t,n){return e.schema.isValidChild(t,n)},isWhiteSpaceNode:n,replaceVars:function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e},isEq:function(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},normalizeStyleValue:r,getStyle:function(e,t,n){return r(e,e.getStyle(t,n),n)},getTextDecoration:function(e,t){var n;return e.getParent(t,function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n}),n},getParents:function(e,t,n){return e.getParents(t,n,e.getRoot())}}}),n("tinymce.core.fmt.ExpandRange",["tinymce.core.dom.Bookmarks","tinymce.core.dom.TreeWalker","tinymce.core.fmt.FormatUtils","tinymce.core.selection.RangeNodes"],function(e,t,n,r){var o=e.isBookmarkNode,i=n.getParents,a=n.isWhiteSpaceNode,s=n.isTextBlock,c=function(e,t){for("undefined"==typeof t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},u=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},l=function(e,t,n,r){var o,i,a=n.nodeValue;return"undefined"==typeof r&&(r=e?a.length:0),e?-1===(o=(o=a.lastIndexOf(" ",r))>(i=a.lastIndexOf("\xa0",r))?o:i)||t||o++:(o=a.indexOf(" ",r),i=a.indexOf("\xa0",r),o=-1!==o&&(-1===i||o<i)?o:i),o},d=function(e,n,r,o,i,a){var s,c,u,d;if(3===r.nodeType){if(-1!==(u=l(i,a,r,o)))return{container:r,offset:u};d=r}for(s=new t(r,e.getParent(r,e.isBlock)||n);c=s[i?"prev":"next"]();)if(3===c.nodeType){if(d=c,-1!==(u=l(i,a,c)))return{container:c,offset:u}}else if(e.isBlock(c))break;if(d)return{container:d,offset:o=i?0:d.length}},f=function(e,t,n,r,o){var a,s,c,u;for(3===r.nodeType&&0===r.nodeValue.length&&r[o]&&(r=r[o]),a=i(e,r),s=0;s<a.length;s++)for(c=0;c<t.length;c++)if(!("collapsed"in(u=t[c])&&u.collapsed!==n.collapsed)&&e.is(a[s],u.selector))return a[s];return r},m=function(e,t,r,o){var a,c=e.dom,u=c.getRoot();if(t[0].wrapper||(a=c.getParent(r,t[0].block,u)),!a){var l=c.getParent(r,"LI,TD,TH");a=c.getParent(3===r.nodeType?r.parentNode:r,function(t){return t!==u&&s(e,t)},l)}if(a&&t[0].wrapper&&(a=i(c,a,"ul,ol").reverse()[0]||a),!a)for(a=r;a[o]&&!c.isBlock(a[o])&&!n.isEq(a=a[o],"br"););return a||r},p=function(e,t,n,r,i,s,c){var u,l,d,f,m,p;if(u=l=c?n:i,f=c?"previousSibling":"nextSibling",m=e.getRoot(),3===u.nodeType&&!a(u)&&(c?r>0:s<u.nodeValue.length))return u;for(;;){if(!t[0].block_expand&&e.isBlock(l))return l;for(d=l[f];d;d=d[f])if(!o(d)&&!a(d)&&("BR"!==(p=d).nodeName||!p.getAttribute("data-mce-bogus")||p.nextSibling))return l;if(l===m||l.parentNode===m){u=l;break}l=l.parentNode}return u};return{expandRng:function(e,t,n,i){var a,s=t.startContainer,l=t.startOffset,h=t.endContainer,g=t.endOffset,v=e.dom;return 1===s.nodeType&&s.hasChildNodes()&&3===(s=r.getNode(s,l)).nodeType&&(l=0),1===h.nodeType&&h.hasChildNodes()&&3===(h=r.getNode(h,t.collapsed?g:g-1)).nodeType&&(g=h.nodeValue.length),s=u(v,s),h=u(v,h),(o(s.parentNode)||o(s))&&3===(s=(s=o(s)?s:s.parentNode).nextSibling||s).nodeType&&(l=0),(o(h.parentNode)||o(h))&&3===(h=(h=o(h)?h:h.parentNode).previousSibling||h).nodeType&&(g=h.length),n[0].inline&&(t.collapsed&&((a=d(v,e.getBody(),s,l,!0,i))&&(s=a.container,l=a.offset),(a=d(v,e.getBody(),h,g,!1,i))&&(h=a.container,g=a.offset)),h=i?h:function(e,t){var n=c(e,g);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=c(n.node.previousSibling);n.node&&n.offset>0&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&n.offset>1&&(e=n.node).splitText(n.offset-1)}return e}(h)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===s.nodeType&&0!==l||(s=p(v,n,s,l,h,g,!0)),n[0].inline&&3===h.nodeType&&g!==h.nodeValue.length||(h=p(v,n,s,l,h,g,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(s=f(v,n,t,s,"previousSibling"),h=f(v,n,t,h,"nextSibling")),(n[0].block||n[0].selector)&&(s=m(e,n,s,"previousSibling"),h=m(e,n,h,"nextSibling"),n[0].block&&(v.isBlock(s)||(s=p(v,n,s,l,h,g,!0)),v.isBlock(h)||(h=p(v,n,s,l,h,g,!1)))),1===s.nodeType&&(l=v.nodeIndex(s),s=s.parentNode),1===h.nodeType&&(g=v.nodeIndex(h)+1,h=h.parentNode),{startContainer:s,startOffset:l,endContainer:h,endOffset:g}}}}),n("tinymce.core.fmt.MatchFormat",["tinymce.core.fmt.FormatUtils"],function(e){var t=e.isEq,n=function(e,t,n){var r=e.formatter.get(n);if(r)for(var o=0;o<r.length;o++)if(!1===r[o].inherit&&e.dom.is(t,r[o].selector))return!0;return!1},r=function(e,t,r,o){var i=e.dom.getRoot();return t!==i&&(t=e.dom.getParent(t,function(t){return!!n(e,t,r)||t.parentNode===i||!!a(e,t,r,o,!0)}),a(e,t,r,o))},o=function(e,n,r){return!!t(n,r.inline)||!!t(n,r.block)||(r.selector?1===n.nodeType&&e.is(n,r.selector):void 0)},i=function(n,r,o,i,a,s){var c,u,l,d=o[i];if(o.onmatch)return o.onmatch(r,o,i);if(d)if("undefined"==typeof d.length){for(c in d)if(d.hasOwnProperty(c)){if(u="attributes"===i?n.getAttrib(r,c):e.getStyle(n,r,c),a&&!u&&!o.exact)return;if((!a||o.exact)&&!t(u,e.normalizeStyleValue(n,e.replaceVars(d[c],s),c)))return}}else for(l=0;l<d.length;l++)if("attributes"===i?n.getAttrib(r,d[l]):e.getStyle(n,r,d[l]))return o;return o},a=function(e,t,n,r,a){var s,c,u,l,d=e.formatter.get(n),f=e.dom;if(d&&t)for(c=0;c<d.length;c++)if(o(e.dom,t,s=d[c])&&i(f,t,s,"attributes",a,r)&&i(f,t,s,"styles",a,r)){if(l=s.classes)for(u=0;u<l.length;u++)if(!e.dom.hasClass(t,l[u]))return;return s}};return{matchNode:a,matchName:o,match:function(e,t,n,o){var i;return o?r(e,o,t,n):(o=e.selection.getNode(),!!r(e,o,t,n)||!((i=e.selection.getStart())===o||!r(e,i,t,n)))},matchAll:function(e,t,n){var r,o=[],i={};return r=e.selection.getStart(),e.dom.getParent(r,function(r){var s,c;for(s=0;s<t.length;s++)!i[c=t[s]]&&a(e,r,c,n)&&(i[c]=!0,o.push(c))},e.dom.getRoot()),o},canApply:function(t,n){var r,o,i,a,s,c=t.formatter.get(n),u=t.dom;if(c)for(r=t.selection.getStart(),o=e.getParents(u,r),a=c.length-1;a>=0;a--){if(!(s=c[a].selector)||c[a].defaultBlock)return!0;for(i=o.length-1;i>=0;i--)if(u.is(o[i],s))return!0}return!1},matchesUnInheritedFormatSelector:n}}),n("tinymce.core.selection.SplitRange",["tinymce.core.dom.NodeType"],function(e){var t=function(e,t){return e.splitText(t)};return{split:function(n){var r=n.startContainer,o=n.startOffset,i=n.endContainer,a=n.endOffset;return r===i&&e.isText(r)?o>0&&o<r.nodeValue.length&&(r=(i=t(r,o)).previousSibling,a>o?(r=i=t(i,a-=o).previousSibling,a=i.nodeValue.length,o=0):a=0):(e.isText(r)&&o>0&&o<r.nodeValue.length&&(r=t(r,o),o=0),e.isText(i)&&a>0&&a<i.nodeValue.length&&(a=(i=t(i,a).previousSibling).nodeValue.length)),{startContainer:r,startOffset:o,endContainer:i,endOffset:a}}}}),n("tinymce.core.fmt.CaretFormat",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.dom.PaddingBr","tinymce.core.dom.TreeWalker","tinymce.core.fmt.ExpandRange","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.MatchFormat","tinymce.core.selection.SplitRange","tinymce.core.text.Zwsp","tinymce.core.util.Fun"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p,h){var g=p.ZWSP,v="_mce_caret",y=function(e){return 1===e.nodeType&&e.id===v},b=function(e){var t;if(e)for(e=(t=new u(e,e)).current();e;e=t.next())if(3===e.nodeType)return e;return null},x=function(e){var n=r.fromTag("span");return i.setAll(n,{id:v,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&t.append(n,r.fromText(g)),n},C=function(e,t){for(;t&&t!==e;){if(t.id===v)return t;t=t.parentNode}return null},w=function(e,t,n,o){var i,a,s,u;i=t.getRng(!0),a=e.getParent(n,e.isBlock),function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==g||e.childNodes.length>1)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(n).length>0?(!1!==o&&(i.setStartBefore(n),i.setEndBefore(n)),e.remove(n)):((u=b(n))&&u.nodeValue.charAt(0)===g&&u.deleteData(0,1),i.startContainer===(s=u)&&i.startOffset>0&&i.setStart(s,i.startOffset-1),i.endContainer===s&&i.endOffset>0&&i.setEnd(s,i.endOffset-1),e.remove(n,!0)),a&&e.isEmpty(a)&&c.fillWithPaddingBr(r.fromDom(a)),t.setRng(i)},k=function(e,t,n,r,o){if(r)w(t,n,r,o);else if(!(r=C(e,n.getStart())))for(;r=t.get(v);)w(t,n,r,!1)},S=function(e,t){return e.appendChild(t),t},T=function(t,n){var r=e.foldr(t,function(e,t){return S(e,t.cloneNode(!1))},n);return S(r,r.ownerDocument.createTextNode(g))};return{setup:function(e){var t=e.dom,n=e.selection,r=e.getBody();e.on("mouseup keydown",function(e){var o,i,a,s;s=e.keyCode,k(o=r,i=t,a=n,null,!1),8===s&&a.isCollapsed()&&a.getStart().innerHTML===g&&k(o,i,a,C(o,a.getStart())),37!==s&&39!==s||k(o,i,a,C(o,a.getStart()))})},applyCaretFormat:function(e,t,n){var r,o,i,a,s,c,u=e.selection;a=(r=u.getRng(!0)).startOffset,c=r.startContainer.nodeValue,(o=C(e.getBody(),u.getStart()))&&(i=b(o));var d,f,p=/[^\s\u00a0\u00ad\u200b\ufeff]/;c&&a>0&&a<c.length&&p.test(c.charAt(a))&&p.test(c.charAt(a-1))?(s=u.getBookmark(),r.collapse(!0),r=l.expandRng(e,r,e.formatter.get(t)),r=m.split(r),e.formatter.apply(t,n,r),u.moveToBookmark(s)):(o&&i.nodeValue===g?e.formatter.apply(t,n,o):(d=e.getDoc(),f=x(!0).dom(),i=(o=d.importNode(f,!0)).firstChild,r.insertNode(o),a=1,e.formatter.apply(t,n,o)),u.setCursorLocation(i,a))},removeCaretFormat:function(e,t,n,o){var i,a,s,u,p,g,v,y,b,k,S,E=e.dom,R=e.selection,N=R.getRng(!0),A=[];for(u=i=N.startContainer,3===i.nodeType&&(N.startOffset!==i.nodeValue.length&&(s=!0),u=u.parentNode);u;){if(f.matchNode(e,u,t,n,o)){p=u;break}u.nextSibling&&(s=!0),A.push(u),u=u.parentNode}if(p)if(s)a=R.getBookmark(),N.collapse(!0),N=l.expandRng(e,N,e.formatter.get(t),!0),N=m.split(N),e.formatter.remove(t,n,N),R.moveToBookmark(a);else{g=C(e.getBody(),p);var D=x(!1).dom(),P=T(A,D);y=D,(S=(k=(v=e).dom).getParent(b=g||p,h.curry(d.isTextBlock,v)))&&k.isEmpty(S)?b.parentNode.replaceChild(y,b):(c.removeTrailingBr(r.fromDom(b)),k.isEmpty(b)?b.parentNode.replaceChild(y,b):k.insertAfter(y,b)),w(E,R,g,!1),R.setCursorLocation(P,1),E.isEmpty(p)&&E.remove(p)}},isCaretNode:y,getParentCaretContainer:C,replaceWithCaretFormat:function(e,o){var i=x(!1),s=T(o,i.dom());return t.before(r.fromDom(e),i),n.remove(r.fromDom(e)),a(s,0)},isFormatElement:function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(o.name(t))&&!y(t.dom())&&!s.isBogus(t.dom())}}}),n("tinymce.core.util.LazyEvaluator",["ephox.katamari.api.Option"],function(e){return{evaluateUntil:function(t,n){for(var r=0;r<t.length;r++){var o=t[r].apply(null,n);if(o.isSome())return o}return e.none()}}}),n("tinymce.core.keyboard.BoundaryLocation",["ephox.katamari.api.Adt","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretUtils","tinymce.core.fmt.CaretFormat","tinymce.core.keyboard.InlineUtils","tinymce.core.util.LazyEvaluator"],function(e,t,n,r,o,i,a,s,c){var u=e.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),l=function(e,t){return i.getParentBlock(t,e)||e},d=function(e,r,i){var a=s.normalizeForwards(i),c=l(r,a.container());return s.findRootInline(e,c,a).fold(function(){return o.nextPosition(c,a).bind(t.curry(s.findRootInline,e,c)).map(function(e){return u.before(e)})},n.none)},f=function(e,t){return null===a.getParentCaretContainer(e,t)},m=function(e,n,r){return s.findRootInline(e,n,r).filter(t.curry(f,n))},p=function(e,t,r){var i=s.normalizeBackwards(r);return m(e,t,i).bind(function(e){return o.prevPosition(e,i).isNone()?n.some(u.start(e)):n.none()})},h=function(e,t,r){var i=s.normalizeForwards(r);return m(e,t,i).bind(function(e){return o.nextPosition(e,i).isNone()?n.some(u.end(e)):n.none()})},g=function(e,r,i){var a=s.normalizeBackwards(i),c=l(r,a.container());return s.findRootInline(e,c,a).fold(function(){return o.prevPosition(c,a).bind(t.curry(s.findRootInline,e,c)).map(function(e){return u.after(e)})},n.none)},v=function(e){return!1===s.isRtl(b(e))},y=function(e,t,n){return c.evaluateUntil([d,p,h,g],[e,t,n]).filter(v)},b=function(e){return e.fold(t.identity,t.identity,t.identity,t.identity)},x=function(e){return e.fold(t.constant("before"),t.constant("start"),t.constant("end"),t.constant("after"))},C=function(e){return e.fold(u.before,u.before,u.after,u.after)},w=function(e,t,n,o,i,a){return r.liftN([s.findRootInline(t,n,o),s.findRootInline(t,n,i)],function(t,r){return t!==r&&s.hasSameParentBlock(n,t,r)?u.after(e?t:r):a}).getOr(a)},k=function(e,n){return e.fold(t.constant(!0),function(e){return r=n,!(x(t=e)===x(r)&&b(t)===b(r));var t,r})},S=function(e,r){return e?r.fold(t.compose(n.some,u.start),n.none,t.compose(n.some,u.after),n.none):r.fold(n.none,t.compose(n.some,u.before),n.none,t.compose(n.some,u.end))},T=function(e,n,r,i){var a=s.normalizePosition(e,i),c=y(n,r,a);return y(n,r,a).bind(t.curry(S,e)).orThunk(function(){return u=n,l=r,d=c,f=s.normalizePosition(a=e,i),o.fromPosition(a,l,f).map(t.curry(s.normalizePosition,a)).fold(function(){return d.map(C)},function(e){return y(u,l,e).map(t.curry(w,a,u,l,f,e)).filter(t.curry(k,d))}).filter(v);var a,u,l,d,f})};return{readLocation:y,findLocation:T,prevLocation:t.curry(T,!1),nextLocation:t.curry(T,!0),getElement:b,outside:C,inside:function(e){return e.fold(u.start,u.start,u.end,u.end)}}}),n("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),n("tinymce.core.selection.WordSelection",["ephox.katamari.api.Type","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition"],function(e,t,n){var r=function(t){return e.isFunction(t.selection.getSel().modify)},o=function(e,t,r){var o=e?1:-1;return t.setRng(n(r.container(),r.offset()+o).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};return{hasSelectionModifyApi:r,moveByWord:function(e,i){var a=i.selection.getRng(),s=e?n.fromRangeEnd(a):n.fromRangeStart(a);return!!r(i)&&(e&&t.isBeforeInline(s)?o(!0,i.selection,s):!(e||!t.isAfterInline(s))&&o(!1,i.selection,s))}}}),n("tinymce.core.keyboard.BoundarySelection",["ephox.katamari.api.Arr","ephox.katamari.api.Cell","ephox.katamari.api.Fun","tinymce.core.caret.CaretContainerRemove","tinymce.core.caret.CaretPosition","tinymce.core.keyboard.BoundaryCaret","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.InlineUtils","tinymce.core.selection.WordSelection"],function(e,t,n,r,o,i,a,s,c){var u=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},l=function(e){return!1!==e.settings.inline_boundaries},d=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},f=function(e,t,n){return i.renderCaret(t,n).map(function(t){return u(e,t),n})},m=function(e,t,n){return function(){return!!l(t)&&c.moveByWord(e,t)}};return{move:function(e,t,r){return function(){return!!l(e)&&(i=e,c=t,u=r,d=i.getBody(),m=o.fromRangeStart(i.selection.getRng()),p=n.curry(s.isInlineTarget,i),a.findLocation(u,p,d,m).bind(function(e){return f(i,c,e)})).isSome();var i,c,u,d,m,p}},moveNextWord:n.curry(m,!0),movePrevWord:n.curry(m,!1),setupSelectedState:function(i){var c=new t(null),m=n.curry(s.isInlineTarget,i);return i.on("NodeChange",function(t){var p,h,g,v;l(i)&&(p=m,h=t.parents,g=e.filter(i.dom.select('*[data-mce-selected="inline-boundary"]'),p),v=e.filter(h,p),e.each(e.difference(g,v),n.curry(d,!1)),e.each(e.difference(v,g),n.curry(d,!0)),function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=o.fromRangeStart(e.selection.getRng());o.isTextPosition(n)&&!1===s.isAtZwsp(n)&&(u(e,r.removeAndReposition(t.get(),n)),t.set(null))}}(i,c),function(t,n,r,i){if(n.selection.isCollapsed()){var s=e.filter(i,t);e.each(s,function(e){var i=o.fromRangeStart(n.selection.getRng());a.readLocation(t,n.getBody(),i).bind(function(e){return f(n,r,e)})})}}(m,i,c,t.parents))}),c},setCaretPosition:u}}),n("tinymce.core.delete.InlineBoundaryDelete",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Element","global!document","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.delete.DeleteElement","tinymce.core.keyboard.BoundaryCaret","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.InlineUtils"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m){var p=function(e,t){return function(n){return l.renderCaret(t,n).map(function(t){return f.setCaretPosition(e,t),!0}).getOr(!1)}},h=function(t,n,r,i){var a=t.getBody(),c=e.curry(m.isInlineTarget,t);t.undoManager.ignore(function(){var e,u,l;t.selection.setRng((e=r,u=i,(l=o.createRange()).setStart(e.container(),e.offset()),l.setEnd(u.container(),u.offset()),l)),t.execCommand("Delete"),d.readLocation(c,a,s.fromRangeStart(t.selection.getRng())).map(d.inside).map(p(t,n))}),t.nodeChanged()};return{backspaceDelete:function(o,i,l){if(o.selection.isCollapsed()&&!1!==o.settings.inline_boundaries){var f=s.fromRangeStart(o.selection.getRng());return v=i,y=l,b=f,x=(g=o).getBody(),C=b.container(),w=c.getParentBlock(C,x)||x,k=e.curry(m.isInlineTarget,g),(S=d.readLocation(k,w,b)).bind(function(n){return y?n.fold(e.constant(t.some(d.inside(n))),t.none,e.constant(t.some(d.outside(n))),t.none):n.fold(t.none,e.constant(t.some(d.outside(n))),t.none,e.constant(t.some(d.inside(n))))}).map(p(g,v)).getOrThunk(function(){var e=a.navigate(y,w,b),t=e.bind(function(e){return d.readLocation(k,w,e)});return S.isSome()&&t.isSome()?m.findRootInline(k,w,b).map(function(e){return!!n.liftN([a.firstPositionIn(t=e),a.lastPositionIn(t)],function(e,n){var r=m.normalizePosition(!0,e),o=m.normalizePosition(!1,n);return a.nextPosition(t,r).map(function(e){return e.isEqual(o)}).getOr(!0)}).getOr(!0)&&(u.deleteElement(g,y,r.fromDom(e)),!0);var t}).getOr(!1):t.bind(function(t){return e.map(function(e){return y?h(g,v,b,e):h(g,v,e,b),!0})}).getOr(!1)})}var g,v,y,b,x,C,w,k,S;return!1}}}),n("tinymce.core.delete.TableDeleteAction",["ephox.katamari.api.Adt","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.katamari.api.Struct","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind"],function(e,t,n,r,o,i,a,s,c,u){var l=i.immutable("start","end"),d=i.immutable("rng","table","cells"),f=e.generate([{removeTable:["element"]},{emptyCells:["cells"]}]),m=function(e,t){return u.closest(s.fromDom(e),"td,th",t)},p=function(e,t){return u.ancestor(e,"table",t)},h=function(e){return!1===a.eq(e.start(),e.end())},g=function(e,n){return t.findIndex(e,function(e){return a.eq(e,n)})},v=function(e){return(t=e,o.liftN([g(t.cells(),t.rng().start()),g(t.cells(),t.rng().end())],function(e,n){return t.cells().slice(e,n+1)})).bind(function(t){var n=e.cells();return t.length===n.length?f.removeTable(e.table()):f.emptyCells(t)});var t};return{getActionFromRange:function(e,t){return(i=e,s=t,g=n.curry(a.eq,i),(u=s,f=g,o.liftN([m(u.startContainer,f),m(u.endContainer,f)],l).filter(h)).map(function(e){return(n=t=e,o=g,p(n.start(),o).bind(function(e){return p(n.end(),o).bind(function(t){return a.eq(e,t)?r.some(e):r.none()})})).bind(function(e){var n=c.descendants(e,"td,th");return d(t,e,n)});var t,n,o})).map(v);var i,s,u,f,g},getActionFromCells:function(e){return f.emptyCells(e)}}}),n("tinymce.core.selection.MultiRange",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","tinymce.core.selection.RangeNodes"],function(e,t,n){var r=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t};return{getRanges:r,getSelectedNodes:function(r){return e.bind(r,function(e){var r=n.getSelectedNode(e);return r?[t.fromDom(r)]:[]})},hasMultipleRanges:function(e){return r(e).length>1}}}),n("tinymce.core.selection.TableCellSelection",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFilter","tinymce.core.dom.ElementType","tinymce.core.selection.MultiRange"],function(e,t,n,r,o){var i=function(t){return e.filter(o.getSelectedNodes(t),r.isTableCell)},a=function(e){return n.descendants(e,"td[data-mce-selected],th[data-mce-selected]")},s=function(e,t){var n=a(t),r=i(e);return n.length>0?n:r};return{getCellsFromRanges:i,getCellsFromElement:a,getCellsFromElementOrRanges:s,getCellsFromEditor:function(e){return s(o.getRanges(e.selection.getSel()),t.fromDom(e.getBody()))}}}),n("tinymce.core.delete.TableDelete",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.delete.DeleteElement","tinymce.core.delete.TableDeleteAction","tinymce.core.dom.ElementType","tinymce.core.dom.Empty","tinymce.core.dom.PaddingBr","tinymce.core.dom.Parents","tinymce.core.selection.TableCellSelection"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p){var h=function(t,n){return e.each(n,f.fillWithPaddingBr),t.selection.setCursorLocation(n[0].dom(),0),!0},g=function(e,t){return c.deleteElement(e,!1,t),!0},v=function(t,n){return e.find(m.parentsAndSelf(n,t),l.isTableCell)},y=function(t,n){return e.find(m.parentsAndSelf(n,t),function(e){return"caption"===i.name(e)})},b=function(e,t){return f.fillWithPaddingBr(t),e.selection.setCursorLocation(t.dom(),0),n.some(!0)};return{backspaceDelete:function(e,i){var c,l,f,m,x,C,w,k,S,T,E,R,N=o.fromDom(e.selection.getStart(!0));return e.selection.isCollapsed()?(T=i,E=N,R=o.fromDom((S=e).getBody()),y(R,E).fold(function(){return t=T,n=R,i=E,c=s.fromRangeStart((e=S).selection.getRng()),v(n,i).bind(function(i){return d.isEmpty(i)?b(e,i):(s=n,u=i,l=c,a.navigate(t,e.getBody(),l).bind(function(e){return v(s,o.fromDom(e.getNode())).map(function(e){return!1===r.eq(e,u)})}));var s,u,l});var e,t,n,i,c},function(e){return m=T,p=R,h=e,g=s.fromRangeStart((f=S).selection.getRng()),d.isEmpty(h)?b(f,h):(i=p,u=h,l=g,a.navigate(c=m,(t=f).getBody(),l).bind(function(e){return d=c,f=l,m=e,a.firstPositionIn((s=u).dom()).bind(function(e){return a.lastPositionIn(s.dom()).map(function(t){return d?f.isEqual(e)&&m.isEqual(t):f.isEqual(t)&&m.isEqual(e)})}).getOr(!0)?b(t,u):(n=u,y(i,o.fromDom(e.getNode())).map(function(e){return!1===r.eq(e,n)}));var n,s,d,f,m}).or(n.some(!0)));var t,i,c,u,l,f,m,p,h,g}).getOr(!1)):(l=N,f=o.fromDom((c=e).getBody()),m=c.selection.getRng(),0!==(x=p.getCellsFromEditor(c)).length?h(c,x):(C=c,k=m,y(w=f,l).fold(function(){return e=C,u.getActionFromRange(w,k).map(function(n){return n.fold(t.curry(g,e),t.curry(h,e))});var e},function(e){return b(C,e)}).getOr(!1)))}}}),n("tinymce.core.delete.DeleteCommands",["tinymce.core.delete.BlockBoundaryDelete","tinymce.core.delete.BlockRangeDelete","tinymce.core.delete.CefDelete","tinymce.core.delete.DeleteUtils","tinymce.core.delete.InlineBoundaryDelete","tinymce.core.delete.TableDelete"],function(e,t,n,r,o,i){var a=function(e,t){e.getDoc().execCommand(t,!1,null)};return{deleteCommand:function(s){n.backspaceDelete(s,!1)||o.backspaceDelete(s,!1)||e.backspaceDelete(s,!1)||i.backspaceDelete(s)||t.backspaceDelete(s,!1)||(a(s,"Delete"),r.paddEmptyBody(s))},forwardDeleteCommand:function(r){n.backspaceDelete(r,!0)||o.backspaceDelete(r,!0)||e.backspaceDelete(r,!0)||i.backspaceDelete(r)||t.backspaceDelete(r,!0)||a(r,"ForwardDelete")}}}),n("tinymce.core.selection.RangeCompare",[],function(){return{isEq:function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}}),n("tinymce.core.selection.NormalizeRange",["ephox.katamari.api.Option","ephox.katamari.api.Struct","tinymce.core.caret.CaretContainer","tinymce.core.dom.NodeType","tinymce.core.dom.TreeWalker","tinymce.core.fmt.CaretFormat","tinymce.core.selection.RangeCompare"],function(e,t,n,r,o,i,a){var s=t.immutable("container","offset"),c=function(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)},u=function(e,t,n){return c(e,t,function(e){return e.nodeName===n})},l=function(e){return e&&"TABLE"===e.nodeName},d=function(e,t,n){for(var i=new o(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=i[n?"prev":"next"]();)if(r.isBr(t))return!0},f=function(t,a,l,d,f){var m,p,h,g,v,y,b=t.getRoot(),x=t.schema.getNonEmptyElements();if(h=t.getParent(f.parentNode,t.isBlock)||b,d&&r.isBr(f)&&a&&t.isEmpty(h))return e.some(s(f.parentNode,t.nodeIndex(f)));for(m=new o(f,h);g=m[d?"prev":"next"]();){if("false"===t.getContentEditableParent(g)||(y=b,n.isCaretContainer(v=g)&&!1===c(v,y,i.isCaretNode)))return e.none();if(r.isText(g)&&g.nodeValue.length>0)return!1===u(g,b,"A")?e.some(s(g,d?g.nodeValue.length:0)):e.none();if(t.isBlock(g)||x[g.nodeName.toLowerCase()])return e.none();p=g}return l&&p?e.some(s(p,0)):e.none()},m=function(t,i,a,c){var u,m,p,h,g,v,y,b,x,C=t.getRoot(),w=!1;if(u=c[(a?"start":"end")+"Container"],m=c[(a?"start":"end")+"Offset"],y=r.isElement(u)&&m===u.childNodes.length,g=t.schema.getNonEmptyElements(),v=a,n.isCaretContainer(u))return e.none();if(r.isElement(u)&&m>u.childNodes.length-1&&(v=!1),r.isDocument(u)&&(u=C,m=0),u===C){if(v&&(h=u.childNodes[m>0?m-1:0])){if(n.isCaretContainer(h))return e.none();if(g[h.nodeName]||l(h))return e.none()}if(u.hasChildNodes()){if(m=Math.min(!v&&m>0?m-1:m,u.childNodes.length-1),m=r.isText(u=u.childNodes[m])&&y?u.data.length:0,!i&&u===C.lastChild&&l(u))return e.none();if(function(e,t){for(;t&&t!==e;){if(r.isContentEditableFalse(t))return!0;t=t.parentNode}return!1}(C,u)||n.isCaretContainer(u))return e.none();if(u.hasChildNodes()&&!1===l(u)){h=u,p=new o(u,C);do{if(r.isContentEditableFalse(h)||n.isCaretContainer(h)){w=!1;break}if(r.isText(h)&&h.nodeValue.length>0){m=v?0:h.nodeValue.length,u=h,w=!0;break}if(g[h.nodeName.toLowerCase()]&&(!(b=h)||!/^(TD|TH|CAPTION)$/.test(b.nodeName))){m=t.nodeIndex(h),u=h.parentNode,"IMG"!==h.nodeName&&"PRE"!==h.nodeName||v||m++,w=!0;break}}while(h=v?p.next():p.prev())}}}return i&&(r.isText(u)&&0===m&&f(t,y,i,!0,u).each(function(e){u=e.container(),m=e.offset(),w=!0}),r.isElement(u)&&((h=u.childNodes[m])||(h=u.childNodes[m-1]),!h||!r.isBr(h)||(x=h).previousSibling&&"A"===x.previousSibling.nodeName||d(t,h,!1)||d(t,h,!0)||f(t,y,i,!0,h).each(function(e){u=e.container(),m=e.offset(),w=!0}))),v&&!i&&r.isText(u)&&m===u.nodeValue.length&&f(t,y,i,!1,u).each(function(e){u=e.container(),m=e.offset(),w=!0}),w?e.some(s(u,m)):e.none()};return{normalize:function(t,n){var r=n.collapsed,o=n.cloneRange();return m(t,r,!0,o).each(function(e){o.setStart(e.container(),e.offset())}),r||m(t,r,!1,o).each(function(e){o.setEnd(e.container(),e.offset())}),r&&o.collapse(!0),a.isEq(n,o)?e.none():e.some(o)}}}),n("tinymce.core.newline.InsertBr",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Insert","ephox.sugar.api.node.Element","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.dom.TreeWalker","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.InlineUtils","tinymce.core.selection.NormalizeRange"],function(e,t,n,r,o,i,a,s,c,u){var l=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n),t.scrollIntoView(r),e.remove(r)},d=function(e,t,n,r){var o=e.createRng();r?(o.setStartBefore(n),o.setEndBefore(n)):(o.setStartAfter(n),o.setEndAfter(n)),t.setRng(o)},f=function(e,r){var o=n.fromTag("br");t.before(n.fromDom(r),o),e.undoManager.add()},m=function(e,r){p(e.getBody(),r)||t.after(n.fromDom(r),n.fromTag("br"));var o=n.fromTag("br");t.after(n.fromDom(r),o),l(e.dom,e.selection,o.dom()),d(e.dom,e.selection,o.dom(),!1),e.undoManager.add()},p=function(e,t){return n=o.after(t),!!i.isBr(n.getNode())||r.nextPosition(e,o.after(t)).map(function(e){return i.isBr(e.getNode())}).getOr(!1);var n},h=function(e){return e&&"A"===e.nodeName&&"href"in e},g=function(t){return t.fold(e.constant(!1),h,h,e.constant(!1))},v=function(t,n){n.fold(e.noop,e.curry(f,t),e.curry(m,t),e.noop)};return{insert:function(t,n){var r,i,f,m=(i=e.curry(c.isInlineTarget,r=t),f=o.fromRangeStart(r.selection.getRng()),s.readLocation(i,r.getBody(),f).filter(g));m.isSome()?m.each(e.curry(v,t)):function(e,t){var n,r,o=e.selection,i=e.dom,s=o.getRng(!0);u.normalize(i,s).each(function(e){s.setStart(e.startContainer,e.startOffset),s.setEnd(e.endContainer,e.endOffset)});var c=s.startOffset,f=s.startContainer;if(1===f.nodeType&&f.hasChildNodes()){var m=c>f.childNodes.length-1;f=f.childNodes[Math.min(c,f.childNodes.length-1)]||f,c=m&&3===f.nodeType?f.nodeValue.length:0}var p=i.getParent(f,i.isBlock),h=p?i.getParent(p.parentNode,i.isBlock):null;"LI"!==(h?h.nodeName.toUpperCase():"")||t&&t.ctrlKey||(p=h),f&&3===f.nodeType&&c>=f.nodeValue.length&&(function(e,t,n){for(var r,o=new a(f,p),i=e.getNonEmptyElements();r=o.next();)if(i[r.nodeName.toLowerCase()]||r.length>0)return!0}(e.schema)||(n=i.create("br"),s.insertNode(n),s.setStartAfter(n),s.setEndAfter(n),r=!0)),n=i.create("br"),s.insertNode(n),l(i,o,n),d(i,o,n,r),e.undoManager.add()}(t,n)}}}),n("ephox.sugar.api.selection.Situ",["ephox.katamari.api.Adt","ephox.katamari.api.Fun"],function(e,t){var n=e.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]);return{before:n.before,on:n.on,after:n.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(t.identity,t.identity,t.identity)}}}),n("ephox.sugar.api.selection.Selection",["ephox.katamari.api.Adt","ephox.katamari.api.Struct","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Situ"],function(e,t,n,r,o){var i=e.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),a=t.immutable("start","soffset","finish","foffset");return{domRange:i.domRange,relative:i.relative,exact:i.exact,exactFromRange:function(e){return i.exact(e.start(),e.soffset(),e.finish(),e.foffset())},range:a,getWin:function(e){var t=e.match({domRange:function(e){return n.fromDom(e.startContainer)},relative:function(e,t){return o.getStart(e)},exact:function(e,t,n,r){return e}});return r.defaultView(t)}}}),n("tinymce.core.selection.SelectionBookmark",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sand.api.PlatformDetection","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Selection","global!document"],function(e,t,n,r,o,i,a,s,c,u){var l=n.detect().browser,d=function(e,t){var n=i.isText(t)?a.get(t).length:s.children(t).length+1;return e>n?n:e<0?0:e},f=function(e){return c.range(e.start(),d(e.soffset(),e.start()),e.finish(),d(e.foffset(),e.finish()))},m=function(e,t){return r.contains(e,t)||r.eq(e,t)},p=function(e){return function(t){return m(e,t.start())&&m(e,t.finish())}},h=function(e){return!0===e.inline||l.isIE()},g=function(e){return c.range(o.fromDom(e.startContainer),e.startOffset,o.fromDom(e.endContainer),e.endOffset)},v=function(e){var n=e.getSelection();return(n&&0!==n.rangeCount?t.from(n.getRangeAt(0)):t.none()).map(g)},y=function(e){var t=s.defaultView(e);return v(t.dom()).filter(p(e))},b=function(e,n){return t.from(n).filter(p(e)).map(f)},x=function(e){var n=u.createRange();return n.setStart(e.start().dom(),e.soffset()),n.setEnd(e.finish().dom(),e.foffset()),t.some(n)},C=function(n){return(n.bookmark?n.bookmark:t.none()).bind(e.curry(b,o.fromDom(n.getBody()))).bind(x)};return{store:function(e){var n=h(e)?y(o.fromDom(e.getBody())):t.none();e.bookmark=n.isSome()?n:e.bookmark},storeNative:function(e,n){var r=o.fromDom(e.getBody()),i=(h(e)?t.from(n):t.none()).map(g).filter(p(r));e.bookmark=i.isSome()?i:e.bookmark},readRange:v,restore:function(e){C(e).each(function(t){e.selection.setRng(t)})},getRng:C,getBookmark:y,validate:b}}),n("tinymce.core.EditorCommands",["tinymce.core.Env","tinymce.core.InsertContent","tinymce.core.delete.DeleteCommands","tinymce.core.dom.NodeType","tinymce.core.newline.InsertBr","tinymce.core.selection.SelectionBookmark","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a){var s=a.each,c=a.extend,u=a.map,l=a.inArray,d=a.explode;return function(a){var f,m,p,h,g={state:{},exec:{},value:{}},v=a.settings;a.on("PreInit",function(){f=a.dom,m=a.selection,v=a.settings,p=a.formatter});var y=function(e){var t;if(!a.quirks.isHidden()&&!a.removed){if(e=e.toLowerCase(),t=g.state[e])return t(e);try{return a.getDoc().queryCommandState(e)}catch(e){}return!1}},b=function(e,t){t=t||"exec",s(e,function(e,n){s(n.toLowerCase().split(","),function(n){g[t][n]=e})})};c(this,{execCommand:function(e,t,n,r){var o,c,u=0;if(!a.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||r&&r.skip_focus?i.restore(a):a.focus(),(r=a.fire("BeforeExecCommand",{command:e,ui:t,value:n})).isDefaultPrevented())return!1;if(c=e.toLowerCase(),o=g.exec[c])return o(c,t,n),a.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(s(a.plugins,function(r){if(r.execCommand&&r.execCommand(e,t,n))return a.fire("ExecCommand",{command:e,ui:t,value:n}),u=!0,!1}),u)return u;if(a.theme&&a.theme.execCommand&&a.theme.execCommand(e,t,n))return a.fire("ExecCommand",{command:e,ui:t,value:n}),!0;try{u=a.getDoc().execCommand(e,t,n)}catch(e){}return!!u&&(a.fire("ExecCommand",{command:e,ui:t,value:n}),!0)}},queryCommandState:y,queryCommandValue:function(e){var t;if(!a.quirks.isHidden()&&!a.removed){if(e=e.toLowerCase(),t=g.value[e])return t(e);try{return a.getDoc().queryCommandValue(e)}catch(e){}}},queryCommandSupported:function(e){if(e=e.toLowerCase(),g.exec[e])return!0;try{return a.getDoc().queryCommandSupported(e)}catch(e){}return!1},addCommands:b,addCommand:function(e,t,n){e=e.toLowerCase(),g.exec[e]=function(e,r,o,i){return t.call(n||a,r,o,i)}},addQueryStateHandler:function(e,t,n){e=e.toLowerCase(),g.state[e]=function(){return t.call(n||a)}},addQueryValueHandler:function(e,t,n){e=e.toLowerCase(),g.value[e]=function(){return t.call(n||a)}},hasCustomCommand:function(e){return e=e.toLowerCase(),!!g.exec[e]}});var x=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=null),a.getDoc().execCommand(e,t,n)},C=function(e){return p.match(e)},w=function(e,t){p.toggle(e,t?{value:t}:void 0),a.nodeChanged()},k=function(e){h=m.getBookmark(e)},S=function(){m.moveToBookmark(h)};b({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){a.undoManager.add()},"Cut,Copy,Paste":function(t){var n,r=a.getDoc();try{x(t)}catch(e){n=!0}if("paste"!==t||r.queryCommandEnabled(t)||(n=!0),n||!r.queryCommandSupported(t)){var o=a.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");e.mac&&(o=o.replace(/Ctrl\+/g,"\u2318+")),a.notificationManager.open({text:o,type:"error"})}},unlink:function(){if(m.isCollapsed()){var e=a.dom.getParent(a.selection.getStart(),"a");e&&a.dom.remove(e,!0)}else p.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"==t&&(t="justify"),s("left,center,right,justify".split(","),function(e){t!=e&&p.remove("align"+e)}),"none"!=t&&w("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;x(e),(t=f.getParent(m.getNode(),"ol,ul"))&&/^(H[1-6]|P|ADDRESS|PRE)$/.test((n=t.parentNode).nodeName)&&(k(),f.split(n,t),S())},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){w(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){w(e,n)},FontSize:function(e,t,n){var r,o;n>=1&&n<=7&&(o=d(v.font_size_style_values),n=(r=d(v.font_size_classes))?r[n-1]||n:o[n-1]||n),w(e,n)},RemoveFormat:function(e){p.remove(e)},mceBlockQuote:function(){w("blockquote")},FormatBlock:function(e,t,n){return w(n||"p")},mceCleanup:function(){var e=m.getBookmark();a.setContent(a.getContent({cleanup:!0}),{cleanup:!0}),m.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var r=n||m.getNode();r!=a.getBody()&&(k(),a.dom.remove(r,!0),S())},mceSelectNodeDepth:function(e,t,n){var r=0;f.getParent(m.getNode(),function(e){if(1==e.nodeType&&r++==n)return m.select(e),!1},a.getBody())},mceSelectNode:function(e,t,n){m.select(n)},mceInsertContent:function(e,n,r){t.insertAtCaret(a,r)},mceInsertRawHTML:function(e,t,n){m.setContent("tiny_mce_marker"),a.setContent(a.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){w(n)},mceSetContent:function(e,t,n){a.setContent(n)},"Indent,Outdent":function(e){var t,n,r;n=/[a-z%]+$/i.exec(t=v.indentation),t=parseInt(t,10),y("InsertUnorderedList")||y("InsertOrderedList")?x(e):(v.forced_root_block||f.getParent(m.getNode(),f.isBlock)||p.apply("div"),s(m.getSelectedBlocks(),function(o){if("false"!==f.getContentEditable(o)&&"LI"!==o.nodeName){var i=a.getParam("indent_use_margin",!1)?"margin":"padding";i="TABLE"===o.nodeName?"margin":i,i+="rtl"==f.getStyle(o,"direction",!0)?"Right":"Left","outdent"==e?(r=Math.max(0,parseInt(o.style[i]||0,10)-t),f.setStyle(o,i,r?r+n:"")):(r=parseInt(o.style[i]||0,10)+t+n,f.setStyle(o,i,r))}}))},mceRepaint:function(){},InsertHorizontalRule:function(){a.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){a.hasVisual=!a.hasVisual,a.addVisual()},mceReplaceContent:function(e,t,n){a.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,m.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;"string"==typeof n&&(n={href:n}),r=f.getParent(m.getNode(),"a"),n.href=n.href.replace(" ","%20"),r&&n.href||p.remove("link"),n.href&&p.apply("link",n,r)},selectAll:function(){var e=f.getParent(m.getStart(),r.isContentEditableTrue);if(e){var t=f.createRng();t.selectNodeContents(e),m.setRng(t)}},delete:function(){n.deleteCommand(a)},forwardDelete:function(){n.forwardDeleteCommand(a)},mceNewDocument:function(){a.setContent("")},InsertLineBreak:function(e,t,n){return o.insert(a,n),!0}}),b({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=m.isCollapsed()?[f.getParent(m.getNode(),f.isBlock)]:m.getSelectedBlocks(),r=u(n,function(e){return!!p.matchNode(e,t)});return-1!==l(r,!0)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return C(e)},mceBlockQuote:function(){return C("blockquote")},Outdent:function(){var e;if(v.inline_styles){if((e=f.getParent(m.getStart(),f.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0;if((e=f.getParent(m.getEnd(),f.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0}return y("InsertUnorderedList")||y("InsertOrderedList")||!v.inline_styles&&!!f.getParent(m.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=f.getParent(m.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),b({"FontSize,FontName":function(e){var t,n=0;return(t=f.getParent(m.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),b({Undo:function(){a.undoManager.undo()},Redo:function(){a.undoManager.redo()}})}}),n("tinymce.core.util.EventDispatcher",["tinymce.core.util.Tools"],function(e){var t=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),n=function(t){var n,r,o=this,i={},a=function(){return!1},s=function(){return!0};n=(t=t||{}).scope||o,r=t.toggleEvent||a;var c=function(t,n,s,c){var u,l,d;if(!1===n&&(n=a),n)for(n={func:n},c&&e.extend(n,c),d=(l=t.toLowerCase().split(" ")).length;d--;)(u=i[t=l[d]])||(u=i[t]=[],r(t,!0)),s?u.unshift(n):u.push(n);return o},u=function(e,t){var n,a,s,c,u;if(e)for(n=(c=e.toLowerCase().split(" ")).length;n--;){if(a=i[e=c[n]],!e){for(s in i)r(s,!1),delete i[s];return o}if(a){if(t)for(u=a.length;u--;)a[u].func===t&&(a=a.slice(0,u).concat(a.slice(u+1)),i[e]=a);else a.length=0;a.length||(r(e,!1),delete i[e])}}else{for(e in i)r(e,!1);i={}}return o};o.fire=function(e,r){var o,c,l,d;if(e=e.toLowerCase(),(r=r||{}).type=e,r.target||(r.target=n),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=s},r.stopPropagation=function(){r.isPropagationStopped=s},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=s},r.isDefaultPrevented=a,r.isPropagationStopped=a,r.isImmediatePropagationStopped=a),t.beforeFire&&t.beforeFire(r),o=i[e])for(c=0,l=o.length;c<l;c++){if((d=o[c]).once&&u(e,d.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===d.func.call(n,r))return r.preventDefault(),r}return r},o.on=c,o.off=u,o.once=function(e,t,n){return c(e,t,n,{once:!0})},o.has=function(e){return e=e.toLowerCase(),!(!i[e]||0===i[e].length)}};return n.isNative=function(e){return!!t[e.toLowerCase()]},n}),n("tinymce.core.util.Observable",["tinymce.core.util.EventDispatcher"],function(e){var t=function(t){return t._eventDispatcher||(t._eventDispatcher=new e({scope:t,toggleEvent:function(n,r){e.isNative(n)&&t.toggleNativeEvent&&t.toggleNativeEvent(n,r)}})),t._eventDispatcher};return{fire:function(e,n,r){if(this.removed&&"remove"!==e)return n;if(n=t(this).fire(e,n,r),!1!==r&&this.parent)for(var o=this.parent();o&&!n.isPropagationStopped();)o.fire(e,n,!1),o=o.parent();return n},on:function(e,n,r){return t(this).on(e,n,r)},off:function(e,n){return t(this).off(e,n)},once:function(e,n){return t(this).once(e,n)},hasEventListeners:function(e){return t(this).has(e)}}}),n("tinymce.core.EditorObservable",["tinymce.core.util.Observable","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(e,t,n){var r,o=t.DOM,i=function(e,t){return"selectionchange"==t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=o.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},a=function(e,t){var n,a,s=function(e){return!e.hidden&&!e.readonly};if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(n=i(e,t),e.settings.event_root){if(r||(r={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&r){for(t in r)e.dom.unbind(i(e,t));r=null}})),r[t])return;r[t]=a=function(n){for(var r=n.target,i=e.editorManager.get(),a=i.length;a--;){var c=i[a].getBody();(c===r||o.isChildOf(r,c))&&s(i[a])&&i[a].fire(t,n)}},o.bind(n,t,a)}else o.bind(n,t,a=function(n){s(e)&&e.fire(t,n)}),e.delegates[t]=a};return n.extend({},e,{bindPendingEventDelegates:function(){var e=this;n.each(e._pendingNativeEvents,function(t){a(e,t)})},toggleNativeEvent:function(e,t){var n=this;"focus"!=e&&"blur"!=e&&(t?n.initialized?a(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(i(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this;if(t.delegates){for(e in t.delegates)t.dom.unbind(i(t,e),e,t.delegates[e]);delete t.delegates}t.inline||(t.getBody().onload=null,t.dom.unbind(t.getWin()),t.dom.unbind(t.getDoc())),t.dom.unbind(t.getBody()),t.dom.unbind(t.getContainer())}})}),n("tinymce.core.Mode",[],function(){var e=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},t=function(t,n){var r,o,i;t._clickBlocker&&(t._clickBlocker.unbind(),t._clickBlocker=null),n?(t._clickBlocker=(o=(r=t).getBody(),r.dom.bind(o,"click",i=function(e){r.dom.getParents(e.target,"a").length>0&&e.preventDefault()}),{unbind:function(){r.dom.unbind(o,"click",i)}}),t.selection.controlSelection.hideResizeRect(),t.readonly=!0,t.getBody().contentEditable=!1):(t.readonly=!1,t.getBody().contentEditable=!0,e(t,"StyleWithCSS",!1),e(t,"enableInlineTableEditing",!1),e(t,"enableObjectResizing",!1),t.focus(),t.nodeChanged())};return{setMode:function(e,n){n!=(e.readonly?"readonly":"design")&&(e.initialized?t(e,"readonly"==n):e.on("init",function(){t(e,"readonly"==n)}),e.fire("SwitchMode",{mode:n}))}}}),n("tinymce.core.Shortcuts",["tinymce.core.util.Tools","tinymce.core.Env"],function(e,t){var n=e.each,r=e.explode,o={f9:120,f10:121,f11:122},i=e.makeMap("alt,ctrl,shift,meta,access");return function(a){var s={},c=[],u=function(e){var a,s,c={};n(r(e,"+"),function(e){e in i?c[e]=!0:/^[0-9]{2,}$/.test(e)?c.keyCode=parseInt(e,10):(c.charCode=e.charCodeAt(0),c.keyCode=o[e]||e.toUpperCase().charCodeAt(0))}),a=[c.keyCode];for(s in i)c[s]?a.push(s):c[s]=!1;return c.id=a.join(","),c.access&&(c.alt=!0,t.mac?c.ctrl=!0:c.shift=!0),c.meta&&(t.mac?c.meta=!0:(c.ctrl=!0,c.meta=!1)),c},l=function(t,n,o,i){var s;return(s=e.map(r(t,">"),u))[s.length-1]=e.extend(s[s.length-1],{func:o,scope:i||a}),e.extend(s[0],{desc:a.translate(n),subpatterns:s.slice(1)})},d=function(e,t){return!!t&&t.ctrl==e.ctrlKey&&t.meta==e.metaKey&&t.alt==e.altKey&&t.shift==e.shiftKey&&!!(e.keyCode==t.keyCode||e.charCode&&e.charCode==t.charCode)&&(e.preventDefault(),!0)},f=function(e){return e.func?e.func.call(e.scope):null};a.on("keyup keypress keydown",function(e){var t,r;((r=e).altKey||r.ctrlKey||r.metaKey||"keydown"===(t=e).type&&t.keyCode>=112&&t.keyCode<=123)&&!e.isDefaultPrevented()&&(n(s,function(t){if(d(e,t))return c=t.subpatterns.slice(0),"keydown"==e.type&&f(t),!0}),d(e,c[0])&&(1===c.length&&"keydown"==e.type&&f(c[0]),c.shift()))}),this.add=function(t,o,i,c){var u;return u=i,"string"==typeof i?i=function(){a.execCommand(u,!1,null)}:e.isArray(u)&&(i=function(){a.execCommand(u[0],u[1],u[2])}),n(r(e.trim(t.toLowerCase())),function(e){var t=l(e,o,i,c);s[t.id]=t}),!0},this.remove=function(e){var t=l(e);return!!s[t.id]&&(delete s[t.id],!0)}}}),n("tinymce.core.html.SaxParser",["tinymce.core.html.Schema","tinymce.core.html.Entities","tinymce.core.util.Tools"],function(e,t,n){var r=n.each,o=function(e,t,n){var r,o,i,a,s=1;for(a=e.getShortEndedElements(),(i=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=r=n;o=i.exec(t);){if(r=i.lastIndex,"/"===o[1])s--;else if(!o[1]){if(o[2]in a)continue;s++}if(0===s)break}return r},i=function(i,a){var s=this,c=function(){};i=i||{},s.schema=a=a||new e,!1!==i.fix_self_closing&&(i.fix_self_closing=!0),r("comment cdata text start end pi doctype".split(" "),function(e){e&&(s[e]=i[e]||c)}),s.parse=function(e){var r,s,c,u,l,d,f,m,p,h,g,v,y,b,x,C,w,k,S,T,E,R,N,A,D,P,B,_,O,F=this,M=0,I=[],L=0,H=t.decode,W=n.makeMap("src,href,data,background,formaction,poster"),U=/((java|vb)script|mhtml):/i,z=/^data:/i,q=function(e){var t,n;for(t=I.length;t--&&I[t].name!==e;);if(t>=0){for(n=I.length-1;n>=t;n--)(e=I[n]).valid&&F.end(e.name);I.length=t}},V=function(e,t,n,r,o){var a,s,c;if(n=(t=t.toLowerCase())in g?t:H(n||r||o||""),y&&!m&&0==(0===(c=t).indexOf("data-")||0===c.indexOf("aria-"))){if(!(a=k[t])&&S){for(s=S.length;s--&&!(a=S[s]).pattern.test(t););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(n in a.validValues))return}if(W[t]&&!i.allow_script_urls){var l=n.replace(/[\s\u0000-\u001F]+/g,"");try{l=decodeURIComponent(l)}catch(e){l=unescape(l)}if(U.test(l))return;if(!i.allow_html_data_urls&&z.test(l)&&!/^data:image\//i.test(l))return}m&&(t in W||0===t.indexOf("on"))||(u.map[t]=n,u.push({name:t,value:n}))};for(D=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),P=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,h=a.getShortEndedElements(),A=i.self_closing_elements||a.getSelfClosingElements(),g=a.getBoolAttrs(),y=i.validate,p=i.remove_internals,O=i.fix_self_closing,B=a.getSpecialElements(),N=e+">";r=D.exec(N);){if(M<r.index&&F.text(H(e.substr(M,r.index-M))),s=r[6])":"===(s=s.toLowerCase()).charAt(0)&&(s=s.substr(1)),q(s);else if(s=r[7]){if(r.index+r[0].length>e.length){F.text(H(e.substr(r.index))),M=r.index+r[0].length;continue}if(":"===(s=s.toLowerCase()).charAt(0)&&(s=s.substr(1)),v=s in h,O&&A[s]&&I.length>0&&I[I.length-1].name===s&&q(s),!y||(b=a.getElementRule(s))){if(x=!0,y&&(k=b.attributes,S=b.attributePatterns),(w=r[8])?((m=-1!==w.indexOf("data-mce-type"))&&p&&(x=!1),(u=[]).map={},w.replace(P,V)):(u=[]).map={},y&&!m){if(T=b.attributesRequired,E=b.attributesDefault,R=b.attributesForced,b.removeEmptyAttrs&&!u.length&&(x=!1),R)for(l=R.length;l--;)f=(C=R[l]).name,"{$uid}"===(_=C.value)&&(_="mce_"+L++),u.map[f]=_,u.push({name:f,value:_});if(E)for(l=E.length;l--;)(f=(C=E[l]).name)in u.map||("{$uid}"===(_=C.value)&&(_="mce_"+L++),u.map[f]=_,u.push({name:f,value:_}));if(T){for(l=T.length;l--&&!(T[l]in u.map););-1===l&&(x=!1)}if(C=u.map["data-mce-bogus"]){if("all"===C){M=o(a,e,D.lastIndex),D.lastIndex=M;continue}x=!1}}x&&F.start(s,u,v)}else x=!1;if(c=B[s]){c.lastIndex=M=r.index+r[0].length,(r=c.exec(e))?(x&&(d=e.substr(M,r.index-M)),M=r.index+r[0].length):(d=e.substr(M),M=e.length),x&&(d.length>0&&F.text(d,!0),F.end(s)),D.lastIndex=M;continue}v||(w&&w.indexOf("/")==w.length-1?x&&F.end(s):I.push({name:s,valid:x}))}else(s=r[1])?(">"===s.charAt(0)&&(s=" "+s),i.allow_conditional_comments||"[if"!==s.substr(0,3).toLowerCase()||(s=" "+s),F.comment(s)):(s=r[2])?F.cdata(s.replace(/<!--|-->/g,"")):(s=r[3])?F.doctype(s):(s=r[4])&&F.pi(s,r[5]);M=r.index+r[0].length}for(M<e.length&&F.text(H(e.substr(M))),l=I.length-1;l>=0;l--)(s=I[l]).valid&&F.end(s.name)}};return i.findEndTag=o,i}),n("tinymce.core.dom.TrimHtml",["tinymce.core.html.SaxParser","tinymce.core.text.Zwsp"],function(e,t){var n=function(t,n){var r,o,i,a,s,c,u,l,d=n,f=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,m=t.schema;for(c=t.getTempAttrs(),u=d,l=new RegExp(["\\s?("+c.join("|")+')="[^"]+"'].join("|"),"gi"),d=u.replace(l,""),s=m.getShortEndedElements();a=f.exec(d);)o=f.lastIndex,i=a[0].length,r=s[a[1]]?o:e.findEndTag(m,d,o),d=d.substring(0,o-i)+d.substring(r),f.lastIndex=o-i;return d};return{trimExternal:function(e,r){return t.trim(n(e,r))},trimInternal:n}}),n("ephox.sugar.api.search.PredicateExists",["ephox.sugar.api.search.PredicateFind"],function(e){return{any:function(t){return e.first(t).isSome()},ancestor:function(t,n,r){return e.ancestor(t,n,r).isSome()},closest:function(t,n,r){return e.closest(t,n,r).isSome()},sibling:function(t,n){return e.sibling(t,n).isSome()},child:function(t,n){return e.child(t,n).isSome()},descendant:function(t,n){return e.descendant(t,n).isSome()}}}),n("ephox.sugar.api.dom.Focus",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.PredicateExists","ephox.sugar.api.search.Traverse","global!document"],function(e,t,n,r,o,i,a){var s=function(e){e.dom().focus()},c=function(e){var n=void 0!==e?e.dom():a;return t.from(n.activeElement).map(r.fromDom)};return{hasFocus:function(e){var t=i.owner(e).dom();return e.dom()===t.activeElement},focus:s,blur:function(e){e.dom().blur()},active:c,search:function(e){return c(i.owner(e)).filter(function(t){return e.dom().contains(t.dom())})},focusInside:function(t){var r=i.owner(t);c(r).filter(function(r){return o.closest(r,e.curry(n.eq,t))}).fold(function(){s(t)},e.noop)}}}),n("tinymce.core.focus.EditorFocus",["ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.Focus","ephox.sugar.api.node.Element","tinymce.core.Env","tinymce.core.caret.CaretFinder","tinymce.core.dom.ElementType","tinymce.core.selection.RangeNodes","tinymce.core.selection.SelectionBookmark"],function(e,t,n,r,o,i,a,s,c){var u=function(n,o){var c,u,l;(c=r.fromDom(n.getBody()),u=o,(l=u,l.collapsed?e.from(s.getNode(l.startContainer,l.startOffset)).map(r.fromDom):e.none()).bind(function(n){return a.isTableSection(n)?e.some(n):!1===t.contains(c,n)?e.some(c):e.none()})).bind(function(e){return i.firstPositionIn(e.dom())}).fold(function(){n.selection.normalize()},function(e){n.selection.setRng(e.toRange())})},l=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},d=function(e){return e.inline?(o=e.getBody())&&(t=r.fromDom(o),n.hasFocus(t)||n.search(t).isSome()):(i=e).iframeElement&&n.hasFocus(r.fromDom(i.iframeElement));var t,o,i},f=function(e){e.editorManager.setActive(e)};return{focus:function(e,t){e.removed||(t?f(e):function(e){var t,n,r,i=e.selection,a=e.settings.content_editable,s=e.getBody(),m=i.getRng();if(e.quirks.refreshContentEditable(),n=e,r=i.getNode(),t=n.dom.getParent(r,function(e){return"true"===n.dom.getContentEditable(e)}),e.$.contains(s,t))return l(t),u(e,m),void f(e);void 0!==e.bookmark&&!1===d(e)&&c.getRng(e).each(function(t){e.selection.setRng(t),m=t}),a||(o.opera||l(s),e.getWin().focus()),(o.gecko||a)&&(l(s),u(e,m)),f(e)}(e))},hasFocus:d}}),n("tinymce.core.EditorView",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Css","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i){var a=function(e,t){return t.dom()[e]},s=function(e,t){return parseInt(o.get(t,e),10)},c=e.curry(a,"clientWidth"),u=e.curry(a,"clientHeight"),l=e.curry(s,"margin-top"),d=e.curry(s,"margin-left");return{isXYInContentArea:function(e,t,n){var o,a,s,f,m,p,h,g,v,y,b=r.fromDom(e.getBody()),x=e.inline?b:i.documentElement(b),C=(o=e.inline,s=t,f=n,m=(a=x).dom().getBoundingClientRect(),{x:s-(o?m.left+a.dom().clientLeft+d(a):0),y:f-(o?m.top+a.dom().clientTop+l(a):0)});return h=C.x,g=C.y,v=c(p=x),y=u(p),h>=0&&g>=0&&h<=v&&g<=y},isEditorAttachedToDom:function(e){var o;return(o=e.inline?e.getBody():e.getContentAreaContainer(),t.from(o).map(r.fromDom)).map(function(e){return n.contains(i.owner(e),e)}).getOr(!1)}}}),n("tinymce.core.ui.NotificationManagerImpl",[],function(){return function(){var e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,reposition:e,getArgs:e}}}),n("tinymce.core.api.NotificationManager",["ephox.katamari.api.Arr","ephox.katamari.api.Option","tinymce.core.EditorView","tinymce.core.ui.NotificationManagerImpl","tinymce.core.util.Delay"],function(e,t,n,r,o){return function(i){var a,s=[],c=function(){var e=i.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():r()},u=function(){s.length>0&&c().reposition(s)},l=function(t){e.findIndex(s,function(e){return e===t}).each(function(e){s.splice(e,1)})},d=function(t){if(!i.removed&&n.isEditorAttachedToDom(i))return e.find(s,function(e){return!((n=c().getArgs(e)).type!==(r=t).type||n.text!==r.text||n.progressBar||n.timeout||r.progressBar||r.timeout);var n,r}).getOrThunk(function(){i.editorManager.setActive(i);var e=c().open(t,function(){l(e),u()});return s.push(e),u(),e})};return(a=i).on("SkinLoaded",function(){var e=a.settings.service_message;e&&d({text:e,type:"warning",timeout:0,icon:""})}),a.on("ResizeEditor ResizeWindow",function(){o.requestAnimationFrame(u)}),a.on("remove",function(){e.each(s,function(e){c().close(e)})}),{open:d,close:function(){t.from(s[0]).each(function(e){c().close(e),l(e),u()})},getNotifications:function(){return s}}}}),n("tinymce.core.ui.WindowManagerImpl",[],function(){return function(){var e=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}}}),n("tinymce.core.api.WindowManager",["ephox.katamari.api.Arr","ephox.katamari.api.Option","tinymce.core.selection.SelectionBookmark","tinymce.core.ui.WindowManagerImpl"],function(e,t,n,r){return function(o){var i=[],a=function(){var e=o.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():r()},s=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},c=function(e){i.push(e),o.fire("OpenWindow",{win:e})},u=function(t){e.findIndex(i,function(e){return e===t}).each(function(e){i.splice(e,1),o.fire("CloseWindow",{win:t}),0===i.length&&o.focus()})},l=function(){return t.from(i[i.length-1])};return o.on("remove",function(){e.each(i.slice(0),function(e){a().close(e)})}),{windows:i,open:function(e,t){o.editorManager.setActive(o),n.store(o);var r=a().open(e,t,u);return c(r),r},alert:function(e,t,n){var r=a().alert(e,s(n||this,t),u);c(r)},confirm:function(e,t,n){var r=a().confirm(e,s(n||this,t),u);c(r)},close:function(){l().each(function(e){a().close(e),u(e)})},getParams:function(){return l().map(a().getParams).getOr(null)},setParams:function(e){l().each(function(t){a().setParams(t,e)})},getWindows:function(){return i}}}}),n("tinymce.core.ErrorReporter",["global!window","tinymce.core.AddOnManager"],function(e,t){var n=t.PluginManager,r=function(e,t){e.notificationManager.open({type:"error",text:t})},o=function(e,t){e._skinLoaded?r(e,t):e.on("SkinLoaded",function(){r(e,t)})};return{pluginLoadError:function(e,t){var r,i;o(e,(i=function(e,t){for(var r in n.urls)if(n.urls[r]+"/plugin"+t+".js"===e)return r;return null}(r=t,e.suffix))?"Failed to load plugin: "+i+" from url "+r:"Failed to load plugin url: "+r)},uploadError:function(e,t){o(e,"Failed to upload image: "+t)},displayError:o,initError:function(t){var n=e.console;n&&!e.test&&(n.error?n.error.apply(n,arguments):n.log.apply(n,arguments))}}}),n("tinymce.core.PluginManager",["tinymce.core.AddOnManager"],function(e){return e.PluginManager}),n("tinymce.core.ThemeManager",["tinymce.core.AddOnManager"],function(e){return e.ThemeManager}),n("ephox.sand.api.XMLHttpRequest",["ephox.sand.util.Global"],function(e){return function(){return new(e.getOrDie("XMLHttpRequest"))}}),n("tinymce.core.file.Uploader",["ephox.sand.api.XMLHttpRequest","global!window","tinymce.core.util.Fun","tinymce.core.util.Promise","tinymce.core.util.Tools"],function(e,t,n,r,o){return function(n,i){var a={},s=function(n,r,o,a){var s,c;(s=new e).open("POST",i.url),s.withCredentials=i.credentials,s.upload.onprogress=function(e){a(e.loaded/e.total*100)},s.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+s.status)},s.onload=function(){var e,t,n;s.status<200||s.status>=300?o("HTTP Error: "+s.status):(e=JSON.parse(s.responseText))&&"string"==typeof e.location?r((n=e.location,(t=i.basePath)?t.replace(/\/$/,"")+"/"+n.replace(/^\//,""):n)):o("Invalid JSON: "+s.responseText)},(c=new t.FormData).append("file",n.blob(),n.filename()),s.send(c)},c=function(e,t){return{url:t,blobInfo:e,status:!0}},u=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},l=function(e,t){o.each(a[e],function(e){e(t)}),delete a[e]};return i=o.extend({credentials:!1,handler:s},i),{upload:function(e,t){return i.url||i.handler!==s?(f=t,d=o.grep(d=e,function(e){return!n.isUploaded(e.blobUri())}),r.all(o.map(d,function(e){return n.isPending(e.blobUri())?(d=e.blobUri(),new r(function(e){a[d]=a[d]||[],a[d].push(e)})):(o=i.handler,s=f,n.markPending((t=e).blobUri()),new r(function(e){var r;try{var i=function(){r&&r.close()};o(t,function(r){i(),n.markUploaded(t.blobUri(),r),l(t.blobUri(),c(t,r)),e(c(t,r))},function(r){i(),n.removeFailed(t.blobUri()),l(t.blobUri(),u(t,r)),e(u(t,r))},function(e){e<0||e>100||(r||(r=s()),r.progressBar.value(e))})}catch(n){e(u(t,n.message))}}));var t,o,s,d}))):new r(function(e){e([])});var d,f}}}}),n("ephox.sand.api.Blob",["ephox.sand.util.Global"],function(e){return function(t,n){return new(e.getOrDie("Blob"))(t,n)}}),n("ephox.sand.api.FileReader",["ephox.sand.util.Global"],function(e){return function(){return new(e.getOrDie("FileReader"))}}),n("ephox.sand.api.Uint8Array",["ephox.sand.util.Global"],function(e){return function(t){return new(e.getOrDie("Uint8Array"))(t)}}),n("ephox.sand.api.Window",["ephox.sand.util.Global"],function(e){return{atob:function(t){return e.getOrDie("atob")(t)},requestAnimationFrame:function(t){e.getOrDie("requestAnimationFrame")(t)}}}),n("tinymce.core.file.Conversions",["ephox.sand.api.Blob","ephox.sand.api.FileReader","ephox.sand.api.Uint8Array","ephox.sand.api.Window","ephox.sand.api.XMLHttpRequest","tinymce.core.util.Promise"],function(e,t,n,r,o,i){var a=function(e){var t,n;return e=decodeURIComponent(e).split(","),(n=/data:([^;]+)/.exec(e[0]))&&(t=n[1]),{type:t,data:e[1]}};return{uriToBlob:function(t){return 0===t.indexOf("blob:")?(s=t,new i(function(e,t){var n=function(){t("Cannot convert "+s+" to Blob. Resource might not exist or is inaccessible.")};try{var r=new o;r.open("GET",s,!0),r.responseType="blob",r.onload=function(){200==this.status?e(this.response):n()},r.onerror=n,r.send()}catch(e){n()}})):0===t.indexOf("data:")?(c=t,new i(function(t){var o,i,s;c=a(c);try{o=r.atob(c.data)}catch(n){return void t(new e([]))}for(i=new n(o.length),s=0;s<i.length;s++)i[s]=o.charCodeAt(s);t(new e([i],{type:c.type}))})):null;var s,c},blobToDataUri:function(e){return new i(function(n){var r=new t;r.onloadend=function(){n(r.result)},r.readAsDataURL(e)})},parseDataUri:a}}),n("tinymce.core.file.ImageScanner",["tinymce.core.util.Promise","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.file.Conversions","tinymce.core.Env"],function(e,t,n,r,o){var i=0,a=function(e){return(e||"blobid")+i++};return function(i,s){var c={};return{findAll:function(u,l){var d,f,m;return l||(l=n.constant(!0)),d=t.filter((m=u)?m.getElementsByTagName("img"):[],function(e){var t=e.src;return!!o.fileApi&&!e.hasAttribute("data-mce-bogus")&&!e.hasAttribute("data-mce-placeholder")&&!(!t||t==o.transparentSrc)&&(0===t.indexOf("blob:")?!i.isUploaded(t):0===t.indexOf("data:")&&l(e))}),f=t.map(d,function(t){var n;return c[t.src]?new e(function(e){c[t.src].then(function(n){if("string"==typeof n)return n;e({image:t,blobInfo:n.blobInfo})})}):(n=new e(function(e,n){var o,i,c,u,l,d;o=s,c=e,u=n,0!==(i=t).src.indexOf("blob:")?(l=r.parseDataUri(i.src).data,(d=o.findFirst(function(e){return e.base64()===l}))?c({image:i,blobInfo:d}):r.uriToBlob(i.src).then(function(e){d=o.create(a(),e,l),o.add(d),c({image:i,blobInfo:d})},function(e){u(e)})):(d=o.getByUri(i.src))?c({image:i,blobInfo:d}):r.uriToBlob(i.src).then(function(e){r.blobToDataUri(e).then(function(t){l=r.parseDataUri(t).data,d=o.create(a(),e,l),o.add(d),c({image:i,blobInfo:d})})},function(e){u(e)})}).then(function(e){return delete c[e.image.src],e}).catch(function(e){return delete c[t.src],e}),c[t.src]=n,n)}),e.all(f)}}}}),n("tinymce.core.util.Uuid",[],function(){var e=0;return{uuid:function(t){return t+e+++(n=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+n()+n()+n());var n}}}),n("tinymce.core.file.BlobCache",["ephox.sand.api.URL","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.util.Uuid"],function(e,t,n,r){return function(){var o=[],i=n.constant,a=function(e){return s(function(t){return t.id()===e})},s=function(e){return t.filter(o,e)[0]};return{create:function(t,n,o,a){return function(t){var n,o,a;if(!t.blob||!t.base64)throw"blob and base64 representations of the image are required for BlobInfo to be created";return n=t.id||r.uuid("blobid"),o=t.name||n,{id:i(n),name:i(o),filename:i(o+"."+(a=t.blob.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[a.toLowerCase()]||"dat")),blob:i(t.blob),base64:i(t.base64),blobUri:i(t.blobUri||e.createObjectURL(t.blob)),uri:i(t.uri)}}("object"==typeof t?t:{id:t,name:a,blob:n,base64:o})},add:function(e){a(e.id())||o.push(e)},get:a,getByUri:function(e){return s(function(t){return t.blobUri()==e})},findFirst:s,removeByUri:function(n){o=t.filter(o,function(t){return t.blobUri()!==n||(e.revokeObjectURL(t.blobUri()),!1)})},destroy:function(){t.each(o,function(t){e.revokeObjectURL(t.blobUri())}),o=[]}}}}),n("tinymce.core.file.UploadStatus",[],function(){return function(){var e={},t=function(e,t){return{status:e,resultUri:t}},n=function(t){return t in e};return{hasBlobUri:n,getResultUri:function(t){var n=e[t];return n?n.resultUri:null},isPending:function(t){return!!n(t)&&1===e[t].status},isUploaded:function(t){return!!n(t)&&2===e[t].status},markPending:function(n){e[n]=t(1,null)},markUploaded:function(n,r){e[n]=t(2,r)},removeFailed:function(t){delete e[t]},destroy:function(){e={}}}}}),n("tinymce.core.EditorUpload",["tinymce.core.util.Arr","tinymce.core.file.Uploader","tinymce.core.file.ImageScanner","tinymce.core.file.BlobCache","tinymce.core.file.UploadStatus","tinymce.core.ErrorReporter"],function(e,t,n,r,o,i){return function(a){var s,c,u=new r,l=a.settings,d=new o,f=function(e){return function(t){return a.selection?e(t):[]}},m=function(e,t,n){var r=0;do{-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1)}while(-1!==r);return e},p=function(e,t,n){return e=m(e,'src="'+t+'"','src="'+n+'"'),m(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},h=function(t,n){e.each(a.undoManager.data,function(r){"fragmented"===r.type?r.fragments=e.map(r.fragments,function(e){return p(e,t,n)}):r.content=p(r.content,t,n)})},g=function(){return a.notificationManager.open({text:a.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},v=function(n){return s||(s=new t(d,{url:l.images_upload_url,basePath:l.images_upload_base_path,credentials:l.images_upload_credentials,handler:l.images_upload_handler})),x().then(f(function(t){var r;return r=e.map(t,function(e){return e.blobInfo}),s.upload(r,g).then(f(function(r){var o=e.map(r,function(e,n){var r,o,s=t[n].image;return e.status&&!1!==a.settings.images_replace_blob_uris?(o=e.url,u.removeByUri((r=s).src),h(r.src,o),a.$(r).attr({src:l.images_reuse_filename?o+"?"+(new Date).getTime():o,"data-mce-src":a.convertURL(o,"src")})):e.error&&i.uploadError(a,e.error),{element:s,status:e.status}});return n&&n(o),o}))}))},y=function(e){if(!1!==l.automatic_uploads)return v(e)},b=function(e){return!l.images_dataimg_filter||l.images_dataimg_filter(e)},x=function(){return c||(c=new n(d,u)),c.findAll(a.getBody(),b).then(f(function(t){return t=e.filter(t,function(e){return"string"!=typeof e||(i.displayError(a,e),!1)}),e.each(t,function(e){h(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),t}))},C=function(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var r=d.getResultUri(n);if(r)return'src="'+r+'"';var o=u.getByUri(n);return o||(o=e.reduce(a.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),o?'src="data:'+o.blob().type+";base64,"+o.base64()+'"':t})};return a.on("setContent",function(){!1!==a.settings.automatic_uploads?y():x()}),a.on("RawSaveContent",function(e){e.content=C(e.content)}),a.on("getContent",function(e){e.source_view||"raw"==e.format||(e.content=C(e.content))}),a.on("PostRender",function(){a.parser.addNodeFilter("img",function(t){e.each(t,function(e){var t=e.attr("src");if(!u.getByUri(t)){var n=d.getResultUri(t);n&&e.attr("src",n)}})})}),{blobCache:u,uploadImages:v,uploadImagesAuto:y,scanForImages:x,destroy:function(){u.destroy(),d.destroy(),c=s=null}}}}),n("tinymce.core.ForceBlocks",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.node.Element","tinymce.core.dom.Bookmarks","tinymce.core.dom.NodeType","tinymce.core.dom.Parents","tinymce.core.focus.EditorFocus"],function(e,t,n,r,o,i,a){var s=function(e,t){return e.hasOwnProperty(t.nodeName)},c=function(t){var c,u,l,d,f,m,p,h,g,v,y,b=t.settings,x=t.dom,C=t.selection,w=t.schema,k=w.getBlockElements(),S=C.getStart(),T=t.getBody();if(y=b.forced_root_block,S&&o.isElement(S)&&y&&(v=T.nodeName.toLowerCase(),w.isValidChild(v,y.toLowerCase())&&(E=k,R=T,!e.exists(i.parents(n.fromDom(S),n.fromDom(R)),function(e){return s(E,e.dom())})))){var E,R,N,A;for(u=(c=C.getRng()).startContainer,l=c.startOffset,d=c.endContainer,f=c.endOffset,g=a.hasFocus(t),S=T.firstChild;S;)if(N=k,o.isText(A=S)||o.isElement(A)&&!s(N,A)&&!r.isBookmarkNode(A)){if(o.isText(S)&&0===S.nodeValue.length){p=S,S=S.nextSibling,x.remove(p);continue}m||(m=x.create(y,t.settings.forced_root_block_attrs),S.parentNode.insertBefore(m,S),h=!0),p=S,S=S.nextSibling,m.appendChild(p)}else m=null,S=S.nextSibling;h&&g&&(c.setStart(u,l),c.setEnd(d,f),C.setRng(c),t.nodeChanged())}};return{setup:function(e){e.settings.forced_root_block&&e.on("NodeChange",t.curry(c,e))}}}),n("tinymce.core.NodeChange",["tinymce.core.Env","tinymce.core.selection.RangeCompare","tinymce.core.util.Delay"],function(e,t,n){return function(r){var o,i=[];"onselectionchange"in r.getDoc()||r.on("NodeChange Click MouseUp KeyUp Focus",function(e){var n,i;i={startContainer:(n=r.selection.getRng()).startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset},"nodechange"!=e.type&&t.isEq(i,o)||r.fire("SelectionChange"),o=i}),r.on("contextmenu",function(){r.fire("SelectionChange")}),r.on("SelectionChange",function(){var t=r.selection.getStart(!0);!t||!e.range&&r.selection.isCollapsed()||!function(e){var t,n;if((n=r.$(e).parentsUntil(r.getBody()).add(e)).length===i.length){for(t=n.length;t>=0&&n[t]===i[t];t--);if(-1===t)return i=n,!0}return i=n,!1}(t)&&r.dom.isChildOf(t,r.getBody())&&r.nodeChanged({selectionChange:!0})}),r.on("MouseUp",function(e){e.isDefaultPrevented()||("IMG"==r.selection.getNode().nodeName?n.setEditorTimeout(r,function(){r.nodeChanged()}):r.nodeChanged())}),this.nodeChanged=function(e){var t,n,o,i=r.selection;r.initialized&&i&&!r.settings.disable_nodechange&&!r.readonly&&(o=r.getBody(),(t=i.getStart(!0)||o).ownerDocument==r.getDoc()&&r.dom.isChildOf(t,o)||(t=o),n=[],r.dom.getParent(t,function(e){if(e===o)return!0;n.push(e)}),(e=e||{}).element=t,e.parents=n,r.fire("NodeChange",e))}}}),n("tinymce.core.dom.MousePosition",[],function(){var e=function(e){var t,n,r,o;return{top:(o=e.getBoundingClientRect()).top+(r=(t=e.ownerDocument).defaultView).pageYOffset-(n=t.documentElement).clientTop,left:o.left+r.pageXOffset-n.clientLeft}};return{calc:function(t,n){return r=(c=t).inline?e(c.getBody()):{left:0,top:0},s=(a=t).getBody(),o=a.inline?{left:s.scrollLeft,top:s.scrollTop}:{left:0,top:0},{pageX:(i=function(t,n){if(n.target.ownerDocument!==t.getDoc()){var r=e(t.getContentAreaContainer()),o=(a=(i=t).getBody(),s=i.getDoc().documentElement,i.inline?{left:a.scrollLeft,top:a.scrollTop}:{left:a.scrollLeft||s.scrollLeft,top:a.scrollTop||s.scrollTop});return{left:n.pageX-r.left+o.left,top:n.pageY-r.top+o.top}}var i,a,s;return{left:n.pageX,top:n.pageY}}(t,n)).left-r.left+o.left,pageY:i.top-r.top+o.top};var r,o,i,a,s,c}}}),n("tinymce.core.DragDropOverrides",["global!document","tinymce.core.dom.DOMUtils","tinymce.core.dom.MousePosition","tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.util.Delay","tinymce.core.util.Fun"],function(e,t,n,r,o,i,a){var s=r.isContentEditableFalse,c=r.isContentEditableTrue,u=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},l=function(e){e.dragging=!1,e.element=null,u(e.ghost)};return{init:function(r){var d,f,m,p,h,g,v,y,b,x,C,w,k,S,T,E,R,N;m=t.DOM,y=e,E=N={},R=f=r,p=function(e){if(0===e.button){var t=o.find(R.dom.getParents(e.target),a.or(s,c));if(u=R.getBody(),s(l=t)&&l!==u){var n=R.dom.getPos(t),r=R.getBody(),i=R.getDoc().documentElement;E.element=t,E.screenX=e.screenX,E.screenY=e.screenY,E.maxX=(R.inline?r.scrollWidth:i.offsetWidth)-2,E.maxY=(R.inline?r.scrollHeight:i.offsetHeight)-2,E.relX=e.pageX-n.x,E.relY=e.pageY-n.y,E.width=t.offsetWidth,E.height=t.offsetHeight,E.ghost=function(e,n,r,o){var i=t.cloneNode(!0);e.dom.setStyles(i,{width:r,height:o}),e.dom.setAttrib(i,"data-mce-selected",null);var a=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:r,height:o}),e.dom.setStyles(i,{margin:0,boxSizing:"border-box"}),a.appendChild(i),a}(R,0,E.width,E.height)}}var u,l},b=N,x=f,C=i.throttle(function(e,t){x._selectionOverrides.hideFakeCaret(),x.selection.placeCaretAt(e,t)},0),h=function(e){var t,r,o,i,a,s,c,u,l,d,f,m,p=Math.max(Math.abs(e.screenX-b.screenX),Math.abs(e.screenY-b.screenY));if(b.element&&!b.dragging&&p>10){if(x.fire("dragstart",{target:b.element}).isDefaultPrevented())return;b.dragging=!0,x.focus()}if(b.dragging){var h=(f=b,{pageX:(m=n.calc(x,e)).pageX-f.relX,pageY:m.pageY+5});l=b.ghost,d=x.getBody(),l.parentNode!==d&&d.appendChild(l),o=b.width,i=b.height,a=b.maxX,s=b.maxY,c=0,u=0,(t=b.ghost).style.left=(r=h).pageX+"px",t.style.top=r.pageY+"px",r.pageX+o>a&&(c=r.pageX+o-a),r.pageY+i>s&&(u=r.pageY+i-s),t.style.width=o-c+"px",t.style.height=i-u+"px",C(e.clientX,e.clientY)}},S=N,T=f,g=function(e){if(S.dragging&&(o=T,(i=3===(c=T.selection.getSel().getRangeAt(0).startContainer).nodeType?c.parentNode:c)!==(a=S.element)&&!o.dom.isChildOf(i,a)&&!s(i))){var t=((r=S.element.cloneNode(!0)).removeAttribute("data-mce-selected"),r),n=T.fire("drop",{targetClone:t,clientX:e.clientX,clientY:e.clientY});n.isDefaultPrevented()||(t=n.targetClone,T.undoManager.transact(function(){u(S.element),T.insertContent(T.dom.getOuterHTML(t)),T._selectionOverrides.hideFakeCaret()}))}var r,o,i,a,c;l(S)},w=N,k=f,v=function(){l(w),w.dragging&&k.fire("dragend")},f.on("mousedown",p),f.on("mousemove",h),f.on("mouseup",g),m.bind(y,"mousemove",h),m.bind(y,"mouseup",v),f.on("remove",function(){m.unbind(y,"mousemove",h),m.unbind(y,"mouseup",v)}),(d=r).on("drop",function(e){var t="undefined"!=typeof e.clientX?d.getDoc().elementFromPoint(e.clientX,e.clientY):null;(s(t)||s(d.dom.getContentEditableParent(t)))&&e.preventDefault()})}}}),n("tinymce.core.caret.FakeCaret",["global!clearInterval","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretContainerRemove","tinymce.core.dom.DomQuery","tinymce.core.dom.NodeType","tinymce.core.geom.ClientRect","tinymce.core.util.Delay"],function(e,t,n,r,o,i,a){var s=o.isContentEditableFalse;return function(o,c){var u,l,d=null,f=function(){!function(){var e,n,i,a,s;for(e=r("*[contentEditable=false]",o),a=0;a<e.length;a++)t.endsWithCaretContainer(i=(n=e[a]).previousSibling)&&(1==(s=i.data).length?i.parentNode.removeChild(i):i.deleteData(s.length-1,1)),t.startsWithCaretContainer(i=n.nextSibling)&&(1==(s=i.data).length?i.parentNode.removeChild(i):i.deleteData(0,1))}(),l&&(n.remove(l),l=null),d&&(d.remove(),d=null),e(u)};return{show:function(e,n){var m,p,h,g,v,y,b,x,C,w,k;return f(),(h=n)&&/^(TD|TH)$/i.test(h.nodeName)?null:c(n)?(l=t.insertBlock("p",n,e),v=e,k=i.collapse((g=n).getBoundingClientRect(),v),"BODY"==o.tagName?(y=o.ownerDocument.documentElement,b=o.scrollLeft||y.scrollLeft,x=o.scrollTop||y.scrollTop):(w=o.getBoundingClientRect(),b=o.scrollLeft-w.left,x=o.scrollTop-w.top),k.left+=b,k.right+=b,k.top+=x,k.bottom+=x,k.width=1,(C=g.offsetWidth-g.clientWidth)>0&&(v&&(C*=-1),k.left+=C,k.right+=C),m=k,r(l).css("top",m.top),d=r('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(m).appendTo(o),e&&d.addClass("mce-visual-caret-before"),u=a.setInterval(function(){o.ownerDocument.activeElement===o?r("div.mce-visual-caret",o).toggleClass("mce-visual-caret-hidden"):r("div.mce-visual-caret",o).addClass("mce-visual-caret-hidden")},500),(p=n.ownerDocument.createRange()).setStart(l,0),p.setEnd(l,0),p):(l=t.insertInline(n,e),p=n.ownerDocument.createRange(),s(l.nextSibling)?(p.setStart(l,0),p.setEnd(l,0)):(p.setStart(l,1),p.setEnd(l,1)),p)},hide:f,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},destroy:function(){a.clearInterval(u)}}}}),n("tinymce.core.dom.Dimensions",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.geom.ClientRect"],function(e,t,n){var r=function(o){var i=function(t){return e.map(t,function(e){return(e=n.clone(e)).node=o,e})};if(e.isArray(o))return e.reduce(o,function(e,t){return e.concat(r(t))},[]);if(t.isElement(o))return i(o.getClientRects());if(t.isText(o)){var a=o.ownerDocument.createRange();return a.setStart(o,0),a.setEnd(o,o.data.length),i(a.getClientRects())}};return{getClientRects:r}}),n("tinymce.core.caret.LineUtils",["tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.dom.Dimensions","tinymce.core.geom.ClientRect","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretCandidate"],function(e,t,n,r,o,i,a){var s=n.isContentEditableFalse,c=i.findNode,u=e.curry,l=function(e,t){return Math.abs(e.left-t)},d=function(e,t){return Math.abs(e.right-t)},f=function(e,n){var r=function(e,t){return e>=t.left&&e<=t.right};return t.reduce(e,function(e,t){var o,i;return o=Math.min(l(e,n),d(e,n)),i=Math.min(l(t,n),d(t,n)),r(n,t)?t:r(n,e)?e:i==o&&s(t.node)?t:i<o?t:e})},m=function(e,t,n,r){for(;r=c(r,e,a.isEditableCaretCandidate,t);)if(n(r))return},p=function(e,n){var i=[],a=function(e,o){var a;return a=t.filter(r.getClientRects(o),function(t){return!e(t,n)}),i=i.concat(a),0===a.length};return i.push(n),m(-1,e,u(a,o.isAbove),n.node),m(1,e,u(a,o.isBelow),n.node),i};return{findClosestClientRect:f,findLineNodeRects:p,closestCaret:function(e,n,o){var i,a,c,u;return i=r.getClientRects(t.filter(t.toArray(e.getElementsByTagName("*")),s)),i=t.filter(i,function(e){return o>=e.top&&o<=e.bottom}),(a=f(i,n))&&(a=f(p(e,a),n))&&s(a.node)?{node:(c=a).node,before:l(c,u=n)<d(c,u)}:null}}}),n("tinymce.core.dom.RangePoint",["ephox.katamari.api.Arr","tinymce.core.geom.ClientRect"],function(e,t){return{isXYWithinRange:function(n,r,o){return!o.collapsed&&e.foldl(o.getClientRects(),function(e,o){return e||t.containsXY(o,n,r)},!1)}}}),n("ephox.katamari.api.Throttler",["global!clearTimeout","global!setTimeout"],function(e,t){return{adaptable:function(n,r){var o=null,i=null;return{cancel:function(){null!==o&&(e(o),o=null,i=null)},throttle:function(){i=arguments,null===o&&(o=t(function(){n.apply(null,i),o=null,i=null},r))}}},first:function(n,r){var o=null;return{cancel:function(){null!==o&&(e(o),o=null)},throttle:function(){var e=arguments;null===o&&(o=t(function(){n.apply(null,e),o=null,e=null},r))}}},last:function(n,r){var o=null;return{cancel:function(){null!==o&&(e(o),o=null)},throttle:function(){var i=arguments;null!==o&&e(o),o=t(function(){n.apply(null,i),o=null,i=null},r)}}}}}),n("tinymce.core.keyboard.CefUtils",["tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.NodeType","tinymce.core.util.Fun"],function(e,t,n,r){var o=n.isContentEditableTrue,i=n.isContentEditableFalse,a=function(e,t,n,r){return t._selectionOverrides.showCaret(e,n,r)},s=function(n,s){var c,u;return s=t.normalizeRange(1,n.getBody(),s),c=e.fromRangeStart(s),i(c.getNode())?a(1,n,c.getNode(),!c.isAtEnd()):i(c.getNode(!0))?a(1,n,c.getNode(!0),!1):(u=n.dom.getParent(c.getNode(),r.or(i,o)),i(u)?a(1,n,u,!1):null)};return{showCaret:a,selectNode:function(e,t){var n,r;return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:((r=(n=t).ownerDocument.createRange()).selectNode(n),r)},renderCaretAtRange:s,renderRangeCaret:function(e,t){return t&&t.collapsed&&s(e,t)||t}}}),n("tinymce.core.focus.CefFocus",["ephox.katamari.api.Throttler","tinymce.core.keyboard.CefUtils"],function(e,t){return{setup:function(n){var r=e.first(function(){if(!n.removed){var e=t.renderRangeCaret(n,n.selection.getRng());n.selection.setRng(e)}},0);n.on("focus",function(){r.throttle()}),n.on("blur",function(){r.cancel()})}}}),n("tinymce.core.util.VK",["tinymce.core.Env"],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),n("tinymce.core.SelectionOverrides",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","tinymce.core.DragDropOverrides","tinymce.core.EditorView","tinymce.core.Env","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.FakeCaret","tinymce.core.caret.LineUtils","tinymce.core.dom.NodeType","tinymce.core.dom.RangePoint","tinymce.core.focus.CefFocus","tinymce.core.keyboard.CefUtils","tinymce.core.util.VK"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p,h,g,v,y,b){var x=h.isContentEditableTrue,C=h.isContentEditableFalse,w=d.isAfterContentEditableFalse,k=d.isBeforeContentEditableFalse;return function(h){var S,T,E,R,N,A,D=h.getBody(),P=new m(h.getBody(),function(e){return h.dom.isBlock(e)}),B="sel-"+h.dom.uniqueId(),_=function(e){e&&h.selection.setRng(e)},O=function(){return h.selection.getRng()},F=function(e,t){h.selection.scrollIntoView(e,t)},M=function(e,t,n){return h.fire("ShowCaret",{target:t,direction:e,before:n}).isDefaultPrevented()?null:(F(t,-1===e),P.show(n,t))},I=function(e,t){return t=d.normalizeRange(e,D,t),-1==e?l.fromRangeStart(t):l.fromRangeEnd(t)},L=function(e){return u.isCaretContainer(e)||u.startsWithCaretContainer(e)||u.endsWithCaretContainer(e)},H=function(e){return L(e.startContainer)||L(e.endContainer)},W=function(t,a){var s,u,l,d,f,m,p,g,v,y,b=h.$,x=h.dom;if(!t)return null;if(t.collapsed){if(!H(t))if(!1===a){if(g=I(-1,t),C(g.getNode(!0)))return M(-1,g.getNode(!0),!1);if(C(g.getNode()))return M(-1,g.getNode(),!g.isAtEnd())}else{if(g=I(1,t),C(g.getNode()))return M(1,g.getNode(),!g.isAtEnd());if(C(g.getNode(!0)))return M(1,g.getNode(!0),!1)}return null}return f=t.startOffset,m=t.endOffset,3===(d=t.startContainer).nodeType&&0===f&&C(d.parentNode)&&(f=x.nodeIndex(d=d.parentNode),d=d.parentNode),1!=d.nodeType?null:(m==f+1&&(s=d.childNodes[f]),C(s)?(v=y=s.cloneNode(!0),(p=h.fire("ObjectSelected",{target:s,targetClone:v})).isDefaultPrevented()?null:(u=i.descendant(n.fromDom(h.getBody()),"#"+B).fold(function(){return b([])},function(e){return b([e.dom()])}),v=p.targetClone,0===u.length&&(u=b('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",B)).appendTo(h.getBody()),t=h.dom.createRng(),v===y&&c.ie?(u.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xa0</p>').append(v),t.setStartAfter(u[0].firstChild.firstChild),t.setEndAfter(v)):(u.empty().append("\xa0").append(v).append("\xa0"),t.setStart(u[0].firstChild,1),t.setEnd(u[0].lastChild,0)),u.css({top:x.getPos(s,h.getBody()).y}),u[0].focus(),(l=h.selection.getSel()).removeAllRanges(),l.addRange(t),e.each(o.descendants(n.fromDom(h.getBody()),"*[data-mce-selected]"),function(e){r.remove(e,"data-mce-selected")}),s.setAttribute("data-mce-selected",1),S=s,z(),t)):null)},U=function(){S&&(S.removeAttribute("data-mce-selected"),i.descendant(n.fromDom(h.getBody()),"#"+B).each(t.remove),S=null)},z=function(){P.hide()};return c.ceFalse&&(A=function(e){for(var t=h.getBody();e&&e!=t;){if(x(e)||C(e))return e;e=e.parentNode}return null},h.on("mouseup",function(e){var t=O();t.collapsed&&s.isXYInContentArea(h,e.clientX,e.clientY)&&_(y.renderCaretAtRange(h,t))}),h.on("click",function(e){var t;(t=A(e.target))&&(C(t)&&(e.preventDefault(),h.focus()),x(t)&&h.dom.isChildOf(t,h.selection.getNode())&&U())}),h.on("blur NewBlock",function(){U()}),N=!1,(R=h).on("touchstart",function(){N=!1}),R.on("touchmove",function(){N=!0}),R.on("touchend",function(e){var t=A(e.target);C(t)&&(N||(e.preventDefault(),W(y.selectNode(R,t))))}),h.on("mousedown",function(e){var t,n,r,o,i;if(!1!==s.isXYInContentArea(h,e.clientX,e.clientY))if(t=A(e.target))C(t)?(e.preventDefault(),W(y.selectNode(h,t))):(U(),x(t)&&e.shiftKey||g.isXYWithinRange(e.clientX,e.clientY,h.selection.getRng())||h.selection.placeCaretAt(e.clientX,e.clientY));else{U(),z();var a=p.closestCaret(D,e.clientX,e.clientY);a&&(n=a.node,o=h.dom.getParent(e.target,h.dom.isBlock),i=h.dom.getParent(n,h.dom.isBlock),o&&(r=i,h.dom.getParent(o,h.dom.isBlock)!==h.dom.getParent(r,h.dom.isBlock))&&function(e){var t=new f(e);if(!e.firstChild)return!1;var n=l.before(e.firstChild),r=t.next(n);return r&&!k(r)&&!w(r)}(o)||(e.preventDefault(),h.getBody().focus(),_(M(1,a.node,a.before))))}}),h.on("keypress",function(e){b.modifierPressed(e)||C(h.selection.getNode())&&e.preventDefault()}),h.on("getSelectionRange",function(e){var t=e.range;if(S){if(!S.parentNode)return void(S=null);(t=t.cloneRange()).selectNode(S),e.range=t}}),h.on("setSelectionRange",function(e){var t;(t=W(e.range,e.forward))&&(e.range=t)}),h.on("AfterSetSelectionRange",function(e){var t=e.range;H(t)||z(),h.dom.hasClass(t.startContainer.parentNode,"mce-offscreen-selection")||U()}),h.on("copy",function(e){var t,n=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!c.ie){var r=(t=h.dom.get(B))?t.getElementsByTagName("*")[0]:t;r&&(e.preventDefault(),n.clearData(),n.setData("text/html",r.outerHTML),n.setData("text/plain",r.outerText))}}),a.init(h),v.setup(h),E=".mce-content-body",(T=h.contentStyles).push(P.getCss()),T.push(E+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+E+" *[contentEditable=false] {cursor: default;}"+E+" *[contentEditable=true] {cursor: text;}")),{showCaret:M,showBlockCaretContainer:function(e){e.hasAttribute("data-mce-caret")&&(u.showCaretContainerBlock(e),_(O()),F(e[0]))},hideFakeCaret:z,destroy:function(){P.destroy(),S=null}}}}),n("tinymce.core.undo.Diff",[],function(){return{KEEP:0,DELETE:2,INSERT:1,diff:function(e,t){var n=e.length+t.length+2,r=new Array(n),o=new Array(n),i=function(n,r,o,a,c){var u=s(n,r,o,a);if(null===u||u.start===r&&u.diag===r-a||u.end===n&&u.diag===n-o)for(var l=n,d=o;l<r||d<a;)l<r&&d<a&&e[l]===t[d]?(c.push([0,e[l]]),++l,++d):r-n>a-o?(c.push([2,e[l]]),++l):(c.push([1,t[d]]),++d);else{i(n,u.start,o,u.start-u.diag,c);for(var f=u.start;f<u.end;++f)c.push([0,e[f]]);i(u.end,r,u.end-u.diag,a,c)}},a=function(n,r,o,i){for(var a=n;a-r<i&&a<o&&e[a]===t[a-r];)++a;return{start:n,end:a,diag:r}},s=function(n,i,s,c){var u=i-n,l=c-s;if(0===u||0===l)return null;var d=u-l,f=l+u,m=(f%2==0?f:f+1)/2;r[1+m]=n,o[1+m]=i+1;for(var p=0;p<=m;++p){for(var h=-p;h<=p;h+=2){var g=h+m;r[g]=h===-p||h!=p&&r[g-1]<r[g+1]?r[g+1]:r[g-1]+1;for(var v=r[g],y=v-n+s-h;v<i&&y<c&&e[v]===t[y];)r[g]=++v,++y;if(d%2!=0&&d-p<=h&&h<=d+p&&o[g-d]<=r[g])return a(o[g-d],h+n-s,i,c)}for(h=d-p;h<=d+p;h+=2){for(o[g=h+m-d]=h===d-p||h!=d+p&&o[g+1]<=o[g-1]?o[g+1]-1:o[g-1],y=(v=o[g]-1)-n+s-h;v>=n&&y>=s&&e[v]===t[y];)o[g]=v--,y--;if(d%2==0&&-p<=h&&h<=p&&o[g]<=r[g+d])return a(o[g],h+n-s,i,c)}}},c=[];return i(0,e.length,0,t.length,c),c}}}),n("tinymce.core.undo.Fragments",["global!document","tinymce.core.html.Entities","tinymce.core.undo.Diff","tinymce.core.util.Arr"],function(e,t,n,r){var o=function(e){return 1===e.nodeType?e.outerHTML:3===e.nodeType?t.encodeRaw(e.data,!1):8===e.nodeType?"\x3c!--"+e.data+"--\x3e":""};return{read:function(e){return r.filter(r.map(e.childNodes,o),function(e){return e.length>0})},write:function(t,i){var a,s,c,u=r.map(i.childNodes,o);return a=n.diff(u,t),s=i,c=0,r.each(a,function(t){t[0]===n.KEEP?c++:t[0]===n.INSERT?(function(n,r,o){var i=function(t){var n,r,o;for(o=e.createElement("div"),n=e.createDocumentFragment(),t&&(o.innerHTML=t);r=o.firstChild;)n.appendChild(r);return n}(t[1]);if(n.hasChildNodes()&&o<n.childNodes.length){var a=n.childNodes[o];a.parentNode.insertBefore(i,a)}else n.appendChild(i)}(s,0,c),c++):t[0]===n.DELETE&&function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}}(s,c)}),i}}}),n("tinymce.core.undo.Levels",["ephox.katamari.api.Arr","tinymce.core.dom.TrimHtml","tinymce.core.undo.Fragments"],function(e,t,n){var r=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},o=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},i=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content};return{createFragmentedLevel:r,createCompleteLevel:o,createFromEditor:function(i){var a,s,c;return a=n.read(i.getBody()),-1!==(s=(c=e.bind(a,function(e){var n=t.trimInternal(i.serializer,e);return n.length>0?[n]:[]})).join("")).indexOf("</iframe>")?r(c):o(s)},applyToEditor:function(e,t,r){"fragmented"===t.type?n.write(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(r?t.beforeBookmark:t.bookmark)},isEq:function(e,t){return!!e&&!!t&&i(e)===i(t)}}}),n("tinymce.core.UndoManager",["tinymce.core.dom.GetBookmark","tinymce.core.undo.Levels","tinymce.core.util.Tools"],function(e,t,n){return function(r){var o,i,a=this,s=0,c=[],u=0,l=function(){return 0===u},d=function(e){l()&&(a.typing=e)},f=function(e){r.setDirty(e)},m=function(e){d(!1),a.add({},e)},p=function(){a.typing&&(d(!1),a.add())};return r.on("init",function(){a.add()}),r.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(p(),a.beforeChange())}),r.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&m(e)}),r.on("ObjectResizeStart Cut",function(){a.beforeChange()}),r.on("SaveContent ObjectResized blur",m),r.on("DragEnd",m),r.on("KeyUp",function(e){var n=e.keyCode;e.isDefaultPrevented()||((n>=33&&n<=36||n>=37&&n<=40||45===n||e.ctrlKey)&&(m(),r.nodeChanged()),46!==n&&8!==n||r.nodeChanged(),i&&a.typing&&!1===t.isEq(t.createFromEditor(r),c[0])&&(!1===r.isDirty()&&(f(!0),r.fire("change",{level:c[0],lastLevel:null})),r.fire("TypingUndo"),i=!1,r.nodeChanged()))}),r.on("KeyDown",function(e){var t=e.keyCode;e.isDefaultPrevented()||(t>=33&&t<=36||t>=37&&t<=40||45===t?a.typing&&m(e):!(t<16||t>20)||224===t||91===t||a.typing||e.ctrlKey&&!e.altKey||e.metaKey||(a.beforeChange(),d(!0),a.add({},e),i=!0))}),r.on("MouseDown",function(e){a.typing&&m(e)}),r.addShortcut("meta+z","","Undo"),r.addShortcut("meta+y,meta+shift+z","","Redo"),r.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||r.nodeChanged()}),a={data:c,typing:!1,beforeChange:function(){l()&&(o=e.getUndoBookmark(r.selection))},add:function(i,a){var u,d,m,p=r.settings;if(m=t.createFromEditor(r),i=n.extend(i=i||{},m),!1===l()||r.removed)return null;if(r.fire("BeforeAddUndo",{level:i,lastLevel:d=c[s],originalEvent:a}).isDefaultPrevented())return null;if(d&&t.isEq(d,i))return null;if(c[s]&&(c[s].beforeBookmark=o),p.custom_undo_redo_levels&&c.length>p.custom_undo_redo_levels){for(u=0;u<c.length-1;u++)c[u]=c[u+1];c.length--,s=c.length}i.bookmark=e.getUndoBookmark(r.selection),s<c.length-1&&(c.length=s+1),c.push(i),s=c.length-1;var h={level:i,lastLevel:d,originalEvent:a};return r.fire("AddUndo",h),s>0&&(f(!0),r.fire("change",h)),i},undo:function(){var e;return a.typing&&(a.add(),a.typing=!1,d(!1)),s>0&&(e=c[--s],t.applyToEditor(r,e,!0),f(!0),r.fire("undo",{level:e})),e},redo:function(){var e;return s<c.length-1&&(e=c[++s],t.applyToEditor(r,e,!1),f(!0),r.fire("redo",{level:e})),e},clear:function(){c=[],s=0,a.typing=!1,a.data=c,r.fire("ClearUndos")},hasUndo:function(){return s>0||a.typing&&c[0]&&!t.isEq(t.createFromEditor(r),c[0])},hasRedo:function(){return s<c.length-1&&!a.typing},transact:function(e){return p(),a.beforeChange(),a.ignore(e),a.add()},ignore:function(e){try{u++,e()}finally{u--}},extra:function(e,n){var o;a.transact(e)&&(o=c[s].bookmark,t.applyToEditor(r,c[s-1],!0),a.transact(n)&&(c[s-1].beforeBookmark=o))}}}}),n("tinymce.core.fmt.Hooks",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.dom.DomQuery"],function(e,t,n){var r,o={},i=e.filter,a=e.each;return r=function(r){var o,s,c=r.selection.getRng();o=t.matchNodeNames("pre"),c.collapsed||(s=r.selection.getSelectedBlocks(),a(i(i(s,o),function(t){return o(t.previousSibling)&&-1!==e.indexOf(s,t.previousSibling)}),function(e){var t,r;t=e.previousSibling,n(r=e).remove(),n(t).append("<br><br>").append(r.childNodes)}))},o.pre||(o.pre=[]),o.pre.push(r),{postProcess:function(e,t){a(o[e],function(e){e(t)})}}}),n("tinymce.core.selection.RangeWalk",["tinymce.core.util.Tools"],function(e){var t=e.each;return{walk:function(e,n,r){var o,i,a,s,c,u,l,d=n.startContainer,f=n.startOffset,m=n.endContainer,p=n.endOffset;if((l=e.select("td[data-mce-selected],th[data-mce-selected]")).length>0)t(l,function(e){r([e])});else{var h,g,v,y=function(e){var t;return 3===(t=e[0]).nodeType&&t===d&&f>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===p&&e.length>0&&t===m&&3===t.nodeType&&e.splice(e.length-1,1),e},b=function(e,t,n){for(var r=[];e&&e!=n;e=e[t])r.push(e);return r},x=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},C=function(e,t,n){var o=n?"nextSibling":"previousSibling";for(c=(s=e).parentNode;s&&s!=t;s=c)c=s.parentNode,(u=b(s===e?s:s[o],o)).length&&(n||u.reverse(),r(y(u)))};if(1===d.nodeType&&d.hasChildNodes()&&(d=d.childNodes[f]),1===m.nodeType&&m.hasChildNodes()&&(g=p,--g>(v=(h=m).childNodes).length-1?g=v.length-1:g<0&&(g=0),m=v[g]||h),d===m)return r(y([d]));for(o=e.findCommonAncestor(d,m),s=d;s;s=s.parentNode){if(s===m)return C(d,o,!0);if(s===o)break}for(s=m;s;s=s.parentNode){if(s===d)return C(m,o);if(s===o)break}i=x(d,o)||d,a=x(m,o)||m,C(d,i,!0),(u=b(i===d?i:i.nextSibling,"nextSibling",a===m?a.nextSibling:a)).length&&r(y(u)),C(m,a)}}}}),n("tinymce.core.fmt.RemoveFormat",["tinymce.core.dom.Bookmarks","tinymce.core.dom.NodeType","tinymce.core.dom.TreeWalker","tinymce.core.fmt.CaretFormat","tinymce.core.fmt.ExpandRange","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.MatchFormat","tinymce.core.selection.RangeWalk","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,s,c){var u=/^(src|href|style)$/,l=c.each,d=i.isEq,f=function(e){return/^(TH|TD)$/.test(e.nodeName)},m=function(e,r,o){var i,a,s;return i=r[o?"startContainer":"endContainer"],a=r[o?"startOffset":"endOffset"],t.isElement(i)&&(s=i.childNodes.length-1,!o&&a&&a--,i=i.childNodes[a>s?s:a]),t.isText(i)&&o&&a>=i.nodeValue.length&&(i=new n(i,e.getBody()).next()||i),t.isText(i)&&!o&&0===a&&(i=new n(i,e.getBody()).prev()||i),i},p=function(e,t,n,r){var o=e.create(n,r);return t.parentNode.insertBefore(o,t),o.appendChild(t),o},h=function(e,t,n,r){return!(t=i.getNonWhiteSpaceSibling(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},g=function(e,n,r,o,a){var s,f,m,g,v,y,b,x,C,w,k,S,T,E,R,N=e.dom;if(y=N,!(d(b=o,(x=n).inline)||d(b,x.block)||(x.selector?t.isElement(b)&&y.is(b,x.selector):void 0)||(g=o,v=n,v.links&&"A"===g.tagName)))return!1;if("all"!==n.remove)for(l(n.styles,function(e,t){e=i.normalizeStyleValue(N,i.replaceVars(e,r),t),"number"==typeof t&&(t=e,a=0),(n.remove_similar||!a||d(i.getStyle(N,a,t),e))&&N.setStyle(o,t,""),m=1}),m&&""===N.getAttrib(o,"style")&&(o.removeAttribute("style"),o.removeAttribute("data-mce-style")),l(n.attributes,function(e,t){var n;if(e=i.replaceVars(e,r),"number"==typeof t&&(t=e,a=0),!a||d(N.getAttrib(a,t),e)){if("class"===t&&(e=N.getAttrib(o,t))&&(n="",l(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(n+=(n?" ":"")+e)}),n))return void N.setAttrib(o,t,n);"class"===t&&o.removeAttribute("className"),u.test(t)&&o.removeAttribute("data-mce-"+t),o.removeAttribute(t)}}),l(n.classes,function(e){e=i.replaceVars(e,r),a&&!N.hasClass(a,e)||N.removeClass(o,e)}),f=N.getAttribs(o),s=0;s<f.length;s++){var A=f[s].nodeName;if(0!==A.indexOf("_")&&0!==A.indexOf("data-"))return!1}return"none"!==n.remove?(T=(w=o).parentNode,E=(C=e).dom,R=C.settings.forced_root_block,(k=n).block&&(R?T===E.getRoot()&&(k.list_block&&d(w,k.list_block)||l(c.grep(w.childNodes),function(e){i.isValid(C,R,e.nodeName.toLowerCase())?S?S.appendChild(e):(S=p(E,e,R),E.setAttribs(S,C.settings.forced_root_block_attrs)):S=0})):E.isBlock(w)&&!E.isBlock(T)&&(h(E,w,!1)||h(E,w.firstChild,!0,1)||w.insertBefore(E.create("br"),w.firstChild),h(E,w,!0)||h(E,w.lastChild,!1,1)||w.appendChild(E.create("br")))),k.selector&&k.inline&&!d(k.inline,w)||E.remove(w,1),!0):void 0};return{removeFormat:g,remove:function(n,u,d,h,v){var y,b,x=n.formatter.get(u),C=x[0],w=!0,k=n.dom,S=n.selection,T=function(e){var t,r,o,s,c,f=(r=u,o=d,s=v,l(i.getParents((t=n).dom,e.parentNode).reverse(),function(e){var n;c||"_start"===e.id||"_end"===e.id||(n=a.matchNode(t,e,r,o,s))&&!1!==n.split&&(c=e)}),c);return function(e,t,n,r,o,i,a,s){var c,u,l,d,f,m,p=e.dom;if(n){for(m=n.parentNode,c=r.parentNode;c&&c!==m;c=c.parentNode){for(u=p.clone(c,!1),f=0;f<t.length;f++)if(g(e,t[f],s,u,u)){u=0;break}u&&(l&&u.appendChild(l),d||(d=u),l=u)}a.mixed&&p.isBlock(n)||(r=p.split(n,r)),l&&(o.parentNode.insertBefore(l,o),d.appendChild(o))}return r}(n,x,f,e,e,0,C,d)},E=function(e){var r,o,i,a,s;if(t.isElement(e)&&k.getContentEditable(e)&&(a=w,w="true"===k.getContentEditable(e),s=!0),r=c.grep(e.childNodes),w&&!s)for(o=0,i=x.length;o<i&&!g(n,x[o],d,e,e);o++);if(C.deep&&r.length){for(o=0,i=r.length;o<i;o++)E(r[o]);s&&(w=a)}},R=function(n){var r=k.get(n?"_start":"_end"),o=r[n?"firstChild":"lastChild"];return e.isBookmarkNode(o)&&(o=o[n?"firstChild":"lastChild"]),t.isText(o)&&0===o.data.length&&(o=n?r.previousSibling||r.nextSibling:r.nextSibling||r.previousSibling),k.remove(r,!0),o},N=function(e){var r,a,c=e.commonAncestorContainer;if(e=o.expandRng(n,e,x,!0),C.split){if((r=m(n,e,!0))!==(a=m(n,e))){if(/^(TR|TH|TD)$/.test(r.nodeName)&&r.firstChild&&(r="TR"===r.nodeName?r.firstChild.firstChild||r:r.firstChild||r),c&&/^T(HEAD|BODY|FOOT|R)$/.test(c.nodeName)&&f(a)&&a.firstChild&&(a=a.firstChild||a),k.isChildOf(r,a)&&r!==a&&!k.isBlock(a)&&!f(r)&&!f(a))return r=p(k,r,"span",{id:"_start","data-mce-type":"bookmark"}),T(r),void(r=R(!0));r=p(k,r,"span",{id:"_start","data-mce-type":"bookmark"}),a=p(k,a,"span",{id:"_end","data-mce-type":"bookmark"}),T(r),T(a),r=R(!0),a=R()}else r=a=T(r);e.startContainer=r.parentNode?r.parentNode:r,e.startOffset=k.nodeIndex(r),e.endContainer=a.parentNode?a.parentNode:a,e.endOffset=k.nodeIndex(a)+1}s.walk(k,e,function(e){l(e,function(e){E(e),t.isElement(e)&&"underline"===n.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===i.getTextDecoration(k,e.parentNode)&&g(n,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})};if(h)h.nodeType?((b=k.createRng()).setStartBefore(h),b.setEndAfter(h),N(b)):N(h);else if("false"!==k.getContentEditable(S.getNode()))S.isCollapsed()&&C.inline&&!k.select("td[data-mce-selected],th[data-mce-selected]").length?r.removeCaretFormat(n,u,d,v):(y=S.getBookmark(),N(S.getRng(!0)),S.moveToBookmark(y),C.inline&&a.match(n,u,d,S.getStart())&&i.moveStart(k,S,S.getRng(!0)),n.nodeChanged());else{h=S.getNode();for(var A=0,D=x.length;A<D&&(!x[A].ceFalseOverride||!g(n,x[A],d,h,h));A++);}}}}),n("tinymce.core.fmt.MergeFormats",["ephox.katamari.api.Fun","tinymce.core.dom.Bookmarks","tinymce.core.dom.ElementUtils","tinymce.core.dom.NodeType","tinymce.core.fmt.CaretFormat","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.MatchFormat","tinymce.core.fmt.RemoveFormat","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,s,c){var u=c.each,l=function(e){return e&&1===e.nodeType&&!t.isBookmarkNode(e)&&!o.isCaretNode(e)&&!r.isBogus(e)},d=function(e,n){var r;for(r=e;r;r=r[n]){if(3===r.nodeType&&0!==r.nodeValue.length)return e;if(1===r.nodeType&&!t.isBookmarkNode(r))return r}return e},f=function(e,t,r){var o,i,a=new n(e);if(t&&r&&(t=d(t,"previousSibling"),r=d(r,"nextSibling"),a.compare(t,r))){for(o=t.nextSibling;o&&o!==r;)i=o,o=o.nextSibling,t.appendChild(i);return e.remove(r),c.each(c.grep(r.childNodes),function(e){t.appendChild(e)}),t}return r},m=function(e,t,n){u(e.childNodes,function(e){l(e)&&(t(e)&&n(e),e.hasChildNodes()&&m(e,t,n))})},p=function(t,n){return e.curry(function(e,n){return!(!n||!i.getStyle(t,n,e))},n)},h=function(t,n,r){return e.curry(function(e,n,r){t.setStyle(r,e,n),""===r.getAttribute("style")&&r.removeAttribute("style"),g(t,r)},n,r)},g=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},v=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=i.getTextDecoration(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))};return{mergeWithChildren:function(e,t,n,r){u(t,function(t){var o,i;u(e.dom.select(t.inline,r),function(r){l(r)&&s.removeFormat(e,t,n,r,t.exact?r:null)}),o=e.dom,(i=t).clear_child_styles&&u(o.select(i.links?"*:not(a)":"*",r),function(e){l(e)&&u(i.styles,function(t,n){o.setStyle(e,n,"")})})})},mergeUnderlineAndColor:function(t,n,r,o){(n.styles.color||n.styles.textDecoration)&&(c.walk(o,e.curry(v,t),"childNodes"),v(t,o))},mergeBackgroundColorAndFontSize:function(e,t,n,r){t.styles&&t.styles.backgroundColor&&m(r,p(e,"fontSize"),h(e,"backgroundColor",i.replaceVars(t.styles.backgroundColor,n)))},mergeSubSup:function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(m(r,p(e,"fontSize"),h(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))},mergeSiblings:function(e,t,n,r){r&&!1!==t.merge_siblings&&(r=f(e,i.getNonWhiteSpaceSibling(r),r),r=f(e,r,i.getNonWhiteSpaceSibling(r,!0)))},mergeWithParents:function(e,t,n,r,o){a.matchNode(e,o.parentNode,n,r)&&s.removeFormat(e,t,r,o)||t.merge_with_parents&&e.dom.getParent(o.parentNode,function(i){if(a.matchNode(e,i,n,r))return s.removeFormat(e,t,r,o),!0})}}}),n("tinymce.core.fmt.ApplyFormat",["tinymce.core.dom.Bookmarks","tinymce.core.dom.NodeType","tinymce.core.fmt.CaretFormat","tinymce.core.fmt.ExpandRange","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.Hooks","tinymce.core.fmt.MatchFormat","tinymce.core.fmt.MergeFormats","tinymce.core.selection.RangeNormalizer","tinymce.core.selection.RangeWalk","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,s,c,u,l){var d=l.each,f=function(m,p,h,g){var v,y,b=m.formatter.get(p),x=b[0],C=!g&&m.selection.isCollapsed(),w=m.dom,k=m.selection,S=function(e,t){if(t=t||x,e){if(t.onformat&&t.onformat(e,t,h,g),d(t.styles,function(t,n){w.setStyle(e,n,o.replaceVars(t,h))}),t.styles){var n=w.getAttrib(e,"style");n&&e.setAttribute("data-mce-style",n)}d(t.attributes,function(t,n){w.setAttrib(e,n,o.replaceVars(t,h))}),d(t.classes,function(t){t=o.replaceVars(t,h),w.hasClass(e,t)||w.addClass(e,t)})}},T=function(e,t){var r=!1;return!!x.selector&&(d(e,function(e){if(!("collapsed"in e&&e.collapsed!==C))return w.is(t,e.selector)&&!n.isCaretNode(t)?(S(t,e),r=!0,!1):void 0}),r)},E=function(r,i,c,f){var g,v,y=[],C=!0;v=r.create(g=x.inline||x.block),S(v),u.walk(r,i,function(e){var t,i=function(e){var s,c,u,w;if(w=C,s=e.nodeName.toLowerCase(),c=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&r.getContentEditable(e)&&(w=C,C="true"===r.getContentEditable(e),u=!0),o.isEq(s,"br"))return t=0,void(x.block&&r.remove(e));if(x.wrapper&&a.matchNode(m,e,p,h))t=0;else{if(C&&!u&&x.block&&!x.wrapper&&o.isTextBlock(m,s)&&o.isValid(m,c,g))return e=r.rename(e,g),S(e),y.push(e),void(t=0);if(x.selector){var k=T(b,e);if(!x.inline||k)return void(t=0)}!C||u||!o.isValid(m,g,s)||!o.isValid(m,c,g)||!f&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||n.isCaretNode(e)||x.inline&&r.isBlock(e)?(t=0,d(l.grep(e.childNodes),i),u&&(C=w),t=0):(t||(t=r.clone(v,!1),e.parentNode.insertBefore(t,e),y.push(t)),t.appendChild(e))}};d(e,i)}),!0===x.links&&d(y,function(e){var t=function(e){"A"===e.nodeName&&S(e,x),d(l.grep(e.childNodes),t)};t(e)}),d(y,function(i){var c,u,l,f,g,v;u=0,d(i.childNodes,function(t){o.isWhiteSpaceNode(t)||e.isBookmarkNode(t)||u++}),c=u,!(y.length>1)&&r.isBlock(i)||0!==c?(x.inline||x.wrapper)&&(x.exact||1!==c||(v=!1,d((l=i).childNodes,function(r){if((o=r)&&1===o.nodeType&&!e.isBookmarkNode(o)&&!n.isCaretNode(o)&&!t.isBogus(o))return v=r,!1;var o}),(f=v)&&!e.isBookmarkNode(f)&&a.matchName(r,f,x)&&(g=r.clone(f,!1),S(g),r.replace(g,l,!0),r.remove(f,1)),i=g||l),s.mergeWithChildren(m,b,h,i),s.mergeWithParents(m,x,p,h,i),s.mergeBackgroundColorAndFontSize(r,x,h,i),s.mergeSubSup(r,x,h,i),s.mergeSiblings(r,x,h,i)):r.remove(i,1)})};if("false"!==w.getContentEditable(k.getNode())){if(x){if(g)g.nodeType?T(b,g)||((y=w.createRng()).setStartBefore(g),y.setEndAfter(g),E(w,r.expandRng(m,y,b),0,!0)):E(w,g,0,!0);else if(C&&x.inline&&!w.select("td[data-mce-selected],th[data-mce-selected]").length)n.applyCaretFormat(m,p,h);else{var R=m.selection.getNode();m.settings.forced_root_block||!b[0].defaultBlock||w.getParent(R,w.isBlock)||f(m,b[0].defaultBlock),m.selection.setRng(c.normalize(m.selection.getRng())),v=k.getBookmark(),E(w,r.expandRng(m,k.getRng(!0),b)),x.styles&&s.mergeUnderlineAndColor(w,x,h,R),k.moveToBookmark(v),o.moveStart(w,k,k.getRng(!0)),m.nodeChanged()}i.postProcess(p,m)}}else{g=k.getNode();for(var N=0,A=b.length;N<A;N++)if(b[N].ceFalseOverride&&w.is(g,b[N].selector))return void S(g,b[N])}};return{applyFormat:f}}),n("tinymce.core.fmt.FormatChanged",["ephox.katamari.api.Cell","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.MatchFormat","tinymce.core.util.Tools"],function(e,t,n,r){var o=r.each;return{formatChanged:function(e,i,a,s,c){var u,l,d,f,m,p,h,g;null===i.get()&&(l=e,d={},(u=i).set({}),l.on("NodeChange",function(e){var i=t.getParents(l.dom,e.element),a={};i=r.grep(i,function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")}),o(u.get(),function(e,t){o(i,function(r){return l.formatter.matchNode(r,t,{},e.similar)?(d[t]||(o(e,function(e){e(!0,{node:r,format:t,parents:i})}),d[t]=e),a[t]=e,!1):!n.matchesUnInheritedFormatSelector(l,r,t)&&void 0})}),o(d,function(t,n){a[n]||(delete d[n],o(t,function(t){t(!1,{node:e.element,format:n,parents:i})}))})})),m=a,p=s,h=c,g=(f=i).get(),o(m.split(","),function(e){g[e]||(g[e]=[],g[e].similar=h),g[e].push(p)}),f.set(g)}}}),n("tinymce.core.fmt.DefaultFormats",["tinymce.core.util.Tools"],function(e){return{get:function(t){var n={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(n,r,o){e.each(o,function(e,r){t.setAttrib(n,r,e)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return e.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){n[e]={block:e,remove:"all"}}),n}}}),n("tinymce.core.fmt.FormatRegistry",["tinymce.core.fmt.DefaultFormats","tinymce.core.util.Tools"],function(e,t){return function(n){var r={},o=function(e,n){e&&("string"!=typeof e?t.each(e,function(e,t){o(t,e)}):(t.each(n=n.length?n:[n],function(e){"undefined"==typeof e.deep&&(e.deep=!e.selector),"undefined"==typeof e.split&&(e.split=!e.selector||e.inline),"undefined"==typeof e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),r[e]=n))};return o(e.get(n.dom)),o(n.settings.formats),{get:function(e){return e?r[e]:r},register:o,unregister:function(e){return e&&r[e]&&delete r[e],r}}}}),n("tinymce.core.fmt.Preview",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.core.html.Schema"],function(e,t,n){var r=t.each,o=e.DOM,i=function(e,r){var i,a,s,c=r&&r.schema||new n({}),u=function(e){var t,n,r;return n=t=o.create((a="string"==typeof e?{name:e,classes:[],attrs:{}}:e).name),(r=a).classes.length&&o.addClass(n,r.classes.join(" ")),o.setAttribs(n,r.attrs),t},l=function(e,n,r){var i,a,s,d,f,m,p,h,g=n.length>0&&n[0],v=g&&g.name;if(f=v,m="string"!=typeof(d=e)?d.nodeName.toLowerCase():d,s=!(!(h=(p=c.getElementRule(m))&&p.parentsRequired)||!h.length)&&(f&&-1!==t.inArray(h,f)?f:h[0]))v===s?(a=n[0],n=n.slice(1)):a=s;else if(g)a=n[0],n=n.slice(1);else if(!r)return e;return a&&(i=u(a)).appendChild(e),r&&(i||(i=o.create("div")).appendChild(e),t.each(r,function(t){var n=u(t);i.insertBefore(n,e)})),l(i,n,a&&a.siblings)};return e&&e.length?(i=u(a=e[0]),(s=o.create("div")).appendChild(l(i,e.slice(1),a.siblings)),s):""},a=function(e){var n,r={classes:[],attrs:{}};return"*"!==(e=r.selector=t.trim(e))&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,n,o,i,a){switch(n){case"#":r.attrs.id=o;break;case".":r.classes.push(o);break;case":":-1!==t.inArray("checked disabled enabled read-only required".split(" "),o)&&(r.attrs[o]=o)}if("["===i){var s=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);s&&(r.attrs[s[1]]=s[2])}return""})),r.name=n||"div",r},s=function(e){return e&&"string"==typeof e?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),t.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var n=t.map(e.split(/(?:~\+|~|\+)/),a),r=n.pop();return n.length&&(r.siblings=n),r}).reverse()):[]};return{getCssText:function(e,t){var n,a,c,u,l,d,f="";if(!1===(d=e.settings.preview_styles))return"";"string"!=typeof d&&(d="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var m=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}return"preview"in t&&!1===(d=t.preview)?"":(n=t.block||t.inline||"span",(u=s(t.selector)).length?(u[0].name||(u[0].name=n),n=t.selector,a=i(u,e)):a=i([n],e),c=o.select(n,a)[0]||a.firstChild,r(t.styles,function(e,t){(e=m(e))&&o.setStyle(c,t,e)}),r(t.attributes,function(e,t){(e=m(e))&&o.setAttrib(c,t,e)}),r(t.classes,function(e){e=m(e),o.hasClass(c,e)||o.addClass(c,e)}),e.fire("PreviewFormats"),o.setStyles(a,{position:"absolute",left:-65535}),e.getBody().appendChild(a),l=o.getStyle(e.getBody(),"fontSize",!0),l=/px$/.test(l)?parseInt(l,10):0,r(d.split(" "),function(t){var n=o.getStyle(c,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=o.getStyle(e.getBody(),t,!0),"#ffffff"===o.toHex(n).toLowerCase())||"color"===t&&"#000000"===o.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===l)return;n=(n=parseFloat(n,10)/(/%$/.test(n)?100:1))*l+"px"}"border"===t&&n&&(f+="padding:0 2px;"),f+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),o.remove(a),f)},parseSelector:s,selectorToHtml:function(e,t){return i(s(e),t)}}}),n("tinymce.core.fmt.ToggleFormat",["tinymce.core.fmt.ApplyFormat","tinymce.core.fmt.MatchFormat","tinymce.core.fmt.RemoveFormat"],function(e,t,n){return{toggle:function(r,o,i,a,s){var c=o.get(i);!t.match(r,i,a,s)||"toggle"in c[0]&&!c[0].toggle?e.applyFormat(r,i,a,s):n.remove(r,i,a,s)}}}),n("tinymce.core.keyboard.FormatShortcuts",[],function(){return{setup:function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])}}}),n("tinymce.core.api.Formatter",["ephox.katamari.api.Cell","ephox.katamari.api.Fun","tinymce.core.fmt.ApplyFormat","tinymce.core.fmt.CaretFormat","tinymce.core.fmt.FormatChanged","tinymce.core.fmt.FormatRegistry","tinymce.core.fmt.MatchFormat","tinymce.core.fmt.Preview","tinymce.core.fmt.RemoveFormat","tinymce.core.fmt.ToggleFormat","tinymce.core.keyboard.FormatShortcuts"],function(e,t,n,r,o,i,a,s,c,u,l){return function(d){var f=i(d),m=e(null);return l.setup(d),r.setup(d),{get:f.get,register:f.register,unregister:f.unregister,apply:t.curry(n.applyFormat,d),remove:t.curry(c.remove,d),toggle:t.curry(u.toggle,d,f),match:t.curry(a.match,d),matchAll:t.curry(a.matchAll,d),matchNode:t.curry(a.matchNode,d),canApply:t.curry(a.canApply,d),formatChanged:t.curry(o.formatChanged,d,m),getCssText:t.curry(s.getCssText,d)}}}),n("ephox.katamari.api.Merger",["ephox.katamari.api.Type","global!Array","global!Error"],function(e,t,n){var r=function(e){return function(){for(var r=new t(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];if(0===r.length)throw new n("Can't merge zero objects");for(var i={},a=0;a<r.length;a++){var s=r[a];for(var c in s)s.hasOwnProperty(c)&&(i[c]=e(i[c],s[c]))}return i}},o=r(function(t,n){return e.isObject(t)&&e.isObject(n)?o(t,n):n}),i=r(function(e,t){return t});return{deepMerge:o,merge:i}}),n("tinymce.core.api.Events",[],function(){return{firePreProcess:function(e,t){return e.fire("PreProcess",t)},firePostProcess:function(e,t){return e.fire("PostProcess",t)}}}),n("tinymce.core.dom.DomSerializerFilters",["ephox.katamari.api.Arr","tinymce.core.html.Entities"],function(e,t){return{register:function(n,r,o){n.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)(n=e[r]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),n.addAttributeFilter("src,href,style",function(e,t){for(var n,i,a=e.length,s="data-mce-"+t,c=r.url_converter,u=r.url_converter_scope;a--;)void 0!==(i=(n=e[a]).attributes.map[s])?(n.attr(t,i.length>0?i:null),n.attr(s,null)):(i=n.attributes.map[t],"style"===t?i=o.serializeStyle(o.parseStyle(i),n.name):c&&(i=c.call(u,i,t,n.name)),n.attr(t,i.length>0?i:null))}),n.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)(n=(t=e[r]).attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))}),n.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,o=e.length;o--;)"bookmark"!==(r=e[o]).attributes.map["data-mce-type"]||n.cleanup||r.remove()}),n.addNodeFilter("noscript",function(e){for(var n,r=e.length;r--;)(n=e[r].firstChild)&&(n.value=t.decode(n.value))}),n.addNodeFilter("script,style",function(e,t){for(var n,o,i,a=e.length,s=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};a--;)o=(n=e[a]).firstChild?n.firstChild.value:"","script"===t?((i=n.attr("type"))&&n.attr("type","mce-no/type"===i?null:i.replace(/^mce\-/,"")),"xhtml"===r.element_format&&o.length>0&&(n.firstChild.value="// <![CDATA[\n"+s(o)+"\n// ]]>")):"xhtml"===r.element_format&&o.length>0&&(n.firstChild.value="\x3c!--\n"+s(o)+"\n--\x3e")}),n.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)0===(t=e[n]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),n.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)7===(n=e[r]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),n.addAttributeFilter("data-mce-type",function(t){e.each(t,function(e){"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(n.schema.getNonEmptyElements())?e.remove():e.unwrap())})}),n.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})},trimTrailingBr:function(e){var t,n,r=function(e){return e&&"br"===e.name};r(t=e.lastChild)&&r(n=t.prev)&&(t.remove(),n.remove())}}}),n("tinymce.core.dom.DomSerializerPreProcess",["ephox.katamari.api.Merger","global!document","tinymce.core.api.Events","tinymce.core.util.Tools"],function(e,t,n,r){return{process:function(o,i,a){return h=a,(p=o)&&p.hasEventListeners("PreProcess")&&!h.no_events?(u=a,m=(s=o).dom,c=(c=i).cloneNode(!0),(l=t.implementation).createHTMLDocument&&(d=l.createHTMLDocument(""),r.each("BODY"===c.nodeName?c.childNodes:[c],function(e){d.body.appendChild(d.importNode(e,!0))}),c="BODY"!==c.nodeName?d.body.firstChild:d.body,f=m.doc,m.doc=d),n.firePreProcess(s,e.merge(u,{node:c})),f&&(m.doc=f),c):i;var s,c,u,l,d,f,m,p,h}}}),n("tinymce.core.html.LegacyFilter",["ephox.katamari.api.Arr","tinymce.core.html.Styles","tinymce.core.util.Tools"],function(e,t,n){return{register:function(r,o){var i,a,s,c,u,l,d;o.inline_styles&&(i=r,a=o,d=t(),a.convert_fonts_to_spans&&(c=i,u=d,l=n.explode(a.font_size_legacy_values),c.addNodeFilter("font",function(t){e.each(t,function(t){var n,r=u.parse(t.attr("style")),o=t.attr("color"),i=t.attr("face"),a=t.attr("size");o&&(r.color=o),i&&(r["font-family"]=i),a&&(r["font-size"]=l[parseInt(t.attr("size"),10)-1]),t.name="span",t.attr("style",u.serialize(r)),n=t,e.each(["color","face","size"],function(e){n.attr(e,null)})})})),s=d,i.addNodeFilter("strike",function(t){e.each(t,function(e){var t=s.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",s.serialize(t))})}))}}}),n("tinymce.core.html.Node",[],function(){var e=/^[ \t\r\n]*$/,t={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},n=function(e,t,n){var r,o,i=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[i])return e[i];if(e!==t){if(r=e[a])return r;for(o=e.parent;o&&o!==t;o=o.parent)if(r=o[a])return r}},r=function(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})};return r.prototype={replace:function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},attr:function(e,t){var n,r;if("string"!=typeof e){for(r in e)this.attr(r,e[r]);return this}if(n=this.attributes){if(void 0!==t){if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),this;return this}if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,this}return n.map[e]}},clone:function(){var e,t,n,o,i,a=new r(this.name,this.type);if(n=this.attributes){for((i=[]).map={},e=0,t=n.length;e<t;e++)"id"!==(o=n[e]).name&&(i[i.length]={name:o.name,value:o.value},i.map[o.name]=o.value);a.attributes=i}return a.value=this.value,a.shortEnded=this.shortEnded,a},wrap:function(e){return this.parent.insert(e,this),e.append(this),this},unwrap:function(){var e,t;for(e=this.firstChild;e;)t=e.next,this.insert(e,this,!0),e=t;this.remove()},remove:function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t,t&&(t.prev=null)):n.next=t,e.lastChild===this?(e.lastChild=n,n&&(n.next=null)):t.prev=n,this.parent=this.next=this.prev=null),this},append:function(e){var t;return e.parent&&e.remove(),(t=this.lastChild)?(t.next=e,e.prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e},insert:function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},getAll:function(e){var t,r=[];for(t=this.firstChild;t;t=n(t,this))t.name===e&&r.push(t);return r},empty:function(){var e,t,r;if(this.firstChild){for(e=[],r=this.firstChild;r;r=n(r,this))e.push(r);for(t=e.length;t--;)(r=e[t]).parent=r.firstChild=r.lastChild=r.next=r.prev=null}return this.firstChild=this.lastChild=null,this},isEmpty:function(t,r,o){var i,a,s=this.firstChild;if(r=r||{},s)do{if(1===s.type){if(s.attributes.map["data-mce-bogus"])continue;if(t[s.name])return!1;for(i=s.attributes.length;i--;)if("name"===(a=s.attributes[i].name)||0===a.indexOf("data-mce-bookmark"))return!1}if(8===s.type)return!1;if(3===s.type&&!e.test(s.value))return!1;if(3===s.type&&s.parent&&r[s.parent.name]&&e.test(s.value))return!1;if(o&&o(s))return!1}while(s=n(s,this));return!0},walk:function(e){return n(this,null,e)}},r.create=function(e,n){var o,i;if(o=new r(e,t[e]||1),n)for(i in n)o.attr(i,n[i]);return o},r}),n("tinymce.core.html.DomParser",["tinymce.core.html.LegacyFilter","tinymce.core.html.Node","tinymce.core.html.SaxParser","tinymce.core.html.Schema","tinymce.core.util.Tools"],function(e,t,n,r,o){var i=o.makeMap,a=o.each,s=o.explode,c=o.extend,u=function(e,n,r,o){(e.padd_empty_with_br||n.insert)&&r[o.name]?o.empty().append(new t("br","1")).shortEnded=!0:o.empty().append(new t("#text","3")).value="\xa0"},l=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},d=function(e,t,n,r){return r.isEmpty(t,n,function(t){return(n=e.getElementRule(t.name))&&n.paddEmpty;var n})};return function(f,m){var p=this,h={},g=[],v={},y={};(f=f||{}).validate=!("validate"in f)||f.validate,f.root_name=f.root_name||"body",p.schema=m=m||new r,p.filterNode=function(e){var t,n,r;n in h&&((r=v[n])?r.push(e):v[n]=[e]),t=g.length;for(;t--;)(n=g[t].name)in e.attributes.map&&((r=y[n])?r.push(e):y[n]=[e]);return e},p.addNodeFilter=function(e,t){a(s(e),function(e){var n=h[e];n||(h[e]=n=[]),n.push(t)})},p.addAttributeFilter=function(e,t){a(s(e),function(e){var n;for(n=0;n<g.length;n++)if(g[n].name===e)return void g[n].callbacks.push(t);g.push({name:e,callbacks:[t]})})},p.parse=function(e,r){var o,a,s,b,x,C,w,k,S,T,E,R,N,A,D,P,B,_,O,F,M,I=[];r=r||{},v={},y={},R=c(i("script,style,head,html,body,title,meta,param"),m.getBlockElements()),F=m.getNonEmptyElements(),O=m.children,E=f.validate,M="forced_root_block"in r?r.forced_root_block:f.forced_root_block,_=m.getWhiteSpaceElements(),N=/^[ \t\r\n]+/,D=/[ \t\r\n]+$/,P=/[ \t\r\n]+/g,B=/^[ \t\r\n]+$/;var L=function(e,n){var r,o=new t(e,n);return e in h&&((r=v[e])?r.push(o):v[e]=[o]),o},H=function(e){var t,n,r,o,i=m.getBlockElements();for(t=e.prev;t&&3===t.type;){if((r=t.value.replace(D,"")).length>0)return void(t.value=r);if(n=t.next){if(3==n.type&&n.value.length){t=t.prev;continue}if(!i[n.name]&&"script"!=n.name&&"style"!=n.name){t=t.prev;continue}}o=t.prev,t.remove(),t=o}};if(o=new n({validate:E,allow_script_urls:f.allow_script_urls,allow_conditional_comments:f.allow_conditional_comments,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}(m.getSelfClosingElements()),cdata:function(e){s.append(L("#cdata",4)).value=e},text:function(e,t){var n;A||(e=e.replace(P," "),s.lastChild&&R[s.lastChild.name]&&(e=e.replace(N,""))),0!==e.length&&((n=L("#text",3)).raw=!!t,s.append(n).value=e)},comment:function(e){s.append(L("#comment",8)).value=e},pi:function(e,t){s.append(L(e,7)).value=t,H(s)},doctype:function(e){s.append(L("#doctype",10)).value=e,H(s)},start:function(e,t,n){var r,o,i,a,c;if(i=E?m.getElementRule(e):{}){for((r=L(i.outputName||e,1)).attributes=t,r.shortEnded=n,s.append(r),(c=O[s.name])&&O[r.name]&&!c[r.name]&&I.push(r),o=g.length;o--;)(a=g[o].name)in t.map&&((S=y[a])?S.push(r):y[a]=[r]);R[e]&&H(r),n||(s=r),!A&&_[e]&&(A=!0)}},end:function(e){var t,n,o,i,a,c;if(n=E?m.getElementRule(e):{}){if(R[e]&&!A){if((t=s.firstChild)&&3===t.type)if((o=t.value.replace(N,"")).length>0)t.value=o,t=t.next;else for(i=t.next,t.remove(),t=i;t&&3===t.type;)i=t.next,(0===(o=t.value).length||B.test(o))&&(t.remove(),t=i),t=i;if((t=s.lastChild)&&3===t.type)if((o=t.value.replace(D,"")).length>0)t.value=o,t=t.prev;else for(i=t.prev,t.remove(),t=i;t&&3===t.type;)i=t.prev,(0===(o=t.value).length||B.test(o))&&(t.remove(),t=i),t=i}if(A&&_[e]&&(A=!1),n.removeEmpty&&d(m,F,_,s)&&!s.attributes.map.name&&!s.attributes.map.id)return a=s.parent,R[s.name]?s.empty().remove():s.unwrap(),void(s=a);n.paddEmpty&&(l(c=s,"#text")&&"\xa0"===c.firstChild.value||d(m,F,_,s))&&u(f,r,R,s),s=s.parent}}},m),a=s=new t(r.context||f.root_name,11),o.parse(e),E&&I.length&&(r.context?r.invalid=!0:function(e){var n,r,o,a,s,c,u,f,h,g,v,y,b,x,C,w;for(y=i("tr,td,th,tbody,thead,tfoot,table"),g=m.getNonEmptyElements(),v=m.getWhiteSpaceElements(),b=m.getTextBlockElements(),x=m.getSpecialElements(),n=0;n<e.length;n++)if((r=e[n]).parent&&!r.fixed)if(b[r.name]&&"li"==r.parent.name){for(C=r.next;C&&b[C.name];)C.name="li",C.fixed=!0,r.parent.insert(C,r.parent),C=C.next;r.unwrap(r)}else{for(a=[r],o=r.parent;o&&!m.isValidChild(o.name,r.name)&&!y[o.name];o=o.parent)a.push(o);if(o&&a.length>1){for(a.reverse(),s=c=p.filterNode(a[0].clone()),h=0;h<a.length-1;h++){for(m.isValidChild(c.name,a[h].name)?(u=p.filterNode(a[h].clone()),c.append(u)):u=c,f=a[h].firstChild;f&&f!=a[h+1];)w=f.next,u.append(f),f=w;c=u}d(m,g,v,s)?o.insert(r,a[0],!0):(o.insert(s,a[0],!0),o.insert(r,s)),(d(m,g,v,o=a[0])||l(o,"br"))&&o.empty().remove()}else if(r.parent){if("li"===r.name){if((C=r.prev)&&("ul"===C.name||"ul"===C.name)){C.append(r);continue}if((C=r.next)&&("ul"===C.name||"ul"===C.name)){C.insert(r,C.firstChild,!0);continue}r.wrap(p.filterNode(new t("ul",1)));continue}m.isValidChild(r.parent.name,"div")&&m.isValidChild("div",r.name)?r.wrap(p.filterNode(new t("div",1))):x[r.name]?r.empty().remove():r.unwrap()}}}(I)),M&&("body"==a.name||r.isRootContent)&&function(){var e,t,n=a.firstChild,r=function(e){e&&((n=e.firstChild)&&3==n.type&&(n.value=n.value.replace(N,"")),(n=e.lastChild)&&3==n.type&&(n.value=n.value.replace(D,"")))};if(m.isValidChild(a.name,M.toLowerCase())){for(;n;)e=n.next,3==n.type||1==n.type&&"p"!==n.name&&!R[n.name]&&!n.attr("data-mce-type")?t?t.append(n):((t=L(M,1)).attr(f.forced_root_block_attrs),a.insert(t,n),t.append(n)):(r(t),t=null),n=e;r(t)}}(),!r.invalid){for(T in v){for(S=h[T],w=(b=v[T]).length;w--;)b[w].parent||b.splice(w,1);for(x=0,C=S.length;x<C;x++)S[x](b,T,r)}for(x=0,C=g.length;x<C;x++)if((S=g[x]).name in y){for(w=(b=y[S.name]).length;w--;)b[w].parent||b.splice(w,1);for(w=0,k=S.callbacks.length;w<k;w++)S.callbacks[w](b,S.name,r)}}return a},f.remove_trailing_brs&&p.addNodeFilter("br",function(e,n,r){var o,i,a,s,l,p,h,g,v=e.length,y=c({},m.getBlockElements()),b=m.getNonEmptyElements(),x=m.getNonEmptyElements();for(y.body=1,o=0;o<v;o++)if(a=(i=e[o]).parent,y[i.parent.name]&&i===a.lastChild){for(l=i.prev;l;){if("span"!==(p=l.name)||"bookmark"!==l.attr("data-mce-type")){if("br"!==p)break;if("br"===p){i=null;break}}l=l.prev}i&&(i.remove(),d(m,b,x,a)&&(h=m.getElementRule(a.name))&&(h.removeEmpty?a.remove():h.paddEmpty&&u(f,r,y,a)))}else{for(s=i;a&&a.firstChild===s&&a.lastChild===s&&(s=a,!y[a.name]);)a=a.parent;s===a&&!0!==f.padd_empty_with_br&&((g=new t("#text",3)).value="\xa0",i.replace(g))}}),p.addAttributeFilter("href",function(e){var t,n,r,i=e.length;if(!f.allow_unsafe_link_target)for(;i--;)"a"===(t=e[i]).name&&"_blank"===t.attr("target")&&t.attr("rel",(n=t.attr("rel"),r=n?o.trim(n):"",/\b(noopener)\b/g.test(r)?r:r.split(" ").filter(function(e){return e.length>0}).concat(["noopener"]).sort().join(" ")))}),f.allow_html_in_named_anchor||p.addAttributeFilter("id,name",function(e){for(var t,n,r,o,i=e.length;i--;)if("a"===(o=e[i]).name&&o.firstChild&&!o.attr("href")){r=o.parent,t=o.lastChild;do{n=t.prev,r.insert(t,o),t=n}while(t)}}),f.fix_list_elements&&p.addNodeFilter("ul,ol",function(e){for(var n,r,o=e.length;o--;)if("ul"===(r=(n=e[o]).parent).name||"ol"===r.name)if(n.prev&&"li"===n.prev.name)n.prev.append(n);else{var i=new t("li",1);i.attr("style","list-style-type: none"),n.wrap(i)}}),f.validate&&m.getValidClasses()&&p.addAttributeFilter("class",function(e){for(var t,n,r,o,i,a,s,c=e.length,u=m.getValidClasses();c--;){for(n=(t=e[c]).attr("class").split(" "),i="",r=0;r<n.length;r++)o=n[r],s=!1,(a=u["*"])&&a[o]&&(s=!0),a=u[t.name],!s&&a&&a[o]&&(s=!0),s&&(i&&(i+=" "),i+=o);i.length||(i=null),t.attr("class",i)}}),e.register(this,f)}}),n("tinymce.core.dom.DomSerializer",["ephox.katamari.api.Fun","ephox.katamari.api.Merger","tinymce.core.api.Events","tinymce.core.dom.DOMUtils","tinymce.core.dom.DomSerializerFilters","tinymce.core.dom.DomSerializerPreProcess","tinymce.core.html.DomParser","tinymce.core.html.Schema","tinymce.core.html.Serializer","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,s,c,u,l){var d=function(e,t,n){-1===l.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))};return function(f,m){var p,h,g,v=["data-mce-selected"];return p=m&&m.dom?m.dom:r.DOM,h=m&&m.schema?m.schema:new s(f),f.entity_encoding=f.entity_encoding||"named",f.remove_trailing_brs=!("remove_trailing_brs"in f)||f.remove_trailing_brs,g=new a(f,h),o.register(g,f,p),{schema:h,addNodeFilter:g.addNodeFilter,addAttributeFilter:g.addAttributeFilter,serialize:function(e,r){var a,s,d,v,y,b,x,C,w,k,S,T,E,R=t.merge({format:"html"},r||{}),N=(a=i.process(m,e,R),d=u.trim((s=R).getInner?a.innerHTML:p.getOuterHTML(a)),s.selection?d:l.trim(d)),A=(v=g,y=N,x=(b=R).selection?t.merge({forced_root_block:!1},b):b,C=v.parse(y,x),o.trimTrailingBr(C),C);return"tree"===R.format?A:(w=R,S=m,k=A,E=new c(f,h).serialize(k),!(T=w).no_events&&S?n.firePostProcess(S,t.merge(T,{content:E})).content:E)},addRules:function(e){h.addValidElements(e)},setRules:function(e){h.setValidElements(e)},addTempAttr:e.curry(d,g,v),getTempAttrs:function(){return v}}}}),n("tinymce.core.api.dom.Serializer",["tinymce.core.dom.DomSerializer"],function(e){return function(t,n){var r=new e(t,n);return{schema:r.schema,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,serialize:r.serialize,addRules:r.addRules,setRules:r.setRules,addTempAttr:r.addTempAttr,getTempAttrs:r.getTempAttrs}}}),n("tinymce.core.caret.CaretContainerInput",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFind","tinymce.core.caret.CaretContainer"],function(e,t,n,r){var o=function(e,t){var n;t.hasAttribute("data-mce-caret")&&(r.showCaretContainerBlock(t),(n=e).selection.setRng(n.selection.getRng()),e.selection.scrollIntoView(t))},i=function(i,a){var s=n.descendant(t.fromDom(i.getBody()),"*[data-mce-caret]").fold(e.constant(null),function(e){return e.dom()});if(s)return"compositionstart"===a.type?(a.preventDefault(),a.stopPropagation(),void o(s)):void(r.hasContent(s)&&o(i,s))};return{setup:function(t){t.on("keyup compositionstart",e.curry(i,t))}}}),n("tinymce.core.api.dom.BookmarkManager",["ephox.katamari.api.Fun","tinymce.core.dom.Bookmarks"],function(e,t){var n=function(n){return{getBookmark:e.curry(t.getBookmark,n),moveToBookmark:e.curry(t.moveToBookmark,n)}};return n.isBookmarkNode=t.isBookmarkNode,n}),n("tinymce.core.dom.ControlSelection",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.search.Selectors","global!document","tinymce.core.dom.NodeType","tinymce.core.dom.RangePoint","tinymce.core.Env","tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.VK"],function(e,t,n,r,o,i,a,s,c,u){var l=o.isContentEditableFalse,d=o.isContentEditableTrue;return function(e,o){var f,m,p,h,g,v,y,b,x,C,w,k,S,T,E,R,N,A=o.dom,D=c.each,P=o.getDoc(),B=r,_=Math.abs,O=Math.round,F=o.getBody();h={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var M=".mce-content-body";o.contentStyles.push(M+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+M+" .mce-resizehandle:hover {background: #000}"+M+" img[data-mce-selected],"+M+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+M+" .mce-clonedresizable {position: absolute;"+(a.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+M+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var I=function(e){return e&&("IMG"===e.nodeName||o.dom.is(e,"figure.image"))},L=function(e){var t,n,r=e.target;t=e,n=o.selection.getRng(),!I(t.target)||i.isXYWithinRange(t.clientX,t.clientY,n)||e.isDefaultPrevented()||(e.preventDefault(),o.selection.select(r))},H=function(e){return o.dom.is(e,"figure.image")?e.querySelector("img"):e},W=function(e){var r=o.settings.object_resizing;return!1!==r&&!a.iOS&&("string"!=typeof r&&(r="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize")&&e!=o.getBody()&&n.is(t.fromDom(e),r))},U=function(e){var t,n,r,i;E=(n=e.screenY-y)*g[3]+w,T=(T=(t=e.screenX-v)*g[2]+C)<5?5:T,E=E<5?5:E,(I(f)&&!1!==o.settings.resize_img_proportional?!u.modifierPressed(e):u.modifierPressed(e)||I(f)&&g[2]*g[3]!=0)&&(_(t)>_(n)?(E=O(T*k),T=O(E/k)):(T=O(E/k),E=O(T*k))),A.setStyles(H(m),{width:T,height:E}),i=g.startPos.y+n,A.setStyles(p,{left:r=(r=g.startPos.x+t)>0?r:0,top:i=i>0?i:0,display:"block"}),p.innerHTML=T+" &times; "+E,g[2]<0&&m.clientWidth<=T&&A.setStyle(m,"left",b+(C-T)),g[3]<0&&m.clientHeight<=E&&A.setStyle(m,"top",x+(w-E)),(t=F.scrollWidth-R)+(n=F.scrollHeight-N)!=0&&A.setStyles(p,{left:r-t,top:i-n}),S||(o.fire("ObjectResizeStart",{target:f,width:C,height:w}),S=!0)},z=function(){S=!1;var e=function(e,t){t&&(f.style[e]||!o.schema.isValid(f.nodeName.toLowerCase(),e)?A.setStyle(H(f),e,t):A.setAttrib(H(f),e,t))};e("width",T),e("height",E),A.unbind(P,"mousemove",U),A.unbind(P,"mouseup",z),B!=P&&(A.unbind(B,"mousemove",U),A.unbind(B,"mouseup",z)),A.remove(m),A.remove(p),q(f),o.fire("ObjectResized",{target:f,width:T,height:E}),A.setAttrib(f,"style",A.getAttrib(f,"style")),o.nodeChanged()},q=function(e){var t,n,r,i,s;V(),K(),t=A.getPos(e,F),b=t.x,x=t.y,s=e.getBoundingClientRect(),n=s.width||s.right-s.left,r=s.height||s.bottom-s.top,f!=e&&(f=e,T=E=0),i=o.fire("ObjectSelected",{target:e}),W(e)&&!i.isDefaultPrevented()?D(h,function(e,t){var o;(o=A.get("mceResizeHandle"+t))&&A.remove(o),o=A.add(F,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),a.ie&&(o.contentEditable=!1),A.bind(o,"mousedown",function(t){var o;t.stopImmediatePropagation(),t.preventDefault(),v=(o=t).screenX,y=o.screenY,C=H(f).clientWidth,w=H(f).clientHeight,k=w/C,g=e,e.startPos={x:n*e[0]+b,y:r*e[1]+x},R=F.scrollWidth,N=F.scrollHeight,m=f.cloneNode(!0),A.addClass(m,"mce-clonedresizable"),A.setAttrib(m,"data-mce-bogus","all"),m.contentEditable=!1,m.unSelectabe=!0,A.setStyles(m,{left:b,top:x,margin:0}),m.removeAttribute("data-mce-selected"),F.appendChild(m),A.bind(P,"mousemove",U),A.bind(P,"mouseup",z),B!=P&&(A.bind(B,"mousemove",U),A.bind(B,"mouseup",z)),p=A.add(F,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},C+" &times; "+w)}),e.elm=o,A.setStyles(o,{left:n*e[0]+b-o.offsetWidth/2,top:r*e[1]+x-o.offsetHeight/2})}):V(),f.setAttribute("data-mce-selected","1")},V=function(){var e,t;K(),f&&f.removeAttribute("data-mce-selected");for(e in h)(t=A.get("mceResizeHandle"+e))&&(A.unbind(t),A.remove(t))},j=function(t){var n,r=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};S||o.removed||(D(A.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),n="mousedown"==t.type?t.target:e.getNode(),r(n=A.$(n).closest("table,img,figure.image,hr")[0],F)&&(G(),r(e.getStart(!0),n)&&r(e.getEnd(!0),n))?q(n):V())},$=function(e){return l(function(e,t){for(;t&&t!=e;){if(d(t)||l(t))return t;t=t.parentNode}return null}(o.getBody(),e))},K=function(){for(var e in h){var t=h[e];t.elm&&(A.unbind(t.elm),delete t.elm)}},G=function(){try{o.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}};return o.on("init",function(){G(),a.ie&&a.ie>=11&&(o.on("mousedown click",function(e){var t=e.target,n=t.nodeName;S||!/^(TABLE|IMG|HR)$/.test(n)||$(t)||(2!==e.button&&o.selection.select(t,"TABLE"==n),"mousedown"==e.type&&o.nodeChanged())}),o.dom.bind(F,"mscontrolselect",function(e){var t=function(e){s.setEditorTimeout(o,function(){o.selection.select(e)})};if($(e.target))return e.preventDefault(),void t(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"==e.target.tagName&&t(e.target))}));var e=s.throttle(function(e){o.composing||j(e)});o.on("nodechange ResizeEditor ResizeWindow drop",e),o.on("keyup compositionend",function(t){f&&"TABLE"==f.nodeName&&e(t)}),o.on("hide blur",V),o.on("contextmenu",L)}),o.on("remove",K),{isResizable:W,showResizeRect:q,hideResizeRect:V,updateResizeRect:j,destroy:function(){f=m=null}}}}),n("tinymce.core.dom.ScrollIntoView",["tinymce.core.dom.NodeType"],function(e){var t=function(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}};return{scrollIntoView:function(n,r,o){var i,a,s,c,u,l=n.dom,d=l.getRoot(),f=0;if(n.fire("scrollIntoView",u={elm:r,alignToTop:o}),!u.isDefaultPrevented()&&e.isElement(r)){if(!1===o&&(f=r.offsetHeight),"BODY"!==d.nodeName){var m=n.selection.getScrollContainer();if(m)return i=t(r).y-t(m).y+f,c=m.clientHeight,void((i<(s=m.scrollTop)||i+25>s+c)&&(m.scrollTop=i<s?i:i-c+25))}a=l.getViewPort(n.getWin()),i=l.getPos(r).y+f,s=a.y,c=a.h,(i<a.y||i+25>s+c)&&n.getWin().scrollTo(0,i<s?i:i-c+25)}}}}),n("tinymce.core.selection.CaretRangeFromPoint",["tinymce.core.dom.NodeType","tinymce.core.util.Tools"],function(e,t){var n=function(t){return e.isContentEditableTrue(t)||e.isContentEditableFalse(t)};return{fromPoint:function(r,o,i){var a,s,c,u,l;if(i.caretPositionFromPoint)(s=i.caretPositionFromPoint(r,o))&&((a=i.createRange()).setStart(s.offsetNode,s.offset),a.collapse(!0));else if(i.caretRangeFromPoint)a=i.caretRangeFromPoint(r,o);else if(i.body.createTextRange){a=i.body.createTextRange();try{a.moveToPoint(r,o),a.collapse(!0)}catch(e){a=function(e,n,r){var o,i,a;if(o=r.elementFromPoint(e,n),i=r.body.createTextRange(),o&&"HTML"!==o.tagName||(o=r.body),i.moveToElementText(o),(a=(a=t.toArray(i.getClientRects())).sort(function(e,t){return(e=Math.abs(Math.max(e.top-n,e.bottom-n)))-Math.abs(Math.max(t.top-n,t.bottom-n))})).length>0){n=(a[0].bottom+a[0].top)/2;try{return i.moveToPoint(e,n),i.collapse(!0),i}catch(e){}}return null}(r,o,i)}return u=i.body,l=(c=a)&&c.parentElement?c.parentElement():null,e.isContentEditableFalse(function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(l,u,n))?null:c}return a}}}),n("tinymce.core.selection.EventProcessRanges",["ephox.katamari.api.Arr"],function(e){return{processRanges:function(t,n){return e.map(n,function(e){var n=t.fire("GetSelectionRange",{range:e});return n.range!==e?n.range:e})}}}),n("ephox.sugar.api.dom.Replication",["ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i){var a=function(e,n){return t.fromDom(e.dom().cloneNode(n))},s=function(e){return a(e,!0)},c=function(n,r){var o=t.fromTag(r),i=e.clone(n);return e.setAll(o,i),o};return{shallow:function(e){return a(e,!1)},shallowAs:c,deep:s,copy:function(e,t){var n=c(e,t),o=i.children(s(e));return r.append(n,o),n},mutate:function(e,t){var a=c(e,t);n.before(e,a);var s=i.children(e);return r.append(a,s),o.remove(e),a}}}),n("ephox.sugar.api.node.Fragment",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","global!document"],function(e,t,n){return{fromElements:function(r,o){var i=(o||n).createDocumentFragment();return e.each(r,function(e){i.appendChild(e.dom())}),t.fromDom(i)}}}),n("tinymce.core.selection.SelectionUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.Traverse","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a,s,c){var u=function(e){return s.firstChild(e).fold(t.constant([e]),function(t){return[e].concat(u(t))})},l=function(e){return s.lastChild(e).fold(t.constant([e]),function(t){return"br"===a.name(t)?s.prevSibling(t).map(function(t){return[e].concat(l(t))}).getOr([]):[e].concat(l(t))})};return{hasAllContentsSelected:function(a,s){return r.liftN([(p=s,h=p.startContainer,g=p.startOffset,c.isText(h)?0===g?n.some(i.fromDom(h)):n.none():n.from(h.childNodes[g]).map(i.fromDom)),(d=s,f=d.endContainer,m=d.endOffset,c.isText(f)?m===f.data.length?n.some(i.fromDom(f)):n.none():n.from(f.childNodes[m-1]).map(i.fromDom))],function(n,r){var i=e.find(u(a),t.curry(o.eq,n)),s=e.find(l(a),t.curry(o.eq,r));return i.isSome()&&s.isSome()}).getOr(!1);var d,f,m,p,h,g}}}),n("tinymce.core.selection.SimpleTableModel",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.SelectorFilter"],function(e,t,n,r,o,i,a,s,c,u){var l=n.immutable("element","width","rows"),d=n.immutable("element","cells"),f=n.immutable("x","y"),m=function(e,t){var n=parseInt(c.get(e,t),10);return isNaN(n)?1:n},p=function(t){return e.foldl(t,function(e,t){return t.cells().length>e?t.cells().length:e},0)},h=function(e,n){for(var o=e.rows(),i=0;i<o.length;i++)for(var a=o[i].cells(),s=0;s<a.length;s++)if(r.eq(a[s],n))return t.some(f(s,i));return t.none()},g=function(e,t,n,r,o){for(var i=[],a=e.rows(),s=n;s<=o;s++){var c=a[s].cells(),u=t<r?c.slice(t,r+1):c.slice(r,t+1);i.push(d(a[s].element(),u))}return i};return{fromDom:function(t){var n=l(a.shallow(t),0,[]);return e.each(u.descendants(t,"tr"),function(t,r){e.each(u.descendants(t,"td,th"),function(e,o){!function(e,t,n,r,o){for(var i=m(o,"rowspan"),s=m(o,"colspan"),c=e.rows(),u=n;u<n+i;u++){c[u]||(c[u]=d(a.deep(r),[]));for(var l=t;l<t+s;l++)c[u].cells()[l]=u==n&&l==t?o:a.shallow(o)}}(n,function(e,t,n){for(;r=t,o=n,i=void 0,((i=e.rows())[o]?i[o].cells():[])[r];)t++;var r,o,i;return t}(n,o,r),r,t,e)})}),l(n.element(),p(n.rows()),n.rows())},toDom:function(t){return n=t,r=e.map(t.rows(),function(t){var n=e.map(t.cells(),function(e){var t=a.deep(e);return c.remove(t,"colspan"),c.remove(t,"rowspan"),t}),r=a.shallow(t.element());return i.append(r,n),r}),u=a.shallow(n.element()),l=s.fromTag("tbody"),i.append(l,r),o.append(u,l),u;var n,r,u,l},subsection:function(e,t,n){return h(e,t).bind(function(t){return h(e,n).map(function(n){return r=e,i=n,a=(o=t).x(),s=o.y(),c=i.x(),d=s<(u=i.y())?g(r,a,s,c,u):g(r,a,u,c,s),l(r.element(),p(d),d);var r,o,i,a,s,c,u,d})})}}}),n("tinymce.core.selection.FragmentReader",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.node.Fragment","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse","tinymce.core.dom.ElementType","tinymce.core.dom.Parents","tinymce.core.selection.SelectionUtils","tinymce.core.selection.SimpleTableModel","tinymce.core.selection.TableCellSelection"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p){var h=function(){return a.fromElements([])};return{read:function(g,v){var y,b,x,C,w,k,S,T,E,R,N,A,D,P,B,_,O,F,M,I,L=p.getCellsFromElementOrRanges(v,g);return L.length>0?(E=g,R=(T=L)[0],c.ancestor(R,"table",t.curry(n.eq,E))).bind(function(e){var t=T[0],n=T[T.length-1],r=m.fromDom(e);return m.subsection(r,t,n).map(function(e){return a.fromElements([m.toDom(e)])})}).getOrThunk(h):(y=g,(b=v).length>0&&b[0].collapsed?h():(x=y,w=i.fromDom((C=b[0]).cloneContents()),N=x,_=i.fromDom((A=C).commonAncestorContainer),O=d.parentsAndSelf(_,N),F=e.filter(O,function(e){return l.isInline(e)||l.isHeading(e)}),B=A,M=e.find(P=O,function(e){return"li"===s.name(e)&&f.hasAllContentsSelected(e,B)}).fold(t.constant([]),function(t){return(n=P,e.find(n,function(e){return"ul"===s.name(e)||"ol"===s.name(e)})).map(function(e){return[i.fromTag("li"),i.fromTag(s.name(e))]}).getOr([]);var n}),I=F.concat(M.length?M:l.isListItem(D=_)?u.parent(D).filter(l.isList).fold(t.constant([]),function(e){return[D,e]}):l.isList(D)?[D]:[]),k=e.map(I,o.shallow),S=e.foldl(k,function(e,t){return r.append(t,e),t},w),k.length>0?a.fromElements([S]):S))}}}),n("tinymce.core.selection.GetSelectionContent",["ephox.sugar.api.node.Element","tinymce.core.selection.EventProcessRanges","tinymce.core.selection.FragmentReader","tinymce.core.selection.MultiRange","tinymce.core.text.Zwsp"],function(e,t,n,r,o){return{getContent:function(i,a){var s,c=i.selection.getRng(),u=i.dom.create("body"),l=i.selection.getSel(),d=t.processRanges(i,r.getRanges(l));if((a=a||{}).get=!0,a.format=a.format||"html",a.selection=!0,(a=i.fire("BeforeGetContent",a)).isDefaultPrevented())return i.fire("GetContent",a),a.content;if("text"===a.format)return i.selection.isCollapsed()?"":o.trim(c.text||(l.toString?l.toString():""));c.cloneContents?(s=a.contextual?n.read(e.fromDom(i.getBody()),d).dom():c.cloneContents())&&u.appendChild(s):void 0!==c.item||void 0!==c.htmlText?(u.innerHTML="<br>"+(c.item?c.item(0).outerHTML:c.htmlText),u.removeChild(u.firstChild)):u.innerHTML=c.toString(),a.getInner=!0;var f=i.selection.serializer.serialize(u,a);return"tree"===a.format?f:(a.content=i.selection.isCollapsed()?"":f,i.fire("GetContent",a),a.content)}}}),n("tinymce.core.selection.SetSelectionContent",[],function(){return{setContent:function(e,t,n){var r,o,i,a=e.selection.getRng(),s=e.getDoc();if((n=n||{format:"html"}).set=!0,n.selection=!0,n.content=t,n.no_events||!(n=e.fire("BeforeSetContent",n)).isDefaultPrevented()){if(t=n.content,a.insertNode){t+='<span id="__caret">_</span>',a.startContainer==s&&a.endContainer==s?s.body.innerHTML=t:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=t:a.createContextualFragment?a.insertNode(a.createContextualFragment(t)):(o=s.createDocumentFragment(),i=s.createElement("div"),o.appendChild(i),i.outerHTML=t,a.insertNode(o))),r=e.dom.get("__caret"),(a=s.createRange()).setStartBefore(r),a.setEndBefore(r),e.selection.setRng(a),e.dom.remove("__caret");try{e.selection.setRng(a)}catch(e){}}else a.item&&(s.execCommand("Delete",!1,null),a=e.getRng()),/^\s+/.test(t)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+t),e.dom.remove("__mce_tmp")):a.pasteHTML(t);n.no_events||e.fire("SetContent",n)}else e.fire("SetContent",n)}}}),n("tinymce.core.dom.Selection",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","tinymce.core.Env","tinymce.core.api.dom.BookmarkManager","tinymce.core.caret.CaretPosition","tinymce.core.dom.ControlSelection","tinymce.core.dom.ScrollIntoView","tinymce.core.dom.TreeWalker","tinymce.core.focus.EditorFocus","tinymce.core.selection.CaretRangeFromPoint","tinymce.core.selection.EventProcessRanges","tinymce.core.selection.GetSelectionContent","tinymce.core.selection.MultiRange","tinymce.core.selection.NormalizeRange","tinymce.core.selection.SelectionBookmark","tinymce.core.selection.SetSelectionContent","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p,h,g){var v=g.each,y=g.trim,b=function(n){return!(!n||!n.ownerDocument)&&e.contains(t.fromDom(n.ownerDocument),t.fromDom(n))},x=function(e,t,n,o){this.dom=e,this.win=t,this.serializer=n,this.editor=o,this.bookmarkManager=new r(this),this.controlSelection=new i(this,o)};return x.prototype={setCursorLocation:function(e,t){var n=this.dom.createRng();e?(n.setStart(e,t),n.setEnd(e,t),this.setRng(n),this.collapse(!1)):(this._moveEndPoint(n,this.editor.getBody(),!0),this.setRng(n))},getContent:function(e){return d.getContent(this.editor,e)},setContent:function(e,t){h.setContent(this.editor,e,t)},getStart:function(e){var t,n=this.getRng();return 1==(t=n.startContainer).nodeType&&t.hasChildNodes()&&(e&&n.collapsed||(t=t.childNodes[Math.min(t.childNodes.length-1,n.startOffset)])),t&&3==t.nodeType?t.parentNode:t},getEnd:function(e){var t,n,r=this.getRng();return n=r.endOffset,1==(t=r.endContainer).nodeType&&t.hasChildNodes()&&(e&&r.collapsed||(t=t.childNodes[n>0?n-1:n])),t&&3==t.nodeType?t.parentNode:t},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n,r=this.dom,o=r.createRng();return e&&(n=r.nodeIndex(e),o.setStart(e.parentNode,n),o.setEnd(e.parentNode,n+1),t&&(this._moveEndPoint(o,e,!0),this._moveEndPoint(o,e)),this.setRng(o)),e},isCollapsed:function(){var e=this.getRng(),t=this.getSel();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},collapse:function(e){var t=this.getRng();t.collapse(!!e),this.setRng(t)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){var t,n,r,o,i=this,a=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!i.win)return null;if("undefined"==typeof(o=i.win.document)||null===o)return null;if(void 0!==i.editor.bookmark&&!1===c.hasFocus(i.editor)){var s=p.getRng(i.editor);if(s.isSome())return s.getOr(o.createRange())}try{(t=i.getSel())&&(n=t.rangeCount>0?t.getRangeAt(0):t.createRange?t.createRange():o.createRange())}catch(e){}return(n=l.processRanges(i.editor,[n])[0])||(n=o.createRange?o.createRange():o.body.createTextRange()),n.setStart&&9===n.startContainer.nodeType&&n.collapsed&&(r=i.dom.getRoot(),n.setStart(r,0),n.setEnd(r,0)),i.selectedRange&&i.explicitRange&&(0===a(n.START_TO_START,n,i.selectedRange)&&0===a(n.END_TO_END,n,i.selectedRange)?n=i.explicitRange:(i.selectedRange=null,i.explicitRange=null)),n},setRng:function(e,t){var r,o,i;if((i=e)&&(i.select||b(i.startContainer)&&b(i.endContainer)))if(e.select){this.explicitRange=null;try{e.select()}catch(e){}}else{if(r=this.getSel(),e=this.editor.fire("SetSelectionRange",{range:e,forward:t}).range,r){this.explicitRange=e;try{r.removeAllRanges(),r.addRange(e)}catch(e){}!1===t&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),this.selectedRange=r.rangeCount>0?r.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!r.setBaseAndExtent||n.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(o=e.startContainer.childNodes[e.startOffset])&&"IMG"===o.tagName&&(r.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),r.anchorNode===e.startContainer&&r.focusNode===e.endContainer||r.setBaseAndExtent(o,0,o,1)),this.editor.fire("AfterSetSelectionRange",{range:e,forward:t})}},setNode:function(e){return this.setContent(this.dom.getOuterHTML(e)),e},getNode:function(){var e,t,n,r,o,i=this.getRng(),a=this.dom.getRoot(),s=function(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n};return i?(t=i.startContainer,n=i.endContainer,r=i.startOffset,o=i.endOffset,e=i.commonAncestorContainer,!i.collapsed&&(t==n&&o-r<2&&t.hasChildNodes()&&(e=t.childNodes[r]),3===t.nodeType&&3===n.nodeType&&(t=t.length===r?s(t.nextSibling,!0):t.parentNode,n=0===o?s(n.previousSibling,!1):n.parentNode,t&&t===n))?t:e&&3==e.nodeType?e.parentNode:e):a},getSelectedBlocks:function(e,t){var n,r,o=this.dom,i=[];if(r=o.getRoot(),e=o.getParent(e||this.getStart(),o.isBlock),t=o.getParent(t||this.getEnd(),o.isBlock),e&&e!=r&&i.push(e),e&&t&&e!=t){n=e;for(var a=new s(e,r);(n=a.next())&&n!=t;)o.isBlock(n)&&i.push(n)}return t&&e!=t&&t!=r&&i.push(t),i},isForward:function(){var e,t,n=this.dom,r=this.getSel();return!(r&&r.anchorNode&&r.focusNode)||((e=n.createRng()).setStart(r.anchorNode,r.anchorOffset),e.collapse(!0),(t=n.createRng()).setStart(r.focusNode,r.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0)},normalize:function(){var e=this,t=e.getRng();if(!f.hasMultipleRanges(e.getSel())){var n=m.normalize(e.dom,t);return n.each(function(t){e.setRng(t,e.isForward())}),n.getOr(t)}return t},selectorChanged:function(e,t){var n,r=this;return r.selectorChangedData||(r.selectorChangedData={},n={},r.editor.on("NodeChange",function(e){var t=e.element,o=r.dom,i=o.getParents(t,null,o.getRoot()),a={};v(r.selectorChangedData,function(e,t){v(i,function(r){if(o.is(r,t))return n[t]||(v(e,function(e){e(!0,{node:r,selector:t,parents:i})}),n[t]=e),a[t]=e,!1})}),v(n,function(e,r){a[r]||(delete n[r],v(e,function(e){e(!1,{node:t,selector:r,parents:i})}))})})),r.selectorChangedData[e]||(r.selectorChangedData[e]=[]),r.selectorChangedData[e].push(t),r},getScrollContainer:function(){for(var e,t=this.dom.getRoot();t&&"BODY"!=t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e,t){a.scrollIntoView(this.editor,e,t)},placeCaretAt:function(e,t){this.setRng(u.fromPoint(e,t,this.editor.getDoc()))},_moveEndPoint:function(e,t,r){var o=t,i=new s(t,o),a=this.dom.schema.getNonEmptyElements();do{if(3==t.nodeType&&0!==y(t.nodeValue).length)return void(r?e.setStart(t,0):e.setEnd(t,t.nodeValue.length));if(a[t.nodeName]&&!/^(TD|TH)$/.test(t.nodeName))return void(r?e.setStartBefore(t):"BR"==t.nodeName?e.setEndBefore(t):e.setEndAfter(t));if(n.ie&&n.ie<11&&this.dom.isBlock(t)&&this.dom.isEmpty(t))return void(r?e.setStart(t,0):e.setEnd(t,0))}while(t=r?i.next():i.prev());"BODY"==o.nodeName&&(r?e.setStart(o,0):e.setEnd(o,o.childNodes.length))},getBoundingClientRect:function(){var e=this.getRng();return e.collapsed?o.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){this.win=null,this.controlSelection.destroy()}},x}),n("tinymce.core.caret.LineWalker",["tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.dom.Dimensions","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.CaretPosition","tinymce.core.geom.ClientRect"],function(e,t,n,r,o,i,a,s){var c=e.curry,u=function(e,i,a,s,c,u){var l,d,f=0,m=[],p=function(r){var o,s,u;for(u=n.getClientRects(r),-1==e&&(u=u.reverse()),o=0;o<u.length;o++)if(!a(s=u[o],d)){if(m.length>0&&i(s,t.last(m))&&f++,s.line=f,c(s))return!0;m.push(s)}};return(d=t.last(u.getClientRects()))?(p(l=u.getNode()),function(e,t,n,i){for(;i=o.findNode(i,e,r.isEditableCaretCandidate,t);)if(n(i))return}(e,s,p,l),m):m};return{upUntil:c(u,-1,s.isAbove,s.isBelow),downUntil:c(u,1,s.isBelow,s.isAbove),positionsUntil:function(e,n,r,o){var c,u,l,d,f,m,p=new i(n),h=[],g=0,v=function(e){return t.last(e.getClientRects())};1==e?(c=p.next,u=s.isBelow,l=s.isAbove,d=a.after(o)):(c=p.prev,u=s.isAbove,l=s.isBelow,d=a.before(o)),m=v(d);do{if(d.isVisible()&&!l(f=v(d),m)){if(h.length>0&&u(f,t.last(h))&&g++,(f=s.clone(f)).position=d,f.line=g,r(f))return h;h.push(f)}}while(d=c(d));return h},isAboveLine:c(function(e,t){return t.line>e}),isLine:c(function(e,t){return t.line===e})}}),n("tinymce.core.keyboard.CefNavigation",["tinymce.core.Env","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.LineUtils","tinymce.core.caret.LineWalker","tinymce.core.dom.NodeType","tinymce.core.keyboard.CefUtils","tinymce.core.selection.RangeNodes","tinymce.core.util.Arr","tinymce.core.util.Fun"],function(e,t,n,r,o,i,a,s,c,u,l,d){var f=s.isContentEditableFalse,m=u.getSelectedNode,p=r.isAfterContentEditableFalse,h=r.isBeforeContentEditableFalse,g=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},v=function(e,t,o){return o=r.normalizeRange(e,t,o),-1===e?n.fromRangeStart(o):n.fromRangeEnd(o)},y=function(t,r,i){var a,s,c,u,l=new o(t.getBody()),f=d.curry(g,l.next),m=d.curry(g,l.prev);if(i.collapsed&&t.settings.forced_root_block){if(!(a=t.dom.getParent(i.startContainer,"PRE")))return;(1===r?f(n.fromRangeStart(i)):m(n.fromRangeStart(i)))||(u=(c=t).dom.create(c.settings.forced_root_block),(!e.ie||e.ie>=11)&&(u.innerHTML='<br data-mce-bogus="1">'),s=u,1===r?t.$(a).after(s):t.$(a).before(s),t.selection.select(s,!0),t.selection.collapse())}};return{moveH:function(e,n){return function(){var i,a,u,l,b,x,C,w,k,S,T,E,R,N,A,D,P,B,_,O=(a=n,l=new o((i=e).getBody()),b=d.curry(g,l.next),x=d.curry(g,l.prev),k=C=a?1:-1,S=i,T=a?b:x,E=a?h:p,(u=!(R=w=i.selection.getRng()).collapsed&&(N=m(R),f(N))?c.showCaret(k,S,N,-1===k):(P=t.isCaretContainerBlock(R.startContainer),E(A=v(k,S.getBody(),R))?c.selectNode(S,A.getNode(-1===k)):(A=T(A))?E(A)?c.showCaret(k,S,A.getNode(-1===k),1===k):E(D=T(A))&&(!(_=r.isInSameBlock(B=A,D))&&s.isBr(B.getNode())||_)?c.showCaret(k,S,D.getNode(-1===k),1===k):P?c.renderRangeCaret(S,A.toRange()):null:P?R:null))?u:(u=y(i,C,w))||null);return!!O&&(e.selection.setRng(O),!0)}},moveV:function(e,t){return function(){var n,r,o,s,u,d=(n=e,(o=function(e,t,n,r){var o,s,u,d,g,y,b,x,C;if(C=m(r),o=v(e,t.getBody(),r),s=n(t.getBody(),a.isAboveLine(1),o),u=l.filter(s,a.isLine(1)),g=l.last(o.getClientRects()),h(o)&&(C=o.getNode()),p(o)&&(C=o.getNode(!0)),!g)return null;if((d=i.findClosestClientRect(u,y=g.left))&&f(d.node))return b=Math.abs(y-d.left),x=Math.abs(y-d.right),c.showCaret(e,t,d.node,b<x);if(C){var w=a.positionsUntil(e,t.getBody(),a.isAboveLine(1),C);if(d=i.findClosestClientRect(l.filter(w,a.isLine(1)),y))return c.renderRangeCaret(t,d.position.toRange());if(d=l.last(l.filter(w,a.isLine(0))))return c.renderRangeCaret(t,d.position.toRange())}}(s=(r=t)?1:-1,n,r?a.downUntil:a.upUntil,u=n.selection.getRng()))?o:(o=y(n,s,u))||null);return!!d&&(e.selection.setRng(d),!0)}}}}),n("tinymce.core.keyboard.MatchKeys",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Merger"],function(e,t,n){var r=function(r,o){return e.bind(e.map(r,function(e){return n.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:t.noop},e)}),function(e){return(n=o).keyCode===(t=e).keyCode&&n.shiftKey===t.shiftKey&&n.altKey===t.altKey&&n.ctrlKey===t.ctrlKey&&n.metaKey===t.metaKey?[e]:[];var t,n})};return{match:r,action:function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}},execute:function(t,n){return e.find(r(t,n),function(e){return e.action()})}}}),n("tinymce.core.keyboard.ArrowKeys",["ephox.sand.api.PlatformDetection","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.CefNavigation","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n,r,o){return{setup:function(i,a){i.on("keydown",function(s){var c,u,l,d;!1===s.isDefaultPrevented()&&(c=i,u=a,l=s,d=e.detect().os,r.execute([{keyCode:o.RIGHT,action:n.moveH(c,!0)},{keyCode:o.LEFT,action:n.moveH(c,!1)},{keyCode:o.UP,action:n.moveV(c,!1)},{keyCode:o.DOWN,action:n.moveV(c,!0)},{keyCode:o.RIGHT,action:t.move(c,u,!0)},{keyCode:o.LEFT,action:t.move(c,u,!1)},{keyCode:o.RIGHT,ctrlKey:!d.isOSX(),altKey:d.isOSX(),action:t.moveNextWord(c,u)},{keyCode:o.LEFT,ctrlKey:!d.isOSX(),altKey:d.isOSX(),action:t.movePrevWord(c,u)}],l).each(function(e){l.preventDefault()}))})}}}),n("tinymce.core.delete.InlineFormatDelete",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretPosition","tinymce.core.delete.DeleteElement","tinymce.core.delete.DeleteUtils","tinymce.core.dom.ElementType","tinymce.core.dom.Parents","tinymce.core.fmt.CaretFormat"],function(e,t,n,r,o,i,a,s,c,u){var l=function(e){return 1===r.children(e).length};return{backspaceDelete:function(r,d){return!!r.selection.isCollapsed()&&(m=d,h=n.fromDom((f=r).getBody()),g=n.fromDom(f.selection.getStart()),v=e.filter((p=c.parentsAndSelf(g,h),e.findIndex(p,s.isBlock).fold(t.constant(p),function(e){return p.slice(0,e)})),l),e.last(v).map(function(n){var r=o.fromRangeStart(f.selection.getRng());return!!a.willDeleteLastPositionInElement(m,r,n.dom())&&(function(n,r,o,a){var s=t.curry(u.isFormatElement,r),c=e.map(e.filter(a,s),function(e){return e.dom()});if(0===c.length)i.deleteElement(r,n,o);else{var l=u.replaceWithCaretFormat(o.dom(),c);r.selection.setRng(l.toRange())}}(m,f,n,v),!0)}).getOr(!1));var f,m,p,h,g,v}}}),n("tinymce.core.keyboard.DeleteBackspaceKeys",["tinymce.core.delete.BlockBoundaryDelete","tinymce.core.delete.BlockRangeDelete","tinymce.core.delete.CefDelete","tinymce.core.delete.InlineBoundaryDelete","tinymce.core.delete.InlineFormatDelete","tinymce.core.delete.TableDelete","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n,r,o,i,a,s){return{setup:function(c,u){c.on("keydown",function(l){var d,f,m;!1===l.isDefaultPrevented()&&(f=u,m=l,a.execute([{keyCode:s.BACKSPACE,action:a.action(n.backspaceDelete,d=c,!1)},{keyCode:s.DELETE,action:a.action(n.backspaceDelete,d,!0)},{keyCode:s.BACKSPACE,action:a.action(r.backspaceDelete,d,f,!1)},{keyCode:s.DELETE,action:a.action(r.backspaceDelete,d,f,!0)},{keyCode:s.BACKSPACE,action:a.action(t.backspaceDelete,d,!1)},{keyCode:s.DELETE,action:a.action(t.backspaceDelete,d,!0)},{keyCode:s.BACKSPACE,action:a.action(e.backspaceDelete,d,!1)},{keyCode:s.DELETE,action:a.action(e.backspaceDelete,d,!0)},{keyCode:s.BACKSPACE,action:a.action(i.backspaceDelete,d,!1)},{keyCode:s.DELETE,action:a.action(i.backspaceDelete,d,!0)},{keyCode:s.BACKSPACE,action:a.action(o.backspaceDelete,d,!1)},{keyCode:s.DELETE,action:a.action(o.backspaceDelete,d,!0)}],m).each(function(e){m.preventDefault()}))}),c.on("keyup",function(e){var t,r;!1===e.isDefaultPrevented()&&(r=e,a.execute([{keyCode:s.BACKSPACE,action:a.action(n.paddEmptyElement,t=c)},{keyCode:s.DELETE,action:a.action(n.paddEmptyElement,t)}],r))})}}}),n("tinymce.core.api.Settings",[],function(){var e=function(e,t,n){var r=e.getParam(t,n);if(-1!==r.indexOf("=")){var o=e.getParam(t,"","hash");return o.hasOwnProperty(e.id)?o[e.id]:n}return r};return{getIframeAttrs:function(e){return e.getParam("iframe_attrs",{})},getDocType:function(e){return e.getParam("doctype","<!DOCTYPE html>")},getDocumentBaseUrl:function(e){return e.getParam("document_base_url","")},getBodyId:function(t){return e(t,"body_id","tinymce")},getBodyClass:function(t){return e(t,"body_class","")},getContentSecurityPolicy:function(e){return e.getParam("content_security_policy","")},shouldPutBrInPre:function(e){return e.getParam("br_in_pre",!0)},getForcedRootBlock:function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":t},getForcedRootBlockAttrs:function(e){return e.getParam("forced_root_block_attrs",{})},getBrNewLineSelector:function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},getNoNewLineSelector:function(e){return e.getParam("no_newline_selector","")},shouldKeepStyles:function(e){return e.getParam("keep_styles",!0)},shouldEndContainerOnEmtpyBlock:function(e){return e.getParam("end_container_on_empty_block",!1)}}}),n("tinymce.core.newline.NewLineUtils",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Element","tinymce.core.dom.ElementType","tinymce.core.dom.NodeType","tinymce.core.dom.TreeWalker"],function(e,t,n,r,o,i){var a=function(e){return t.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))};return{moveToCaretPosition:function(e,t){var n,r,a,s=t,c=e.dom,u=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var l=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild);l&&/^(UL|OL|DL)$/.test(l.nodeName)&&t.insertBefore(c.doc.createTextNode("\xa0"),t.firstChild)}if(a=c.createRng(),t.normalize(),t.hasChildNodes()){for(n=new i(t,t);r=n.current();){if(o.isText(r)){a.setStart(r,0),a.setEnd(r,0);break}if(u[r.nodeName.toLowerCase()]){a.setStartBefore(r),a.setEndBefore(r);break}s=r,r=n.next()}r||(a.setStart(s,0),a.setEnd(s,0))}else o.isBr(t)?t.nextSibling&&c.isBlock(t.nextSibling)?(a.setStartBefore(t),a.setEndBefore(t)):(a.setStartAfter(t),a.setEndAfter(t)):(a.setStart(t,0),a.setEnd(t,0));e.selection.setRng(a),c.remove(void 0),e.selection.scrollIntoView(t)}},getEditableRoot:function(e,t){var n,r,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==o?r:o},getParentBlock:a,getParentBlockName:function(t){return a(t).fold(e.constant(""),function(e){return e.nodeName.toUpperCase()})},isListItemParentBlock:function(e){return a(e).filter(function(e){return r.isListItem(n.fromDom(e))}).isSome()}}}),n("tinymce.core.newline.InsertLi",["tinymce.core.dom.NodeType","tinymce.core.newline.NewLineUtils"],function(e,t){var n=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},r=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},o=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},i=function(t,n,r){for(var o=t[r?"firstChild":"lastChild"];o&&!e.isElement(o);)o=o[r?"nextSibling":"previousSibling"];return o===n};return{insert:function(e,a,s,c,u){var l=e.dom,d=e.selection.getRng();if(s!==e.getBody()){var f;r(f=s)&&r(f.parentNode)&&(u="LI");var m,p=u?a(u):l.create("BR");if(i(s,c,!0)&&i(s,c,!1))n(s,"LI")?l.insertAfter(p,o(s)):l.replace(p,s);else if(i(s,c,!0))n(s,"LI")?(l.insertAfter(p,o(s)),p.appendChild(l.doc.createTextNode(" ")),p.appendChild(s)):s.parentNode.insertBefore(p,s);else if(i(s,c,!1))l.insertAfter(p,o(s));else{s=o(s);var h=d.cloneRange();h.setStartAfter(c),h.setEndAfter(s);var g=h.extractContents();"LI"===u&&(m=g).firstChild&&"LI"===m.firstChild.nodeName?(p=g.firstChild,l.insertAfter(g,s)):(l.insertAfter(g,s),l.insertAfter(p,s))}l.remove(c),t.moveToCaretPosition(e,p)}}}}),n("tinymce.core.newline.InsertBlock",["tinymce.core.api.Settings","tinymce.core.caret.CaretContainer","tinymce.core.dom.NodeType","tinymce.core.dom.TreeWalker","tinymce.core.fmt.CaretFormat","tinymce.core.newline.InsertLi","tinymce.core.newline.NewLineUtils","tinymce.core.selection.NormalizeRange","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,s,c,u){var l=function(e){e.innerHTML='<br data-mce-bogus="1">'},d=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},f=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},m=function(e,t,r){return!1===n.isText(t)?r:e?1===r&&t.data.charAt(r-1)===c.ZWSP?0:r:r===t.data.length-1&&t.data.charAt(r)===c.ZWSP?t.data.length:r},p=function(e,t){var n,r,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==o?r:o},h=function(t,n){var r=e.getForcedRootBlock(t);r&&r.toLowerCase()===n.tagName.toLowerCase()&&t.dom.setAttribs(n,e.getForcedRootBlockAttrs(t))};return{insert:function(g,v){var y,b,x,C,w,k,S,T,E,R,N,A,D,P,B,_,O,F,M=g.dom,I=g.schema,L=I.getNonEmptyElements(),H=g.selection.getRng(),W=function(t){var n,r,i,a=x,s=I.getTextInlineElements();if(t||"TABLE"===R||"HR"===R?(n=M.create(t||A),h(g,n)):n=w.cloneNode(!1),i=n,!1===e.shouldKeepStyles(g))M.setAttrib(n,"style",null),M.setAttrib(n,"class",null);else do{if(s[a.nodeName]){if(o.isCaretNode(a))continue;r=a.cloneNode(!1),M.setAttrib(r,"id",""),n.hasChildNodes()?(r.appendChild(n.firstChild),n.appendChild(r)):(i=r,n.appendChild(r))}}while((a=a.parentNode)&&a!==b);return l(i),n},U=function(e){var t,o,i,a;if(a=m(e,x,C),n.isText(x)&&(e?a>0:a<x.nodeValue.length))return!1;if(x.parentNode===w&&D&&!e)return!0;if(e&&n.isElement(x)&&x===w.firstChild)return!0;if(d(x,"TABLE")||d(x,"HR"))return D&&!e||!D&&e;for(t=new r(x,w),n.isText(x)&&(e&&0===a?t.prev():e||a!==x.nodeValue.length||t.next());o=t.current();){if(n.isElement(o)){if(!o.getAttribute("data-mce-bogus")&&(i=o.nodeName.toLowerCase(),L[i]&&"br"!==i))return!1}else if(n.isText(o)&&!/^[ \t\r\n]*$/.test(o.nodeValue))return!1;e?t.prev():t.next()}return!0},z=function(){S=/^(H[1-6]|PRE|FIGURE)$/.test(R)&&"HGROUP"!==N?W(A):W(),e.shouldEndContainerOnEmtpyBlock(g)&&f(M,E)&&M.isEmpty(w)?S=M.split(E,w):M.insertAfter(S,w),a.moveToCaretPosition(g,S)};s.normalize(M,H).each(function(e){H.setStart(e.startContainer,e.startOffset),H.setEnd(e.endContainer,e.endOffset)}),x=H.startContainer,C=H.startOffset,A=e.getForcedRootBlock(g),k=v.shiftKey,n.isElement(x)&&x.hasChildNodes()&&(D=C>x.childNodes.length-1,x=x.childNodes[Math.min(C,x.childNodes.length-1)]||x,C=D&&n.isText(x)?x.nodeValue.length:0),(b=p(M,x))&&((A&&!k||!A&&k)&&(x=function(e,t,n,r,o){var i,a,s,c,u,l,d,m=A||"P",g=e.dom,v=p(g,r);if(!(a=g.getParent(r,g.isBlock))||!f(g,a)){if(l=(a=a||v)===e.getBody()||(d=a)&&/^(TD|TH|CAPTION)$/.test(d.nodeName)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return i=g.create(m),h(e,i),a.appendChild(i),n.setStart(i,0),n.setEnd(i,0),i;for(c=r;c.parentNode!==a;)c=c.parentNode;for(;c&&!g.isBlock(c);)s=c,c=c.previousSibling;if(s&&e.schema.isValidChild(l,m.toLowerCase())){for(i=g.create(m),h(e,i),s.parentNode.insertBefore(i,s),c=s;c&&!g.isBlock(c);)u=c.nextSibling,i.appendChild(c),c=u;n.setStart(r,o),n.setEnd(r,o)}}return r}(g,0,H,x,C)),w=M.getParent(x,M.isBlock),E=w?M.getParent(w.parentNode,M.isBlock):null,R=w?w.nodeName.toUpperCase():"","LI"!==(N=E?E.nodeName.toUpperCase():"")||v.ctrlKey||(w=E,E=E.parentNode,R=N),/^(LI|DT|DD)$/.test(R)&&M.isEmpty(w)?i.insert(g,W,E,w,A):A&&w===g.getBody()||(A=A||"P",t.isCaretContainerBlock(w)?(S=t.showCaretContainerBlock(w),M.isEmpty(w)&&l(w),a.moveToCaretPosition(g,S)):U()?z():U(!0)?(S=w.parentNode.insertBefore(W(),w),a.moveToCaretPosition(g,d(w,"HR")?S:w)):((y=(O=H,F=O.cloneRange(),F.setStart(O.startContainer,m(!0,O.startContainer,O.startOffset)),F.setEnd(O.endContainer,m(!1,O.endContainer,O.endOffset)),F).cloneRange()).setEndAfter(w),function(e){do{n.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)}(T=y.extractContents()),S=T.firstChild,M.insertAfter(T,w),function(e,t,r){var o,i=S,a=[];if(i){for(;i=i.firstChild;){if(e.isBlock(i))return;n.isElement(i)&&!t[i.nodeName.toLowerCase()]&&a.push(i)}for(o=a.length;o--;)!(i=a[o]).hasChildNodes()||i.firstChild===i.lastChild&&""===i.firstChild.nodeValue?e.remove(i):(s=i)&&"A"===s.nodeName&&0===u.trim(c.trim(s.innerText||s.textContent)).length&&e.remove(i);var s}}(M,L),P=M,(B=w).normalize(),(_=B.lastChild)&&!/^(left|right)$/gi.test(P.getStyle(_,"float",!0))||P.add(B,"br"),M.isEmpty(w)&&l(w),S.normalize(),M.isEmpty(S)?(M.remove(S),z()):a.moveToCaretPosition(g,S)),M.setAttrib(S,"id",""),g.fire("NewBlock",{newBlock:S})))}}}),n("tinymce.core.newline.ContextSelectors",["ephox.sugar.api.node.Element","ephox.sugar.api.search.Selectors","tinymce.core.api.Settings","tinymce.core.newline.NewLineUtils"],function(e,t,n,r){var o=function(n,o){return r.getParentBlock(n).filter(function(n){return o.length>0&&t.is(e.fromDom(n),o)}).isSome()};return{shouldInsertBr:function(e){return o(e,n.getBrNewLineSelector(e))},shouldBlockNewLine:function(e){return o(e,n.getNoNewLineSelector(e))}}}),n("tinymce.core.newline.NewLineAction",["ephox.katamari.api.Adt","ephox.katamari.api.Arr","ephox.katamari.api.Option","tinymce.core.api.Settings","tinymce.core.newline.ContextSelectors","tinymce.core.newline.NewLineUtils","tinymce.core.util.LazyEvaluator"],function(e,t,n,r,o,i,a){var s=e.generate([{br:[]},{block:[]},{none:[]}]),c=function(e,t){return o.shouldBlockNewLine(e)},u=function(e){return function(t,n){return""===r.getForcedRootBlock(t)===e}},l=function(e){return function(t,n){return i.isListItemParentBlock(t)===e}},d=function(e){return function(t,n){return"PRE"===i.getParentBlockName(t)===e}},f=function(e){return function(t,n){return r.shouldPutBrInPre(t)===e}},m=function(e,t){return o.shouldInsertBr(e)},p=function(e,t){return t},h=function(e){var t=r.getForcedRootBlock(e),n=i.getEditableRoot(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},g=function(e,r){return function(o,i){return t.foldl(e,function(e,t){return e&&t(o,i)},!0)?n.some(r):n.none()}};return{getAction:function(e,t){return a.evaluateUntil([g([c],s.none()),g([d(!0),f(!1),p],s.br()),g([d(!0),f(!1)],s.block()),g([d(!0),f(!0),p],s.block()),g([d(!0),f(!0)],s.br()),g([l(!0),p],s.br()),g([l(!0)],s.block()),g([u(!0),p,h],s.block()),g([u(!0)],s.br()),g([m],s.br()),g([u(!1),p],s.br()),g([h],s.block())],[e,t.shiftKey]).getOr(s.none())}}}),n("tinymce.core.newline.InsertNewLine",["ephox.katamari.api.Fun","tinymce.core.newline.InsertBlock","tinymce.core.newline.InsertBr","tinymce.core.newline.NewLineAction"],function(e,t,n,r){return{insert:function(o,i){r.getAction(o,i).fold(function(){n.insert(o,i)},function(){t.insert(o,i)},e.noop)}}}),n("tinymce.core.keyboard.EnterKey",["tinymce.core.newline.InsertNewLine","tinymce.core.util.VK"],function(e,t){return{setup:function(n){n.on("keydown",function(r){var o,i,a;r.keyCode===t.ENTER&&(o=n,(i=r).isDefaultPrevented()||(i.preventDefault(),(a=o.undoManager).typing&&(a.typing=!1,a.add()),o.undoManager.transact(function(){!1===o.selection.isCollapsed()&&o.execCommand("Delete"),e.insert(o,i)})))})}}}),n("tinymce.core.keyboard.InsertSpace",["ephox.katamari.api.Fun","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.InlineUtils"],function(e,t,n,r,o){var i=function(e,t,r){return u=t,!(!a(r)||!n.isText(u.container())||(o=e,s=(i=t).container(),c=i.offset(),s.insertData(c,"\xa0"),o.selection.setCursorLocation(s,c+1),0));var o,i,s,c,u},a=function(t){return t.fold(e.constant(!1),e.constant(!0),e.constant(!0),e.constant(!1))};return{insertAtSelection:function(n){return!!n.selection.isCollapsed()&&(s=e.curry(o.isInlineTarget,a=n),c=t.fromRangeStart(a.selection.getRng()),r.readLocation(s,a.getBody(),c).map(e.curry(i,a,c)).getOr(!1));var a,s,c}}}),n("tinymce.core.keyboard.SpaceKey",["tinymce.core.keyboard.InsertSpace","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n){return{setup:function(r){r.on("keydown",function(o){var i;!1===o.isDefaultPrevented()&&(i=o,t.execute([{keyCode:n.SPACEBAR,action:t.action(e.insertAtSelection,r)}],i).each(function(e){i.preventDefault()}))})}}}),n("tinymce.core.keyboard.KeyboardOverrides",["tinymce.core.keyboard.ArrowKeys","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.DeleteBackspaceKeys","tinymce.core.keyboard.EnterKey","tinymce.core.keyboard.SpaceKey"],function(e,t,n,r,o){return{setup:function(i){var a=t.setupSelectedState(i);e.setup(i,a),n.setup(i,a),r.setup(i),o.setup(i)}}}),n("tinymce.core.util.Quirks",["global!document","global!window","tinymce.core.Env","tinymce.core.caret.CaretContainer","tinymce.core.selection.CaretRangeFromPoint","tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.VK"],function(e,t,n,r,o,i,a,s){return function(c){var u,l,d,f=a.each,m=s.BACKSPACE,p=s.DELETE,h=c.dom,g=c.selection,v=c.settings,y=c.parser,b=n.gecko,x=n.webkit,C="data:text/mce-internal,",w=n.ie?"Text":"URL",k=function(e,t){try{c.getDoc().execCommand(e,!1,t)}catch(e){}},S=function(e){return e.isDefaultPrevented()},T=function(){c.shortcuts.add("meta+a",null,"SelectAll")},E=function(){c.on("keydown",function(e){if(!S(e)&&e.keyCode===m&&g.isCollapsed()&&0===g.getRng(!0).startOffset){var t=g.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},R=function(){c.inline||(c.contentStyles.push("body {min-height: 150px}"),c.on("click",function(e){var t;if("HTML"==e.target.nodeName){if(n.ie>11)return void c.getBody().focus();t=c.selection.getRng(),c.getBody().focus(),c.selection.setRng(t),c.selection.normalize(),c.nodeChanged()}}))};return c.on("keydown",function(e){var t,n,r,o,i;if(!S(e)&&e.keyCode==s.BACKSPACE&&(n=(t=g.getRng()).startContainer,r=t.startOffset,o=h.getRoot(),i=n,t.collapsed&&0===r)){for(;i&&i.parentNode&&i.parentNode.firstChild==i&&i.parentNode!=o;)i=i.parentNode;"BLOCKQUOTE"===i.tagName&&(c.formatter.toggle("blockquote",null,i),(t=h.createRng()).setStart(n,0),t.setEnd(n,0),g.setRng(t))}}),u=function(e){var t=h.create("body"),n=e.cloneContents();return t.appendChild(n),g.serializer.serialize(t,{format:"html"})},c.on("keydown",function(e){var t,n,r,o,i,a=e.keyCode;if(!S(e)&&(a==p||a==m)){if(t=c.selection.isCollapsed(),n=c.getBody(),t&&!h.isEmpty(n))return;if(!t&&(r=c.selection.getRng(),o=u(r),(i=h.createRng()).selectNode(c.getBody()),o!==u(i)))return;e.preventDefault(),c.setContent(""),n.firstChild&&h.isBlock(n.firstChild)?c.selection.setCursorLocation(n.firstChild,0):c.selection.setCursorLocation(n,0),c.nodeChanged()}}),n.windowsPhone||c.on("keyup focusin mouseup",function(e){s.modifierPressed(e)||g.normalize()},!0),x&&(c.settings.content_editable||h.bind(c.getDoc(),"mousedown mouseup",function(e){var t;if(e.target==c.getDoc().documentElement)if(t=g.getRng(),c.getBody().focus(),"mousedown"==e.type){if(r.isCaretContainer(t.startContainer))return;g.placeCaretAt(e.clientX,e.clientY)}else g.setRng(t)}),c.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&"false"!==h.getContentEditableParent(t)&&(e.preventDefault(),c.selection.select(t),c.nodeChanged()),"A"==t.nodeName&&h.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),g.select(t))}),v.forced_root_block&&c.on("init",function(){k("DefaultParagraphSeparator",v.forced_root_block)}),c.on("init",function(){c.dom.bind(c.getBody(),"submit",function(e){e.preventDefault()})}),E(),y.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"==e[t].attr("class")&&e[t].remove()}),n.iOS?(c.inline||c.on("keydown",function(){e.activeElement==e.body&&c.getWin().focus()}),R(),c.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),c.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):T()),n.ie>=11&&(R(),E()),n.ie&&(T(),k("AutoUrlDetect",!1),c.on("dragstart",function(e){var t,n,r;(t=e).dataTransfer&&(c.selection.isCollapsed()&&"IMG"==t.target.tagName&&g.select(t.target),(n=c.selection.getContent()).length>0&&(r=C+escape(c.id)+","+escape(n),t.dataTransfer.setData(w,r)))}),c.on("drop",function(e){if(!S(e)){var t=(i=e).dataTransfer&&(a=i.dataTransfer.getData(w))&&a.indexOf(C)>=0?(a=a.substr(C.length).split(","),{id:unescape(a[0]),html:unescape(a[1])}):null;if(t&&t.id!=c.id){e.preventDefault();var n=o.fromPoint(e.x,e.y,c.getDoc());g.setRng(n),r=t.html,c.queryCommandSupported("mceInsertClipboardContent")?c.execCommand("mceInsertClipboardContent",!1,{content:r,internal:!0}):c.execCommand("mceInsertContent",!1,r)}}var r,i,a})),b&&(c.on("keydown",function(e){if(!S(e)&&e.keyCode===m){if(!c.getBody().getElementsByTagName("hr").length)return;if(g.isCollapsed()&&0===g.getRng(!0).startOffset){var t=g.getNode(),n=t.previousSibling;if("HR"==t.nodeName)return h.remove(t),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(h.remove(n),e.preventDefault())}}}),t.Range.prototype.getClientRects||c.on("mousedown",function(e){if(!S(e)&&"HTML"===e.target.nodeName){var t=c.getBody();t.blur(),i.setEditorTimeout(c,function(){t.focus()})}}),l=function(){var e=h.getAttribs(g.getStart().cloneNode(!1));return function(){var t=g.getStart();t!==c.getBody()&&(h.setAttrib(t,"style",null),f(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}},d=function(){return!g.isCollapsed()&&h.getParent(g.getStart(),h.isBlock)!=h.getParent(g.getEnd(),h.isBlock)},c.on("keypress",function(e){var t;if(!S(e)&&(8==e.keyCode||46==e.keyCode)&&d())return t=l(),c.getDoc().execCommand("delete",!1,null),t(),e.preventDefault(),!1}),h.bind(c.getDoc(),"cut",function(e){var t;!S(e)&&d()&&(t=l(),i.setEditorTimeout(c,function(){t()}))}),v.readonly||c.on("BeforeExecCommand MouseDown",function(){k("StyleWithCSS",!1),k("enableInlineTableEditing",!1),v.object_resizing||k("enableObjectResizing",!1)}),c.on("SetContent ExecCommand",function(e){"setcontent"!=e.type&&"mceInsertLink"!==e.command||f(h.select("a"),function(e){var t=e.parentNode,n=h.getRoot();if(t.lastChild===e){for(;t&&!h.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}h.add(t,"br",{"data-mce-bogus":1})}})}),c.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),n.mac&&c.on("keydown",function(e){!s.metaKeyPressed(e)||e.shiftKey||37!=e.keyCode&&39!=e.keyCode||(e.preventDefault(),c.selection.getSel().modify("move",37==e.keyCode?"backward":"forward","lineboundary"))}),E()),{refreshContentEditable:function(){},isHidden:function(){var e;return!b||c.removed?0:!(e=c.selection.getSel())||!e.rangeCount||0===e.rangeCount}}}}),n("tinymce.core.init.InitContentBody",["ephox.sugar.api.dom.Insert","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","global!document","global!window","tinymce.core.EditorUpload","tinymce.core.ForceBlocks","tinymce.core.NodeChange","tinymce.core.SelectionOverrides","tinymce.core.UndoManager","tinymce.core.api.Formatter","tinymce.core.api.dom.Serializer","tinymce.core.caret.CaretContainerInput","tinymce.core.dom.DOMUtils","tinymce.core.dom.Selection","tinymce.core.html.DomParser","tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.keyboard.KeyboardOverrides","tinymce.core.util.Delay","tinymce.core.util.Quirks","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p,h,g,v,y,b,x,C){var w=m.DOM,k=function(e){var t;e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),(t=e).settings.auto_focus&&b.setEditorTimeout(t,function(){var e;(e=!0===t.settings.auto_focus?t:t.editorManager.get(t.settings.auto_focus)).destroyed||e.focus()},100)};return{initContentBody:function(b,S){var T,E,R,N,A,D,P,B,_=b.settings,O=b.getElement(),F=b.getDoc();_.inline||(b.getElement().style.visibility=b.orgVisibility),S||_.content_editable||(F.open(),F.write(b.iframeHTML),F.close()),_.content_editable&&(b.on("remove",function(){var e=this.getBody();w.removeClass(e,"mce-content-body"),w.removeClass(e,"mce-edit-focus"),w.setAttrib(e,"contentEditable",null)}),w.addClass(O,"mce-content-body"),b.contentDocument=F=_.content_document||r,b.contentWindow=_.content_window||o,b.bodyElement=O,_.content_document=_.content_window=null,_.root_name=O.nodeName.toLowerCase()),(T=b.getBody()).disabled=!0,b.readonly=_.readonly,b.readonly||(b.inline&&"static"===w.getStyle(T,"position",!0)&&(T.style.position="relative"),T.contentEditable=b.getParam("content_editable_state",!0)),T.disabled=!1,b.editorUpload=new i(b),b.schema=new v(_),b.dom=new m(F,{keep_values:!0,url_converter:b.convertURL,url_converter_scope:b,hex_colors:_.force_hex_style_colors,class_filter:_.class_filter,update_styles:!0,root_element:b.inline?b.getBody():null,collect:_.content_editable,schema:b.schema,onSetAttrib:function(e){b.fire("SetAttrib",e)}}),b.parser=((N=new h((R=b).settings,R.schema)).addAttributeFilter("src,href,style,tabindex",function(e,t){for(var n,r,o,i=e.length,a=R.dom;i--;)if(r=(n=e[i]).attr(t),!n.attributes.map[o="data-mce-"+t]){if(0===r.indexOf("data:")||0===r.indexOf("blob:"))continue;"style"===t?((r=a.serializeStyle(a.parseStyle(r),n.name)).length||(r=null),n.attr(o,r),n.attr(t,r)):"tabindex"===t?(n.attr(o,r),n.attr(t,null)):n.attr(o,R.convertURL(r,t,n.name))}}),N.addNodeFilter("script",function(e){for(var t,n,r=e.length;r--;)0!==(n=(t=e[r]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+n)}),N.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)(t=e[n]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),N.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,n=e.length,r=R.schema.getNonEmptyElements();n--;)(t=e[n]).isEmpty(r)&&0===t.getAll("br").length&&(t.append(new g("br",1)).shortEnded=!0)}),N),b.serializer=new d(_,b),b.selection=new p(b.dom,b.getWin(),b.serializer,b),b.formatter=new l(b),b.undoManager=new u(b),b._nodeChangeDispatcher=new s(b),b._selectionOverrides=new c(b),f.setup(b),y.setup(b),a.setup(b),b.fire("PreInit"),_.browser_spellcheck||_.gecko_spellcheck||(F.body.spellcheck=!1,w.setAttrib(T,"spellcheck","false")),b.quirks=new x(b),b.fire("PostRender"),_.directionality&&(T.dir=_.directionality),_.nowrap&&(T.style.whiteSpace="nowrap"),_.protect&&b.on("BeforeSetContent",function(e){C.each(_.protect,function(t){e.content=e.content.replace(t,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),b.on("SetContent",function(){b.addVisual(b.getBody())}),_.padd_empty_editor&&b.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),b.load({initial:!0,format:"html"}),b.startContent=b.getContent({format:"raw"}),b.on("compositionstart compositionend",function(e){b.composing="compositionstart"===e.type}),b.contentStyles.length>0&&(E="",C.each(b.contentStyles,function(e){E+=e+"\r\n"}),b.dom.addStyle(E)),(A=b,A.inline?w.styleSheetLoader:A.dom.styleSheetLoader).loadAll(b.contentCSS,function(e){k(b)},function(e){k(b)}),_.content_style&&(D=_.content_style,P=t.fromDom(b.getDoc().head),B=t.fromTag("style"),n.set(B,"type","text/css"),e.append(B,t.fromText(D)),e.append(P,B))}}}),n("tinymce.core.init.InitIframe",["ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","global!document","global!window","tinymce.core.Env","tinymce.core.api.Settings","tinymce.core.dom.DOMUtils","tinymce.core.init.InitContentBody","tinymce.core.util.Uuid"],function(e,t,n,r,o,i,a,s,c,u){var l=s.DOM;return{init:function(s,d){var f=function(s,d){var f,m,p,h,g,v,y,b=s.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),x=(f=s.id,m=b,p=d.height,h=a.getIframeAttrs(s),y=e.fromTag("iframe"),t.setAll(y,h),t.setAll(y,{id:f+"_ifr",frameBorder:"0",allowTransparency:"true",title:m}),n.setAll(y,{width:"100%",height:(g=p,v="number"==typeof g?g+"px":g,v||""),display:"block"}),y).dom();x.onload=function(){x.onload=null,s.fire("load")};var C,w,k,S,T=function(e,t){if(r.domain!==o.location.hostname&&i.ie&&i.ie<12){var n=u.uuid("mce");return e[n]=function(){c.initContentBody(e)},l.setAttrib(t,"src",'javascript:(function(){document.open();document.domain="'+r.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()"),!0}return!1}(s,x);return s.contentAreaContainer=d.iframeContainer,s.iframeElement=x,s.iframeHTML=(S=a.getDocType(C=s)+"<html><head>",a.getDocumentBaseUrl(C)!==C.documentBaseUrl&&(S+='<base href="'+C.documentBaseURI.getURI()+'" />'),S+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',w=a.getBodyId(C),k=a.getBodyClass(C),a.getContentSecurityPolicy(C)&&(S+='<meta http-equiv="Content-Security-Policy" content="'+a.getContentSecurityPolicy(C)+'" />'),S+='</head><body id="'+w+'" class="mce-content-body '+k+'" data-id="'+C.id+'"><br></body></html>'),l.add(d.iframeContainer,x),T}(s,d);d.editorContainer&&(l.get(d.editorContainer).style.display=s.orgDisplay,s.hidden=l.isHidden(d.editorContainer)),s.getElement().style.display="none",l.setAttrib(s.id,"aria-hidden",!0),f||c.initContentBody(s)}}}),n("tinymce.core.init.Init",["ephox.katamari.api.Type","global!document","global!window","tinymce.core.PluginManager","tinymce.core.ThemeManager","tinymce.core.dom.DOMUtils","tinymce.core.init.InitContentBody","tinymce.core.init.InitIframe","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,s,c){var u=i.DOM,l=function(e,t,n){var o,i,a=r.get(n);if(o=r.urls[n]||e.documentBaseUrl.replace(/\/$/,""),n=c.trim(n),a&&-1===c.inArray(t,n)){if(c.each(r.dependencies(n),function(n){l(e,t,n)}),e.plugins[n])return;i=new a(e,o,e.$),e.plugins[n]=i,i.init&&(i.init(e,o),t.push(n))}},d=function(e){return e.replace(/^\-/,"")},f=function(e){return{editorContainer:e,iframeContainer:e}};return{init:function(t){var n,r,i,m,p,h,g,v,y,b,x,C,w,k,S,T,E,R,N,A,D,P,B,_,O=t.settings,F=t.getElement();return t.rtl=O.rtl_ui||t.editorManager.i18n.rtl,t.editorManager.i18n.setCode(O.language),O.aria_label=O.aria_label||u.getAttrib(F,"aria-label",t.getLang("aria.rich_text_area")),t.fire("ScriptsLoaded"),e.isString(m=(r=t).settings.theme)?(r.settings.theme=d(m),i=o.get(m),r.theme=new i(r,o.urls[m]),r.theme.init&&r.theme.init(r,o.urls[m]||r.documentBaseUrl.replace(/\/$/,""),r.$)):r.theme={},h=[],c.each((p=t).settings.plugins.split(/[ ,]/),function(e){l(p,h,d(e))}),B=(g=t).settings,_=g.getElement(),g.orgDisplay=_.style.display,n=e.isString(B.theme)?(E=(x=g).settings,R=x.getElement(),C=E.width||u.getStyle(R,"width")||"100%",w=E.height||u.getStyle(R,"height")||R.offsetHeight,k=E.min_height||100,(S=/^[0-9\.]+(|px)$/i).test(""+C)&&(C=Math.max(parseInt(C,10),100)),S.test(""+w)&&(w=Math.max(parseInt(w,10),k)),T=x.theme.renderUI({targetNode:R,width:C,height:w,deltaWidth:E.delta_width,deltaHeight:E.delta_height}),E.content_editable||(w=(T.iframeHeight||w)+("number"==typeof w?T.deltaHeight||0:""))<k&&(w=k),T.height=w,T):e.isFunction(B.theme)?(b=(v=g).getElement(),(y=v.settings.theme(v,b)).editorContainer.nodeType&&(y.editorContainer.id=y.editorContainer.id||v.id+"_parent"),y.iframeContainer&&y.iframeContainer.nodeType&&(y.iframeContainer.id=y.iframeContainer.id||v.id+"_iframecontainer"),y.height=y.iframeHeight?y.iframeHeight:b.offsetHeight,y):(P=(N=g).getElement(),N.inline?f(null):(A=P,D=u.create("div"),u.insertAfter(D,A),f(D))),t.editorContainer=n.editorContainer?n.editorContainer:null,O.content_css&&c.each(c.explode(O.content_css),function(e){t.contentCSS.push(t.documentBaseURI.toAbsolute(e))}),O.content_editable?a.initContentBody(t):s.init(t,n)}}}),n("tinymce.core.init.Render",["ephox.katamari.api.Type","global!window","tinymce.core.api.NotificationManager","tinymce.core.api.WindowManager","tinymce.core.dom.DOMUtils","tinymce.core.dom.EventUtils","tinymce.core.dom.ScriptLoader","tinymce.core.Env","tinymce.core.ErrorReporter","tinymce.core.init.Init","tinymce.core.PluginManager","tinymce.core.ThemeManager","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,s,c,u,l,d,f){var m=o.DOM,p=function(e){return"-"===e.charAt(0)};return{render:function(o){var h,g,v,y=o.settings,b=o.id,x=function(){m.unbind(t,"ready",x),o.render()};if(i.Event.domLoaded){if(o.getElement()&&s.contentEditable){y.inline?o.inline=!0:(o.orgVisibility=o.getElement().style.visibility,o.getElement().style.visibility="hidden");var C=o.getElement().form||m.getParent(b,"form");C&&(o.formElement=C,y.hidden_input&&!/TEXTAREA|INPUT/i.test(o.getElement().nodeName)&&(m.insertAfter(m.create("input",{type:"hidden",name:b}),b),o.hasHiddenInput=!0),o.formEventDelegate=function(e){o.fire(e.type,e)},m.bind(C,"submit reset",o.formEventDelegate),o.on("reset",function(){o.setContent(o.startContent,{format:"raw"})}),!y.submit_patch||C.submit.nodeType||C.submit.length||C._mceOldSubmit||(C._mceOldSubmit=C.submit,C.submit=function(){return o.editorManager.triggerSave(),o.setDirty(!1),C._mceOldSubmit(C)})),o.windowManager=new r(o),o.notificationManager=new n(o),"xml"===y.encoding&&o.on("GetContent",function(e){e.save&&(e.content=m.encode(e.content))}),y.add_form_submit_trigger&&o.on("submit",function(){o.initialized&&o.save()}),y.add_unload_trigger&&(o._beforeUnload=function(){!o.initialized||o.destroyed||o.isHidden()||o.save({format:"raw",no_events:!0,set_dirty:!1})},o.editorManager.on("BeforeUnload",o._beforeUnload)),o.editorManager.add(o),function(t,n,r,o){var i=n.settings,a=i.theme;if(e.isString(a)){if(!p(a)&&!d.urls.hasOwnProperty(a)){var s=i.theme_url;d.load(a,s?n.documentBaseURI.toAbsolute(s):"themes/"+a+"/theme"+r+".js")}t.loadQueue(function(){d.waitFor(a,o)})}else o()}(v=a.ScriptLoader,h=o,g=o.suffix,function(){var e,t,n,r,o;e=v,(n=(t=h).settings).language&&"en"!==n.language&&!n.language_url&&(n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&!t.editorManager.i18n.data[n.language]&&e.add(n.language_url),o=g,f.isArray((r=h.settings).plugins)&&(r.plugins=r.plugins.join(" ")),f.each(r.external_plugins,function(e,t){l.load(t,e),r.plugins+=" "+t}),f.each(r.plugins.split(/[ ,]/),function(e){if((e=f.trim(e))&&!l.urls[e])if(p(e)){e=e.substr(1,e.length);var t=l.dependencies(e);f.each(t,function(e){e=l.createUrl({prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"},e),l.load(e.resource,e)})}else l.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"})}),v.loadQueue(function(){h.removed||u.init(h)},h,function(e){c.pluginLoadError(h,e[0]),h.removed||u.init(h)})})}}else m.bind(t,"ready",x)}}}),n("tinymce.core.ui.Sidebar",[],function(){return{add:function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n}),e.sidebars=r}}}),n("tinymce.core.util.URI",["global!document","tinymce.core.util.Tools"],function(e,t){var n=t.each,r=t.trim,o="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),i={ftp:21,http:80,https:443,mailto:25},a=function(t,i){var s,c,u=this;if(t=r(t),s=(i=u.settings=i||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))u.source=t;else{var l=0===t.indexOf("//");0!==t.indexOf("/")||l||(t=(s&&s.protocol||"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(c=i.base_uri?i.base_uri.path:new a(e.location.href).directory,""===i.base_uri.protocol?t="//mce_host"+u.toAbsPath(c,t):(t=/([^#?]*)([#?]?.*)/.exec(t),t=(s&&s.protocol||"http")+"://mce_host"+u.toAbsPath(c,t[1])+t[2])),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),n(o,function(e,n){var r=t[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),u[e]=r}),s&&(u.protocol||(u.protocol=s.protocol),u.userInfo||(u.userInfo=s.userInfo),u.port||"mce_host"!==u.host||(u.port=s.port),u.host&&"mce_host"!==u.host||(u.host=s.host),u.source=""),l&&(u.protocol="")}};return a.prototype={setPath:function(e){e=/^(.*?)\/?(\w+)?$/.exec(e),this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},toRelative:function(e){var t;if("./"===e)return e;if("mce_host"!=(e=new a(e,{base_uri:this})).host&&this.host!=e.host&&e.host||this.port!=e.port||this.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var n=this.getURI(),r=e.getURI();return n==r||"/"==n.charAt(n.length-1)&&n.substr(0,n.length-1)==r?n:(t=this.toRelPath(this.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return(e=new a(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=i[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r,o,i=0,a="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(r=0,o=e.length;r<o;r++)if(r>=n.length||e[r]!=n[r]){i=r+1;break}if(e.length<n.length)for(r=0,o=n.length;r<o;r++)if(r>=e.length||e[r]!=n[r]){i=r+1;break}if(1===i)return t;for(r=0,o=e.length-(i-1);r<o;r++)a+="../";for(r=i-1,o=n.length;r<o;r++)a+=r!=i-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var r,o,i,a=0,s=[];for(o=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),n(e,function(e){e&&s.push(e)}),e=s,r=t.length-1,s=[];r>=0;r--)0!==t[r].length&&"."!==t[r]&&(".."!==t[r]?a>0?a--:s.push(t[r]):a++);return 0!==(i=(r=e.length-a)<=0?s.reverse().join("/"):e.slice(0,r).join("/")+"/"+s.reverse().join("/")).indexOf("/")&&(i="/"+i),o&&i.lastIndexOf("/")!==i.length-1&&(i+=o),i},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},a.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),(n=/data:([^;]+)/.exec(e[0]))&&(t=n[1]),{type:t,data:e[1]}},a.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t},a}),n("tinymce.core.Editor",["tinymce.core.AddOnManager","tinymce.core.EditorCommands","tinymce.core.EditorObservable","tinymce.core.EditorSettings","tinymce.core.Env","tinymce.core.Mode","tinymce.core.Shortcuts","tinymce.core.dom.DOMUtils","tinymce.core.dom.DomQuery","tinymce.core.dom.TrimHtml","tinymce.core.focus.EditorFocus","tinymce.core.html.Serializer","tinymce.core.init.Render","tinymce.core.ui.Sidebar","tinymce.core.util.Tools","tinymce.core.util.URI","tinymce.core.util.Uuid"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p,h,g){var v=s.DOM,y=p.extend,b=p.each,x=p.trim,C=p.resolve,w=o.ie,k=function(n,i,s){var u,l,d=this;u=d.documentBaseUrl=s.documentBaseURL,l=s.baseURI,i=r.getEditorSettings(d,n,u,s.defaultSettings,i),d.settings=i,e.language=i.language||"en",e.languageLoad=i.language_load,e.baseURL=s.baseURL,d.id=n,d.setDirty(!1),d.plugins={},d.documentBaseURI=new h(i.document_base_url,{base_uri:l}),d.baseURI=l,d.contentCSS=[],d.contentStyles=[],d.shortcuts=new a(d),d.loadedCSS={},d.editorCommands=new t(d),d.suffix=s.suffix,d.editorManager=s,d.inline=i.inline,d.buttons={},d.menuItems={},i.cache_suffix&&(o.cacheSuffix=i.cache_suffix.replace(/^[\?\&]+/,"")),!1===i.override_viewport&&(o.overrideViewPort=!1),s.fire("SetupEditor",d),d.execCallback("setup",d),d.$=c.overrideDefaults(function(){return{context:d.inline?d.getBody():d.getDoc(),element:d.getBody()}})};return y(k.prototype={render:function(){f.render(this)},focus:function(e){l.focus(this,e)},execCallback:function(e){var t,n=this.settings[e];if(n)return this.callbackLookup&&(t=this.callbackLookup[e])&&(n=t.func,t=t.scope),"string"==typeof n&&(t=(t=n.replace(/\.\w+$/,""))?C(t):0,n=C(n),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[e]={func:n,scope:t}),n.apply(t||this,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&p.is(e,"string")){var t=this.settings.language||"en",n=this.editorManager.i18n;e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n.data[t+"."+r]||"{#"+r+"}"})}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){var r,o=e in this.settings?this.settings[e]:t;return"hash"===n?(r={},"string"==typeof o?b(o.indexOf("=")>0?o.split(/[;,](?![^=;,]*(?:[;,]|$))/):o.split(","),function(e){e=e.split("="),r[x(e[0])]=x(e.length>1?e[1]:e)}):r=o,r):o},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.stateSelector&&"undefined"==typeof t.active&&(t.active=!1),t.text||t.icon||(t.icon=e),n.buttons=n.buttons,t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return m.add(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems,n.menuItems[e]=t},addContextToolbar:function(e,t){var n,r=this;r.contextToolbars=r.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return r.dom.is(e,n)}),r.contextToolbars.push({id:g.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(v.show(this.getContainer()),v.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(w&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e==e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(v.hide(e.getContainer()),v.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this.getElement();return this.removed?"":n?((e=e||{}).load=!0,t=this.setContent(void 0!==n.value?n.value:n.innerHTML,e),e.element=n,e.no_events||this.fire("LoadContent",e),e.element=n=null,t):void 0},save:function(e){var t,n,r=this,o=r.getElement();if(o&&r.initialized&&!r.removed)return(e=e||{}).save=!0,e.element=o,e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"==e.format&&r.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=t:(r.inline||(o.innerHTML=t),(n=v.getParent(r.id,"form"))&&b(n.elements,function(e){if(e.name==r.id)return e.value=t,!1})),e.element=o=null,!1!==e.set_dirty&&r.setDirty(!1),t},setContent:function(e,t){var n,r,o=this,i=o.getBody();return(t=t||{}).format=t.format||"html",t.set=!0,t.content=e,t.no_events||o.fire("BeforeSetContent",t),0===(e=t.content).length||/^\s+$/.test(e)?(r=w&&w<11?"":'<br data-mce-bogus="1">',"TABLE"==i.nodeName?e="<tr><td>"+r+"</td></tr>":/^(UL|OL)$/.test(i.nodeName)&&(e="<li>"+r+"</li>"),(n=o.settings.forced_root_block)&&o.schema.isValidChild(i.nodeName.toLowerCase(),n.toLowerCase())?e=o.dom.createHTML(n,o.settings.forced_root_block_attrs,e=r):w||e||(e='<br data-mce-bogus="1">'),o.dom.setHTML(i,e),o.fire("SetContent",t)):("raw"!==t.format&&(e=new d({validate:o.validate},o.schema).serialize(o.parser.parse(e,{isRootContent:!0,insert:!0}))),t.content=x(e),o.dom.setHTML(i,t.content),t.no_events||o.fire("SetContent",t)),t.content},getContent:function(e){var t,n=this.getBody();if(this.removed)return"";if((e=e||{}).format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||this.fire("BeforeGetContent",e),"raw"===e.format)t=p.trim(u.trimExternal(this.serializer,n.innerHTML));else if("text"===e.format)t=n.innerText||n.textContent;else{if("tree"===e.format)return this.serializer.serialize(n,e);t=this.serializer.serialize(n,e)}return e.content="text"!==e.format?x(t):t,e.no_events||this.fire("GetContent",e),e.content},insertContent:function(e,t){t&&(e=y({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!=t&&this.fire("dirty")},setMode:function(e){i.setMode(this,e)},getContainer:function(){return this.container||(this.container=v.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=v.get(this.id)),this.targetElm},getWin:function(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow},getDoc:function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this.settings;return r.urlconverter_callback?this.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:r.relative_urls?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,r.remove_script_host)},addVisual:function(e){var t,n=this,r=n.settings,o=n.dom;e=e||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=r.visual),b(o.select("table,a",e),function(e){var i;switch(e.nodeName){case"TABLE":return t=r.visual_table_class||"mce-item-table",void((i=o.getAttrib(e,"border"))&&"0"!=i||!n.hasVisual?o.removeClass(e,t):o.addClass(e,t));case"A":return void(o.getAttrib(e,"href",!1)||(i=o.getAttrib(e,"name")||e.id,t=r.visual_anchor_class||"mce-item-anchor",i&&n.hasVisual?o.addClass(e,t):o.removeClass(e,t)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){var e=this;e.removed||(e.save(),e.removed=1,e.unbindAllNativeEvents(),e.hasHiddenInput&&v.remove(e.getElement().nextSibling),e.inline||(w&&w<10&&e.getDoc().execCommand("SelectAll",!1,null),v.setStyle(e.id,"display",e.orgDisplay),e.getBody().onload=null),e.fire("remove"),e.editorManager.remove(e),v.remove(e.getContainer()),e._selectionOverrides.destroy(),e.editorUpload.destroy(),e.destroy())},destroy:function(e){var t,n=this;n.destroyed||(e||n.removed?(e||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),n.selection.destroy(),n.dom.destroy()),(t=n.formElement)&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),v.unbind(t,"submit reset",n.formEventDelegate)),n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),n.destroyed=1):n.remove())},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},n),k}),n("tinymce.core.api.FocusManager",["global!document"],function(e){return{isEditorUIElement:function(e){return-1!==e.className.toString().indexOf("mce-")}}}),n("tinymce.core.selection.SelectionRestore",["ephox.katamari.api.Throttler","ephox.sand.api.PlatformDetection","global!document","tinymce.core.dom.DOMUtils","tinymce.core.selection.SelectionBookmark"],function(e,t,n,r,o){return{register:function(i){var a,s,c,u=e.first(function(){o.store(i)},0);i.inline&&(a=i,s=u,r.DOM.bind(n,"mouseup",c=function(){s.throttle()}),a.on("remove",function(){r.DOM.unbind(n,"mouseup",c)})),i.on("init",function(){var e,n,r,a,s;e=i,n=u,(s=t.detect().browser).isIE()||s.isEdge()?(a=e).on("focusout",function(){o.store(a)}):(r=n,e.on("mouseup touchend",function(e){r.throttle()})),e.on("keyup nodechange",function(t){var n;"nodechange"===(n=t).type&&n.selectionChange||o.store(e)})}),i.on("remove",function(){u.cancel()})}}}),n("tinymce.core.focus.FocusController",["ephox.katamari.api.Fun","global!document","tinymce.core.api.FocusManager","tinymce.core.dom.DOMUtils","tinymce.core.selection.SelectionRestore","tinymce.core.util.Delay"],function(e,t,n,r,o,i){var a,s=r.DOM,c=function(e){return n.isEditorUIElement(e)},u=function(e,t){var n=e?e.settings.custom_ui_selector:"";return null!==s.getParent(t,function(t){return c(t)||!!n&&e.dom.is(t,n)})},l=function(e,n){var r=n.editor;o.register(r),r.on("focusin",function(){var t=e.focusedEditor;t!=r&&(t&&t.fire("blur",{focusedEditor:r}),e.setActive(r),e.focusedEditor=r,r.fire("focus",{blurredEditor:t}),r.focus(!0))}),r.on("focusout",function(){i.setEditorTimeout(r,function(){var n=e.focusedEditor;u(r,function(){try{return t.activeElement}catch(e){return t.body}}())||n!=r||(r.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})}),a||s.bind(t,"focusin",a=function(n){var r,o=e.activeEditor;r=n.target,o&&r.ownerDocument===t&&(r===t.body||u(o,r)||e.focusedEditor!==o||(o.fire("blur",{focusedEditor:null}),e.focusedEditor=null))})},d=function(e,n){e.focusedEditor==n.editor&&(e.focusedEditor=null),e.activeEditor||(s.unbind(t,"focusin",a),a=null)};return{setup:function(t){t.on("AddEditor",e.curry(l,t)),t.on("RemoveEditor",e.curry(d,t))},isEditorUIElement:c,isUIElement:u}}),n("tinymce.core.util.I18n",["tinymce.core.util.Tools"],function(e){"use strict";var t={},n="en";return{setCode:function(e){e&&(n=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return n},rtl:!1,add:function(e,n){var r=t[e];r||(t[e]=r={});for(var o in n)r[o]=n[o];this.setCode(e)},translate:function(r){var o=t[n]||{},i=function(t){return e.is(t,"function")?Object.prototype.toString.call(t):a(t)?"":""+t},a=function(t){return""===t||null===t||e.is(t,"undefined")},s=function(t){return t=i(t),e.hasOwn(o,t)?i(o[t]):t};if(a(r))return"";if(e.is(r,"object")&&e.hasOwn(r,"raw"))return i(r.raw);if(e.is(r,"array")){var c=r.slice(1);r=s(r[0]).replace(/\{([0-9]+)\}/g,function(t,n){return e.hasOwn(c,n)?i(c[n]):t})}return s(r).replace(/{context:\w+}$/,"")},data:t}}),n("tinymce.core.EditorManager",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!document","global!window","tinymce.core.AddOnManager","tinymce.core.Editor","tinymce.core.Env","tinymce.core.ErrorReporter","tinymce.core.dom.DOMUtils","tinymce.core.dom.DomQuery","tinymce.core.focus.FocusController","tinymce.core.util.I18n","tinymce.core.util.Observable","tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.core.util.URI"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p,h){var g,v,y=c.DOM,b=p.explode,x=p.each,C=p.extend,w=0,k=!1,S=[],T=[],E=function(e){x(v.get(),function(t){t.fire("scroll"===e.type?"ScrollWindow":"ResizeWindow",e)})},R=function(e){e!==k&&(e?u(r).on("resize scroll",E):u(r).off("resize scroll",E),k=e)},N=function(t){var n=T;delete S[t.id];for(var r=0;r<S.length;r++)if(S[r]===t){S.splice(r,1);break}return T=e.filter(T,function(e){return t!==e}),v.activeEditor===t&&(v.activeEditor=T.length>0?T[0]:null),v.focusedEditor===t&&(v.focusedEditor=null),n.length!==T.length};return C(v={defaultSettings:{},$:u,majorVersion:"4",minorVersion:"7.4",releaseDate:"2017-12-05",editors:S,i18n:d,activeEditor:null,settings:{},setup:function(){var e,t,o,i,a="";if(t=h.getDocumentBaseUrl(n.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),o=r.tinymce||r.tinyMCEPreInit)e=o.base||o.baseURL,a=o.suffix;else{for(var s=n.getElementsByTagName("script"),c=0;c<s.length;c++){var u=(i=s[c].src).substring(i.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(i)){-1!=u.indexOf(".min")&&(a=".min"),e=i.substring(0,i.lastIndexOf("/"));break}}!e&&n.currentScript&&(-1!=(i=n.currentScript.src).indexOf(".min")&&(a=".min"),e=i.substring(0,i.lastIndexOf("/")))}this.baseURL=new h(t).toAbsolute(e),this.documentBaseURL=t,this.baseURI=new h(this.baseURL),this.suffix=a,l.setup(this)},overrideDefaults:function(e){var t;(t=e.base_url)&&(this.baseURL=new h(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new h(this.baseURL)),e.suffix&&(this.suffix=e.suffix),this.defaultSettings=e;var n=e.plugin_base_urls;for(var r in n)o.PluginManager.urls[r]=n[r]},init:function(e){var t,o,c=this;o=p.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var l=function(e){var t=e.id;return t||(t=(t=e.name)&&!y.get(t)?e.name:y.uniqueId(),e.setAttribute("id",t)),t},d=function(e,t){return t.constructor===RegExp?t.test(e.className):y.hasClass(e,t)},f=function(e){t=e},h=function(){var t,m=0,g=[],v=function(e,n,r){var o=new i(e,n,c);g.push(o),o.on("init",function(){++m===t.length&&f(g)}),o.targetElm=o.targetElm||r,o.render()};y.unbind(r,"ready",h),function(t){var n=e[t];n&&n.apply(c,Array.prototype.slice.call(arguments,2))}("onpageload"),t=u.unique(function(e){var t,r=[];if(a.ie&&a.ie<11)return s.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(e.types)return x(e.types,function(e){r=r.concat(y.select(e.selector))}),r;if(e.selector)return y.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":(t=e.elements||"").length>0&&x(b(t),function(e){var t;(t=y.get(e))?r.push(t):x(n.forms,function(t){x(t.elements,function(t){t.name===e&&(e="mce_editor_"+w++,y.setAttrib(t,"id",e),r.push(t))})})});break;case"textareas":case"specific_textareas":x(y.select("textarea"),function(t){e.editor_deselector&&d(t,e.editor_deselector)||e.editor_selector&&!d(t,e.editor_selector)||r.push(t)})}return r}(e)),e.types?x(e.types,function(n){p.each(t,function(t){return!y.is(t,n.selector)||(v(l(t),C({},e,n),t),!1)})}):(p.each(t,function(e){var t;(t=c.get(e.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(N(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null)}),0===(t=p.grep(t,function(e){return!c.get(e.id)})).length?f([]):x(t,function(t){e.inline&&t.tagName.toLowerCase()in o?s.initError("Could not initialize inline editor on invalid inline target element",t):v(l(t),e,t)}))};return c.settings=e,y.bind(r,"ready",h),new m(function(e){t?e(t):f=function(t){e(t)}})},get:function(n){return 0===arguments.length?T.slice(0):t.isString(n)?e.find(T,function(e){return e.id===n}).getOr(null):t.isNumber(n)&&T[n]?T[n]:null},add:function(e){var t=this;return S[e.id]===e?e:(null===t.get(e.id)&&("length"!==e.id&&(S[e.id]=e),S.push(e),T.push(e)),R(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),g||y.bind(r,"beforeunload",g=function(){t.fire("BeforeUnload")}),e)},createEditor:function(e,t){return this.add(new i(e,t,this))},remove:function(e){var n,o,i=this;if(e){if(!t.isString(e))return t.isNull(i.get((o=e).id))?null:(N(o)&&i.fire("RemoveEditor",{editor:o}),0===T.length&&y.unbind(r,"beforeunload",g),o.remove(),R(T.length>0),o);x(y.select(e=e.selector||e),function(e){(o=i.get(e.id))&&i.remove(o)})}else for(n=T.length-1;n>=0;n--)i.remove(T[n])},execCommand:function(e,t,n){var r=this.get(n);switch(e){case"mceAddEditor":return this.get(n)||new i(n,this.settings,this).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?(r.isHidden()?r.show():r.hide(),!0):(this.execCommand("mceAddEditor",0,n),!0)}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,n)},triggerSave:function(){x(T,function(e){e.save()})},addI18n:function(e,t){d.add(e,t)},translate:function(e){return d.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!=e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},f),v.setup(),v}),n("tinymce.core.api.dom.RangeUtils",["ephox.katamari.api.Fun","tinymce.core.selection.CaretRangeFromPoint","tinymce.core.selection.NormalizeRange","tinymce.core.selection.RangeCompare","tinymce.core.selection.RangeNodes","tinymce.core.selection.RangeWalk","tinymce.core.selection.SplitRange"],function(e,t,n,r,o,i,a){var s=function(t){return{walk:function(e,n){return i.walk(t,e,n)},split:a.split,normalize:function(r){return n.normalize(t,r).fold(e.constant(!1),function(e){return r.setStart(e.startContainer,e.startOffset),r.setEnd(e.endContainer,e.endOffset),!0})}}};return s.compareRanges=r.isEq,s.getCaretRangeFromPoint=t.fromPoint,s.getSelectedNode=o.getSelectedNode,s.getNode=o.getNode,s}),n("tinymce.core.geom.Rect",[],function(){"use strict";var e=Math.min,t=Math.max,n=Math.round,r=function(e,t,r){var i,a,s,c,u,l;return i=t.x,a=t.y,s=e.w,c=e.h,u=t.w,l=t.h,"b"===(r=(r||"").split(""))[0]&&(a+=l),"r"===r[1]&&(i+=u),"c"===r[0]&&(a+=n(l/2)),"c"===r[1]&&(i+=n(u/2)),"b"===r[3]&&(a-=c),"r"===r[4]&&(i-=s),"c"===r[3]&&(a-=n(c/2)),"c"===r[4]&&(i-=n(s/2)),o(i,a,s,c)},o=function(e,t,n,r){return{x:e,y:t,w:n,h:r}};return{inflate:function(e,t,n){return o(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:r,findBestRelativePosition:function(e,t,n,o){var i,a;for(a=0;a<o.length;a++)if((i=r(e,t,o[a])).x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return o[a];return null},intersect:function(n,r){var i,a,s,c;return i=t(n.x,r.x),a=t(n.y,r.y),s=e(n.x+n.w,r.x+r.w),c=e(n.y+n.h,r.y+r.h),s-i<0||c-a<0?null:o(i,a,s-i,c-a)},clamp:function(e,n,r){var i,a,s,c,u,l,d,f,m,p;return l=e.y,d=e.x+e.w,f=e.y+e.h,m=n.x+n.w,p=n.y+n.h,i=t(0,n.x-(u=e.x)),a=t(0,n.y-l),s=t(0,d-m),c=t(0,f-p),u+=i,l+=a,r&&(d+=i,f+=a,u-=s,l-=c),o(u,l,(d-=s)-u,(f-=c)-l)},create:o,fromClientRect:function(e){return o(e.left,e.top,e.width,e.height)}}}),n("tinymce.core.ui.Factory",[],function(){"use strict";var e={};return{add:function(t,n){e[t.toLowerCase()]=n},has:function(t){return!!e[t.toLowerCase()]},get:function(t){var n=t.toLowerCase(),r=e.hasOwnProperty(n)?e[n]:null;if(null===r)throw new Error("Could not find module for type: "+t);return r},create:function(t,n){var r;if("string"==typeof t?(n=n||{}).type=t:t=(n=t).type,t=t.toLowerCase(),!(r=e[t]))throw new Error("Could not find control by type: "+t);return(r=new r(n)).type=t,r}}}),n("tinymce.core.util.Class",["tinymce.core.util.Tools"],function(e){var t,n,r=e.each,o=e.extend,i=function(){};return i.extend=t=function(e){var i,a,s,c=this.prototype,u=function(){var e,t,r;if(!n&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(e=t.length;e--;)(r=t[e]).init&&r.init.apply(this,arguments)},l=function(){return this},d=function(e,t){return function(){var n,r=this._super;return this._super=c[e],n=t.apply(this,arguments),this._super=r,n}};n=!0,i=new this,n=!1,e.Mixins&&(r(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),c.Mixins&&(e.Mixins=c.Mixins.concat(e.Mixins))),e.Methods&&r(e.Methods.split(","),function(t){e[t]=l}),e.Properties&&r(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){return void 0!==e?(this[n]=e,this):this[n]}}),e.Statics&&r(e.Statics,function(e,t){u[t]=e}),e.Defaults&&c.Defaults&&(e.Defaults=o({},c.Defaults,e.Defaults));for(a in e)i[a]="function"==typeof(s=e[a])&&c[a]?d(a,s):s;return u.prototype=i,u.constructor=u,u.extend=t,u},i}),n("tinymce.core.util.Color",[],function(){var e=Math.min,t=Math.max,n=Math.round;return function(r){var o=this,i=0,a=0,s=0,c=function(r){var c;return"object"==typeof r?"r"in r?(i=r.r,a=r.g,s=r.b):"v"in r&&function(r,o,c){var u,l,d,f;if(r=(parseInt(r,10)||0)%360,o=parseInt(o,10)/100,c=parseInt(c,10)/100,o=t(0,e(o,1)),c=t(0,e(c,1)),0!==o){switch(u=r/60,d=(l=c*o)*(1-Math.abs(u%2-1)),f=c-l,Math.floor(u)){case 0:i=l,a=d,s=0;break;case 1:i=d,a=l,s=0;break;case 2:i=0,a=l,s=d;break;case 3:i=0,a=d,s=l;break;case 4:i=d,a=0,s=l;break;case 5:i=l,a=0,s=d;break;default:i=a=s=0}i=n(255*(i+f)),a=n(255*(a+f)),s=n(255*(s+f))}else i=a=s=n(255*c)}(r.h,r.s,r.v):(c=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(r))?(i=parseInt(c[1],10),a=parseInt(c[2],10),s=parseInt(c[3],10)):(c=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(r))?(i=parseInt(c[1],16),a=parseInt(c[2],16),s=parseInt(c[3],16)):(c=/#([0-F])([0-F])([0-F])/gi.exec(r))&&(i=parseInt(c[1]+c[1],16),a=parseInt(c[2]+c[2],16),s=parseInt(c[3]+c[3],16)),i=i<0?0:i>255?255:i,a=a<0?0:a>255?255:a,s=s<0?0:s>255?255:s,o};r&&c(r),o.toRgb=function(){return{r:i,g:a,b:s}},o.toHsv=function(){return r=i,o=a,c=s,l=0,(d=e(r/=255,e(o/=255,c/=255)))==(f=t(r,t(o,c)))?{h:0,s:0,v:100*(l=d)}:(u=(f-d)/f,l=f,{h:n(60*((r==d?3:c==d?1:5)-(r==d?o-c:c==d?r-o:c-r)/(f-d))),s:n(100*u),v:n(100*l)});var r,o,c,u,l,d,f},o.toHex=function(){var e=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+e(i)+e(a)+e(s)},o.parse=c}}),n("tinymce.core.util.JSON",["global!window"],function(e){var t=function(e,n){var r,o,i,a;if(n=n||'"',null===e)return"null";if("string"==(i=typeof e))return o="\bb\tt\nn\ff\rr\"\"''\\\\",n+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(r=o.indexOf(t))+1?"\\"+o.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+n;if("object"==i){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(r=0,o="[";r<e.length;r++)o+=(r>0?",":"")+t(e[r],n);return o+"]"}o="{";for(a in e)e.hasOwnProperty(a)&&(o+="function"!=typeof e[a]?(o.length>1?","+n:n)+a+n+":"+t(e[a],n):"");return o+"}"}return""+e};return{serialize:t,parse:function(t){try{return e[String.fromCharCode(101)+"val"]("("+t+")")}catch(e){}}}}),n("tinymce.core.util.JSONP",["tinymce.core.dom.DOMUtils"],function(e){return{callbacks:{},count:0,send:function(t){var n=this,r=e.DOM,o=void 0!==t.count?t.count:n.count,i="tinymce_jsonp_"+o;n.callbacks[o]=function(e){r.remove(i),delete n.callbacks[o],t.callback(e)},r.add(r.doc.body,"script",{id:i,src:t.url,type:"text/javascript"}),n.count++}}}),n("tinymce.core.util.XHR",["ephox.sand.api.XMLHttpRequest","global!setTimeout","tinymce.core.util.Observable","tinymce.core.util.Tools"],function(e,t,n,r){var o={send:function(n){var i,a=0,s=function(){!n.async||4==i.readyState||a++>1e4?(n.success&&a<1e4&&200==i.status?n.success.call(n.success_scope,""+i.responseText,i,n):n.error&&n.error.call(n.error_scope,a>1e4?"TIMED_OUT":"GENERAL",i,n),i=null):t(s,10)};if(n.scope=n.scope||this,n.success_scope=n.success_scope||n.scope,n.error_scope=n.error_scope||n.scope,n.async=!1!==n.async,n.data=n.data||"",o.fire("beforeInitialize",{settings:n}),i=new e){if(i.overrideMimeType&&i.overrideMimeType(n.content_type),i.open(n.type||(n.data?"POST":"GET"),n.url,n.async),n.crossDomain&&(i.withCredentials=!0),n.content_type&&i.setRequestHeader("Content-Type",n.content_type),n.requestheaders&&r.each(n.requestheaders,function(e){i.setRequestHeader(e.key,e.value)}),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),(i=o.fire("beforeSend",{xhr:i,settings:n}).xhr).send(n.data),!n.async)return s();t(s,10)}}};return r.extend(o,n),o}),n("tinymce.core.util.JSONRequest",["tinymce.core.util.JSON","tinymce.core.util.XHR","tinymce.core.util.Tools"],function(e,t,n){var r=n.extend,o=function(e){this.settings=r({},e),this.count=0};return o.sendRPC=function(e){return(new o).send(e)},o.prototype={send:function(n){var o=n.error,i=n.success;(n=r(this.settings,n)).success=function(t,r){"undefined"==typeof(t=e.parse(t))&&(t={error:"JSON Parse error."}),t.error?o.call(n.error_scope||n.scope,t.error,r):i.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){o&&o.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},o}),n("tinymce.core.util.LocalStorage",["global!document","global!window"],function(e,t){var n,r,o,i,a,s;try{if(t.localStorage)return t.localStorage}catch(e){}a="tinymce",(s=!!(r=e.documentElement).addBehavior)&&r.addBehavior("#default#userData");var c=function(){i=[];for(var e in o)i.push(e);n.length=i.length},u=function(){var e,t="";if(s){for(var n in o)e=o[n],t+=(t?",":"")+n.length.toString(32)+","+n+","+e.length.toString(32)+","+e;r.setAttribute(a,t);try{r.save(a)}catch(e){}c()}};return n={key:function(e){return i[e]},getItem:function(e){return e in o?o[e]:null},setItem:function(e,t){o[e]=""+t,u()},removeItem:function(e){delete o[e],u()},clear:function(){o={},u()}},function(){var e,t,n,i=0;if(o={},s){var u=function(e){var n,r;return-1===(r=void 0!==e?i+e:t.indexOf(",",i))||r>t.length?null:(n=t.substring(i,r),i=r+1,n)};r.load(a),t=r.getAttribute(a)||"";do{var l=u();if(null===l)break;if(null!==(e=u(parseInt(l,32)||0))){if(null===(l=u()))break;n=u(parseInt(l,32)||0),e&&(o[e]=n)}}while(null!==e);c()}}(),n}),n("tinymce.core.api.Tinymce",["tinymce.core.AddOnManager","tinymce.core.Editor","tinymce.core.EditorCommands","tinymce.core.EditorManager","tinymce.core.EditorObservable","tinymce.core.Env","tinymce.core.Shortcuts","tinymce.core.UndoManager","tinymce.core.api.FocusManager","tinymce.core.api.Formatter","tinymce.core.api.NotificationManager","tinymce.core.api.WindowManager","tinymce.core.api.dom.BookmarkManager","tinymce.core.api.dom.RangeUtils","tinymce.core.api.dom.Serializer","tinymce.core.dom.ControlSelection","tinymce.core.dom.DOMUtils","tinymce.core.dom.DomQuery","tinymce.core.dom.EventUtils","tinymce.core.dom.ScriptLoader","tinymce.core.dom.Selection","tinymce.core.dom.Sizzle","tinymce.core.dom.TreeWalker","tinymce.core.geom.Rect","tinymce.core.html.DomParser","tinymce.core.html.Entities","tinymce.core.html.Node","tinymce.core.html.SaxParser","tinymce.core.html.Schema","tinymce.core.html.Serializer","tinymce.core.html.Styles","tinymce.core.html.Writer","tinymce.core.ui.Factory","tinymce.core.util.Class","tinymce.core.util.Color","tinymce.core.util.Delay","tinymce.core.util.EventDispatcher","tinymce.core.util.I18n","tinymce.core.util.JSON","tinymce.core.util.JSONP","tinymce.core.util.JSONRequest","tinymce.core.util.LocalStorage","tinymce.core.util.Observable","tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.core.util.URI","tinymce.core.util.VK","tinymce.core.util.XHR"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p,h,g,v,y,b,x,C,w,k,S,T,E,R,N,A,D,P,B,_,O,F,M,I,L,H,W,U,z,q,V,j,$,K){return V.extend(r,{geom:{Rect:k},util:{Promise:q,Delay:F,Tools:V,VK:$,URI:j,Class:_,EventDispatcher:M,Observable:z,I18n:I,XHR:K,JSON:L,JSONRequest:W,JSONP:H,LocalStorage:U,Color:O},dom:{EventUtils:y,Sizzle:C,DomQuery:v,TreeWalker:w,DOMUtils:g,ScriptLoader:b,RangeUtils:m,Serializer:p,ControlSelection:h,BookmarkManager:f,Selection:x,Event:y.Event},html:{Styles:D,Entities:T,Node:E,Schema:N,SaxParser:R,DomParser:S,Writer:P,Serializer:A},ui:{Factory:B},Env:i,AddOnManager:e,Formatter:u,UndoManager:s,EditorCommands:n,WindowManager:d,NotificationManager:l,EditorObservable:o,Shortcuts:a,Editor:t,FocusManager:c,EditorManager:r,DOM:g.DOM,ScriptLoader:b.ScriptLoader,PluginManager:e.PluginManager,ThemeManager:e.ThemeManager,trim:V.trim,isArray:V.isArray,is:V.is,toArray:V.toArray,makeMap:V.makeMap,each:V.each,map:V.map,grep:V.grep,inArray:V.inArray,extend:V.extend,create:V.create,walk:V.walk,createNS:V.createNS,resolve:V.resolve,explode:V.explode,_addCacheSuffix:V._addCacheSuffix,isOpera:i.opera,isWebKit:i.webkit,isIE:i.ie,isGecko:i.gecko,isMac:i.mac})}),n("tinymce.core.api.Main",["ephox.katamari.api.Fun","global!window","tinymce.core.api.Tinymce"],function(e,t,n){var r=this||t;return function(){var o,i;return t.tinymce=o=n,t.tinyMCE=o,i=n,"function"!=typeof r.define||r.define.amd||(r.define("ephox/tinymce",[],e.constant(i)),r.define("tinymce.core.EditorManager",[],e.constant(i))),"object"==typeof module&&(module.exports=i),n}}),t("tinymce.core.api.Main")()}(),function(){var e={},t=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&function(n){for(var r=e[n],o=r.deps,i=r.defn,a=o.length,s=new Array(a),c=0;c<a;++c)s[c]=t(o[c]);var u=i.apply(null,s);if(void 0===u)throw"module ["+n+"] returned undefined";r.instance=u}(n),r.instance},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(e,t){n(e,[],function(){return t})};r("global!window",window),r("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),n("tinymce.core.ThemeManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ThemeManager")}),n("tinymce.core.EditorManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.EditorManager")}),n("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),n("tinymce.themes.modern.api.Settings",["tinymce.core.EditorManager","tinymce.core.util.Tools"],function(e,t){var n=function(e){return e.getParam("menubar")};return{isBrandingEnabled:function(e){return e.getParam("branding",!0)},hasMenubar:function(e){return!1!==n(e)},getMenubar:n,hasStatusbar:function(e){return e.getParam("statusbar",!0)},getToolbarSize:function(e){return e.getParam("toolbar_items_size")},getResize:function(e){var t=e.getParam("resize","vertical");return!1===t?"none":"both"===t?"both":"vertical"},isReadOnly:function(e){return e.getParam("readonly",!1)},getFixedToolbarContainer:function(e){return e.getParam("fixed_toolbar_container")},getInlineToolbarPositionHandler:function(e){return e.getParam("inline_toolbar_position_handler")},getMenu:function(e){return e.getParam("menu")},getRemovedMenuItems:function(e){return e.getParam("removed_menuitems","")},getMinWidth:function(e){return e.getParam("min_width",100)},getMinHeight:function(e){return e.getParam("min_height",100)},getMaxWidth:function(e){return e.getParam("max_width",65535)},getMaxHeight:function(e){return e.getParam("max_height",65535)},getSkinUrl:function(t){var n=t.settings,r=n.skin,o=n.skin_url;if(!1!==r){var i=r||"lightgray";o=o?t.documentBaseURI.toAbsolute(o):e.baseURL+"/skins/"+i}return o},isSkinDisabled:function(e){return!1===e.settings.skin},isInline:function(e){return e.getParam("inline",!1)},getToolbars:function(e){var n=e.getParam("toolbar");return!1===n?[]:t.isArray(n)?t.grep(n,function(e){return e.length>0}):function(e,t){for(var n=[],r=1;r<10;r++){var o=e["toolbar"+r];if(!o)break;n.push(o)}return n.length>0?n:e.toolbar?[e.toolbar]:["undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"]}(e.settings)}}}),n("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),n("tinymce.core.ui.Factory",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Factory")}),n("tinymce.core.util.I18n",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.I18n")}),n("tinymce.themes.modern.api.Events",[],function(){return{fireSkinLoaded:function(e){return e.fire("SkinLoaded")},fireResizeEditor:function(e){return e.fire("ResizeEditor")},fireBeforeRenderUI:function(e){return e.fire("BeforeRenderUI")}}}),n("tinymce.themes.modern.ui.A11y",[],function(){var e=function(e,t){return function(){var n=e.find(t)[0];n&&n.focus(!0)}};return{addKeys:function(t,n){t.shortcuts.add("Alt+F9","",e(n,"menubar")),t.shortcuts.add("Alt+F10,F10","",e(n,"toolbar")),t.shortcuts.add("Alt+F11","",e(n,"elementpath")),n.on("cancel",function(){t.focus()})}}}),n("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),n("tinymce.core.geom.Rect",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.geom.Rect")}),n("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),r("global!Array",Array),r("global!Error",Error),n("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(e){return function(){return e}};return{noop:function(){},noarg:function(e){return function(){return e()}},compose:function(e,t){return function(){return e(t.apply(null,arguments))}},constant:n,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:n(!1),always:n(!0)}}),r("global!Object",Object),n("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n,r,o,i,a=e.never,s=e.always,c=function(){return u},u=(i={fold:function(e,t){return e()},is:a,isSome:a,isNone:s,getOr:o=function(e){return e},getOrThunk:r=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:o,orThunk:r,map:c,ap:c,each:function(){},bind:c,flatten:c,exists:a,forall:s,filter:c,equals:n=function(e){return e.isNone()},equals_:n,toArray:function(){return[]},toString:e.constant("none()")},t.freeze&&t.freeze(i),i),l=function(e){var t=function(){return e},n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:s,isNone:a,getOr:t,getOrThunk:t,getOrDie:t,or:n,orThunk:n,map:function(t){return l(t(e))},ap:function(t){return t.fold(c,function(t){return l(t(e))})},each:function(t){t(e)},bind:r,flatten:t,exists:r,forall:r,filter:function(t){return t(e)?o:u},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(a,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o};return{some:l,none:c,from:function(e){return null===e||void 0===e?u:l(e)}}}),n("tinymce.themes.modern.alien.UiContainer",["ephox.katamari.api.Option","tinymce.core.Env","tinymce.core.dom.DOMUtils"],function(e,t,n){return{getUiContainerDelta:function(){var r=t.container;if(r&&"static"!==n.DOM.getStyle(r,"position",!0)){var o=n.DOM.getPos(r);return e.some({x:r.scrollLeft-o.x,y:r.scrollTop-o.y})}return e.none()}}}),n("tinymce.themes.modern.ui.Toolbar",["tinymce.core.ui.Factory","tinymce.core.util.Tools","tinymce.themes.modern.api.Settings"],function(e,t,n){var r=function(n,r,o){var i,a=[];if(r)return t.each(r.split(/[ ,]/),function(t){var r=function(){var e=n.selection;t.settings.stateSelector&&e.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&e.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})};"|"===t?i=null:(i||a.push(i={type:"buttongroup",items:[]}),n.buttons[t]&&("function"==typeof(t=n.buttons[t])&&(t=t()),t.type=t.type||"button",t.size=o,t=e.create(t),i.items.push(t),n.initialized?r():n.on("init",r)))}),{type:"toolbar",layout:"flow",items:a}};return{createToolbar:r,createToolbars:function(e,o){var i=[];if(t.each(n.getToolbars(e),function(t){var n;(n=t)&&i.push(r(e,n,o))}),i.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:i}}}}),n("tinymce.themes.modern.ui.ContextToolbars",["tinymce.core.Env","tinymce.core.dom.DOMUtils","tinymce.core.geom.Rect","tinymce.core.ui.Factory","tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.themes.modern.alien.UiContainer","tinymce.themes.modern.api.Settings","tinymce.themes.modern.ui.Toolbar"],function(e,t,n,r,o,i,a,s,c){var u=t.DOM,l=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},d=function(e,t){e.moveTo(t.left,t.top)},f=function(e,t,n,r,o,i){return i=l({x:t,y:n,w:i.w,h:i.h}),e&&(i=e({elementRect:l(r),contentAreaRect:l(o),panelRect:i})),i};return{addContextualToolbars:function(t){var l,m=function(){return t.contextToolbars||[]},p=function(e,r){var o,c,l,m,p,h,g,v=s.getInlineToolbarPositionHandler(t);if(!t.removed)if(e&&e.toolbar.panel){var y,b,x,C;g=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],p=e.toolbar.panel,r&&p.show(),y=e.element,b=u.getPos(t.getContentAreaContainer()),x=t.dom.getRect(y),"BODY"===(C=t.dom.getRoot()).nodeName&&(x.x-=C.ownerDocument.documentElement.scrollLeft||C.scrollLeft,x.y-=C.ownerDocument.documentElement.scrollTop||C.scrollTop),x.x+=b.x,x.y+=b.y,l=x,c=u.getRect(p.getEl()),m=u.getRect(t.getContentAreaContainer()||t.getBody());var w,k,S,T=a.getUiContainerDelta().getOr({x:0,y:0});if(l.x+=T.x,l.y+=T.y,c.x+=T.x,c.y+=T.y,m.x+=T.x,m.y+=T.y,"inline"!==u.getStyle(e.element,"display",!0)){var E=e.element.getBoundingClientRect();l.w=E.width,l.h=E.height}t.inline||(m.w=t.getDoc().documentElement.offsetWidth),t.selection.controlSelection.isResizable(e.element)&&l.w<25&&(l=n.inflate(l,0,8)),o=n.findBestRelativePosition(c,l,m,g),l=n.clamp(l,m),o?(h=n.relativePosition(c,l,o),d(p,f(v,h.x,h.y,l,m,c))):(m.h+=c.h,(l=n.intersect(m,l))?(o=n.findBestRelativePosition(c,l,m,["bc-tc","bl-tl","br-tr"]))?(h=n.relativePosition(c,l,o),d(p,f(v,h.x,h.y,l,m,c))):d(p,f(v,l.x,l.y,l,m,c)):p.hide()),w=p,S=function(e,t){return e===t},k=(k=o)?k.substr(0,2):"",i.each({t:"down",b:"up"},function(e,t){w.classes.toggle("arrow-"+e,S(t,k.substr(0,1)))}),i.each({l:"left",r:"right"},function(e,t){w.classes.toggle("arrow-"+e,S(t,k.substr(1,1)))})}else i.each(t.contextToolbars,function(e){e.panel&&e.panel.hide()})},h=function(e){return function(){o.requestAnimationFrame(function(){t.selection&&p(v(t.selection.getNode()),e)})}},g=function(){i.each(m(),function(e){e.panel&&e.panel.hide()})},v=function(e){var n,r,o,i=m();for(n=(o=t.$(e).parents().add(e)).length-1;n>=0;n--)for(r=i.length-1;r>=0;r--)if(i[r].predicate(o[n]))return{toolbar:i[r],element:o[n]};return null};t.on("click keyup setContent ObjectResized",function(n){("setcontent"!==n.type||n.selection)&&o.setEditorTimeout(t,function(){var n;(n=v(t.selection.getNode()))?(g(),function(n){var o;if(n.toolbar.panel)return n.toolbar.panel.show(),void p(n);!function(){if(!l){var n=h(!0);l=t.selection.getScrollContainer()||t.getWin(),u.bind(l,"scroll",n),u.bind(e.container,"scroll",n),t.on("remove",function(){u.unbind(l,"scroll",n),u.unbind(e.container,"scroll",n)})}}(),o=r.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:c.createToolbar(t,n.toolbar.items),oncancel:function(){t.focus()}}),n.toolbar.panel=o,o.renderTo().reflow(),p(n)}(n)):g()})}),t.on("blur hide contextmenu",g),t.on("ObjectResizeStart",function(){var e=v(t.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.hide()}),t.on("ResizeEditor ResizeWindow",h(!0)),t.on("nodeChange",h(!1)),t.on("remove",function(){i.each(m(),function(e){e.panel&&e.panel.remove()}),t.contextToolbars={}}),t.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var e=v(t.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.items()[0].focus()})}}}),r("global!String",String),n("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,r){var o,i=void 0===(o=t.prototype.indexOf)?function(e,t){return f(e,t)}:function(e,t){return o.call(e,t)},a=function(e,t){return i(e,t)>-1},s=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++)o[i]=n(e[i],i,e);return o},c=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},u=function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n],n,e)},l=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},d=function(t,n){for(var r=0,o=t.length;r<o;r++)if(n(t[r],r,t))return e.some(r);return e.none()},f=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},m=t.prototype.push,p=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);m.apply(r,e[o])}return r},h=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0},g=t.prototype.slice;return{map:s,each:c,eachr:u,partition:function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},filter:l,groupBy:function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var s=e[i],c=t(s);c!==n&&(r.push(o),o=[]),n=c,o.push(s)}return 0!==o.length&&r.push(o),r},indexOf:function(t,n){var r=i(t,n);return-1===r?e.none():e.some(r)},foldr:function(e,t,n){return u(e,function(e){n=t(n,e)}),n},foldl:function(e,t,n){return c(e,function(e){n=t(n,e)}),n},find:function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},findIndex:d,flatten:p,bind:function(e,t){var n=s(e,t);return p(n)},forall:h,exists:function(e,t){return d(e,t).isSome()},contains:a,equal:function(e,t){return e.length===t.length&&h(e,function(e,n){return e===t[n]})},reverse:function(e){var t=g.call(e,0);return t.reverse(),t},chunk:function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},difference:function(e,t){return l(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=g.call(e,0);return n.sort(t),n},range:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},head:function(t){return 0===t.length?e.none():e.some(t[0])},last:function(t){return 0===t.length?e.none():e.some(t[t.length-1])}}}),n("tinymce.themes.modern.ui.Menubar",["ephox.katamari.api.Arr","tinymce.core.util.Tools","tinymce.themes.modern.api.Settings"],function(e,t,n){var r={file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck"},table:{title:"Table"},help:{title:"Help"}},o=function(e,t){return"|"===e?{name:"|",item:{text:"|"}}:t?{name:e,item:t}:null},i=function(e){return e&&"|"===e.item.text},a=function(n,a,s,c){var u,l,d,f,m,p,h;return a?(l=a[c],f=!0):l=r[c],l&&(u={text:l.title},d=[],t.each((l.items||"").split(/[ ,]/),function(e){var t=o(e,n[e]);t&&d.push(t)}),f||t.each(n,function(t,n){var r;t.context!==c||(r=n,e.findIndex(d,function(e){return e.name===r}).isSome())||("before"===t.separator&&d.push({name:"|",item:{text:"|"}}),t.prependToContext?d.unshift(o(n,t)):d.push(o(n,t)),"after"===t.separator&&d.push({name:"|",item:{text:"|"}}))}),u.menu=e.map((m=s,p=e.filter(d,function(e){return!1===m.hasOwnProperty(e.name)}),h=e.filter(p,function(e,t,n){return!i(e)||!i(n[t-1])}),e.filter(h,function(e,t,n){return!i(e)||t>0&&t<n.length-1})),function(e){return e.item}),!u.menu.length)?null:u};return{createMenuButtons:function(e){for(var o=[],i=function(t){var o,i=[],a=n.getMenu(e);if(a)for(o in a)i.push(o);else for(o in r)i.push(o);return i}(),s=t.makeMap(n.getRemovedMenuItems(e).split(/[ ,]/)),c=n.getMenubar(e),u="string"==typeof c?c.split(/[ ,]/):i,l=0;l<u.length;l++){var d=u[l],f=a(e.menuItems,n.getMenu(e),s,d);f&&o.push(f)}return o}}}),n("tinymce.themes.modern.ui.Resize",["tinymce.core.dom.DOMUtils","tinymce.themes.modern.api.Events","tinymce.themes.modern.api.Settings"],function(e,t,n){var r=e.DOM,o=function(e){return{width:e.clientWidth,height:e.clientHeight}},i=function(e,i,a){var s,c,u,l;s=e.getContainer(),c=e.getContentAreaContainer().firstChild,u=o(s),l=o(c),null!==i&&(i=Math.max(n.getMinWidth(e),i),i=Math.min(n.getMaxWidth(e),i),r.setStyle(s,"width",i+(u.width-l.width)),r.setStyle(c,"width",i)),a=Math.max(n.getMinHeight(e),a),a=Math.min(n.getMaxHeight(e),a),r.setStyle(c,"height",a),t.fireResizeEditor(e)};return{resizeTo:i,resizeBy:function(e,t,n){var r=e.getContentAreaContainer();i(e,r.clientWidth+t,r.clientHeight+n)}}}),n("tinymce.themes.modern.ui.Sidebar",["tinymce.core.Env","tinymce.core.ui.Factory","tinymce.core.util.Tools","tinymce.themes.modern.api.Events"],function(e,t,n,r){var o=function(e,t,n){var r,o=e.settings[n];o&&o((r=t.getEl("body"),{element:function(){return r}}))};return{hasSidebar:function(t){return!(e.ie&&!(e.ie>=11)||!t.sidebars)&&t.sidebars.length>0},createSidebar:function(e){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:n.map(e.sidebars,function(i){var a,s,c,u=i.settings;return{type:"button",icon:u.icon,image:u.image,tooltip:u.tooltip,onclick:(a=e,s=i.name,c=e.sidebars,function(e){var i,u,l,d=e.control,f=d.parents().filter("panel")[0],m=f.find("#"+s)[0],p=(i=s,n.grep(c,function(e){return e.name===i})[0]);u=s,l=f,n.each(c,function(e){var t=l.items().filter("#"+e.name)[0];t&&t.visible()&&e.name!==u&&(o(e,t,"onhide"),t.visible(!1))}),d.parent().items().each(function(e){e.active(!1)}),m&&m.visible()?(o(p,m,"onhide"),m.hide(),d.active(!1)):(m?(m.show(),o(p,m,"onshow")):(m=t.create({type:"container",name:s,layout:"stack",classes:"sidebar-panel",html:""}),f.prepend(m),o(p,m,"onrender"),o(p,m,"onshow")),d.active(!0)),r.fireResizeEditor(a)})}})}]}}}}),n("tinymce.themes.modern.ui.SkinLoaded",["tinymce.themes.modern.api.Events"],function(e){return{fireSkinLoaded:function(t){var n=function(){t._skinLoaded=!0,e.fireSkinLoaded(t)};return function(){t.initialized?n():t.on("init",n)}}}}),n("tinymce.themes.modern.modes.Iframe",["tinymce.core.dom.DOMUtils","tinymce.core.ui.Factory","tinymce.core.util.I18n","tinymce.core.util.Tools","tinymce.themes.modern.api.Events","tinymce.themes.modern.api.Settings","tinymce.themes.modern.ui.A11y","tinymce.themes.modern.ui.ContextToolbars","tinymce.themes.modern.ui.Menubar","tinymce.themes.modern.ui.Resize","tinymce.themes.modern.ui.Sidebar","tinymce.themes.modern.ui.SkinLoaded","tinymce.themes.modern.ui.Toolbar"],function(e,t,n,r,o,i,a,s,c,u,l,d,f){var m=e.DOM,p=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}};return{render:function(e,r,h){var g,v,y,b,x;if(!1===i.isSkinDisabled(e)&&h.skinUiCss?m.styleSheetLoader.load(h.skinUiCss,d.fireSkinLoaded(e)):d.fireSkinLoaded(e)(),g=r.panel=t.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===i.hasMenubar(e)?null:{type:"menubar",border:"0 0 1 0",items:c.createMenuButtons(e)},f.createToolbars(e,i.getToolbarSize(e))]},l.hasSidebar(e)?(b=e,{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[p("0"),l.createSidebar(b)]}):p("1 0 0 0")]}),"none"!==i.getResize(e)&&(v={type:"resizehandle",direction:i.getResize(e),onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;y={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===i.getResize(e)?u.resizeTo(e,y.width+t.deltaX,y.height+t.deltaY):u.resizeTo(e,null,y.height+t.deltaY)}}),i.hasStatusbar(e)){var C=n.translate(["Powered by {0}",'<a href="https://www.tinymce.com/?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce" rel="noopener" target="_blank">tinymce</a>']),w=i.isBrandingEnabled(e)?{type:"label",classes:"branding",html:" "+C}:null;g.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},v,w]})}return o.fireBeforeRenderUI(e),e.on("SwitchMode",(x=g,function(e){x.find("*").disabled("readonly"===e.mode)})),g.renderBefore(h.targetNode).reflow(),i.isReadOnly(e)&&e.setMode("readonly"),h.width&&m.setStyle(g.getEl(),"width",h.width),e.on("remove",function(){g.remove(),g=null}),a.addKeys(e,g),s.addContextualToolbars(e),{iframeContainer:g.find("#iframe")[0].getEl(),editorContainer:g.getEl()}}}}),r("global!document",document),n("tinymce.core.dom.DomQuery",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DomQuery")}),n("tinymce.ui.DomUtils",["global!document","tinymce.core.dom.DOMUtils","tinymce.core.Env","tinymce.core.util.Tools"],function(e,t,n,r){"use strict";var o=0,i={id:function(){return"mceu_"+o++},create:function(n,o,i){var a=e.createElement(n);return t.DOM.setAttribs(a,o),"string"==typeof i?a.innerHTML=i:r.each(i,function(e){e.nodeType&&a.appendChild(e)}),a},createFragment:function(e){return t.DOM.createFragment(e)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=Math.max(r.width||r.right-r.left,e.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,n){return t.DOM.getPos(e,n||i.getContainer())},getContainer:function(){return n.container?n.container:e.body},getViewPort:function(e){return t.DOM.getViewPort(e)},get:function(t){return e.getElementById(t)},addClass:function(e,n){return t.DOM.addClass(e,n)},removeClass:function(e,n){return t.DOM.removeClass(e,n)},hasClass:function(e,n){return t.DOM.hasClass(e,n)},toggleClass:function(e,n,r){return t.DOM.toggleClass(e,n,r)},css:function(e,n,r){return t.DOM.setStyle(e,n,r)},getRuntimeStyle:function(e,n){return t.DOM.getStyle(e,n,!0)},on:function(e,n,r,o){return t.DOM.bind(e,n,r,o)},off:function(e,n,r){return t.DOM.unbind(e,n,r)},fire:function(e,n,r){return t.DOM.fire(e,n,r)},innerHtml:function(e,n){t.DOM.setHTML(e,n)}};return i}),n("tinymce.ui.Movable",["global!document","global!window","tinymce.ui.DomUtils"],function(e,t,n){"use strict";function r(t,r,o){var i,a,s,c,u,l,d,f,m,p;return m=n.getViewPort(),s=(a=n.getPos(r)).x,c=a.y,t.state.get("fixed")&&"static"==n.getRuntimeStyle(e.body,"position")&&(s-=m.x,c-=m.y),i=t.getEl(),u=(p=n.getSize(i)).width,l=p.height,d=(p=n.getSize(r)).width,f=p.height,"b"===(o=(o||"").split(""))[0]&&(c+=f),"r"===o[1]&&(s+=d),"c"===o[0]&&(c+=Math.round(f/2)),"c"===o[1]&&(s+=Math.round(d/2)),"b"===o[3]&&(c-=l),"r"===o[4]&&(s-=u),"c"===o[3]&&(c-=Math.round(l/2)),"c"===o[4]&&(s-=Math.round(u/2)),{x:s,y:c,w:u,h:l}}return{testMoveRel:function(e,t){for(var o=n.getViewPort(),i=0;i<t.length;i++){var a=r(this,e,t[i]);if(this.state.get("fixed")){if(a.x>0&&a.x+a.w<o.w&&a.y>0&&a.y+a.h<o.h)return t[i]}else if(a.x>o.x&&a.x+a.w<o.w+o.x&&a.y>o.y&&a.y+a.h<o.h+o.y)return t[i]}return t[0]},moveRel:function(e,t){"string"!=typeof t&&(t=this.testMoveRel(e,t));var n=r(this,e,t);return this.moveTo(n.x,n.y)},moveBy:function(e,t){var n=this.layoutRect();return this.moveTo(n.x+e,n.y+t),this},moveTo:function(e,r){function o(e,t,n){return e<0?0:e+n>t&&(e=t-n)<0?0:e}if(this.settings.constrainToViewport){var i=n.getViewPort(t),a=this.layoutRect();e=o(e,i.w+i.x,a.w),r=o(r,i.h+i.y,a.h)}return this.state.get("rendered")?this.layoutRect({x:e,y:r}).repaint():(this.settings.x=e,this.settings.y=r),this.fire("move",{x:e,y:r}),this}}}),n("tinymce.core.util.Class",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Class")}),n("tinymce.core.util.EventDispatcher",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.EventDispatcher")}),n("tinymce.ui.BoxUtils",[],function(){"use strict";return{parseBox:function(e){var t;if(e)return"number"==typeof e?{top:e=e||0,left:e,bottom:e,right:e}:(1===(t=(e=e.split(" ")).length)?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0})},measureBox:function(e,t){function n(t){var n=parseFloat(function(t){var n=e.ownerDocument.defaultView;if(n){var r=n.getComputedStyle(e,null);return r?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),r.getPropertyValue(t)):null}return e.currentStyle[t]}(t),10);return isNaN(n)?0:n}return{top:n(t+"TopWidth"),right:n(t+"RightWidth"),bottom:n(t+"BottomWidth"),left:n(t+"LeftWidth")}}}}),n("tinymce.ui.ClassList",["tinymce.core.util.Tools"],function(e){"use strict";function t(){}function n(e){this.cls=[],this.cls._map={},this.onchange=e||t,this.prefix=""}return e.extend(n.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){for(var t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),n.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)t>0&&(e+=" "),e+=this.prefix+this.cls[t];return e},n}),n("tinymce.ui.Selector",["tinymce.core.util.Class"],function(e){"use strict";var t,n=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,o=/^\s*|\s*$/g,i=e.extend({init:function(e){var t=this.match;function i(e,r,i){var s;function c(e){e&&r.push(e)}return c(function(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}((s=n.exec(e.replace(o,"")))[1])),c(function(e){if(e)return function(t){return t._name===e}}(s[2])),c(function(e){if(e)return e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.classes.contains(e[n]))return!1;return!0}}(s[3])),c(function(e,t,n){if(e)return function(r){var o=r[e]?r[e]():"";return t?"="===t?o===n:"*="===t?o.indexOf(n)>=0:"~="===t?(" "+o+" ").indexOf(" "+n+" ")>=0:"!="===t?o!=n:"^="===t?0===o.indexOf(n):"$="===t&&o.substr(o.length-n.length)===n:!!n}}(s[4],s[5],s[6])),c(function(e){var n;if(e)return(e=/(?:not\((.+)\))|(.+)/i.exec(e))[1]?(n=a(e[1],[]),function(e){return!t(e,n)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?n%2==0:"odd"===e?n%2==1:!!t[e]&&t[e]()})}(s[7])),r.pseudo=!!s[7],r.direct=i,r}function a(e,t){var n,o,s,c=[];do{if(r.exec(""),(o=r.exec(e))&&(e=o[3],c.push(o[1]),o[2])){n=o[3];break}}while(o);for(n&&a(n,t),e=[],s=0;s<c.length;s++)">"!=c[s]&&e.push(i(c[s],[],">"===c[s-1]));return t.push(e),t}this._selectors=a(e,[])},match:function(e,t){var n,r,o,i,a,s,c,u,l,d,f,m,p;for(n=0,r=(t=t||this._selectors).length;n<r;n++){for(p=e,m=0,o=(i=(a=t[n]).length)-1;o>=0;o--)for(u=a[o];p;){if(u.pseudo)for(l=d=(f=p.parent().items()).length;l--&&f[l]!==p;);for(s=0,c=u.length;s<c;s++)if(!u[s](p,l,d)){s=c+1;break}if(s===c){m++;break}if(o===i-1)break;p=p.parent()}if(m===i)return!0}return!1},find:function(e){var n,r,o=[],a=this._selectors;function s(e,t,n){var r,i,a,c,u,l=t[n];for(r=0,i=e.length;r<i;r++){for(u=e[r],a=0,c=l.length;a<c;a++)if(!l[a](u,r,i)){a=c+1;break}if(a===c)n==t.length-1?o.push(u):u.items&&s(u.items(),t,n+1);else if(l.direct)return;u.items&&s(u.items(),t,n)}}if(e.items){for(n=0,r=a.length;n<r;n++)s(e.items(),a[n],0);r>1&&(o=function(e){for(var t,n=[],r=e.length;r--;)(t=e[r]).__checked||(n.push(t),t.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}(o))}return t||(t=i.Collection),new t(o)}});return i}),n("tinymce.ui.Collection",["tinymce.core.util.Tools","tinymce.ui.Selector","tinymce.core.util.Class"],function(e,t,n){"use strict";var r,o,i=Array.prototype.push,a=Array.prototype.slice;return o={length:0,init:function(e){e&&this.add(e)},add:function(t){return e.isArray(t)?i.apply(this,t):t instanceof r?this.add(t.toArray()):i.call(this,t),this},set:function(e){var t,n=this.length;for(this.length=0,this.add(e),t=this.length;t<n;t++)delete this[t];return this},filter:function(e){var n,o,i,a,s=[];for("string"==typeof e?(e=new t(e),a=function(t){return e.match(t)}):a=e,n=0,o=this.length;n<o;n++)a(i=this[n])&&s.push(i);return new r(s)},slice:function(){return new r(a.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this.length;t--&&this[t]!==e;);return t},reverse:function(){return new r(e.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(e,t){var n;return void 0!==t?(this.each(function(n){n[e]&&n[e](t)}),this):(n=this[0])&&n[e]?n[e]():void 0},exec:function(t){var n=e.toArray(arguments).slice(1);return this.each(function(e){e[t]&&e[t].apply(e,n)}),this},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(e){return this.each(function(t){t.classes.add(e)})},removeClass:function(e){return this.each(function(t){t.classes.remove(e)})}},e.each("fire on off show hide append prepend before after reflow".split(" "),function(t){o[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){o[e]=function(t){return this.prop(e,t)}}),r=n.extend(o),t.Collection=r,r}),n("tinymce.ui.data.Binding",[],function(){function e(e){this.create=e.create}return e.create=function(t,n){return new e({create:function(e,r){var o;function i(t){e.set(r,t.value)}return e.on("change:"+r,function(e){t.set(n,e.value)}),t.on("change:"+n,i),(o=e._bindings)||(o=e._bindings=[],e.on("destroy",function(){for(var e=o.length;e--;)o[e]()})),o.push(function(){t.off("change:"+n,i)}),t.get(n)}})},e}),n("tinymce.core.util.Observable",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Observable")}),n("tinymce.ui.data.ObservableObject",["tinymce.ui.data.Binding","tinymce.core.util.Class","tinymce.core.util.Observable","tinymce.core.util.Tools"],function(e,t,n,r){function o(e){return e.nodeType>0}return t.extend({Mixins:[n],init:function(t){var n,r;t=t||{};for(n in t)(r=t[n])instanceof e&&(t[n]=r.create(this,n));this.data=t},set:function(t,n){var i,a,s=this.data[t];if(n instanceof e&&(n=n.create(this,t)),"object"==typeof t){for(i in t)this.set(i,t[i]);return this}return function e(t,n){var i,a;if(t===n)return!0;if(null===t||null===n)return t===n;if("object"!=typeof t||"object"!=typeof n)return t===n;if(r.isArray(n)){if(t.length!==n.length)return!1;for(i=t.length;i--;)if(!e(t[i],n[i]))return!1}if(o(t)||o(n))return t===n;a={};for(i in n){if(!e(t[i],n[i]))return!1;a[i]=!0}for(i in t)if(!a[i]&&!e(t[i],n[i]))return!1;return!0}(s,n)||(this.data[t]=n,this.fire("change:"+t,a={target:this,name:t,value:n,oldValue:s}),this.fire("change",a)),this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(t){return e.create(this,t)},destroy:function(){this.fire("destroy")}})}),n("tinymce.ui.ReflowQueue",["global!document","tinymce.core.util.Delay"],function(e,t){var n,r={};return{add:function(o){var i=o.parent();if(i){if(!i._layout||i._layout.isNative())return;r[i._id]||(r[i._id]=i),n||(n=!0,t.requestAnimationFrame(function(){var e,t;n=!1;for(e in r)(t=r[e]).state.get("rendered")&&t.reflow();r={}},e.body))}},remove:function(e){r[e._id]&&delete r[e._id]}}}),n("tinymce.ui.Control",["global!document","tinymce.core.dom.DomQuery","tinymce.core.util.Class","tinymce.core.util.EventDispatcher","tinymce.core.util.Tools","tinymce.ui.BoxUtils","tinymce.ui.ClassList","tinymce.ui.Collection","tinymce.ui.data.ObservableObject","tinymce.ui.DomUtils","tinymce.ui.ReflowQueue"],function(e,t,n,r,o,i,a,s,c,u,l){"use strict";var d,f="onmousewheel"in e,m=!1,p=0,h={Statics:{classPrefix:"mce-"},isRtl:function(){return d.rtl},classPrefix:"mce-",init:function(e){var n,r,s=this;function u(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)s.classes.add(e[t])}s.settings=e=o.extend({},s.Defaults,e),s._id=e.id||"mceu_"+p++,s._aria={role:e.role},s._elmCache={},s.$=t,s.state=new c({visible:!0,active:!1,disabled:!1,value:""}),s.data=new c(e.data),s.classes=new a(function(){s.state.get("rendered")&&(s.getEl().className=this.toString())}),s.classes.prefix=s.classPrefix,(n=e.classes)&&(s.Defaults&&(r=s.Defaults.classes)&&n!=r&&u(r),u(n)),o.each("title text name visible disabled active value".split(" "),function(t){t in e&&s[t](e[t])}),s.on("click",function(){if(s.disabled())return!1}),s.settings=e,s.borderBox=i.parseBox(e.border),s.paddingBox=i.parseBox(e.padding),s.marginBox=i.parseBox(e.margin),e.hidden&&s.hide()},Properties:"parent,name",getContainerElm:function(){return u.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,r,o,a,s,c,l,d,f=this,m=f.settings,p=f.getEl();e=f.borderBox=f.borderBox||i.measureBox(p,"border"),f.paddingBox=f.paddingBox||i.measureBox(p,"padding"),f.marginBox=f.marginBox||i.measureBox(p,"margin"),d=u.getSize(p),l=m.minHeight,o=(c=m.minWidth)||d.width,a=l||d.height,n=m.width,r=m.height,s="undefined"!=typeof(s=m.autoResize)?s:!n&&!r,n=n||o,r=r||a;var h=e.left+e.right,g=e.top+e.bottom,v=m.maxWidth||65535,y=m.maxHeight||65535;return f._layoutRect=t={x:m.x||0,y:m.y||0,w:n,h:r,deltaW:h,deltaH:g,contentW:n-h,contentH:r-g,innerW:n-h,innerH:r-g,startMinWidth:c||0,startMinHeight:l||0,minW:Math.min(o,v),minH:Math.min(a,y),maxW:v,maxH:y,autoResize:s,scrollW:0},f._lastLayoutRect={},t},layoutRect:function(e){var t,n,r,o,i,a,s=this._layoutRect;return s||(s=this.initLayoutRect()),e?(r=s.deltaW,o=s.deltaH,e.x!==i&&(s.x=e.x),e.y!==i&&(s.y=e.y),e.minW!==i&&(s.minW=e.minW),e.minH!==i&&(s.minH=e.minH),(n=e.w)!==i&&(s.w=n=(n=n<s.minW?s.minW:n)>s.maxW?s.maxW:n,s.innerW=n-r),(n=e.h)!==i&&(s.h=n=(n=n<s.minH?s.minH:n)>s.maxH?s.maxH:n,s.innerH=n-o),(n=e.innerW)!==i&&(s.innerW=n=(n=n<s.minW-r?s.minW-r:n)>s.maxW-r?s.maxW-r:n,s.w=n+r),(n=e.innerH)!==i&&(s.innerH=n=(n=n<s.minH-o?s.minH-o:n)>s.maxH-o?s.maxH-o:n,s.h=n+o),e.contentW!==i&&(s.contentW=e.contentW),e.contentH!==i&&(s.contentH=e.contentH),(t=this._lastLayoutRect).x===s.x&&t.y===s.y&&t.w===s.w&&t.h===s.h||((a=d.repaintControls)&&a.map&&!a.map[this._id]&&(a.push(this),a.map[this._id]=!0),t.x=s.x,t.y=s.y,t.w=s.w,t.h=s.h),this):s},repaint:function(){var t,n,r,o,i,a,s,c,u,l,d=this;u=e.createRange?function(e){return e}:Math.round,t=d.getEl().style,a=(i=d.borderBox).left+i.right,s=i.top+i.bottom,(o=d._layoutRect).x!==(c=d._lastRepaintRect||{}).x&&(t.left=u(o.x)+"px",c.x=o.x),o.y!==c.y&&(t.top=u(o.y)+"px",c.y=o.y),o.w!==c.w&&(l=u(o.w-a),t.width=(l>=0?l:0)+"px",c.w=o.w),o.h!==c.h&&(l=u(o.h-s),t.height=(l>=0?l:0)+"px",c.h=o.h),d._hasBody&&o.innerW!==c.innerW&&(l=u(o.innerW),(r=d.getEl("body"))&&((n=r.style).width=(l>=0?l:0)+"px"),c.innerW=o.innerW),d._hasBody&&o.innerH!==c.innerH&&(l=u(o.innerH),(r=r||d.getEl("body"))&&((n=n||r.style).height=(l>=0?l:0)+"px"),c.innerH=o.innerH),d._lastRepaintRect=c,d.fire("repaint",{},!1)},updateLayoutRect:function(){this.parent()._lastRect=null,u.css(this.getEl(),{width:"",height:""}),this._layoutRect=this._lastRepaintRect=this._lastLayoutRect=null,this.initLayoutRect()},on:function(e,t){var n,r,o,i=this;return g(i).on(e,"string"!=typeof(n=t)?n:function(e){return r||i.parentsAndSelf().each(function(e){var t=e.settings.callbacks;if(t&&(r=t[n]))return o=e,!1}),r?r.call(o,e):(e.action=n,void this.fire("execute",e))}),i},off:function(e,t){return g(this).off(e,t),this},fire:function(e,t,n){if((t=t||{}).control||(t.control=this),t=g(this).fire(e,t),!1!==n&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},hasEventListeners:function(e){return g(this).has(e)},parents:function(e){var t,n=new s;for(t=this.parent();t;t=t.parent())n.add(t);return e&&(n=n.filter(e)),n},parentsAndSelf:function(e){return new s(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var n=e?this._id+"-"+e:this._id;return this._elmCache[n]||(this._elmCache[n]=t("#"+n)[0]),this._elmCache[n]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this.getEl(this.ariaTarget);return"undefined"==typeof t?this._aria[e]:(this._aria[e]=t,this.state.get("rendered")&&n.setAttribute("role"==e?e:"aria-"+e,t),this)},encode:function(e,t){return!1!==t&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return d.translate?d.translate(e):e},before:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this),!0),this},after:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this)),this},remove:function(){var e,n,r=this,o=r.getEl(),i=r.parent();if(r.items){var a=r.items().toArray();for(n=a.length;n--;)a[n].remove()}i&&i.items&&(e=[],i.items().each(function(t){t!==r&&e.push(t)}),i.items().set(e),i._lastRect=null),r._eventsRoot&&r._eventsRoot==r&&t(o).off();var s=r.getRoot().controlIdLookup;return s&&delete s[r._id],o&&o.parentNode&&o.parentNode.removeChild(o),r.state.set("rendered",!1),r.state.destroy(),r.fire("remove"),r},renderBefore:function(e){return t(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return t(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,n,r,o,i,a=this,s=a.settings;a.$el=t(a.getEl()),a.state.set("rendered",!0);for(o in s)0===o.indexOf("on")&&a.on(o.substr(2),s[o]);if(a._eventsRoot){for(r=a.parent();!i&&r;r=r.parent())i=r._eventsRoot;if(i)for(o in i._nativeEvents)a._nativeEvents[o]=!0}v(a),s.style&&(e=a.getEl())&&(e.setAttribute("style",s.style),e.style.cssText=s.style),a.settings.border&&a.$el.css({"border-top-width":(n=a.borderBox).top,"border-right-width":n.right,"border-bottom-width":n.bottom,"border-left-width":n.left});var c=a.getRoot();c.controlIdLookup||(c.controlIdLookup={}),c.controlIdLookup[a._id]=a;for(var u in a._aria)a.aria(u,a._aria[u]);!1===a.state.get("visible")&&(a.getEl().style.display="none"),a.bindStates(),a.state.on("change:visible",function(e){var t,n=e.value;a.state.get("rendered")&&(a.getEl().style.display=!1===n?"none":"",a.getEl().getBoundingClientRect()),(t=a.parent())&&(t._lastRect=null),a.fire(n?"show":"hide"),l.add(a)}),a.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){var t,n,r,o,i,a,s=this.getEl(),c=s.parentNode,u=function(e,t){var n,r,o=s;for(n=r=0;o&&o!=t&&o.nodeType;)n+=o.offsetLeft||0,r+=o.offsetTop||0,o=o.offsetParent;return{x:n,y:r}}(0,c);return t=u.x,n=u.y,r=s.offsetWidth,o=s.offsetHeight,i=c.clientWidth,a=c.clientHeight,"end"==e?(t-=i-r,n-=a-o):"center"==e&&(t-=i/2-r/2,n-=a/2-o/2),c.scrollLeft=t,c.scrollTop=n,this},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),e=t,t=t.parent()}e||(e=this);for(var r=n.length;r--;)n[r].rootControl=e;return e},reflow:function(){l.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}};function g(e){return e._eventDispatcher||(e._eventDispatcher=new r({scope:e,toggleEvent:function(t,n){n&&r.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&v(e))}})),e._eventDispatcher}function v(e){var n,r,o,i,a,s;function c(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function u(){var e=i._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),i._lastHoverCtrl=null)}function l(t){var n,r,o,a=e.getParentCtrl(t.target),s=i._lastHoverCtrl,c=0;if(a!==s){if(i._lastHoverCtrl=a,(r=a.parents().toArray().reverse()).push(a),s){for((o=s.parents().toArray().reverse()).push(s),c=0;c<o.length&&r[c]===o[c];c++);for(n=o.length-1;n>=c;n--)(s=o[n]).fire("mouseleave",{target:s.getEl()})}for(n=c;n<r.length;n++)(a=r[n]).fire("mouseenter",{target:a.getEl()})}}function d(t){t.preventDefault(),"mousewheel"==t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}if(a=e._nativeEvents){for((o=e.parents().toArray()).unshift(e),n=0,r=o.length;!i&&n<r;n++)i=o[n]._eventsRoot;for(i||(i=o[o.length-1]||e),e._eventsRoot=i,r=n,n=0;n<r;n++)o[n]._eventsRoot=i;var p=i._delegates;p||(p=i._delegates={});for(s in a){if(!a)return!1;"wheel"!==s||m?("mouseenter"===s||"mouseleave"===s?i._hasMouseEnter||(t(i.getEl()).on("mouseleave",u).on("mouseover",l),i._hasMouseEnter=1):p[s]||(t(i.getEl()).on(s,c),p[s]=!0),a[s]=!1):f?t(e.getEl()).on("mousewheel",d):t(e.getEl()).on("DOMMouseScroll",d)}}}return o.each("text title visible disabled active value".split(" "),function(e){h[e]=function(t){return 0===arguments.length?this.state.get(e):("undefined"!=typeof t&&this.state.set(e,t),this)}}),d=n.extend(h)}),n("tinymce.ui.KeyboardNavigation",["global!document"],function(e){"use strict";var t=function(e){return!!e.getAttribute("data-mce-tabstop")};return function(n){var r,o,i=n.root;function a(e){return e&&1===e.nodeType}try{r=e.activeElement}catch(t){r=e.body}function s(e){return a(e=e||r)?e.getAttribute("role"):null}function c(e){for(var t,n=e||r;n=n.parentNode;)if(t=s(n))return t}function u(e){var t=r;if(a(t))return t.getAttribute("aria-"+e)}function l(e){var t=e.tagName.toUpperCase();return"INPUT"==t||"TEXTAREA"==t||"SELECT"==t}function d(e){var n=[];return function e(r){if(1==r.nodeType&&"none"!=r.style.display&&!r.disabled){var o;(l(o=r)&&!o.hidden||t(o)||/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(s(o)))&&n.push(r);for(var i=0;i<r.childNodes.length;i++)e(r.childNodes[i])}}(e||i.getEl()),n}function f(e){var t,n;(n=(e=e||o).parents().toArray()).unshift(e);for(var r=0;r<n.length&&!(t=n[r]).settings.ariaRoot;r++);return t}function m(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function p(e,t){var n=-1,o=f();t=t||d(o.getEl());for(var i=0;i<t.length;i++)t[i]===r&&(n=i);o.lastAriaIndex=m(n+=e,t)}function h(){"tablist"==c()?p(-1,d(r.parentNode)):o.parent().submenu?b():p(-1)}function g(){var e=s(),t=c();"tablist"==t?p(1,d(r.parentNode)):"menuitem"==e&&"menu"==t&&u("haspopup")?x():p(1)}function v(){p(-1)}function y(){var e=s(),t=c();"menuitem"==e&&"menubar"==t?x():"button"==e&&u("haspopup")?x({key:"down"}):p(1)}function b(){o.fire("cancel")}function x(e){o.fire("click",{target:r,aria:e=e||{}})}return o=i.getParentCtrl(r),i.on("keydown",function(e){function n(e,n){l(r)||t(r)||"slider"!==s(r)&&!1!==n(e)&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:n(e,h);break;case 39:n(e,g);break;case 38:n(e,v);break;case 40:n(e,y);break;case 27:b();break;case 14:case 13:case 32:n(e,x);break;case 9:!1!==function(e){if("tablist"==c()){var t=d(o.getEl("body"))[0];t&&t.focus()}else p(e.shiftKey?-1:1)}(e)&&e.preventDefault()}}),i.on("focusin",function(e){r=e.target,o=e.control}),{focusFirst:function(e){var t=f(e),n=d(t.getEl());m(t.settings.ariaRemember&&"lastAriaIndex"in t?t.lastAriaIndex:0,n)}}}}),n("tinymce.ui.Container",["tinymce.ui.Control","tinymce.ui.Collection","tinymce.ui.Selector","tinymce.core.ui.Factory","tinymce.ui.KeyboardNavigation","tinymce.core.util.Tools","tinymce.core.dom.DomQuery","tinymce.ui.ClassList","tinymce.ui.ReflowQueue"],function(e,t,n,r,o,i,a,s,c){"use strict";var u={};return e.extend({init:function(e){var n=this;n._super(e),(e=n.settings).fixed&&n.state.set("fixed",!0),n._items=new t,n.isRtl()&&n.classes.add("rtl"),n.bodyClasses=new s(function(){n.state.get("rendered")&&(n.getEl("body").className=this.toString())}),n.bodyClasses.prefix=n.classPrefix,n.classes.add("container"),n.bodyClasses.add("container-body"),e.containerCls&&n.classes.add(e.containerCls),n._layout=r.create((e.layout||"")+"layout"),n.add(n.settings.items?n.settings.items:n.render()),n._hasBody=!0},items:function(){return this._items},find:function(e){return(e=u[e]=u[e]||new n(e)).find(this)},add:function(e){return this.items().add(this.create(e)).parent(this),this},focus:function(e){var t,n,r;if(!e||!(n=this.keyboardNav||this.parents().eq(-1)[0].keyboardNav))return r=this.find("*"),this.statusbar&&r.add(this.statusbar.items()),r.each(function(e){if(e.settings.autofocus)return t=null,!1;e.canFocus&&(t=t||e)}),t&&t.focus(),this;n.focusFirst(this)},replace:function(e,t){for(var n,r=this.items(),o=r.length;o--;)if(r[o]===e){r[o]=t;break}o>=0&&((n=t.getEl())&&n.parentNode.removeChild(n),(n=e.getEl())&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n,o=this,a=[];return i.isArray(t)||(t=[t]),i.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),n=i.extend({},o.settings.defaults,t),t.type=n.type=n.type||t.type||o.settings.defaultType||(n.defaults?n.defaults.type:null),t=r.create(n)),a.push(t))}),a},renderNew:function(){var e=this;return e.items().each(function(t,n){var r;t.parent(e),t.state.get("rendered")||((r=e.getEl("body")).hasChildNodes()&&n<=r.childNodes.length-1?a(r.childNodes[n]).before(t.renderHtml()):a(r).append(t.renderHtml()),t.postRender(),c.add(t))}),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){return this.items().set(this.create(e).concat(this.items().toArray())),this.renderNew()},insert:function(e,t,n){var r,o,i;return e=this.create(e),r=this.items(),!n&&t<r.length-1&&(t+=1),t>=0&&t<r.length&&(o=r.slice(0,t).toArray(),i=r.slice(t).toArray(),r.set(o.concat(e,i))),this.renderNew()},fromJSON:function(e){for(var t in e)this.find("#"+t).value(e[t]);return this},toJSON:function(){var e={};return this.find("*").each(function(t){var n=t.name(),r=t.value();n&&"undefined"!=typeof r&&(e[n]=r)}),e},renderHtml:function(){var e=this._layout,t=this.settings.role;return this.preRender(),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"'+(t?' role="'+this.settings.role+'"':"")+'><div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t.state.set("rendered",!0),t.settings.style&&t.$el.css(t.settings.style),t.settings.border&&t.$el.css({"border-top-width":(e=t.borderBox).top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left}),t.parent()||(t.keyboardNav=new o({root:t})),t},initLayoutRect:function(){var e=this._super();return this._layout.recalc(this),e},recalc:function(){var e=this._layoutRect,t=this._lastRect;if(!t||t.w!=e.w||t.h!=e.h)return this._layout.recalc(this),e=this.layoutRect(),this._lastRect={x:e.x,y:e.y,w:e.w,h:e.h},!0},reflow:function(){var t;if(c.remove(this),this.visible()){for(e.repaintControls=[],e.repaintControls.map={},this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),n("tinymce.ui.DragHelper",["global!document","global!window","tinymce.core.dom.DomQuery"],function(e,t,n){"use strict";function r(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}return function(o,i){var a,s,c,u,l,d,f,m=i.document||e;function p(){return m.getElementById(i.handle||o)}i=i||{},c=function(e){var o,c,h,g,v,y,b,x,C,w,k,S,T=(h=m,y=(S=Math.max)((g=h.documentElement).scrollWidth,(v=h.body).scrollWidth),b=S(g.clientWidth,v.clientWidth),x=S(g.offsetWidth,v.offsetWidth),C=S(g.scrollHeight,v.scrollHeight),w=S(g.clientHeight,v.clientHeight),k=S(g.offsetHeight,v.offsetHeight),{width:y<x?b:y,height:C<k?w:C});r(e),e.preventDefault(),s=e.button,o=p(),d=e.screenX,f=e.screenY,c=t.getComputedStyle?t.getComputedStyle(o,null).getPropertyValue("cursor"):o.runtimeStyle.cursor,a=n("<div></div>").css({position:"absolute",top:0,left:0,width:T.width,height:T.height,zIndex:2147483647,opacity:1e-4,cursor:c}).appendTo(m.body),n(m).on("mousemove touchmove",l).on("mouseup touchend",u),i.start(e)},l=function(e){if(r(e),e.button!==s)return u(e);e.deltaX=e.screenX-d,e.deltaY=e.screenY-f,e.preventDefault(),i.drag(e)},u=function(e){r(e),n(m).off("mousemove touchmove",l).off("mouseup touchend",u),a.remove(),i.stop&&i.stop(e)},this.destroy=function(){n(p()).off()},n(p()).on("mousedown touchstart",c)}}),n("tinymce.ui.Scrollable",["tinymce.core.dom.DomQuery","tinymce.ui.DragHelper"],function(e,t){"use strict";return{init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var n=this,r=2;function o(){var t,o,i;function a(i,a,s,c,u,l){var d,f,m,p,h,g,v,y;if(f=n.getEl("scroll"+i)){if(v=a.toLowerCase(),y=s.toLowerCase(),e(n.getEl("absend")).css(v,n.layoutRect()[c]-1),!u)return void e(f).css("display","none");e(f).css("display","block"),d=n.getEl("body"),m=n.getEl("scroll"+i+"t"),p=d["client"+s]-2*r,h=(p-=t&&o?f["client"+l]:0)/d["scroll"+s],(g={})[v]=d["offset"+a]+r,g[y]=p,e(f).css(g),(g={})[v]=d["scroll"+a]*h,g[y]=p*h,e(m).css(g)}}i=n.getEl("body"),o=i.scrollHeight>i.clientHeight,a("h","Left","Width","contentW",t=i.scrollWidth>i.clientWidth,"Height"),a("v","Top","Height","contentH",o,"Width")}n.settings.autoScroll&&(n._hasScroll||(n._hasScroll=!0,function(){function o(o,i,a,s,c){var u,l=n._id+"-scroll"+o,d=n.classPrefix;e(n.getEl()).append('<div id="'+l+'" class="'+d+"scrollbar "+d+"scrollbar-"+o+'"><div id="'+l+'t" class="'+d+'scrollbar-thumb"></div></div>'),n.draghelper=new t(l+"t",{start:function(){u=n.getEl("body")["scroll"+i],e("#"+l).addClass(d+"active")},drag:function(e){var t,l,d,f,m=n.layoutRect();l=m.contentW>m.innerW,d=m.contentH>m.innerH,f=n.getEl("body")["client"+a]-2*r,t=(f-=l&&d?n.getEl("scroll"+o)["client"+c]:0)/n.getEl("body")["scroll"+a],n.getEl("body")["scroll"+i]=u+e["delta"+s]/t},stop:function(){e("#"+l).removeClass(d+"active")}})}n.classes.add("scroll"),o("v","Top","Height","Y","Width"),o("h","Left","Width","X","Height")}(),n.on("wheel",function(e){var t=n.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,o()}),e(n.getEl("body")).on("scroll",o)),o())}}}),n("tinymce.ui.Panel",["tinymce.ui.Container","tinymce.ui.Scrollable"],function(e,t){"use strict";return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),"undefined"==typeof n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}})}),n("tinymce.ui.Resizable",["tinymce.ui.DomUtils"],function(e){"use strict";return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(t<=1||n<=1){var r=e.getWindowSize();t=t<=1?t*r.w:t,n=n<=1?n*r.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this.layoutRect();return this.resizeTo(n.w+e,n.h+t)}}}),n("tinymce.ui.FloatPanel",["global!document","global!window","tinymce.core.dom.DomQuery","tinymce.core.util.Delay","tinymce.ui.DomUtils","tinymce.ui.Movable","tinymce.ui.Panel","tinymce.ui.Resizable"],function(e,t,n,r,o,i,a,s){"use strict";var c,u,l,d,f=[],m=[];function p(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}function h(e){var t=o.getViewPort().y;function n(t,n){for(var r,o=0;o<f.length;o++)if(f[o]!=e)for(r=f[o].parent();r&&(r=r.parent());)r==e&&f[o].fixed(t).moveBy(0,n).repaint()}e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>t&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),n(!1,e._autoFixY-t)):(e._autoFixY=e.layoutRect().y,e._autoFixY<t&&(e.fixed(!0).layoutRect({y:0}).repaint(),n(!0,t-e._autoFixY))))}function g(e,t){var r,o,i=v.zIndex||65535;if(e)m.push(t);else for(r=m.length;r--;)m[r]===t&&m.splice(r,1);if(m.length)for(r=0;r<m.length;r++)m[r].modal&&(i++,o=m[r]),m[r].getEl().style.zIndex=i,m[r].zIndex=i,i++;var a=n("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];o?n(a).css("z-index",o.zIndex-1):a&&(a.parentNode.removeChild(a),d=!1),v.currentZIndex=i}var v=a.extend({Mixins:[i,s],init:function(o){var i=this;i._super(o),i._eventsRoot=i,i.classes.add("floatpanel"),o.autohide&&(c||(c=function(e){2!=e.button&&function(e){for(var t=f.length;t--;){var n=f[t],r=n.getParentCtrl(e.target);if(n.settings.autohide){if(r&&(p(r,n)||n.parent()===r))continue;(e=n.fire("autohide",{target:e.target})).isDefaultPrevented()||n.hide()}}}(e)},n(e).on("click touchstart",c)),function(){if(!l){var r=e.documentElement,o=r.clientWidth,i=r.clientHeight;l=function(){e.all&&o==r.clientWidth&&i==r.clientHeight||(o=r.clientWidth,i=r.clientHeight,v.hideAll())},n(t).on("resize",l)}}(),f.push(i)),o.autofix&&(u||(u=function(){var e;for(e=f.length;e--;)h(f[e])},n(t).on("scroll",u)),i.on("move",function(){h(this)})),i.on("postrender show",function(e){if(e.control==i){var t,o=i.classPrefix;i.modal&&!d&&((t=n("#"+o+"modal-block",i.getContainerElm()))[0]||(t=n('<div id="'+o+'modal-block" class="'+o+"reset "+o+'fade"></div>').appendTo(i.getContainerElm())),r.setTimeout(function(){t.addClass(o+"in"),n(i.getEl()).addClass(o+"in")}),d=!0),g(!0,i)}}),i.on("show",function(){i.parents().each(function(e){if(e.state.get("fixed"))return i.fixed(!0),!1})}),o.popover&&(i._preBodyHtml='<div class="'+i.classPrefix+'arrow"></div>',i.classes.add("popover").add("bottom").add(i.isRtl()?"end":"start")),i.aria("label",o.ariaLabel),i.aria("labelledby",i._id),i.aria("describedby",i.describedBy||i._id+"-none")},fixed:function(e){if(this.state.get("fixed")!=e){if(this.state.get("rendered")){var t=o.getViewPort();e?this.layoutRect().y-=t.y:this.layoutRect().y+=t.y}this.classes.toggle("fixed",e),this.state.set("fixed",e)}return this},show:function(){var e,t=this._super();for(e=f.length;e--&&f[e]!==this;);return-1===e&&f.push(this),t},hide:function(){return y(this),g(!1,this),this._super()},hideAll:function(){v.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),g(!1,this)),this},remove:function(){y(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function y(e){var t;for(t=f.length;t--;)f[t]===e&&f.splice(t,1);for(t=m.length;t--;)m[t]===e&&m.splice(t,1)}return v.hideAll=function(){for(var e=f.length;e--;){var t=f[e];t&&t.settings.autohide&&(t.hide(),f.splice(e,1))}},v}),n("tinymce.themes.modern.modes.Inline",["global!document","tinymce.core.Env","tinymce.core.dom.DOMUtils","tinymce.core.ui.Factory","tinymce.themes.modern.api.Events","tinymce.themes.modern.api.Settings","tinymce.themes.modern.ui.A11y","tinymce.themes.modern.ui.ContextToolbars","tinymce.themes.modern.ui.Menubar","tinymce.themes.modern.ui.SkinLoaded","tinymce.themes.modern.ui.Toolbar","tinymce.ui.FloatPanel"],function(e,t,n,r,o,i,a,s,c,u,l,d){var f=function(e){return!(!e||t.container)};return{render:function(e,t,m){var p,h,g=n.DOM,v=i.getFixedToolbarContainer(e);v&&(h=g.select(v)[0]);var y=function(){if(p&&p.moveRel&&p.visible()&&!p._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),r=0,o=0;if(t){var i=g.getPos(n),a=g.getPos(t);r=Math.max(0,a.x-i.x),o=Math.max(0,a.y-i.y)}p.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(r,o)}},b=function(){p&&(p.show(),y(),g.addClass(e.getBody(),"mce-edit-focus"))},x=function(){p&&(p.hide(),d.hideAll(),g.removeClass(e.getBody(),"mce-edit-focus"))},C=function(){p?p.visible()||b():(p=t.panel=r.create({type:h?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:f(h),fixed:f(h),border:1,items:[!1===i.hasMenubar(e)?null:{type:"menubar",border:"0 0 1 0",items:c.createMenuButtons(e)},l.createToolbars(e,i.getToolbarSize(e))]}),o.fireBeforeRenderUI(e),h?p.renderTo(h).reflow():p.renderTo().reflow(),a.addKeys(e,p),b(),s.addContextualToolbars(e),e.on("nodeChange",y),e.on("activate",b),e.on("deactivate",x),e.nodeChanged())};return e.settings.content_editable=!0,e.on("focus",function(){!1===i.isSkinDisabled(e)&&m.skinUiCss?g.styleSheetLoader.load(m.skinUiCss,C,C):C()}),e.on("blur hide",x),e.on("remove",function(){p&&(p.remove(),p=null)}),!1===i.isSkinDisabled(e)&&m.skinUiCss?g.styleSheetLoader.load(m.skinUiCss,u.fireSkinLoaded(e)):u.fireSkinLoaded(e)(),{}}}}),n("tinymce.ui.Throbber",["tinymce.core.dom.DomQuery","tinymce.ui.Control","tinymce.core.util.Delay"],function(e,t,n){"use strict";return function(r,o){var i,a,s=this,c=t.classPrefix;s.show=function(t,u){function l(){i&&(e(r).append('<div class="'+c+"throbber"+(o?" "+c+"throbber-inline":"")+'"></div>'),u&&u())}return s.hide(),i=!0,t?a=n.setTimeout(l,t):l(),s},s.hide=function(){var e=r.lastChild;return n.clearTimeout(a),e&&-1!=e.className.indexOf("throbber")&&e.parentNode.removeChild(e),i=!1,s}}}),n("tinymce.themes.modern.ui.ProgressState",["tinymce.ui.Throbber"],function(e){return{setup:function(t,n){var r;t.on("ProgressState",function(t){r=r||new e(n.panel.getEl("body")),t.state?r.show(t.time):r.hide()})}}}),n("tinymce.themes.modern.ui.Render",["tinymce.themes.modern.api.Settings","tinymce.themes.modern.modes.Iframe","tinymce.themes.modern.modes.Inline","tinymce.themes.modern.ui.ProgressState"],function(e,t,n,r){return{renderUI:function(o,i,a){var s=e.getSkinUrl(o);return s&&(a.skinUiCss=s+"/skin.min.css",o.contentCSS.push(s+"/content"+(o.inline?".inline":"")+".min.css")),r.setup(o,i),e.isInline(o)?n.render(o,i,a):t.render(o,i,a)}}}),r("global!setTimeout",setTimeout),n("tinymce.ui.Tooltip",["tinymce.ui.Control","tinymce.ui.Movable"],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'" role="presentation"><div class="'+e+'tooltip-arrow"></div><div class="'+e+'tooltip-inner">'+this.encode(this.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)}),e._super()},repaint:function(){var e,t;(e=this.getEl().style).left=(t=this._layoutRect).x+"px",e.top=t.y+"px",e.zIndex=131070}})}),n("tinymce.ui.Widget",["tinymce.ui.Control","tinymce.ui.Tooltip"],function(e,t){"use strict";var n,r=e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&!1!==r.tooltips&&(t.on("mouseenter",function(n){var r=t.tooltip().moveTo(-65535);if(n.control==t){var o=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.classes.toggle("tooltip-n","bc-tc"==o),r.classes.toggle("tooltip-nw","bc-tl"==o),r.classes.toggle("tooltip-ne","bc-tr"==o),r.moveRel(t.getEl(),o)}else r.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return n||(n=new t({type:"tooltip"})).renderTo(),n},postRender:function(){var e=this.settings;this._super(),this.parent()||!e.width&&!e.height||(this.initLayoutRect(),this.repaint()),e.autofocus&&this.focus()},bindStates:function(){var e=this;function t(t){e.aria("disabled",t),e.classes.toggle("disabled",t)}function n(t){e.aria("pressed",t),e.classes.toggle("active",t)}return e.state.on("change:disabled",function(e){t(e.value)}),e.state.on("change:active",function(e){n(e.value)}),e.state.get("disabled")&&t(!0),e.state.get("active")&&n(!0),e._super()},remove:function(){this._super(),n&&(n.remove(),n=null)}});return r}),n("tinymce.ui.Progress",["tinymce.ui.Widget"],function(e){"use strict";return e.extend({Defaults:{value:0},init:function(e){this._super(e),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div class="'+e+'bar-container"><div class="'+e+'bar"></div></div><div class="'+e+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var e=this;function t(t){t=e.settings.filter(t),e.getEl().lastChild.innerHTML=t+"%",e.getEl().firstChild.firstChild.style.width=t+"%"}return e.state.on("change:value",function(e){t(e.value)}),t(e.state.get("value")),e._super()}})}),n("tinymce.ui.Notification",["tinymce.ui.Control","tinymce.ui.Movable","tinymce.ui.Progress","tinymce.core.util.Delay"],function(e,t,n,r){var o=function(e,t){e.getEl().lastChild.textContent=t+(e.progressBar?" "+e.progressBar.value()+"%":"")};return e.extend({Mixins:[t],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),t.maxWidth=e.maxWidth,e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new n),t.on("click",function(e){-1!=e.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var e,t=this,n=t.classPrefix,r="",o="",i="";return t.icon&&(r='<i class="'+n+"ico "+n+"i-"+t.icon+'"></i>'),e=' style="max-width: '+t.maxWidth+"px;"+(t.color?"background-color: "+t.color+';"':'"'),t.closeButton&&(o='<button type="button" class="'+n+'close" aria-hidden="true">\xd7</button>'),t.progressBar&&(i=t.progressBar.renderHtml()),'<div id="'+t._id+'" class="'+t.classes+'"'+e+' role="presentation">'+r+'<div class="'+n+'notification-inner">'+t.state.get("text")+"</div>"+i+o+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var e=this;return r.setTimeout(function(){e.$el.addClass(e.classPrefix+"in"),o(e,e.state.get("text"))},100),e._super()},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().firstChild.innerHTML=t.value,o(e,t.value)}),e.progressBar&&(e.progressBar.bindStates(),e.progressBar.state.on("change:value",function(t){o(e,e.state.get("text"))})),e._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var e,t;(e=this.getEl().style).left=(t=this._layoutRect).x+"px",e.top=t.y+"px",e.zIndex=65534}})}),n("tinymce.ui.NotificationManagerImpl",["ephox.katamari.api.Arr","global!setTimeout","tinymce.core.util.Tools","tinymce.ui.DomUtils","tinymce.ui.Notification"],function(e,t,n,r,o){return function(i){var a=function(e){return e.inline?e.getElement():e.getContentAreaContainer()};return{open:function(e,s){var c,u=n.extend(e,{maxWidth:(c=a(i),r.getSize(c).width)}),l=new o(u);return l.args=u,u.timeout>0&&(l.timer=t(function(){l.close(),s()},u.timeout)),l.on("close",function(){s()}),l.renderTo(),l},close:function(e){e.close()},reposition:function(t){e.each(t,function(e){e.moveTo(0,0)}),function(t){if(t.length>0){var n=t.slice(0,1)[0],r=a(i);n.moveRel(r,"tc-tc"),e.each(t,function(e,n){n>0&&e.moveRel(t[n-1].getEl(),"bc-tc")})}}(t)},getArgs:function(e){return e.args}}}}),n("tinymce.ui.Window",["global!document","global!setTimeout","global!window","tinymce.core.dom.DomQuery","tinymce.core.Env","tinymce.core.util.Delay","tinymce.ui.BoxUtils","tinymce.ui.DomUtils","tinymce.ui.DragHelper","tinymce.ui.FloatPanel","tinymce.ui.Panel"],function(e,t,n,r,o,i,a,s,c,u,l){"use strict";var d=[],f="";function m(t){var n,i=r("meta[name=viewport]")[0];!1!==o.overrideViewPort&&(i||((i=e.createElement("meta")).setAttribute("name","viewport"),e.getElementsByTagName("head")[0].appendChild(i)),(n=i.getAttribute("content"))&&"undefined"!=typeof f&&(f=n),i.setAttribute("content",t?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":f))}var p=u.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var t=this;t._super(e),t.isRtl()&&t.classes.add("rtl"),t.classes.add("window"),t.bodyClasses.add("window-body"),t.state.set("fixed",!0),e.buttons&&(t.statusbar=new l({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:t.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),t.statusbar.classes.add("foot"),t.statusbar.parent(t)),t.on("click",function(e){var n=t.classPrefix+"close";(s.hasClass(e.target,n)||s.hasClass(e.target.parentNode,n))&&t.close()}),t.on("cancel",function(){t.close()}),t.aria("describedby",t.describedBy||t._id+"-none"),t.aria("label",e.title),t._fullscreen=!1},recalc:function(){var e,t,n,r,o=this,i=o.statusbar;o._fullscreen&&(o.layoutRect(s.getWindowSize()),o.layoutRect().contentH=o.layoutRect().innerH),o._super(),e=o.layoutRect(),o.settings.title&&!o._fullscreen&&(t=e.headerW)>e.w&&(n=e.x-Math.max(0,t/2),o.layoutRect({w:t,x:n}),r=!0),i&&(i.layoutRect({w:o.layoutRect().innerW}).recalc(),(t=i.layoutRect().minW+e.deltaW)>e.w&&(n=e.x-Math.max(0,t-e.w),o.layoutRect({w:t,x:n}),r=!0)),r&&o.recalc()},initLayoutRect:function(){var e,t=this._super(),n=0;if(this.settings.title&&!this._fullscreen){e=this.getEl("head");var r=s.getSize(e);t.headerW=r.width,t.headerH=r.height,n+=t.headerH}this.statusbar&&(n+=this.statusbar.layoutRect().h),t.deltaH+=n,t.minH+=n,t.h+=n;var o=s.getWindowSize();return t.x=this.settings.x||Math.max(0,o.w/2-t.w/2),t.y=this.settings.y||Math.max(0,o.h/2-t.h/2),t},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,o=e.settings,i="",a="",s=o.html;return e.preRender(),t.preRender(e),o.title&&(i='<div id="'+n+'-head" class="'+r+'window-head"><div id="'+n+'-title" class="'+r+'title">'+e.encode(o.title)+'</div><div id="'+n+'-dragh" class="'+r+'dragh"></div><button type="button" class="'+r+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),o.url&&(s='<iframe src="'+o.url+'" tabindex="-1"></iframe>'),"undefined"==typeof s&&(s=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+i+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+s+"</div>"+a+"</div></div>"},fullscreen:function(t){var o,c,u=this,l=e.documentElement,d=u.classPrefix;if(t!=u._fullscreen)if(r(n).on("resize",function(){var e;if(u._fullscreen)if(o)u._timer||(u._timer=i.setTimeout(function(){var e=s.getWindowSize();u.moveTo(0,0).resizeTo(e.w,e.h),u._timer=0},50));else{e=(new Date).getTime();var t=s.getWindowSize();u.moveTo(0,0).resizeTo(t.w,t.h),(new Date).getTime()-e>50&&(o=!0)}}),c=u.layoutRect(),u._fullscreen=t,t){u._initial={x:c.x,y:c.y,w:c.w,h:c.h},u.borderBox=a.parseBox("0"),u.getEl("head").style.display="none",c.deltaH-=c.headerH+2,r([l,e.body]).addClass(d+"fullscreen"),u.classes.add("fullscreen");var f=s.getWindowSize();u.moveTo(0,0).resizeTo(f.w,f.h)}else u.borderBox=a.parseBox(u.settings.border),u.getEl("head").style.display="",c.deltaH+=c.headerH,r([l,e.body]).removeClass(d+"fullscreen"),u.classes.remove("fullscreen"),u.moveTo(u._initial.x,u._initial.y).resizeTo(u._initial.w,u._initial.h);return u.reflow()},postRender:function(){var e,n=this;t(function(){n.classes.add("in"),n.fire("open")},0),n._super(),n.statusbar&&n.statusbar.postRender(),n.focus(),this.dragHelper=new c(n._id+"-dragh",{start:function(){e={x:n.layoutRect().x,y:n.layoutRect().y}},drag:function(t){n.moveTo(e.x+t.deltaX,e.y+t.deltaY)}}),n.on("submit",function(e){e.isDefaultPrevented()||n.close()}),d.push(n),m(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var t,n;for(this.dragHelper.destroy(),this._super(),this.statusbar&&this.statusbar.remove(),n=this.classPrefix,!1,function(){for(var e=0;e<d.length;e++)if(d[e]._fullscreen)return!0;return!1}()&&r([e.documentElement,e.body]).removeClass(n+"fullscreen"),t=d.length;t--;)d[t]===this&&d.splice(t,1);m(d.length>0)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});return function(){if(!o.desktop){var e={w:n.innerWidth,h:n.innerHeight};i.setInterval(function(){var t=n.innerWidth,o=n.innerHeight;e.w==t&&e.h==o||(e={w:t,h:o},r(n).trigger("resize"))},100)}r(n).on("resize",function(){var e,t,n=s.getWindowSize();for(e=0;e<d.length;e++)t=d[e].layoutRect(),d[e].moveTo(d[e].settings.x||Math.max(0,n.w/2-t.w/2),d[e].settings.y||Math.max(0,n.h/2-t.h/2))})}(),p}),n("tinymce.ui.MessageBox",["global!document","tinymce.ui.Window"],function(e,t){"use strict";var n=t.extend({init:function(e){this._super({border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}})},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(r){var o,i=r.callback||function(){};function a(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),i(t)}}}switch(r.buttons){case n.OK_CANCEL:o=[a("Ok",!0,!0),a("Cancel",!1)];break;case n.YES_NO:case n.YES_NO_CANCEL:o=[a("Yes",1,!0),a("No",0)],r.buttons==n.YES_NO_CANCEL&&o.push(a("Cancel",-1));break;default:o=[a("Ok",!0,!0)]}return new t({padding:20,x:r.x,y:r.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:o,title:r.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:r.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:r.onClose,onCancel:function(){i(!1)}}).renderTo(e.body).reflow()},alert:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,n.msgBox(e)},confirm:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,e.buttons=n.OK_CANCEL,n.msgBox(e)}}});return n}),n("tinymce.ui.WindowManagerImpl",["tinymce.ui.Window","tinymce.ui.MessageBox"],function(e,t){return function(n){return{open:function(t,n,r){var o;return t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body,data:t.data,callbacks:t.commands}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){o.find("form")[0].submit()}},{text:"Cancel",onclick:function(){o.close()}}]),(o=new e(t)).on("close",function(){r(o)}),t.data&&o.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),o.features=t||{},o.params=n||{},o=o.renderTo().reflow()},alert:function(e,n,r){var o;return(o=t.alert(e,function(){n()})).on("close",function(){r(o)}),o},confirm:function(e,n,r){var o;return(o=t.confirm(e,function(e){n(e)})).on("close",function(){r(o)}),o},close:function(e){e.close()},getParams:function(e){return e.params},setParams:function(e,t){e.params=t}}}}),n("tinymce.themes.modern.api.ThemeApi",["tinymce.themes.modern.ui.Render","tinymce.themes.modern.ui.Resize","tinymce.ui.NotificationManagerImpl","tinymce.ui.WindowManagerImpl"],function(e,t,n,r){return{get:function(o){return{renderUI:function(t){return e.renderUI(o,this,t)},resizeTo:function(e,n){return t.resizeTo(o,e,n)},resizeBy:function(e,n){return t.resizeBy(o,e,n)},getNotificationManagerImpl:function(){return n(o)},getWindowManagerImpl:function(){return r(o)}}}}}),n("tinymce.ui.Layout",["tinymce.core.util.Class","tinymce.core.util.Tools"],function(e,t){"use strict";return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,r,o,i=this.settings;t=i.firstControlClass,n=i.lastControlClass,e.each(function(e){e.classes.remove(t).remove(n).add(i.controlClass),e.visible()&&(r||(r=e),o=e)}),r&&r.classes.add(t),o&&o.classes.add(n)},renderHtml:function(e){var t="";return this.applyClasses(e.items()),e.items().each(function(e){t+=e.renderHtml()}),t},recalc:function(){},postRender:function(){},isNative:function(){return!1}})}),n("tinymce.ui.AbsoluteLayout",["tinymce.ui.Layout"],function(e){"use strict";return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),n("tinymce.ui.Button",["global!document","global!window","tinymce.ui.Widget"],function(e,t,n){"use strict";return n.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",function(e){e.preventDefault()}),n.on("touchstart",function(e){n.fire("click",e),e.preventDefault()}),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e,t=this.getEl().firstChild;t&&((e=t.style).width=e.height="100%"),this._super()},renderHtml:function(){var e,n=this._id,r=this.classPrefix,o=this.state.get("icon"),i=this.state.get("text"),a="",s=this.settings;return(e=s.image)?(o="none","string"!=typeof e&&(e=t.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",i&&(this.classes.add("btn-has-text"),a='<span class="'+r+'txt">'+this.encode(i)+"</span>"),o=o?r+"ico "+r+"i-"+o:"",'<div id="'+n+'" class="'+this.classes+'" tabindex="-1"'+("boolean"==typeof s.active?' aria-pressed="'+s.active+'"':"")+'><button id="'+n+'-button" role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+a+"</button></div>"},bindStates:function(){var t=this,n=t.$,r=t.classPrefix+"txt";function o(e){var o=n("span."+r,t.getEl());e?(o[0]||(n("button:first",t.getEl()).append('<span class="'+r+'"></span>'),o=n("span."+r,t.getEl())),o.html(t.encode(e))):o.remove(),t.classes.toggle("btn-has-text",!!e)}return t.state.on("change:text",function(e){o(e.value)}),t.state.on("change:icon",function(n){var r=n.value,i=t.classPrefix;t.settings.icon=r,r=r?i+"ico "+i+"i-"+t.settings.icon:"";var a=t.getEl().firstChild,s=a.getElementsByTagName("i")[0];r?(s&&s==a.firstChild||(s=e.createElement("i"),a.insertBefore(s,a.firstChild)),s.className=r):s&&a.removeChild(s),o(t.state.get("text"))}),t._super()}})}),r("global!RegExp",RegExp),n("tinymce.ui.BrowseButton",["tinymce.ui.Button","tinymce.core.util.Tools","tinymce.ui.DomUtils","tinymce.core.dom.DomQuery","global!RegExp"],function(e,t,n,r,o){return e.extend({init:function(e){e=t.extend({text:"Browse...",multiple:!1,accept:null},e),this._super(e),this.classes.add("browsebutton"),e.multiple&&this.classes.add("multiple")},postRender:function(){var e=this,t=n.create("input",{type:"file",id:e._id+"-browse",accept:e.settings.accept});e._super(),r(t).on("change",function(t){var n=t.target.files;e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},t.preventDefault(),n.length&&e.fire("change",t)}),r(t).on("click",function(e){e.stopPropagation()}),r(e.getEl("button")).on("click",function(e){e.stopPropagation(),t.click()}),e.getEl().appendChild(t)},remove:function(){r(this.getEl("button")).off(),r(this.getEl("input")).off(),this._super()}})}),n("tinymce.ui.ButtonGroup",["tinymce.ui.Container"],function(e){"use strict";return e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this._layout;return this.classes.add("btn-group"),this.preRender(),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"}})}),n("tinymce.ui.Checkbox",["global!document","tinymce.ui.Widget"],function(e,t){"use strict";return t.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'" unselectable="on" aria-labelledby="'+e+'-al" tabindex="-1"><i class="'+t+"ico "+t+'i-checkbox"></i><span id="'+e+'-al" class="'+t+'label">'+this.encode(this.state.get("text"))+"</span></div>"},bindStates:function(){var t=this;function n(e){t.classes.toggle("checked",e),t.aria("checked",e)}return t.state.on("change:text",function(e){t.getEl("al").firstChild.data=t.translate(e.value)}),t.state.on("change:checked change:value",function(e){t.fire("change"),n(e.value)}),t.state.on("change:icon",function(n){var r=n.value,o=t.classPrefix;if("undefined"==typeof r)return t.settings.icon;t.settings.icon=r,r=r?o+"ico "+o+"i-"+t.settings.icon:"";var i=t.getEl().firstChild,a=i.getElementsByTagName("i")[0];r?(a&&a==i.firstChild||(a=e.createElement("i"),i.insertBefore(a,i.firstChild)),a.className=r):a&&i.removeChild(a)}),t.state.get("checked")&&n(!0),t._super()}})}),n("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),n("tinymce.ui.ComboBox",["global!document","tinymce.core.dom.DomQuery","tinymce.core.ui.Factory","tinymce.core.util.Tools","tinymce.core.util.VK","tinymce.ui.DomUtils","tinymce.ui.Widget"],function(e,t,n,r,o,i,a){"use strict";return a.extend({init:function(e){var n=this;n._super(e),e=n.settings,n.classes.add("combobox"),n.subinput=!0,n.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),n.on("click",function(r){var o=r.target,i=n.getEl();if(t.contains(i,o)||o==i)for(;o&&o!=i;)o.id&&-1!=o.id.indexOf("-open")&&(n.fire("action"),e.menu&&(n.showMenu(),r.aria&&n.menu.items()[0].focus())),o=o.parentNode}),n.on("keydown",function(e){var t;13==e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),n.parents().reverse().each(function(e){if(e.toJSON)return t=e,!1}),n.fire("submit",{data:t.toJSON()}))}),n.on("keyup",function(e){if("INPUT"==e.target.nodeName){var t=n.state.get("value"),r=e.target.value;r!==t&&(n.state.set("value",r),n.fire("autocomplete",e))}}),n.on("mouseover",function(e){var t=n.tooltip().moveTo(-65535);if(n.statusLevel()&&-1!==e.target.className.indexOf(n.classPrefix+"status")){var r=n.statusMessage()||"Ok",o=t.text(r).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);t.classes.toggle("tooltip-n","bc-tc"==o),t.classes.toggle("tooltip-nw","bc-tl"==o),t.classes.toggle("tooltip-ne","bc-tr"==o),t.moveRel(e.target,o)}})},statusLevel:function(e){return arguments.length>0&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return arguments.length>0&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var e,t=this;t.menu||((e=t.settings.menu||[]).length?e={type:"menu",items:e}:e.type=e.type||"menu",t.menu=n.create(e).parent(t).renderTo(t.getContainerElm()),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){e.control===t.menu&&t.focus()}),t.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()==t.value())})}).fire("show"),t.menu.on("select",function(e){t.value(e.control.value())}),t.on("focusin",function(e){"INPUT"==e.target.tagName.toUpperCase()&&t.menu.hide()}),t.aria("expanded",!0)),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var n,r,o=this.getEl(),a=this.getEl("open"),s=this.layoutRect(),c=0,u=o.firstChild;return this.statusLevel()&&"none"!==this.statusLevel()&&(c=parseInt(i.getRuntimeStyle(u,"padding-right"),10)-parseInt(i.getRuntimeStyle(u,"padding-left"),10)),n=a?s.w-i.getSize(a).width-10:s.w-10,e.all&&(!e.documentMode||e.documentMode<=8)&&(r=this.layoutRect().h-2+"px"),t(u).css({width:n-c,lineHeight:r}),this._super(),this},postRender:function(){var e=this;return t(this.getEl("inp")).on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)}),e._super()},renderHtml:function(){var e,t,n,r=this,o=r._id,i=r.settings,a=r.classPrefix,s=r.state.get("value")||"",c="",u="";return"spellcheck"in i&&(u+=' spellcheck="'+i.spellcheck+'"'),i.maxLength&&(u+=' maxlength="'+i.maxLength+'"'),i.size&&(u+=' size="'+i.size+'"'),i.subtype&&(u+=' type="'+i.subtype+'"'),n='<i id="'+o+'-status" class="mce-status mce-ico" style="display: none"></i>',r.disabled()&&(u+=' disabled="disabled"'),(e=i.icon)&&"caret"!=e&&(e=a+"ico "+a+"i-"+i.icon),t=r.state.get("text"),(e||t)&&(c='<div id="'+o+'-open" class="'+a+"btn "+a+'open" tabIndex="-1" role="button"><button id="'+o+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=e?'<i class="'+e+'"></i>':'<i class="'+a+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",r.classes.add("has-open")),'<div id="'+o+'" class="'+r.classes+'"><input id="'+o+'-inp" class="'+a+'textbox" value="'+r.encode(s,!1)+'" hidefocus="1"'+u+' placeholder="'+r.encode(i.placeholder)+'" />'+n+c+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,t){var o=this;if(0!==e.length){o.menu?o.menu.items().remove():o.menu=n.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(o).renderTo(),r.each(e,function(e){var n,r;o.menu.add({text:e.title,url:e.previewUrl,match:t,classes:"menu-item-ellipsis",onclick:(n=e.value,r=e.title,function(){o.fire("selectitem",{title:r,value:n})})})}),o.menu.renderNew(),o.hideMenu(),o.menu.on("cancel",function(e){e.control.parent()===o.menu&&(e.stopPropagation(),o.focus(),o.hideMenu())}),o.menu.on("select",function(){o.focus()});var i=o.layoutRect().w;o.menu.layoutRect({w:i,minW:0,maxW:i}),o.menu.reflow(),o.menu.show(),o.menu.moveRel(o.getEl(),o.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else o.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var e=this;e.state.on("change:value",function(t){e.getEl("inp").value!=t.value&&(e.getEl("inp").value=t.value)}),e.state.on("change:disabled",function(t){e.getEl("inp").disabled=t.value}),e.state.on("change:statusLevel",function(t){var n=e.getEl("status"),r=e.classPrefix,o=t.value;i.css(n,"display","none"===o?"none":""),i.toggleClass(n,r+"i-checkmark","ok"===o),i.toggleClass(n,r+"i-warning","warn"===o),i.toggleClass(n,r+"i-error","error"===o),e.classes.toggle("has-status","none"!==o),e.repaint()}),i.on(e.getEl("status"),"mouseleave",function(){e.tooltip().hide()}),e.on("cancel",function(t){e.menu&&e.menu.visible()&&(t.stopPropagation(),e.hideMenu())});var t=function(e,t){t&&t.items().length>0&&t.items().eq(e)[0].focus()};return e.on("keydown",function(n){var r=n.keyCode;"INPUT"===n.target.nodeName&&(r===o.DOWN?(n.preventDefault(),e.fire("autocomplete"),t(0,e.menu)):r===o.UP&&(n.preventDefault(),t(-1,e.menu)))}),e._super()},remove:function(){t(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}})}),n("tinymce.ui.ColorBox",["tinymce.ui.ComboBox"],function(e){"use strict";return e.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(e){}},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.state.get("rendered")&&e.repaintColor(t.value)}),e._super()}})}),n("tinymce.ui.PanelButton",["tinymce.ui.Button","tinymce.ui.FloatPanel"],function(e,t){"use strict";return e.extend({showPanel:function(){var e=this,n=e.settings;if(e.classes.add("opened"),e.panel)e.panel.show();else{var r=n.panel;r.type&&(r={layout:"grid",items:r}),r.role=r.role||"dialog",r.popover=!0,r.autohide=!0,r.ariaRoot=!0,e.panel=new t(r).on("hide",function(){e.classes.remove("opened")}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}var o=e.panel.testMoveRel(e.getEl(),n.popoverAlign||(e.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl"]));e.panel.classes.toggle("start","bc-tl"===o),e.panel.classes.toggle("end","bc-tr"===o),e.panel.moveRel(e.getEl(),o)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}})}),n("tinymce.ui.ColorButton",["tinymce.ui.PanelButton","tinymce.core.dom.DOMUtils"],function(e,t){"use strict";var n=t.DOM;return e.extend({init:function(e){this._super(e),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("text"),o=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",a="";return r&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(r)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(r){r.aria&&"down"===r.aria.key||r.control!=e||n.getParent(r.target,"."+e.classPrefix+"open")||(r.stopImmediatePropagation(),t.call(e,r))}),delete e.settings.onclick,e._super()}})}),n("tinymce.core.util.Color",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Color")}),n("tinymce.ui.ColorPicker",["tinymce.ui.Widget","tinymce.ui.DragHelper","tinymce.ui.DomUtils","tinymce.core.util.Color"],function(e,t,n,r){"use strict";return e.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){var e,o,i,a,s,c=this,u=c.color();function l(e,t){var r,o,i=n.getPos(e);return r=t.pageX-i.x,o=t.pageY-i.y,{x:r=Math.max(0,Math.min(r/e.clientWidth,1)),y:o=Math.max(0,Math.min(o/e.clientHeight,1))}}function d(e,t){n.css(i,{top:(360-e.h)/360*100+"%"}),t||n.css(s,{left:e.s+"%",top:100-e.v+"%"}),a.style.background=new r({s:100,v:100,h:e.h}).toHex(),c.color().parse({s:e.s,v:e.v,h:e.h})}function f(t){var n;n=l(a,t),e.s=100*n.x,e.v=100*(1-n.y),d(e),c.fire("change")}function m(t){var n;n=l(o,t),(e=u.toHsv()).h=360*(1-n.y),d(e,!0),c.fire("change")}o=c.getEl("h"),i=c.getEl("hp"),a=c.getEl("sv"),s=c.getEl("svp"),c._repaint=function(){d(e=u.toHsv())},c._super(),c._svdraghelper=new t(c._id+"-sv",{start:f,drag:f}),c._hdraghelper=new t(c._id+"-h",{start:m,drag:m}),c._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){if(!arguments.length)return this.color().toHex();this.color().parse(e),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=new r),this._color},renderHtml:function(){var e,t=this._id,n=this.classPrefix,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return e='<div id="'+t+'-h" class="'+n+'colorpicker-h" style="background: -ms-linear-gradient(top,'+r+");background: linear-gradient(to bottom,"+r+');">'+function(){var e,t,o,i,a="";for(o="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",e=0,t=(i=r.split(",")).length-1;e<t;e++)a+='<div class="'+n+'colorpicker-h-chunk" style="height:'+100/t+"%;"+o+i[e]+",endColorstr="+i[e+1]+");-ms-"+o+i[e]+",endColorstr="+i[e+1]+')"></div>';return a}()+'<div id="'+t+'-hp" class="'+n+'colorpicker-h-marker"></div></div>','<div id="'+t+'" class="'+this.classes+'"><div id="'+t+'-sv" class="'+n+'colorpicker-sv"><div class="'+n+'colorpicker-overlay1"><div class="'+n+'colorpicker-overlay2"><div id="'+t+'-svp" class="'+n+'colorpicker-selector1"><div class="'+n+'colorpicker-selector2"></div></div></div></div></div>'+e+"</div>"}})}),n("tinymce.ui.DropZone",["tinymce.ui.Widget","tinymce.core.util.Tools","tinymce.ui.DomUtils","global!RegExp"],function(e,t,n,r){return e.extend({init:function(e){e=t.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},e),this._super(e),this.classes.add("dropzone"),e.multiple&&this.classes.add("multiple")},renderHtml:function(){var e,t=this.settings;return e=n.create("div",{id:this._id,hidefocus:"1"},"<span>"+this.translate(t.text)+"</span>"),t.height&&n.css(e,"height",t.height+"px"),t.width&&n.css(e,"width",t.width+"px"),e.className=this.classes,e.outerHTML},postRender:function(){var e=this,n=function(t){t.preventDefault(),e.classes.toggle("dragenter"),e.getEl().className=e.classes};e._super(),e.$el.on("dragover",function(e){e.preventDefault()}),e.$el.on("dragenter",n),e.$el.on("dragleave",n),e.$el.on("drop",function(n){if(n.preventDefault(),!e.state.get("disabled")){var o=function(n){var o=e.settings.accept;if("string"!=typeof o)return n;var i=new r("("+o.split(/\s*,\s*/).join("|")+")$","i");return t.grep(n,function(e){return i.test(e.name)})}(n.dataTransfer.files);e.value=function(){return o.length?e.settings.multiple?o:o[0]:null},o.length&&e.fire("change",n)}})},remove:function(){this.$el.off(),this._super()}})}),n("tinymce.ui.Path",["tinymce.ui.Widget"],function(e){"use strict";return e.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="\xbb"),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){var n;(n=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})}),t.row(t.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",function(t){e.innerHtml(e._getDataPathHtml(t.value))}),e._super()},_getDataPathHtml:function(e){var t,n,r=e||[],o="",i=this.classPrefix;for(t=0,n=r.length;t<n;t++)o+=(t>0?'<div class="'+i+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+i+"path-item"+(t==n-1?" "+i+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+this._id+"-"+t+'" aria-level="'+(t+1)+'">'+r[t].name+"</div>";return o||(o='<div class="'+i+'path-item">\xa0</div>'),o}})}),n("tinymce.ui.ElementPath",["tinymce.ui.Path"],function(e){return e.extend({postRender:function(){var e=this,t=e.settings.editor;function n(e){if(1===e.nodeType){if("BR"==e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}return!1!==t.settings.elementpath&&(e.on("select",function(e){t.focus(),t.selection.select(this.row()[e.index].element),t.nodeChanged()}),t.on("nodeChange",function(r){for(var o=[],i=r.parents,a=i.length;a--;)if(1==i[a].nodeType&&!n(i[a])){var s=t.fire("ResolveName",{name:i[a].nodeName.toLowerCase(),target:i[a]});if(s.isDefaultPrevented()||o.push({name:s.name,element:i[a]}),s.isPropagationStopped())break}e.row(o)})),e._super()}})}),n("tinymce.ui.FormItem",["tinymce.ui.Container"],function(e){"use strict";return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),n("tinymce.ui.Form",["tinymce.ui.Container","tinymce.ui.FormItem","tinymce.core.util.Tools"],function(e,t,n){"use strict";return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,r=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),r.each(function(r){var o,i=r.settings.label;i&&((o=new t(n.extend({items:{type:"label",id:r._id+"-l",text:i,flex:0,forId:r._id,disabled:r.disabled()}},e.settings.formItemDefaults))).type="formitem",r.aria("labelledby",r._id+"-l"),"undefined"==typeof r.settings.flex&&(r.settings.flex=1),e.replace(r,o),o.add(r))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var e=this;function t(){var t,n,r=0,o=[];if(!1!==e.settings.labelGapCalc)for(("children"==e.settings.labelGapCalc?e.find("formitem"):e.items()).filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;r=n>r?n:r,o.push(t)}),n=e.settings.labelGap||0,t=o.length;t--;)o[t].settings.minWidth=r+n}e._super(),e.on("show",t),t()}})}),n("tinymce.ui.FieldSet",["tinymce.ui.Form"],function(e){"use strict";return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}})}),r("global!Date",Date),r("global!Math",Math),n("ephox.katamari.api.Id",["global!Date","global!Math","global!String"],function(e,t,n){var r=0;return{generate:function(o){var i=(new e).getTime();return o+"_"+t.floor(1e9*t.random())+ ++r+n(i)}}}),n("global!console",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),n("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","ephox.katamari.api.Option","global!Error","global!console","global!document"],function(e,t,n,r,o){var i=function(t){if(null===t||void 0===t)throw new n("Node cannot be null or undefined");return{dom:e.constant(t)}};return{fromHtml:function(e,t){var n=(t||o).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw r.error("HTML does not have a single root node",e),"HTML must have a single root node";return i(n.childNodes[0])},fromTag:function(e,t){var n=(t||o).createElement(e);return i(n)},fromText:function(e,t){var n=(t||o).createTextNode(e);return i(n)},fromDom:i,fromPoint:function(e,n,r){return t.from(e.dom().elementFromPoint(n,r)).map(i)}}}),n("ephox.katamari.api.Thunk",[],function(){return{cached:function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(null,arguments)),t}}}}),n("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),n("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(e){var t=function(e){return e.dom().nodeName.toLowerCase()},n=function(e){return e.dom().nodeType},r=function(e){return function(t){return n(t)===e}},o=r(e.ELEMENT),i=r(e.TEXT),a=r(e.DOCUMENT);return{name:t,type:n,value:function(e){return e.dom().nodeValue},isElement:o,isText:i,isDocument:a,isComment:function(r){return n(r)===e.COMMENT||"#comment"===t(r)}}}),n("ephox.sugar.api.node.Body",["ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","global!document"],function(e,t,n,r){var o=e.cached(function(){return i(t.fromDom(r))}),i=function(e){var n=e.dom().body;if(null===n||void 0===n)throw"Body is not available yet";return t.fromDom(n)};return{body:o,getBody:i,inBody:function(e){var t=n.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)}}}),n("ephox.katamari.api.Type",["global!Array","global!String"],function(e,t){var n=function(n){return function(r){return function(n){if(null===n)return"null";var r=typeof n;return"object"===r&&e.prototype.isPrototypeOf(n)?"array":"object"===r&&t.prototype.isPrototypeOf(n)?"string":r}(r)===n}};return{isString:n("string"),isObject:n("object"),isArray:n("array"),isNull:n("null"),isBoolean:n("boolean"),isUndefined:n("undefined"),isFunction:n("function"),isNumber:n("number")}}),n("ephox.katamari.data.Immutable",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!Array","global!Error"],function(e,t,n,r){return function(){var o=arguments;return function(){for(var i=new n(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];if(o.length!==i.length)throw new r('Wrong number of arguments to struct. Expected "['+o.length+']", got '+i.length+" arguments");var s={};return e.each(o,function(e,n){s[e]=t.constant(i[n])}),s}}}),n("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],function(e,t){var n,r=void 0===(n=t.keys)?function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}:n,o=function(e,t){for(var n=r(e),o=0,i=n.length;o<i;o++){var a=n[o];t(e[a],a,e)}},i=function(e,t){var n={};return o(e,function(r,o){var i=t(r,o,e);n[i.k]=i.v}),n},a=function(e,t){var n=[];return o(e,function(e,r){n.push(t(e,r))}),n},s=function(e){return a(e,function(e){return e})};return{bifilter:function(e,t){var n={},r={};return o(e,function(e,o){(t(e,o)?n:r)[o]=e}),{t:n,f:r}},each:o,map:function(e,t){return i(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},mapToArray:a,tupleMap:i,find:function(t,n){for(var o=r(t),i=0,a=o.length;i<a;i++){var s=o[i],c=t[s];if(n(c,s,t))return e.some(c)}return e.none()},keys:r,values:s,size:function(e){return s(e).length}}}),n("ephox.katamari.util.BagUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!Error"],function(e,t,n){var r=function(e){return e.slice(0).sort()};return{sort:r,reqMessage:function(e,t){throw new n("All required keys ("+r(e).join(", ")+") were not specified. Specified keys were: "+r(t).join(", ")+".")},unsuppMessage:function(e){throw new n("Unsupported keys for object: "+r(e).join(", "))},validateStrArr:function(r,o){if(!t.isArray(o))throw new n("The "+r+" fields must be an array. Was: "+o+".");e.each(o,function(e){if(!t.isString(e))throw new n("The value "+e+" in the "+r+" fields was not a string.")})},invalidTypeMessage:function(e,t){throw new n("All values need to be of type: "+t+". Keys ("+r(e).join(", ")+") were not.")},checkDupes:function(t){var o=r(t);e.find(o,function(e,t){return t<o.length-1&&e===o[t+1]}).each(function(e){throw new n("The field: "+e+" occurs more than once in the combined fields: ["+o.join(", ")+"].")})}}}),n("ephox.katamari.data.MixedBag",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.katamari.util.BagUtils","global!Error","global!Object"],function(e,t,n,r,o,i,a){return function(s,c){var u=s.concat(c);if(0===u.length)throw new i("You must specify at least one required or optional field.");return o.validateStrArr("required",s),o.validateStrArr("optional",c),o.checkDupes(u),function(i){var l=n.keys(i);e.forall(s,function(t){return e.contains(l,t)})||o.reqMessage(s,l);var d=e.filter(l,function(t){return!e.contains(u,t)});d.length>0&&o.unsuppMessage(d);var f={};return e.each(s,function(e){f[e]=t.constant(i[e])}),e.each(c,function(e){f[e]=t.constant(a.prototype.hasOwnProperty.call(i,e)?r.some(i[e]):r.none())}),f}}}),n("ephox.katamari.api.Struct",["ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag"],function(e,t){return{immutable:e,immutableBag:t}}),n("ephox.sugar.alien.Recurse",[],function(){return{toArray:function(e,t){var n=[],r=function(e){return n.push(e),t(e)},o=t(e);do{o=o.bind(r)}while(o.isSome());return n}}}),n("ephox.katamari.api.Global",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),n("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(e){var t=function(t,n){for(var r=void 0!==n?n:e,o=0;o<t.length&&void 0!==r&&null!==r;++o)r=r[t[o]];return r},n=function(t,n){for(var r,o,i=void 0!==n?n:e,a=0;a<t.length;++a)r=i,o=t[a],void 0!==r[o]&&null!==r[o]||(r[o]={}),i=r[o];return i};return{path:t,resolve:function(e,n){var r=e.split(".");return t(r,n)},forge:n,namespace:function(e,t){var r=e.split(".");return n(r,t)}}}),n("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(e){return{getOrDie:function(t,n){var r=e.resolve(t,n);if(void 0===r)throw t+" not available on this browser";return r}}}),n("ephox.sand.api.Node",["ephox.sand.util.Global"],function(e){var t=function(){return e.getOrDie("Node")},n=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)};return{documentPositionPreceding:function(e,r){return n(e,r,t().DOCUMENT_POSITION_PRECEDING)},documentPositionContainedBy:function(e,r){return n(e,r,t().DOCUMENT_POSITION_CONTAINED_BY)}}}),r("global!Number",Number),n("ephox.sand.detect.Version",["ephox.katamari.api.Arr","global!Number","global!String"],function(e,t,n){var r=function(){return o(0,0)},o=function(e,t){return{major:e,minor:t}};return{nu:o,detect:function(e,i){var a=n(i).toLowerCase();return 0===e.length?r():function(n,r){var i=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,r);if(!i)return{major:0,minor:0};var a=function(e){return t(r.replace(i,"$"+e))};return o(a(1),a(2))}(0,a)},unknown:r}}),n("ephox.sand.core.Browser",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n=function(e,t){return function(){return t===e}},r=function(e){var t=e.current;return{current:t,version:e.version,isEdge:n("Edge",t),isChrome:n("Chrome",t),isIE:n("IE",t),isOpera:n("Opera",t),isFirefox:n("Firefox",t),isSafari:n("Safari",t)}};return{unknown:function(){return r({current:void 0,version:t.unknown()})},nu:r,edge:e.constant("Edge"),chrome:e.constant("Chrome"),ie:e.constant("IE"),opera:e.constant("Opera"),firefox:e.constant("Firefox"),safari:e.constant("Safari")}}),n("ephox.sand.core.OperatingSystem",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n=function(e,t){return function(){return t===e}},r=function(e){var t=e.current;return{current:t,version:e.version,isWindows:n("Windows",t),isiOS:n("iOS",t),isAndroid:n("Android",t),isOSX:n("OSX",t),isLinux:n("Linux",t),isSolaris:n("Solaris",t),isFreeBSD:n("FreeBSD",t)}};return{unknown:function(){return r({current:void 0,version:t.unknown()})},nu:r,windows:e.constant("Windows"),ios:e.constant("iOS"),android:e.constant("Android"),linux:e.constant("Linux"),osx:e.constant("OSX"),solaris:e.constant("Solaris"),freebsd:e.constant("FreeBSD")}}),n("ephox.sand.detect.DeviceType",["ephox.katamari.api.Fun"],function(e){return function(t,n,r){var o=t.isiOS()&&!0===/ipad/i.test(r),i=t.isiOS()&&!o,a=t.isAndroid()&&3===t.version.major,s=t.isAndroid()&&4===t.version.major,c=o||a||s&&!0===/mobile/i.test(r),u=t.isiOS()||t.isAndroid(),l=u&&!c,d=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(r);return{isiPad:e.constant(o),isiPhone:e.constant(i),isTablet:e.constant(c),isPhone:e.constant(l),isTouch:e.constant(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:e.constant(d)}}}),n("ephox.sand.detect.UaString",["ephox.katamari.api.Arr","ephox.sand.detect.Version","global!String"],function(e,t,n){var r=function(t,r){var o=n(r).toLowerCase();return e.find(t,function(e){return e.search(o)})};return{detectBrowser:function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})},detectOs:function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})}}}),n("ephox.katamari.str.StrAppend",[],function(){return{addToStart:function(e,t){return t+e},addToEnd:function(e,t){return e+t},removeFromStart:function(e,t){return e.substring(t)},removeFromEnd:function(e,t){return e.substring(0,e.length-t)}}}),n("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],function(e,t){return{first:function(e,t){return e.substr(0,t)},last:function(e,t){return e.substr(e.length-t,e.length)},head:function(t){return""===t?e.none():e.some(t.substr(0,1))},tail:function(t){return""===t?e.none():e.some(t.substring(1))}}}),n("ephox.katamari.api.Strings",["ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","global!Error"],function(e,t,n){var r=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},o=function(e,t){return r(e,t,0)},i=function(e,t){return r(e,t,e.length-t.length)};return{supplant:function(e,t){return e.replace(/\${([^{}]*)}/g,function(e,n){var r,o=t[n];return"string"==(r=typeof o)||"number"===r?o:e})},startsWith:o,removeLeading:function(t,n){return o(t,n)?e.removeFromStart(t,n.length):t},removeTrailing:function(t,n){return i(t,n)?e.removeFromEnd(t,n.length):t},ensureLeading:function(t,n){return o(t,n)?t:e.addToStart(t,n)},ensureTrailing:function(t,n){return i(t,n)?t:e.addToEnd(t,n)},endsWith:i,contains:function(e,t){return-1!==e.indexOf(t)},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},lTrim:function(e){return e.replace(/^\s+/g,"")},rTrim:function(e){return e.replace(/\s+$/g,"")},capitalize:function(e){return t.head(e).bind(function(n){return t.tail(e).map(function(e){return n.toUpperCase()+e})}).getOr(e)}}}),n("ephox.sand.info.PlatformInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Strings"],function(e,t){var n=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,r=function(e){return function(n){return t.contains(n,e)}},o=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return t.contains(e,"edge/")&&t.contains(e,"chrome")&&t.contains(e,"safari")&&t.contains(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,n],search:function(e){return t.contains(e,"chrome")&&!t.contains(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return t.contains(e,"msie")||t.contains(e,"trident")}},{name:"Opera",versionRegexes:[n,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:r("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:r("firefox")},{name:"Safari",versionRegexes:[n,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(t.contains(e,"safari")||t.contains(e,"mobile/"))&&t.contains(e,"applewebkit")}}],i=[{name:"Windows",search:r("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return t.contains(e,"iphone")||t.contains(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:r("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:r("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:r("linux"),versionRegexes:[]},{name:"Solaris",search:r("sunos"),versionRegexes:[]},{name:"FreeBSD",search:r("freebsd"),versionRegexes:[]}];return{browsers:e.constant(o),oses:e.constant(i)}}),n("ephox.sand.core.PlatformDetection",["ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString","ephox.sand.info.PlatformInfo"],function(e,t,n,r,o){return{detect:function(i){var a=o.browsers(),s=o.oses(),c=r.detectBrowser(a,i).fold(e.unknown,e.nu),u=r.detectOs(s,i).fold(t.unknown,t.nu);return{browser:c,os:u,deviceType:n(u,c,i)}}}}),r("global!navigator",navigator),n("ephox.sand.api.PlatformDetection",["ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection","global!navigator"],function(e,t,n){return{detect:e.cached(function(){return t.detect(n.userAgent)})}}),n("ephox.sugar.api.search.Selectors",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.node.NodeTypes","global!Error","global!document"],function(e,t,n,r,o,i){var a=r.ELEMENT,s=r.DOCUMENT,c=function(e){return e.nodeType!==a&&e.nodeType!==s||0===e.childElementCount};return{all:function(t,r){var o=void 0===r?i:r.dom();return c(o)?[]:e.map(o.querySelectorAll(t),n.fromDom)},is:function(e,t){var n=e.dom();if(n.nodeType!==a)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new o("Browser lacks native selectors")},one:function(e,r){var o=void 0===r?i:r.dom();return c(o)?t.none():t.from(o.querySelector(e)).map(n.fromDom)}}}),n("ephox.sugar.api.dom.Compare",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors"],function(e,t,n,r,o){var i=function(e,t){return e.dom()===t.dom()},a=r.detect().browser.isIE()?function(e,t){return n.documentPositionContainedBy(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)};return{eq:i,isEqualNode:function(e,t){return e.dom().isEqualNode(t.dom())},member:function(n,r){return e.exists(r,t.curry(i,n))},contains:a,is:o.is}}),n("ephox.sugar.api.search.Traverse",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.alien.Recurse","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t,n,r,o,i,a,s){var c=function(e){return s.fromDom(e.dom().ownerDocument)},u=function(e){var t=e.dom();return r.from(t.parentNode).map(s.fromDom)},l=function(e){var t=e.dom();return r.from(t.previousSibling).map(s.fromDom)},d=function(e){var t=e.dom();return r.from(t.nextSibling).map(s.fromDom)},f=function(e){var n=e.dom();return t.map(n.childNodes,s.fromDom)},m=function(e,t){var n=e.dom().childNodes;return r.from(n[t]).map(s.fromDom)},p=o.immutable("element","offset");return{owner:c,defaultView:function(e){var t=e.dom();return s.fromDom(t.ownerDocument.defaultView)},documentElement:function(e){var t=c(e);return s.fromDom(t.dom().documentElement)},parent:u,findIndex:function(e){return u(e).bind(function(n){var r=f(n);return t.findIndex(r,function(t){return a.eq(e,t)})})},parents:function(t,r){for(var o=e.isFunction(r)?r:n.constant(!1),i=t.dom(),a=[];null!==i.parentNode&&void 0!==i.parentNode;){var c=i.parentNode,u=s.fromDom(c);if(a.push(u),!0===o(u))break;i=c}return a},siblings:function(e){return u(e).map(f).map(function(n){return t.filter(n,function(t){return!a.eq(e,t)})}).getOr([])},prevSibling:l,offsetParent:function(e){var t=e.dom();return r.from(t.offsetParent).map(s.fromDom)},prevSiblings:function(e){return t.reverse(i.toArray(e,l))},nextSibling:d,nextSiblings:function(e){return i.toArray(e,d)},children:f,child:m,firstChild:function(e){return m(e,0)},lastChild:function(e){return m(e,e.dom().childNodes.length-1)},childNodesCount:function(e){return e.dom().childNodes.length},hasChildNodes:function(e){return e.dom().hasChildNodes()},leaf:function(e,t){var n=f(e);return n.length>0&&t<n.length?p(n[t],0):p(e,t)}}}),n("ephox.sugar.api.search.PredicateFilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Body","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(t,o){var i=[];return e.each(n.children(t),function(e){o(e)&&(i=i.concat([e])),i=i.concat(r(e,o))}),i};return{all:function(e){return r(t.body(),e)},ancestors:function(t,r,o){return e.filter(n.parents(t,o),r)},siblings:function(t,r){return e.filter(n.siblings(t),r)},children:function(t,r){return e.filter(n.children(t),r)},descendants:r}}),n("ephox.sugar.api.search.SelectorFilter",["ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.Selectors"],function(e,t){return{all:function(e){return t.all(e)},ancestors:function(n,r,o){return e.ancestors(n,function(e){return t.is(e,r)},o)},siblings:function(n,r){return e.siblings(n,function(e){return t.is(e,r)})},children:function(n,r){return e.children(n,function(e){return t.is(e,r)})},descendants:function(e,n){return t.all(n,e)}}}),n("tinymce.ui.content.LinkTargets",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Id","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFilter","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a){var s=a.trim,c=function(e){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},u=c("true"),l=c("false"),d=function(e,t,n,r,o){return{type:e,title:t,url:n,level:r,attach:o}},f=function(e){return e.innerText||e.textContent},m=function(e){return(t=e)&&"A"===t.nodeName&&(t.id||t.name)&&h(e);var t},p=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},h=function(e){return function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return u(e)}return!1}(e)&&!l(e)},g=function(e){return p(e)&&h(e)},v=function(e){var t,r,o=(t=e).id?t.id:n.generate("h");return d("header",f(e),"#"+o,p(r=e)?parseInt(r.nodeName.substr(1),10):0,function(){e.id=o})},y=function(e){var n=e.id||e.name,r=f(e);return d("anchor",r||"#"+n,"#"+n,0,t.noop)},b=function(e){return s(e.title).length>0};return{find:function(t){var n,i,a=(i="h1,h2,h3,h4,h5,h6,a:not([href])",e.map(o.descendants(r.fromDom(t),i),function(e){return e.dom()}));return e.filter((n=a,e.map(e.filter(n,g),v)).concat(e.map(e.filter(a,m),y)),b)}}}),n("tinymce.ui.FilePicker",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!window","tinymce.ui.content.LinkTargets","tinymce.core.EditorManager","tinymce.ui.ComboBox","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a){"use strict";var s={},c=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},u=function(e,n){return{title:e,value:{title:e,url:n,attach:t.noop}}},l=function(e,t,n){var r=t in e?e[t]:n;return!1===r?null:r},d=function(e,t){var n=e.toLowerCase(),r=a.grep(t,function(e){return-1!==e.title.toLowerCase().indexOf(n)});return 1===r.length&&r[0].title===e?[]:r};return i.extend({Statics:{clearHistory:function(){s={}}},init:function(i){var f,m,p,h,g,v,y,b,x,C,w,k=this,S=n.tinymce?n.tinymce.activeEditor:o.activeEditor,T=S.settings,E=i.filetype;i.spellcheck=!1,(p=T.file_picker_types||T.file_browser_callback_types)&&(p=a.makeMap(p,/[, ]/)),p&&!p[E]||(!(m=T.file_picker_callback)||p&&!p[E]?!(m=T.file_browser_callback)||p&&!p[E]||(f=function(){m(k.getEl("inp").id,k.value(),E,n)}):f=function(){var e=k.fire("beforecall").meta;e=a.extend({filetype:E},e),m.call(S,function(e,t){k.value(e).fire("change",{meta:t})},k.value(),e)}),f&&(i.icon="browse",i.onaction=f),k._super(i),y=k,b=T,x=S.getBody(),C=E,w=function(n){var o,i,f,m,p,h,g,v,w,k,S,T=r.find(x),E=(o=n,i=T,f=C,w={title:"-"},k=function(n){var r=n.hasOwnProperty(f)?n[f]:[],o=e.filter(r,function(t){return n=t,!e.exists(i,function(e){return e.url===n});var n});return a.map(o,function(e){return{title:e,value:{title:e,url:e,attach:t.noop}}})},S=function(t){var n=e.filter(i,function(e){return e.type===t});return a.map(n,c)},!1===(m=b).typeahead_urls?[]:"file"===f?(p=[d(o,k(s)),d(o,S("header")),d(o,(h=S("anchor"),g=l(m,"anchor_top","#top"),v=l(m,"anchor_bottom","#bottom"),null!==g&&h.unshift(u("<top>",g)),null!==v&&h.push(u("<bottom>",v)),h))],e.foldl(p,function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(w,t)},[])):d(o,k(s)));y.showAutoComplete(E,n)},y.on("autocomplete",function(){w(y.value())}),y.on("selectitem",function(e){var t=e.value;y.value(t.url);var n,r=(n=t.title).raw?n.raw:n;y.fire("change","image"===C?{meta:{alt:r,attach:t.attach}}:{meta:{text:r,attach:t.attach}}),y.focus()}),y.on("click",function(e){0===y.value().length&&"INPUT"===e.target.nodeName&&w("")}),y.on("PostRender",function(){y.getRoot().on("submit",function(t){var n,r,o;t.isDefaultPrevented()||(n=y.value(),o=s[r=C],/^https?/.test(n)&&(o?-1===e.indexOf(o,n)&&(s[r]=o.slice(0,5).concat(n)):s[r]=[n]))})}),h=k,g=E,(v=T.filepicker_validator_handler)&&h.state.on("change:value",function(e){var t;0!==(t=e.value).length?v({url:t,type:g},function(e){var t,n,r,o=(r=(t=e).message,"valid"===(n=t.status)?{status:"ok",message:r}:"unknown"===n?{status:"warn",message:r}:"invalid"===n?{status:"warn",message:r}:{status:"none",message:""});h.statusMessage(o.message),h.statusLevel(o.status)}):h.statusLevel("none")})}})}),n("tinymce.ui.FitLayout",["tinymce.ui.AbsoluteLayout"],function(e){"use strict";return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),n("tinymce.ui.FlexLayout",["tinymce.ui.AbsoluteLayout"],function(e){"use strict";return e.extend({recalc:function(e){var t,n,r,o,i,a,s,c,u,l,d,f,m,p,h,g,v,y,b,x,C,w,k,S,T,E,R,N,A,D,P,B,_,O,F,M,I,L=[],H=Math.max,W=Math.min;for(r=e.items().filter(":visible"),o=e.layoutRect(),i=e.paddingBox,a=e.settings,f=e.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,c=e.isRtl()?a.pack||"end":a.pack,u=a.spacing||0,"row-reversed"!=f&&"column-reverse"!=f||(r=r.set(r.toArray().reverse()),f=f.split("-")[0]),"column"==f?(S="y",w="h",k="minH",T="maxH",R="innerH",E="top",N="deltaH",A="contentH",O="left",B="w",D="x",P="innerW",_="minW",F="right",M="deltaW",I="contentW"):(S="x",w="w",k="minW",T="maxW",R="innerW",E="left",N="deltaW",A="contentW",O="top",B="h",D="y",P="innerH",_="minH",F="bottom",M="deltaH",I="contentH"),d=o[R]-i[E]-i[E],C=l=0,t=0,n=r.length;t<n;t++)p=(m=r[t]).layoutRect(),h=m.settings.flex,d-=t<n-1?u:0,h>0&&(l+=h,p[T]&&L.push(m),p.flex=h),d-=p[k],(g=i[O]+p[_]+i[F])>C&&(C=g);if((b={})[k]=d<0?o[k]-d+o[N]:o[R]-d+o[N],b[_]=C+o[M],b[A]=o[R]-d,b[I]=C,b.minW=W(b.minW,o.maxW),b.minH=W(b.minH,o.maxH),b.minW=H(b.minW,o.startMinWidth),b.minH=H(b.minH,o.startMinHeight),!o.autoResize||b.minW==o.minW&&b.minH==o.minH){for(y=d/l,t=0,n=L.length;t<n;t++)(g=(p=(m=L[t]).layoutRect())[k]+p.flex*y)>(v=p[T])?(d-=p[T]-p[k],l-=p.flex,p.flex=0,p.maxFlexSize=v):p.maxFlexSize=0;for(y=d/l,x=i[E],b={},0===l&&("end"==c?x=d+i[E]:"center"==c?(x=Math.round(o[R]/2-(o[R]-d)/2)+i[E])<0&&(x=i[E]):"justify"==c&&(x=i[E],u=Math.floor(d/(r.length-1)))),b[D]=i[O],t=0,n=r.length;t<n;t++)g=(p=(m=r[t]).layoutRect()).maxFlexSize||p[k],"center"===s?b[D]=Math.round(o[P]/2-p[B]/2):"stretch"===s?(b[B]=H(p[_]||0,o[P]-i[O]-i[F]),b[D]=i[O]):"end"===s&&(b[D]=o[P]-p[B]-i.top),p.flex>0&&(g+=p.flex*y),b[w]=g,b[S]=x,m.layoutRect(b),m.recalc&&m.recalc(),x+=g+u}else if(b.w=b.minW,b.h=b.minH,e.layoutRect(b),this.recalc(e),null===e._lastRect){var U=e.parent();U&&(U._lastRect=null,U.recalc())}}})}),n("tinymce.ui.FlowLayout",["tinymce.ui.Layout"],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}})}),n("ephox.sugar.impl.ClosestOrAncestor",["ephox.katamari.api.Type","ephox.katamari.api.Option"],function(e,t){return function(n,r,o,i,a){return n(o,i)?t.some(o):e.isFunction(a)&&a(o)?t.none():r(o,i,a)}}),n("ephox.sugar.api.search.PredicateFind",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Body","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n,r,o,i,a,s){var c=function(t,o,i){for(var s=t.dom(),c=e.isFunction(i)?i:n.constant(!1);s.parentNode;){var u=a.fromDom(s=s.parentNode);if(o(u))return r.some(u);if(c(u))break}return r.none()},u=function(e,r){return t.find(e.dom().childNodes,n.compose(r,a.fromDom)).map(a.fromDom)},l=function(e,t){var n=function(e){for(var o=0;o<e.childNodes.length;o++){if(t(a.fromDom(e.childNodes[o])))return r.some(a.fromDom(e.childNodes[o]));var i=n(e.childNodes[o]);if(i.isSome())return i}return r.none()};return n(e.dom())};return{first:function(e){return l(o.body(),e)},ancestor:c,closest:function(e,t,n){return s(function(e){return t(e)},c,e,t,n)},sibling:function(e,t){var n=e.dom();return n.parentNode?u(a.fromDom(n.parentNode),function(n){return!i.eq(e,n)&&t(n)}):r.none()},child:u,descendant:l}}),n("ephox.sugar.api.search.SelectorFind",["ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n){var r=function(n,r,o){return e.ancestor(n,function(e){return t.is(e,r)},o)};return{first:function(e){return t.one(e)},ancestor:r,sibling:function(n,r){return e.sibling(n,function(e){return t.is(e,r)})},child:function(n,r){return e.child(n,function(e){return t.is(e,r)})},descendant:function(e,n){return t.one(n,e)},closest:function(e,o,i){return n(t.is,r,e,o,i)}}}),n("tinymce.ui.editorui.FormatUtils",[],function(){return{toggleFormat:function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},postRenderFormat:function(e,t){return function(){var n=this;e.formatter?e.formatter.formatChanged(t,function(e){n.active(e)}):e.on("init",function(){e.formatter.formatChanged(t,function(e){n.active(e)})})}}}}),n("tinymce.ui.editorui.Align",["tinymce.core.util.Tools","tinymce.ui.editorui.FormatUtils"],function(e,t){return{register:function(n){n.addMenuItem("align",{text:"Align",menu:[{text:"Left",icon:"alignleft",onclick:t.toggleFormat(n,"alignleft")},{text:"Center",icon:"aligncenter",onclick:t.toggleFormat(n,"aligncenter")},{text:"Right",icon:"alignright",onclick:t.toggleFormat(n,"alignright")},{text:"Justify",icon:"alignjustify",onclick:t.toggleFormat(n,"alignjustify")}]}),e.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(e,r){n.addButton(r,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:t.postRenderFormat(n,r)})})}}}),n("tinymce.ui.fmt.FontInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","tinymce.core.dom.DOMUtils"],function(e,t,n,r,o){var i=function(e){return function(i,a){return t.from(a).map(n.fromDom).filter(r.isElement).bind(function(n){return function(e,n,r){for(;r!==n;){if(r.style[e]){var o=r.style[e];return""!==o?t.some(o):t.none()}r=r.parentNode}return t.none()}(e,i,n.dom()).or((r=e,a=n.dom(),t.from(o.DOM.getStyle(a,r,!0))));var r,a}).getOr("")}};return{getFontSize:i("fontSize"),getFontFamily:e.compose(function(e){return e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")},i("fontFamily")),toPt:function(e,t){return/[0-9.]+px$/.test(e)?(n=72*parseInt(e,10)/96,r=Math.pow(10,t||0),Math.round(n*r)/r+"pt"):e;var n,r}}}),n("tinymce.ui.editorui.FontSelect",["tinymce.core.util.Tools","tinymce.ui.fmt.FontInfo"],function(e,t){var n=function(e){return e?e.split(",")[0]:""};return{register:function(r){var o;(o=r).addButton("fontselect",function(){var r,i,a,s=(r=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(o.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"),e.map(r,function(e){return{text:{raw:e[0]},value:e[1],textStyle:-1===e[1].indexOf("dings")?"font-family:"+e[1]:""}}));return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:s,fixedWidth:!0,onPostRender:(i=o,a=s,function(){var r=this;i.on("init nodeChange",function(o){var s,c,u,l=t.getFontFamily(i.getBody(),o.element),d=(c=l,e.each(s=a,function(e){e.value.toLowerCase()===c.toLowerCase()&&(u=e.value)}),e.each(s,function(e){u||n(e.value).toLowerCase()!==n(c).toLowerCase()||(u=e.value)}),u);r.value(d||null),!d&&l&&r.text(n(l))})}),onselect:function(e){e.control.settings.value&&o.execCommand("FontName",!1,e.control.settings.value)}}})}}}),n("tinymce.ui.editorui.FontSizeSelect",["tinymce.core.util.Tools","tinymce.ui.fmt.FontInfo"],function(e,t){var n=function(t,n,r){var o;return e.each(t,function(e){e.value===r?o=r:e.value===n&&(o=n)}),o};return{register:function(r){var o;(o=r).addButton("fontsizeselect",function(){var r,i,a=e.map((o.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt").split(" "),function(e){var t=e,n=e,r=e.split("=");return r.length>1&&(t=r[0],n=r[1]),{text:t,value:n}});return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:a,fixedWidth:!0,onPostRender:(r=o,i=a,function(){var e=this;r.on("init nodeChange",function(o){var a,s,c,u;if(a=t.getFontSize(r.getBody(),o.element))for(c=3;!u&&c>=0;c--)s=t.toPt(a,c),u=n(i,s,a);e.value(u||null),u||e.text(s)})}),onclick:function(e){e.control.settings.value&&o.execCommand("FontSize",!1,e.control.settings.value)}}})}}}),n("tinymce.ui.editorui.FormatSelect",["tinymce.core.util.Tools","tinymce.ui.editorui.FormatUtils"],function(e,t){return{register:function(n){var r,o,i,a,s=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(n.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");n.addMenuItem("blockformats",{text:"Blocks",menu:(r=n,o=s,e.map(o,function(e){return{text:e[0],onclick:t.toggleFormat(r,e[1]),textStyle:function(){return r.formatter.getCssText(e[1])}}}))}),n.addButton("formatselect",(i=n,a=s,function(){var n,r,o=[];return e.each(a,function(e){o.push({text:e[0],value:e[1],textStyle:function(){return i.formatter.getCssText(e[1])}})}),{type:"listbox",text:a[0][0],values:o,fixedWidth:!0,onselect:function(e){if(e.control){var n=e.control.value();t.toggleFormat(i,n)()}},onPostRender:(n=i,r=o,function(){var t=this;n.on("nodeChange",function(o){var i=n.formatter,a=null;e.each(o.parents,function(t){if(e.each(r,function(e){if(i.matchNode(t,e.value)&&(a=e.value),a)return!1}),a)return!1}),t.value(a)})})}}))}}}),n("tinymce.ui.editorui.Formats",["tinymce.core.util.Tools","tinymce.ui.editorui.FormatUtils"],function(e,t){var n=function(t,r){var o=r.length;return e.each(r,function(e){e.menu&&(e.hidden=0===n(t,e.menu));var r=e.format;r&&(e.hidden=!t.formatter.canApply(r)),e.hidden&&o--}),o},r=function(e,t){var o=t.items().length;return t.items().each(function(t){t.menu&&t.visible(r(e,t.menu)>0),!t.menu&&t.settings.menu&&t.visible(n(e,t.settings.menu)>0);var i=t.settings.format;i&&t.visible(e.formatter.canApply(i)),t.visible()||o--}),o};return{register:function(n){var o,i,a,s,c,u,l=(i=0,a=[],s=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],c=function(t){var n=[];if(t)return e.each(t,function(e){var t={text:e.title,icon:e.icon};if(e.items)t.menu=c(e.items);else{var r=e.format||"custom"+i++;e.format||(e.name=r,a.push(e)),t.format=r,t.cmd=e.cmd}n.push(t)}),n},(o=n).on("init",function(){e.each(a,function(e){o.formatter.register(e.name,e)})}),{type:"menu",items:c(o.settings.style_formats_merge?o.settings.style_formats?s.concat(o.settings.style_formats):s:o.settings.style_formats||s),onPostRender:function(e){o.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return o.formatter.getCssText(this.settings.format)},onPostRender:function(){var e=this;e.parent().on("show",function(){var t,n;(t=e.settings.format)&&(e.disabled(!o.formatter.canApply(t)),e.active(o.formatter.match(t))),(n=e.settings.cmd)&&e.active(o.queryCommandState(n))})},onclick:function(){this.settings.format&&t.toggleFormat(o,this.settings.format)(),this.settings.cmd&&o.execCommand(this.settings.cmd)}}});n.addMenuItem("formats",{text:"Formats",menu:l}),(u=n).addButton("styleselect",{type:"menubutton",text:"Formats",menu:l,onShowMenu:function(){u.settings.style_formats_autohide&&r(u,this.menu)}})}}}),n("tinymce.ui.editorui.InsertButton",["ephox.katamari.api.Arr","tinymce.core.util.Tools"],function(e,t){var n=function(r,o){var i,a;if("string"==typeof o)a=o.split(" ");else if(t.isArray(o))return e.flatten(t.map(o,function(e){return n(r,e)}));return i=t.grep(a,function(e){return"|"===e||e in r.menuItems}),t.map(i,function(e){return"|"===e?{text:"-"}:r.menuItems[e]})},r=function(e){return e&&"-"===e.text};return{register:function(o){var i;(i=o).addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){var o,a,s,c,u,l,d;this.menu.add((u=(d=(o=i).settings.insert_button_items)?n(o,d):(a="insert",s=[{text:"-"}],c=t.grep(o.menuItems,function(e){return e.context===a}),t.each(c,function(e){"before"===e.separator&&s.push({text:"|"}),e.prependToContext?s.unshift(e):s.push(e),"after"===e.separator&&s.push({text:"|"})}),s),l=e.filter(u,function(e,t,n){return!r(e)||!r(n[t-1])}),e.filter(l,function(e,t,n){return!r(e)||t>0&&t<n.length-1}))),this.menu.renderNew()}})}}}),n("tinymce.ui.editorui.SimpleControls",["tinymce.core.util.Tools","tinymce.ui.editorui.FormatUtils"],function(e,t){return{register:function(n){var r,o,i,a,s;i=o=n,e.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(e,n){i.addButton(n,{active:!1,tooltip:e,onPostRender:t.postRenderFormat(i,n),onclick:t.toggleFormat(i,n)})}),a=o,e.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(e,t){a.addButton(t,{tooltip:e[0],cmd:e[1]})}),s=o,e.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(e,n){s.addButton(n,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:t.postRenderFormat(s,n)})}),r=n,e.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(e,t){r.addMenuItem(t,{text:e[0],icon:t,shortcut:e[2],cmd:e[1]})}),r.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:t.toggleFormat(r,"code")})}}}),n("tinymce.ui.editorui.UndoRedo",[],function(){var e=function(e,t){return function(){var n=this,r=function(){return!!e.undoManager&&e.undoManager["redo"===t?"hasRedo":"hasUndo"]()};n.disabled(!r()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){n.disabled(e.readonly||!r())})}};return{register:function(t){var n,r;(n=t).addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:e(n,"undo"),cmd:"undo"}),n.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:e(n,"redo"),cmd:"redo"}),(r=t).addButton("undo",{tooltip:"Undo",onPostRender:e(r,"undo"),cmd:"undo"}),r.addButton("redo",{tooltip:"Redo",onPostRender:e(r,"redo"),cmd:"redo"})}}}),n("tinymce.ui.editorui.VisualAid",[],function(){return{register:function(e){var t,n;(t=e).addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:(n=t,function(){var e=this;n.on("VisualAid",function(t){e.active(t.hasVisual)}),e.active(n.hasVisual)}),cmd:"mceToggleVisualAid"})}}}),n("tinymce.ui.FormatControls",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFind","global!document","tinymce.core.EditorManager","tinymce.core.Env","tinymce.ui.Control","tinymce.ui.FloatPanel","tinymce.ui.Widget","tinymce.ui.editorui.Align","tinymce.ui.editorui.FontSelect","tinymce.ui.editorui.FontSizeSelect","tinymce.ui.editorui.FormatSelect","tinymce.ui.editorui.Formats","tinymce.ui.editorui.InsertButton","tinymce.ui.editorui.SimpleControls","tinymce.ui.editorui.UndoRedo","tinymce.ui.editorui.VisualAid"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p,h,g,v){return{setup:function(y){var b;y.rtl&&(a.rtl=!0),y.on("mousedown",function(){s.hideAll()}),(b=y).settings.ui_container&&(i.container=n.descendant(t.fromDom(r.body),b.settings.ui_container).fold(e.constant(null),function(e){return e.dom()})),c.tooltips=!i.iOS,a.translate=function(e){return o.translate(e)},f.register(y),u.register(y),h.register(y),g.register(y),d.register(y),l.register(y),m.register(y),v.register(y),p.register(y)}}}),n("tinymce.ui.GridLayout",["tinymce.ui.AbsoluteLayout"],function(e){"use strict";return e.extend({recalc:function(e){var t,n,r,o,i,a,s,c,u,l,d,f,m,p,h,g,v,y,b,x,C,w,k,S,T,E,R,N,A=[],D=[];t=e.settings,o=e.items().filter(":visible"),i=e.layoutRect(),r=t.columns||Math.ceil(Math.sqrt(o.length)),n=Math.ceil(o.length/r),y=t.spacingH||t.spacing||0,b=t.spacingV||t.spacing||0,x=t.alignH||t.align,C=t.alignV||t.align,g=e.paddingBox,N="reverseRows"in t?t.reverseRows:e.isRtl(),x&&"string"==typeof x&&(x=[x]),C&&"string"==typeof C&&(C=[C]);for(d=0;d<r;d++)A.push(0);for(f=0;f<n;f++)D.push(0);for(f=0;f<n;f++)for(d=0;d<r&&(l=o[f*r+d]);d++)T=(u=l.layoutRect()).minH,A[d]=(S=u.minW)>A[d]?S:A[d],D[f]=T>D[f]?T:D[f];for(E=i.innerW-g.left-g.right,w=0,d=0;d<r;d++)w+=A[d]+(d>0?y:0),E-=(d>0?y:0)+A[d];for(R=i.innerH-g.top-g.bottom,k=0,f=0;f<n;f++)k+=D[f]+(f>0?b:0),R-=(f>0?b:0)+D[f];if(k+=g.top+g.bottom,(c={}).minW=(w+=g.left+g.right)+(i.w-i.innerW),c.minH=k+(i.h-i.innerH),c.contentW=c.minW-i.deltaW,c.contentH=c.minH-i.deltaH,c.minW=Math.min(c.minW,i.maxW),c.minH=Math.min(c.minH,i.maxH),c.minW=Math.max(c.minW,i.startMinWidth),c.minH=Math.max(c.minH,i.startMinHeight),!i.autoResize||c.minW==i.minW&&c.minH==i.minH){var P;i.autoResize&&((c=e.layoutRect(c)).contentW=c.minW-i.deltaW,c.contentH=c.minH-i.deltaH),P="start"==t.packV?0:R>0?Math.floor(R/n):0;var B=0,_=t.flexWidths;if(_)for(d=0;d<_.length;d++)B+=_[d];else B=r;var O=E/B;for(d=0;d<r;d++)A[d]+=_?_[d]*O:O;for(p=g.top,f=0;f<n;f++){for(m=g.left,s=D[f]+P,d=0;d<r&&(l=o[N?f*r+r-1-d:f*r+d]);d++)h=l.settings,u=l.layoutRect(),a=Math.max(A[d],u.startMinWidth),u.x=m,u.y=p,"center"==(v=h.alignH||(x?x[d]||x[0]:null))?u.x=m+a/2-u.w/2:"right"==v?u.x=m+a-u.w:"stretch"==v&&(u.w=a),"center"==(v=h.alignV||(C?C[d]||C[0]:null))?u.y=p+s/2-u.h/2:"bottom"==v?u.y=p+s-u.h:"stretch"==v&&(u.h=s),l.layoutRect(u),m+=a+y,l.recalc&&l.recalc();p+=s+b}}else if(c.w=c.minW,c.h=c.minH,e.layoutRect(c),this.recalc(e),null===e._lastRect){var F=e.parent();F&&(F._lastRect=null,F.recalc())}}})}),n("tinymce.ui.Iframe",["tinymce.ui.Widget","tinymce.core.util.Delay"],function(e,t){"use strict";return e.extend({renderHtml:function(){return this.classes.add("iframe"),this.canFocus=!1,'<iframe id="'+this._id+'" class="'+this.classes+'" tabindex="-1" src="'+(this.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,n){var r=this,o=this.getEl().contentWindow.document.body;return o?(o.innerHTML=e,n&&n()):t.setTimeout(function(){r.html(e)}),this}})}),n("tinymce.ui.InfoBox",["tinymce.ui.Widget"],function(e){"use strict";return e.extend({init:function(e){this._super(e),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+this.encode(this.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+e+"ico "+e+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e.state.on("change:help",function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}})}),n("tinymce.ui.Label",["tinymce.ui.Widget","tinymce.ui.DomUtils"],function(e,t){"use strict";return e.extend({init:function(e){this._super(e),this.classes.add("widget").add("label"),this.canFocus=!1,e.multiline&&this.classes.add("autoscroll"),e.strong&&this.classes.add("strong")},initLayoutRect:function(){var e=this._super();return this.settings.multiline&&(t.getSize(this.getEl()).width>e.maxW&&(e.minW=e.maxW,this.classes.add("multiline")),this.getEl().style.width=e.minW+"px",e.startMinH=e.h=e.minH=Math.min(e.maxH,t.getSize(this.getEl()).height)),e},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t,n=this,r=n.settings.forId,o=n.settings.html?n.settings.html:n.encode(n.state.get("text"));return!r&&(t=n.settings.forName)&&(e=n.getRoot().find("#"+t)[0])&&(r=e._id),r?'<label id="'+n._id+'" class="'+n.classes+'"'+(r?' for="'+r+'"':"")+">"+o+"</label>":'<span id="'+n._id+'" class="'+n.classes+'">'+o+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}})}),n("tinymce.ui.Toolbar",["tinymce.ui.Container"],function(e){"use strict";return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){this._super(e),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(e){e.classes.add("toolbar-item")}),this._super()}})}),n("tinymce.ui.MenuBar",["tinymce.ui.Toolbar"],function(e){"use strict";return e.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}),n("tinymce.ui.MenuButton",["global!window","tinymce.core.ui.Factory","tinymce.ui.Button","tinymce.ui.MenuBar"],function(e,t,n,r){"use strict";var o=n.extend({init:function(e){this._renderOpen=!0,this._super(e),e=this.settings,this.classes.add("menubtn"),e.fixedWidth&&this.classes.add("fixed-width"),this.aria("haspopup",!0),this.state.set("menu",e.menu||this.render())},showMenu:function(e){var n,r=this;if(r.menu&&r.menu.visible()&&!1!==e)return r.hideMenu();r.menu||(n=r.state.get("menu")||[],r.classes.add("opened"),n.length?n={type:"menu",animate:!0,items:n}:(n.type=n.type||"menu",n.animate=!0),r.menu=n.renderTo?n.parent(r).show().renderTo():t.create(n).parent(r).renderTo(),r.fire("createmenu"),r.menu.reflow(),r.menu.on("cancel",function(e){e.control.parent()===r.menu&&(e.stopPropagation(),r.focus(),r.hideMenu())}),r.menu.on("select",function(){r.focus()}),r.menu.on("show hide",function(e){e.control===r.menu&&(r.activeMenu("show"==e.type),r.classes.toggle("opened","show"==e.type)),r.aria("expanded","show"==e.type)}).fire("show")),r.menu.show(),r.menu.layoutRect({w:r.layoutRect().w}),r.menu.moveRel(r.getEl(),r.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),r.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),this.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var t,n=this,o=n._id,i=n.classPrefix,a=n.settings.icon,s=n.state.get("text"),c="";return(t=n.settings.image)?(a="none","string"!=typeof t&&(t=e.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",s&&(n.classes.add("btn-has-text"),c='<span class="'+i+'txt">'+n.encode(s)+"</span>"),a=n.settings.icon?i+"ico "+i+"i-"+a:"",n.aria("role",n.parent()instanceof r?"menuitem":"button"),'<div id="'+o+'" class="'+n.classes+'" tabindex="-1" aria-labelledby="'+o+'"><button id="'+o+'-open" role="presentation" type="button" tabindex="-1">'+(a?'<i class="'+a+'"'+t+"></i>":"")+c+' <i class="'+i+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}(t.target,e.getEl())&&(e.focus(),e.showMenu(!t.aria),t.aria&&e.menu.items().filter(":visible")[0].focus())}),e.on("mouseenter",function(t){var n,r=t.control,i=e.parent();r&&i&&r instanceof o&&r.parent()==i&&(i.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=r&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())}),n&&(r.focus(),r.showMenu()))}),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}});return o}),n("tinymce.ui.MenuItem",["tinymce.ui.Widget","tinymce.core.ui.Factory","tinymce.core.Env","tinymce.core.util.Delay"],function(e,t,n,r){"use strict";return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t,n=this;n._super(e),e=n.settings,n.classes.add("menu-item"),e.menu&&n.classes.add("menu-item-expand"),e.preview&&n.classes.add("menu-item-preview"),"-"!==(t=n.state.get("text"))&&"|"!==t||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),e.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,n=this,r=n.settings,o=n.parent();if(o.items().each(function(e){e!==n&&e.hideMenu()}),r.menu){(e=n.menu)?e.show():((e=r.menu).length?e={type:"menu",animate:!0,items:e}:(e.type=e.type||"menu",e.animate=!0),o.settings.itemDefaults&&(e.itemDefaults=o.settings.itemDefaults),(e=n.menu=t.create(e).parent(n).renderTo()).reflow(),e.on("cancel",function(t){t.stopPropagation(),n.focus(),e.hide()}),e.on("show hide",function(e){e.control.items&&e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),e.on("hide",function(t){t.control===e&&n.classes.remove("selected")}),e.submenu=!0),e._parentMenu=o,e.classes.add("menu-sub");var i=e.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(n.getEl(),i),e.rel=i,i="menu-sub-"+i,e.classes.remove(e._lastRel).add(i),e._lastRel=i,n.classes.add("selected"),n.aria("expanded",!0)}},hideMenu:function(){return this.menu&&(this.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),this.menu.hide(),this.aria("expanded",!1)),this},renderHtml:function(){var e,t=this,r=t._id,o=t.settings,i=t.classPrefix,a=t.state.get("text"),s=t.settings.icon,c="",u=o.shortcut,l=t.encode(o.url);function d(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function f(e){var t=o.match||"";return t?e.replace(new RegExp(d(t),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):e}function m(e){return e.replace(new RegExp(d("!mce~match["),"g"),"<b>").replace(new RegExp(d("]mce~match!"),"g"),"</b>")}return s&&t.parent().classes.add("menu-has-icons"),o.image&&(c=" style=\"background-image: url('"+o.image+"')\""),u&&(u=function(e){var t,r,o;for(o=n.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),t=0;t<e.length;t++)(r=o[e[t].toLowerCase()])&&(e[t]=r);return e.join("+")}(u)),s=i+"ico "+i+"i-"+(t.settings.icon||"none"),e="-"!==a?'<i class="'+s+'"'+c+"></i>\xa0":"",a=m(t.encode(f(a))),l=m(t.encode(f(l))),'<div id="'+r+'" class="'+t.classes+'" tabindex="-1">'+e+("-"!==a?'<span id="'+r+'-text" class="'+i+'text">'+a+"</span>":"")+(u?'<div id="'+r+'-shortcut" class="'+i+'menu-shortcut">'+u+"</div>":"")+(o.menu?'<div class="'+i+'caret"></div>':"")+(l?'<div class="'+i+'menu-item-link">'+l+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var o=e.getEl("text");o&&(o.setAttribute("style",n),e._textStyle=n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),r.requestAnimationFrame(function(){e.parent().hideAll()})))}),e._super(),e},hover:function(){return this.parent().items().each(function(e){e.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(e){return function(e,t){var n=e._textStyle;if(n){var r=e.getEl("text");r.setAttribute("style",n),t&&(r.style.color="",r.style.backgroundColor="")}}(this,e),"undefined"!=typeof e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),n("tinymce.ui.Menu",["tinymce.core.Env","tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.ui.FloatPanel","tinymce.ui.MenuItem","tinymce.ui.Throbber"],function(e,t,n,r,o,i){"use strict";return r.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(t){if(t.autohide=!0,t.constrainToViewport=!0,"function"==typeof t.items&&(t.itemsFactory=t.items,t.items=[]),t.itemDefaults)for(var r=t.items,o=r.length;o--;)r[o]=n.extend({},t.itemDefaults,r[o]);this._super(t),this.classes.add("menu"),t.animate&&11!==e.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var e,t=this;function n(){t.throbber&&(t.throbber.hide(),t.throbber=null)}t.settings.itemsFactory&&(t.throbber||(t.throbber=new i(t.getEl("body"),!0),0===t.items().length?(t.throbber.show(),t.fire("loading")):t.throbber.show(100,function(){t.items().remove(),t.fire("loading")}),t.on("hide close",n)),t.requestTime=e=(new Date).getTime(),t.settings.itemsFactory(function(r){0!==r.length?t.requestTime===e&&(t.getEl().style.width="",t.getEl("body").style.width="",n(),t.items().remove(),t.getEl("body").innerHTML="",t.add(r),t.renderNew(),t.fire("loaded")):t.hide()}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;if(n.icon||n.image||n.selectable)return e._hasIcons=!0,!1}),e.settings.itemsFactory&&e.on("postrender",function(){e.settings.itemsFactory&&e.load()}),e.on("show hide",function(n){n.control===e&&("show"===n.type?t.setTimeout(function(){e.classes.add("in")},0):e.classes.remove("in"))}),e._super()}})}),n("tinymce.ui.ListBox",["tinymce.ui.MenuButton","tinymce.ui.Menu"],function(e,t){"use strict";return e.extend({init:function(e){var t,n,r,o,i=this;i._super(e),i._values=t=(e=i.settings).values,t&&("undefined"!=typeof e.value&&function t(o){for(var a=0;a<o.length;a++){if(n=o[a].selected||e.value===o[a].value)return r=r||o[a].text,i.state.set("value",o[a].value),!0;if(o[a].menu&&t(o[a].menu))return!0}}(t),!n&&t.length>0&&(r=t[0].text,i.state.set("value",t[0].value)),i.state.set("menu",t)),i.state.set("text",e.text||r),i.classes.add("listbox"),i.on("select",function(t){var n=t.control;o&&(t.lastControl=o),e.multiple?n.active(!n.active()):i.value(t.control.value()),o=n})},bindStates:function(){var e=this;return e.on("show",function(n){var r,o;r=n.control,o=e.value(),r instanceof t&&r.items().each(function(e){e.hasMenus()||e.active(e.value()===o)})}),e.state.on("change:value",function(t){var n=function e(t,n){var r;if(t)for(var o=0;o<t.length;o++){if(t[o].value===n)return t[o];if(t[o].menu&&(r=e(t[o].menu,n)))return r}}(e.state.get("menu"),t.value);e.text(n?n.text:e.settings.text)}),e._super()}})}),n("tinymce.ui.Radio",["tinymce.ui.Checkbox"],function(e){"use strict";return e.extend({Defaults:{classes:"radio",role:"radio"}})}),n("tinymce.ui.ResizeHandle",["tinymce.ui.Widget","tinymce.ui.DragHelper"],function(e,t){"use strict";return e.extend({renderHtml:function(){var e=this.classPrefix;return this.classes.add("resizehandle"),"both"==this.settings.direction&&this.classes.add("resizehandle-both"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"><i class="'+e+"ico "+e+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!=e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),n("tinymce.ui.SelectBox",["tinymce.ui.Widget"],function(e){"use strict";function t(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}return e.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options),t.on("keydown",function(e){var n;13==e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e,n="";return e=t(this._options),this.size&&(n=' size = "'+this.size+'"'),'<select id="'+this._id+'" class="'+this.classes+'"'+n+">"+e+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",function(n){e.getEl().innerHTML=t(n.value)}),e._super()}})}),n("tinymce.ui.Slider",["tinymce.ui.Widget","tinymce.ui.DragHelper","tinymce.ui.DomUtils"],function(e,t,n){"use strict";function r(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function o(e,t,n){e.setAttribute("aria-"+t,n)}function i(e,t){var r,i,a,s,c;"v"==e.settings.orientation?(s="top",a="height",i="h"):(s="left",a="width",i="w"),c=e.getEl("handle"),r=(e.layoutRect()[i]||100)-n.getSize(c)[a],c.style[s]=r*((t-e._minValue)/(e._maxValue-e._minValue))+"px",c.style.height=e.layoutRect().h+"px",o(c,"valuenow",t),o(c,"valuetext",""+e.settings.previewFilter(t)),o(c,"valuemin",e._minValue),o(c,"valuemax",e._maxValue)}return e.extend({init:function(e){e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),this._super(e),this.classes.add("slider"),"v"==e.orientation&&this.classes.add("vertical"),this._minValue=e.minValue||0,this._maxValue=e.maxValue||100,this._initValue=this.state.get("value")},renderHtml:function(){var e=this._id;return'<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-handle" class="'+this.classPrefix+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e,o,i,a,s,c,u,l,d,f,m,p,h,g,v=this;e=v._minValue,o=v._maxValue,"v"==v.settings.orientation?(i="screenY",a="top",s="height",c="h"):(i="screenX",a="left",s="width",c="w"),v._super(),function(e,t){function n(n){var o,i,a;o=r(o=(((o=v.value())+(a=e))/(t-a)+.05*n)*(t-(i=e))-i,e,t),v.value(o),v.fire("dragstart",{value:o}),v.fire("drag",{value:o}),v.fire("dragend",{value:o})}v.on("keydown",function(e){switch(e.keyCode){case 37:case 38:n(-1);break;case 39:case 40:n(1)}})}(e,o,v.getEl("handle")),u=e,l=o,d=v.getEl("handle"),v._dragHelper=new t(v._id,{handle:v._id+"-handle",start:function(e){f=e[i],m=parseInt(v.getEl("handle").style[a],10),p=(v.layoutRect()[c]||100)-n.getSize(d)[s],v.fire("dragstart",{value:g})},drag:function(e){h=r(m+(e[i]-f),0,p),d.style[a]=h+"px",v.value(g=u+h/p*(l-u)),v.tooltip().text(""+v.settings.previewFilter(g)).show().moveRel(d,"bc tc"),v.fire("drag",{value:g})},stop:function(){v.tooltip().hide(),v.fire("dragend",{value:g})}})},repaint:function(){this._super(),i(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",function(t){i(e,t.value)}),e._super()}})}),n("tinymce.ui.Spacer",["tinymce.ui.Widget"],function(e){"use strict";return e.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}})}),n("tinymce.ui.SplitButton",["global!window","tinymce.core.dom.DomQuery","tinymce.ui.DomUtils","tinymce.ui.MenuButton"],function(e,t,n,r){return r.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,r=this.getEl(),o=this.layoutRect();return this._super(),e=r.lastChild,t(r.firstChild).css({width:o.w-n.getSize(e).width,height:o.h-2}),t(e).css({height:o.h-2}),this},activeMenu:function(e){t(this.getEl().lastChild).toggleClass(this.classPrefix+"active",e)},renderHtml:function(){var t,n=this,r=n._id,o=n.classPrefix,i=n.state.get("icon"),a=n.state.get("text"),s=n.settings,c="";return(t=s.image)?(i="none","string"!=typeof t&&(t=e.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",i=s.icon?o+"ico "+o+"i-"+i:"",a&&(n.classes.add("btn-has-text"),c='<span class="'+o+'txt">'+n.encode(a)+"</span>"),'<div id="'+r+'" class="'+n.classes+'" role="button"'+("boolean"==typeof s.active?' aria-pressed="'+s.active+'"':"")+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"'+t+"></i>":"")+c+'</button><button type="button" class="'+o+'open" hidefocus="1" tabindex="-1">'+(n._menuBtnText?(i?"\xa0":"")+n._menuBtnText:"")+' <i class="'+o+'caret"></i></button></div>'},postRender:function(){var e=this.settings.onclick;return this.on("click",function(t){var n=t.target;if(t.control==this)for(;n;){if(t.aria&&"down"!=t.aria.key||"BUTTON"==n.nodeName&&-1==n.className.indexOf("open"))return t.stopImmediatePropagation(),void(e&&e.call(this,t));n=n.parentNode}}),delete this.settings.onclick,this._super()}})}),n("tinymce.ui.StackLayout",["tinymce.ui.FlowLayout"],function(e){"use strict";return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}})}),n("tinymce.ui.TabPanel",["tinymce.ui.Panel","tinymce.core.dom.DomQuery","tinymce.ui.DomUtils"],function(e,t,n){"use strict";return e.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var n;this.activeTabId&&(n=this.getEl(this.activeTabId),t(n).removeClass(this.classPrefix+"active"),n.setAttribute("aria-selected","false")),this.activeTabId="t"+e,(n=this.getEl("t"+e)).setAttribute("aria-selected","true"),t(n).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!=n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,o){var i=e._id+"-t"+o;t.aria("role","tabpanel"),t.aria("labelledby",i),n+='<div id="'+i+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+r+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(n&&n.id==e._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]==t.target&&e.activateTab(r)})},initLayoutRect:function(){var e,t,r;t=(t=n.getSize(this.getEl("head")).width)<0?0:t,r=0,this.items().each(function(e){t=Math.max(t,e.layoutRect().minW),r=Math.max(r,e.layoutRect().minH)}),this.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=t,e.settings.h=r,e.layoutRect({x:0,y:0,w:t,h:r})});var o=n.getSize(this.getEl("head")).height;return this.settings.minWidth=t,this.settings.minHeight=r+o,(e=this._super()).deltaH+=o,e.innerH=e.h-e.deltaH,e}})}),n("tinymce.ui.TextBox",["global!document","tinymce.core.util.Tools","tinymce.ui.DomUtils","tinymce.ui.Widget"],function(e,t,n,r){return r.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",function(e){var n;13==e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){t.state.set("value",e.target.value)}))},repaint:function(){var t,n,r,o,i,a=0;return t=this.getEl().style,n=this._layoutRect,i=this._lastRepaintRect||{},!this.settings.multiline&&e.all&&(!e.documentMode||e.documentMode<=8)&&(t.lineHeight=n.h-a+"px"),o=(r=this.borderBox).left+r.right+8,a=r.top+r.bottom+(this.settings.multiline?8:0),n.x!==i.x&&(t.left=n.x+"px",i.x=n.x),n.y!==i.y&&(t.top=n.y+"px",i.y=n.y),n.w!==i.w&&(t.width=n.w-o+"px",i.w=n.w),n.h!==i.h&&(t.height=n.h-a+"px",i.h=n.h),this._lastRepaintRect=i,this.fire("repaint",{},!1),this},renderHtml:function(){var e,r,o=this.settings;return e={id:this._id,hidefocus:"1"},t.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(t){e[t]=o[t]}),this.disabled()&&(e.disabled="disabled"),o.subtype&&(e.type=o.subtype),(r=n.create(o.multiline?"textarea":"input",e)).value=this.state.get("value"),r.className=this.classes,r.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)})},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.getEl().value!=t.value&&(e.getEl().value=t.value)}),e.state.on("change:disabled",function(t){e.getEl().disabled=t.value}),e._super()},remove:function(){this.$el.off(),this._super()}})}),n("tinymce.ui.Api",["tinymce.core.ui.Factory","tinymce.core.util.Tools","tinymce.ui.AbsoluteLayout","tinymce.ui.BrowseButton","tinymce.ui.Button","tinymce.ui.ButtonGroup","tinymce.ui.Checkbox","tinymce.ui.Collection","tinymce.ui.ColorBox","tinymce.ui.ColorButton","tinymce.ui.ColorPicker","tinymce.ui.ComboBox","tinymce.ui.Container","tinymce.ui.Control","tinymce.ui.DragHelper","tinymce.ui.DropZone","tinymce.ui.ElementPath","tinymce.ui.FieldSet","tinymce.ui.FilePicker","tinymce.ui.FitLayout","tinymce.ui.FlexLayout","tinymce.ui.FloatPanel","tinymce.ui.FlowLayout","tinymce.ui.Form","tinymce.ui.FormatControls","tinymce.ui.FormItem","tinymce.ui.GridLayout","tinymce.ui.Iframe","tinymce.ui.InfoBox","tinymce.ui.KeyboardNavigation","tinymce.ui.Label","tinymce.ui.Layout","tinymce.ui.ListBox","tinymce.ui.Menu","tinymce.ui.MenuBar","tinymce.ui.MenuButton","tinymce.ui.MenuItem","tinymce.ui.MessageBox","tinymce.ui.Movable","tinymce.ui.Notification","tinymce.ui.Panel","tinymce.ui.PanelButton","tinymce.ui.Path","tinymce.ui.Progress","tinymce.ui.Radio","tinymce.ui.ReflowQueue","tinymce.ui.Resizable","tinymce.ui.ResizeHandle","tinymce.ui.Scrollable","tinymce.ui.SelectBox","tinymce.ui.Selector","tinymce.ui.Slider","tinymce.ui.Spacer","tinymce.ui.SplitButton","tinymce.ui.StackLayout","tinymce.ui.TabPanel","tinymce.ui.TextBox","tinymce.ui.Throbber","tinymce.ui.Toolbar","tinymce.ui.Tooltip","tinymce.ui.Widget","tinymce.ui.Window"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p,h,g,v,y,b,x,C,w,k,S,T,E,R,N,A,D,P,B,_,O,F,M,I,L,H,W,U,z,q,V,j,$,K,G,X,Y,J,Z,Q,ee,te,ne,re,oe,ie,ae,se){var ce=function(){return{Selector:Y,Collection:s,ReflowQueue:j,Control:m,Factory:e,KeyboardNavigation:A,Container:f,DragHelper:p,Scrollable:G,Panel:W,Movable:L,Resizable:$,FloatPanel:C,Window:se,MessageBox:I,Tooltip:ie,Widget:ae,Progress:q,Notification:H,Layout:P,AbsoluteLayout:n,Button:o,ButtonGroup:i,Checkbox:a,ComboBox:d,ColorBox:c,PanelButton:U,ColorButton:u,ColorPicker:l,Path:z,ElementPath:g,FormItem:T,Form:k,FieldSet:v,FilePicker:y,FitLayout:b,FlexLayout:x,FlowLayout:w,FormatControls:S,GridLayout:E,Iframe:R,InfoBox:N,Label:D,Toolbar:oe,MenuBar:O,MenuButton:F,MenuItem:M,Throbber:re,Menu:_,ListBox:B,Radio:V,ResizeHandle:K,SelectBox:X,Slider:J,Spacer:Z,SplitButton:Q,StackLayout:ee,TabPanel:te,TextBox:ne,DropZone:h,BrowseButton:r}};return{appendTo:function(e){e.ui?t.each(ce(),function(t,n){e.ui[n]=t}):e.ui=ce()},registerToFactory:function(){t.each(ce(),function(t,n){e.add(n,t)})}}}),n("tinymce.themes.modern.Theme",["global!window","tinymce.core.ThemeManager","tinymce.themes.modern.api.ThemeApi","tinymce.ui.Api","tinymce.ui.FormatControls"],function(e,t,n,r,o){return r.registerToFactory(),r.appendTo(e.tinymce?e.tinymce:{}),t.add("modern",function(e){return o.setup(e),n.get(e)}),function(){}}),t("tinymce.themes.modern.Theme")()}(),function(){var e={},t=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&function(n){for(var r=e[n],o=r.deps,i=r.defn,a=o.length,s=new Array(a),c=0;c<a;++c)s[c]=t(o[c]);var u=i.apply(null,s);if(void 0===u)throw"module ["+n+"] returned undefined";r.instance=u}(n),r.instance},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(e,t){n(e,[],function(){return t})};r("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),n("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),n("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),n("tinymce.plugins.link.api.Settings",[],function(){var e=function(e){return e.target_list},t=function(e){return e.rel_list},n=function(e){return e.link_class_list};return{assumeExternalTargets:function(e){return"boolean"==typeof e.link_assume_external_targets&&e.link_assume_external_targets},hasContextToolbar:function(e){return"boolean"==typeof e.link_context_toolbar&&e.link_context_toolbar},getLinkList:function(e){return e.link_list},hasDefaultLinkTarget:function(e){return"string"==typeof e.default_link_target},getDefaultLinkTarget:function(e){return e.default_link_target},getTargetList:e,setTargetList:function(e,t){e.settings.target_list=t},shouldShowTargetList:function(t){return!1!==e(t)},getRelList:t,hasRelList:function(e){return void 0!==t(e)},getLinkClassList:n,hasLinkClassList:function(e){return void 0!==n(e)},shouldShowLinkTitle:function(e){return!1!==e.link_title},allowUnsafeLinkTarget:function(e){return"boolean"==typeof e.allow_unsafe_link_target&&e.allow_unsafe_link_target}}}),r("global!document",document),r("global!window",window),n("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),n("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),n("tinymce.plugins.link.core.OpenUrl",["global!document","global!window","tinymce.core.dom.DOMUtils","tinymce.core.Env"],function(e,t,n,r){return{open:function(o){if(!r.ie||r.ie>10){var i=e.createElement("a");i.target="_blank",i.href=o,i.rel="noreferrer noopener";var a=e.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,null),l=a,e.body.appendChild(u=i),u.dispatchEvent(l),e.body.removeChild(u)}else{var s=t.open("","_blank");if(s){s.opener=null;var c=s.document;c.open(),c.write('<meta http-equiv="refresh" content="0; url='+n.DOM.encode(o)+'">'),c.close()}}var u,l}}}),r("global!RegExp",RegExp),n("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),n("tinymce.plugins.link.core.Utils",["global!RegExp","tinymce.core.util.Tools","tinymce.plugins.link.api.Settings"],function(e,t,n){var r=function(e,n){var r,o=["noopener"],i=e?e.split(/\s+/):[],a=function(e){return e.filter(function(e){return-1===t.inArray(o,e)})};return(i=n?(r=a(r=i)).length?r.concat(o):o:a(i)).length?t.trim(i.sort().join(" ")):null},o=function(e,t){return t=t||e.selection.getNode(),a(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},i=function(e){return e&&"A"===e.nodeName&&e.href},a=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)};return{link:function(e,t){return function(i){e.undoManager.transact(function(){var s,c,u,l,d=e.selection.getNode(),f=o(e,d),m={href:i.href,target:i.target?i.target:null,rel:i.rel?i.rel:null,class:i.class?i.class:null,title:i.title?i.title:null};n.hasRelList(e.settings)||!1!==n.allowUnsafeLinkTarget(e.settings)||(m.rel=r(m.rel,"_blank"===m.target)),i.href===t.href&&(t.attach(),t={}),f?(e.focus(),i.hasOwnProperty("text")&&("innerText"in f?f.innerText=i.text:f.textContent=i.text),e.dom.setAttribs(f,m),e.selection.select(f),e.undoManager.add()):a(d)?(c=m,(l=(s=e).dom.select("img",d)[0])&&(u=s.dom.create("a",c),l.parentNode.insertBefore(u,l),u.appendChild(l))):i.hasOwnProperty("text")?e.insertContent(e.dom.createHTML("a",m,e.dom.encode(i.text))):e.execCommand("mceInsertLink",!1,m)})}},unlink:function(e){return function(){e.undoManager.transact(function(){var t,n,r,o,i=e.selection.getNode();a(i)?(o=(t=e).dom.select("img",n=i)[0])&&(r=t.dom.getParents(o,"a[href]",n)[0])&&(r.parentNode.insertBefore(o,r),t.dom.remove(r)):e.execCommand("unlink")})}},isLink:i,hasLinks:function(e){return t.grep(e,i).length>0},isOnlyTextSelected:function(e){return!(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||-1===e.indexOf("href=")))},getAnchorElement:o,getAnchorText:function(e,t){return(t?t.innerText||t.textContent:e.getContent({format:"text"})).replace(/\uFEFF/g,"")},toggleTargetRules:r}}),n("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),n("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.XHR")}),n("tinymce.plugins.link.ui.Dialog",["tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.XHR","tinymce.plugins.link.api.Settings","tinymce.plugins.link.core.Utils"],function(e,t,n,r,o){var i={},a=function(e,n,r){var o=function(e,r){return r=r||[],t.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=o(e.menu):(t.value=e.value,n&&n(t)),r.push(t)}),r};return o(e,r||[])},s=function(t,n,r){var o=t.selection.getRng();e.setEditorTimeout(t,function(){t.windowManager.confirm(n,function(e){t.selection.setRng(o),r(e)})})},c=function(e,n){var c,u,l,d,f,m,p,h,g,v,y,b={},x=e.dom,C=function(e){var t=l.find("#text");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),l.find("#href").value(e.control.value())},w=function(){u||!d||b.text||this.parent().parent().find("#text")[0].value(this.value())};d=o.isOnlyTextSelected(e.selection.getContent()),c=o.getAnchorElement(e),b.text=u=o.getAnchorText(e.selection,c),b.href=c?x.getAttrib(c,"href"):"",c?b.target=x.getAttrib(c,"target"):r.hasDefaultLinkTarget(e.settings)&&(b.target=r.getDefaultLinkTarget(e.settings)),(y=x.getAttrib(c,"rel"))&&(b.rel=y),(y=x.getAttrib(c,"class"))&&(b.class=y),(y=x.getAttrib(c,"title"))&&(b.title=y),d&&(f={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){b.text=this.value()}}),n&&(m={type:"listbox",label:"Link list",values:a(n,function(t){t.value=e.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:C,value:e.convertURL(b.href,"href"),onPostRender:function(){m=this}}),r.shouldShowTargetList(e.settings)&&(void 0===r.getTargetList(e.settings)&&r.setTargetList(e,[{text:"None",value:""},{text:"New window",value:"_blank"}]),h={name:"target",type:"listbox",label:"Target",values:a(r.getTargetList(e.settings))}),r.hasRelList(e.settings)&&(p={name:"rel",type:"listbox",label:"Rel",values:a(r.getRelList(e.settings),function(t){!1===r.allowUnsafeLinkTarget(e.settings)&&(t.value=o.toggleTargetRules(t.value,"_blank"===b.target))})}),r.hasLinkClassList(e.settings)&&(g={name:"class",type:"listbox",label:"Class",values:a(r.getLinkClassList(e.settings),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})})})}),r.shouldShowLinkTitle(e.settings)&&(v={name:"title",type:"textbox",label:"Title",value:b.title}),l=e.windowManager.open({title:"Insert link",data:b,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(n){var r=n.meta||{};m&&m.value(e.convertURL(this.value(),"href")),t.each(n.meta,function(e,t){var n=l.find("#"+t);"text"===t?0===u.length&&(n.value(e),b.text=e):n.value(e)}),r.attach&&(i={href:this.value(),attach:r.attach}),r.text||w.call(this)},onkeyup:w,onbeforecall:function(e){e.meta=l.toJSON()}},f,v,function(n){var r=[];if(t.each(e.dom.select("a:not([href])"),function(e){var t=e.name||e.id;t&&r.push({text:t,value:"#"+t,selected:-1!==n.indexOf("#"+t)})}),r.length)return r.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:r,onselect:C}}(b.href),m,p,h,g],onSubmit:function(n){var a=r.assumeExternalTargets(e.settings),c=o.link(e,i),l=o.unlink(e),f=t.extend({},b,n.data),m=f.href;m?(d&&f.text!==u||delete f.text,m.indexOf("@")>0&&-1===m.indexOf("//")&&-1===m.indexOf("mailto:")?s(e,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(f.href="mailto:"+m),c(f)}):!0===a&&!/^\w+:/i.test(m)||!1===a&&/^\s*www[\.|\d\.]/i.test(m)?s(e,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(f.href="http://"+m),c(f)}):c(f)):l()}})};return{open:function(e){var t,o,i;o=c,"string"==typeof(i=r.getLinkList((t=e).settings))?n.send({url:i,success:function(e){o(t,JSON.parse(e))}}):"function"==typeof i?i(function(e){o(t,e)}):o(t,i)}}}),n("tinymce.plugins.link.core.Actions",["tinymce.core.util.VK","tinymce.plugins.link.api.Settings","tinymce.plugins.link.core.OpenUrl","tinymce.plugins.link.core.Utils","tinymce.plugins.link.ui.Dialog"],function(e,t,n,r,o){var i=function(e,t){return e.dom.getParent(t,"a[href]")},a=function(e){return i(e,e.selection.getStart())},s=function(e,t){if(t){var r=(i=t).getAttribute("data-mce-href")||i.getAttribute("href");if(/^#/.test(r)){var o=e.$(r);o.length&&e.selection.scrollIntoView(o[0],!0)}else n.open(t.href)}var i};return{openDialog:function(e){return function(){o.open(e)}},gotoSelectedLink:function(e){return function(){s(e,a(e))}},leftClickedOnAHref:function(e){return function(n){var o,i,a,s,c;return!!(t.hasContextToolbar(e.settings)&&(s=e,c=s.plugins.contextmenu,!c||!c.isContextMenuVisible())&&r.isLink(n)&&3===(a=(i=(o=e.selection).getRng()).startContainer).nodeType&&o.isCollapsed()&&i.startOffset>0&&i.startOffset<a.data.length)}},setupGotoLinks:function(t){t.on("click",function(n){var r=i(t,n.target);r&&e.metaKeyPressed(n)&&(n.preventDefault(),s(t,r))}),t.on("keydown",function(e){var n,r=a(t);r&&13===e.keyCode&&!0===(n=e).altKey&&!1===n.shiftKey&&!1===n.ctrlKey&&!1===n.metaKey&&(e.preventDefault(),s(t,r))})},toggleActiveState:function(e){return function(){var t=this;e.on("nodechange",function(n){t.active(!e.readonly&&!!r.getAnchorElement(e,n.element))})}},toggleViewLinkState:function(e){return function(){var t=this,n=function(e){r.hasLinks(e.parents)?t.show():t.hide()};r.hasLinks(e.dom.getParents(e.selection.getStart()))||t.hide(),e.on("nodechange",n),t.on("remove",function(){e.off("nodechange",n)})}}}}),n("tinymce.plugins.link.api.Commands",["tinymce.plugins.link.core.Actions"],function(e){return{register:function(t){t.addCommand("mceLink",e.openDialog(t))}}}),n("tinymce.plugins.link.core.Keyboard",["tinymce.plugins.link.core.Actions"],function(e){return{setup:function(t){t.addShortcut("Meta+K","",e.openDialog(t))}}}),n("tinymce.plugins.link.ui.Controls",["tinymce.plugins.link.core.Actions","tinymce.plugins.link.core.Utils"],function(e,t){return{setupButtons:function(n){n.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:e.openDialog(n),onpostrender:e.toggleActiveState(n)}),n.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:t.unlink(n),onpostrender:e.toggleActiveState(n)}),n.addContextToolbar&&n.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:e.gotoSelectedLink(n)})},setupMenuItems:function(t){t.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:e.gotoSelectedLink(t),onPostRender:e.toggleViewLinkState(t),prependToContext:!0}),t.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:e.openDialog(t),stateSelector:"a[href]",context:"insert",prependToContext:!0})},setupContextToolbars:function(t){t.addContextToolbar&&t.addContextToolbar(e.leftClickedOnAHref(t),"openlink | link unlink")}}}),n("tinymce.plugins.link.Plugin",["tinymce.core.PluginManager","tinymce.plugins.link.api.Commands","tinymce.plugins.link.core.Actions","tinymce.plugins.link.core.Keyboard","tinymce.plugins.link.ui.Controls"],function(e,t,n,r,o){return e.add("link",function(e){o.setupButtons(e),o.setupMenuItems(e),o.setupContextToolbars(e),n.setupGotoLinks(e),t.register(e),r.setup(e)}),function(){}}),t("tinymce.plugins.link.Plugin")()}(),function(){var e={},t=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&function(n){for(var r=e[n],o=r.deps,i=r.defn,a=o.length,s=new Array(a),c=0;c<a;++c)s[c]=t(o[c]);var u=i.apply(null,s);if(void 0===u)throw"module ["+n+"] returned undefined";r.instance=u}(n),r.instance},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(e,t){n(e,[],function(){return t})};n("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),r("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),n("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),r("global!window",window),n("tinymce.plugins.paste.alien.DetectProPlugin",["global!window","tinymce.core.PluginManager"],function(e,t){return{hasProPlugin:function(n){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(n.settings.plugins)||!t.get("powerpaste")||("undefined"!=typeof e.console&&e.console.log&&e.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),0))}}}),n("tinymce.plugins.paste.api.Api",[],function(e){return{get:function(e,t){return{clipboard:e,quirks:t}}}}),n("tinymce.plugins.paste.api.Events",[],function(){return{firePastePreProcess:function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})},firePastePostProcess:function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})},firePastePlainTextToggle:function(e,t){return e.fire("PastePlainTextToggle",{state:t})},firePaste:function(e,t){return e.fire("paste",{ieFake:t})}}}),n("tinymce.plugins.paste.api.Settings",[],function(){return{shouldPlainTextInform:function(e){return e.getParam("paste_plaintext_inform",!0)},shouldBlockDrop:function(e){return e.getParam("paste_block_drop",!1)},shouldPasteDataImages:function(e){return e.getParam("paste_data_images",!1)},shouldFilterDrop:function(e){return e.getParam("paste_filter_drop",!0)},getPreProcess:function(e){return e.getParam("paste_preprocess")},getPostProcess:function(e){return e.getParam("paste_postprocess")},getWebkitStyles:function(e){return e.getParam("paste_webkit_styles")},shouldRemoveWebKitStyles:function(e){return e.getParam("paste_remove_styles_if_webkit",!0)},shouldMergeFormats:function(e){return e.getParam("paste_merge_formats",!0)},isSmartPasteEnabled:function(e){return e.getParam("smart_paste",!0)},isPasteAsTextEnabled:function(e){return e.getParam("paste_as_text",!1)},getRetainStyleProps:function(e){return e.getParam("paste_retain_style_properties")},getWordValidElements:function(e){return e.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},shouldConvertWordFakeLists:function(e){return e.getParam("paste_convert_word_fake_lists",!0)},shouldUseDefaultFilters:function(e){return e.getParam("paste_enable_default_filters",!0)}}}),n("tinymce.plugins.paste.core.Actions",["tinymce.plugins.paste.api.Events","tinymce.plugins.paste.api.Settings"],function(e,t){return{togglePlainTextPaste:function(n,r,o){var i,a;"text"===r.pasteFormat?(r.pasteFormat="html",e.firePastePlainTextToggle(n,!1)):(r.pasteFormat="text",e.firePastePlainTextToggle(n,!0),a=n,!1===o.get()&&t.shouldPlainTextInform(a)&&((i=n).notificationManager.open({text:i.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),type:"info"}),o.set(!0))),n.focus()}}}),n("tinymce.plugins.paste.api.Commands",["tinymce.plugins.paste.core.Actions"],function(e){return{register:function(t,n,r){t.addCommand("mceTogglePlainTextPaste",function(){e.togglePlainTextPaste(t,n,r)}),t.addCommand("mceInsertClipboardContent",function(e,t){t.content&&n.pasteHtml(t.content,t.internal),t.text&&n.pasteText(t.text)})}}}),r("global!Image",Image),r("global!navigator",navigator),n("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),n("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),n("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),n("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),n("tinymce.plugins.paste.core.InternalHtml",[],function(){var e="x-tinymce/html",t="\x3c!-- "+e+" --\x3e";return{mark:function(e){return t+e},unmark:function(e){return e.replace(t,"")},isMarked:function(e){return-1!==e.indexOf(t)},internalHtmlMime:function(){return e}}}),n("tinymce.core.html.Entities",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Entities")}),n("tinymce.plugins.paste.core.Newlines",["tinymce.core.util.Tools","tinymce.core.html.Entities"],function(e,t){var n=function(e){return e.replace(/\r?\n/g,"<br>")},r=function(n,r,o){var i=n.split(/\n\n/),a=function(e,n){var o,i=[],a="<"+r;if("object"==typeof n){for(o in n)n.hasOwnProperty(o)&&i.push(o+'="'+t.encodeAllRaw(n[o])+'"');i.length&&(a+=" "+i.join(" "))}return a+">"}(0,o),s="</"+r+">",c=e.map(i,function(e){return e.split(/\n/).join("<br />")});return 1===c.length?c[0]:e.map(c,function(e){return a+e+s}).join("")};return{isPlainText:function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)},convert:function(e,t,o){return t?r(e,t,o):n(e)},toBRs:n,toBlockElements:r}}),n("tinymce.plugins.paste.core.PasteBin",["tinymce.core.util.Tools","tinymce.core.Env"],function(e,t){return function(n){var r,o="%MCEPASTEBIN%",i=function(){return n.dom.get("mcepastebin")},a=function(e){return e===o};return{create:function(){var e,i,a=n.dom,s=n.getBody(),c=n.dom.getViewPort(n.getWin()).y,u=20;if(r=n.selection.getRng(),n.inline&&(i=n.selection.getScrollContainer())&&i.scrollTop>0&&(c=i.scrollTop),r.getClientRects){var l=function(e){var t,n,o,i=e.startContainer;if((t=e.getClientRects()).length)return t[0];if(e.collapsed&&1===i.nodeType){for(o=i.childNodes[r.startOffset];o&&3===o.nodeType&&!o.data.length;)o=o.nextSibling;if(o)return"BR"===o.tagName&&(n=a.doc.createTextNode("\ufeff"),o.parentNode.insertBefore(n,o),(e=a.createRng()).setStartBefore(n),e.setEndAfter(n),t=e.getClientRects(),a.remove(n)),t.length?t[0]:void 0}}(r);if(l)u=c+(l.top-a.getPos(s).y);else{u=c;var d=r.startContainer;d&&(3===d.nodeType&&d.parentNode!==s&&(d=d.parentNode),1===d.nodeType&&(u=a.getPos(d,i||s).y))}}e=n.dom.add(n.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+u+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"},o),(t.ie||t.gecko)&&a.setStyle(e,"left","rtl"===a.getStyle(s,"direction",!0)?65535:-65535),a.bind(e,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),e.focus(),n.selection.select(e,!0)},remove:function(){if(i()){for(var e;e=n.dom.get("mcepastebin");)n.dom.remove(e),n.dom.unbind(e);r&&n.selection.setRng(r)}r=null},getEl:i,getHtml:function(){var t,r,o,i,a,s=function(e,t){e.appendChild(t),n.dom.remove(t,!0)};for(r=e.grep(n.getBody().childNodes,function(e){return"mcepastebin"===e.id}),t=r.shift(),e.each(r,function(e){s(t,e)}),o=(i=n.dom.select("div[id=mcepastebin]",t)).length-1;o>=0;o--)a=n.dom.create("div"),t.insertBefore(a,i[o]),s(a,i[o]);return t?t.innerHTML:""},getLastRng:function(){return r},isDefault:function(){var e,t=i();return(e=t)&&"mcepastebin"===e.id&&a(t.innerHTML)},isDefaultContent:a}}}),n("tinymce.core.html.DomParser",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.DomParser")}),n("tinymce.core.html.Node",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Node")}),n("tinymce.core.html.Schema",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Schema")}),n("tinymce.core.html.Serializer",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Serializer")}),n("tinymce.plugins.paste.core.Utils",["global!navigator","tinymce.core.html.DomParser","tinymce.core.html.Schema","tinymce.core.util.Tools"],function(e,t,n,r){function o(e,t){return r.each(t,function(t){e=t.constructor===RegExp?e.replace(t,""):e.replace(t[0],t[1])}),e}return{filter:o,innerText:function(e){var i=new n,a=new t({},i),s="",c=i.getShortEndedElements(),u=r.makeMap("script noscript style textarea video audio iframe object"," "),l=i.getBlockElements();return e=o(e,[/<!\[[^\]]+\]>/g]),function e(t){var n=t.name,r=t;if("br"!==n)if(c[n]&&(s+=" "),u[n])s+=" ";else{if(3===t.type&&(s+=t.value),!t.shortEnded&&(t=t.firstChild))do{e(t)}while(t=t.next);l[n]&&r.next&&(s+="\n","p"===n&&(s+="\n"))}else s+="\n"}(a.parse(e)),s},trimHtml:function(e){return o(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(e,t,n){return t||n?"\xa0":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(e){var t=0;return function(){return e+t++}},isMsEdge:function(){return-1!==e.userAgent.indexOf(" Edge/")}}}),n("tinymce.plugins.paste.core.WordFilter",["tinymce.core.html.DomParser","tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.html.Serializer","tinymce.core.util.Tools","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.Utils"],function(e,t,n,r,o,i,a){function s(e){var t,n;return n=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],e=e.replace(/^[\u00a0 ]+/,""),o.each(n,function(n){if(n.test(e))return t=!0,!1}),t}function c(e,n,r,a){var s,c={},u=e.dom.parseStyle(a);return o.each(u,function(t,o){switch(o){case"mso-list":(s=/\w+ \w+([0-9]+)/i.exec(a))&&(r._listLevel=parseInt(s[1],10)),/Ignore/i.test(t)&&r.firstChild&&(r._listIgnore=!0,r.firstChild._listIgnore=!0);break;case"horiz-align":o="text-align";break;case"vert-align":o="vertical-align";break;case"font-color":case"mso-foreground":o="color";break;case"mso-background":case"mso-highlight":o="background";break;case"font-weight":case"font-style":return void("normal"!==t&&(c[o]=t));case"mso-element":if(/^(comment|comment-list)$/i.test(t))return void r.remove()}0!==o.indexOf("mso-comment")?0!==o.indexOf("mso-")&&("all"===i.getRetainStyleProps(e)||n&&n[o])&&(c[o]=t):r.remove()}),/(bold)/i.test(c["font-weight"])&&(delete c["font-weight"],r.wrap(new t("b",1))),/(italic)/i.test(c["font-style"])&&(delete c["font-style"],r.wrap(new t("i",1))),(c=e.dom.serializeStyle(c,r.name))||null}return{preProcess:function(u,l){return i.shouldUseDefaultFilters(u)?function(u,l){var d,f;(d=i.getRetainStyleProps(u))&&(f=o.makeMap(d.split(/[, ]/))),l=a.filter(l,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\xa0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join("\xa0"):""}]]);var m=i.getWordValidElements(u),p=new n({valid_elements:m,valid_children:"-li[p]"});o.each(p.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var h=new e({},p);h.addAttributeFilter("style",function(e){for(var t,n=e.length;n--;)(t=e[n]).attr("style",c(u,f,t,t.attr("style"))),"span"===t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),h.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)n=(t=e[r]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),h.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),h.addNodeFilter("a",function(e){for(var t,n,r,o=e.length;o--;)if(n=(t=e[o]).attr("href"),r=t.attr("name"),n&&-1!==n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwrap();continue}t.attr({href:n,name:r})}else t.unwrap()});var g=h.parse(l);return i.shouldConvertWordFakeLists(u)&&function(e){var n,r,o=1;function i(e){var t="";if(3===e.type)return e.value;if(e=e.firstChild)do{t+=i(e)}while(e=e.next);return t}function a(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!a(e,t))return!1}while(e=e.next);return!0}function c(e,i,s){var c=e._listLevel||o;c!==o&&(c<o?n&&(n=n.parent.parent):(r=n,n=null)),n&&n.name===i?n.append(e):(r=r||n,n=new t(i,1),s>1&&n.attr("start",""+s),e.wrap(n)),e.name="li",c>o&&r&&r.lastChild.append(n),o=c,function e(t){if(t._listIgnore)t.remove();else if(t=t.firstChild)do{e(t)}while(t=t.next)}(e),a(e,/^\u00a0+/),a(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),a(e,/^\u00a0+/)}for(var u=[],l=e.firstChild;"undefined"!=typeof l&&null!==l;)if(u.push(l),null!==(l=l.walk()))for(;"undefined"!=typeof l&&l.parent!==e;)l=l.walk();for(var d=0;d<u.length;d++)if("p"===(e=u[d]).name&&e.firstChild){var f=i(e);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(f)){c(e,"ul");continue}if(s(f)){var m=/([0-9]+)\./.exec(f),p=1;m&&(p=parseInt(m[1],10)),c(e,"ol",p);continue}if(e._listLevel){c(e,"ul",1);continue}n=null}else r=n,n=null}(g),new r({validate:u.settings.validate},p).serialize(g)}(u,l):l},isWordContent:function(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}}}),n("tinymce.plugins.paste.core.ProcessFilters",["tinymce.plugins.paste.api.Events","tinymce.plugins.paste.core.WordFilter"],function(e,t){var n=function(e,t){return{content:e,cancelled:t}};return{process:function(r,o,i){var a,s,c,u,l,d,f,m,p,h=t.isWordContent(o),g=h?t.preProcess(r,o):o;return p=e.firePastePreProcess(a=r,g,s=i,c=h),a.hasEventListeners("PastePostProcess")&&!p.isDefaultPrevented()?(l=s,d=c,f=(u=a).dom.create("div",{style:"display:none"},p.content),m=e.firePastePostProcess(u,f,l,d),n(m.node.innerHTML,m.isDefaultPrevented())):n(p.content,p.isDefaultPrevented())}}}),n("tinymce.plugins.paste.core.SmartPaste",["tinymce.core.util.Tools","tinymce.plugins.paste.api.Settings"],function(e,t){var n=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},r=function(e){return n(e)&&/.(gif|jpe?g|png)$/.test(e)},o=function(e,t,r){return!(!1!==e.selection.isCollapsed()||!n(t)||(i=t,a=r,(o=e).undoManager.extra(function(){a(o,i)},function(){o.execCommand("mceInsertLink",!1,i)}),0));var o,i,a},i=function(e,t,n){return!!r(t)&&(i=t,a=n,(o=e).undoManager.extra(function(){a(o,i)},function(){o.insertContent('<img src="'+i+'">')}),!0);var o,i,a},a=function(e,n){return e.insertContent(n,{merge:t.shouldMergeFormats(e),paste:!0}),!0};return{isImageUrl:r,isAbsoluteUrl:n,insertContent:function(n,r){var s,c;!1===t.isSmartPasteEnabled(n)?a(n,r):(s=n,c=r,e.each([o,i,a],function(e){return!0!==e(s,c,a)}))}}}),n("tinymce.plugins.paste.core.Clipboard",["global!Image","global!navigator","global!window","tinymce.core.Env","tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.VK","tinymce.plugins.paste.api.Events","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Newlines","tinymce.plugins.paste.core.PasteBin","tinymce.plugins.paste.core.ProcessFilters","tinymce.plugins.paste.core.SmartPaste","tinymce.plugins.paste.core.Utils"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p){return function(h){var g,v=this,y=0,b=new d(h),x="data:text/mce-internal,",C=p.createIdGenerator("mceclip");function w(e,t){var n=t||u.isMarked(e),r=f.process(h,u.unmark(e),n);!1===r.cancelled&&m.insertContent(h,r.content)}function k(e){e=h.dom.encode(e).replace(/\r\n/g,"\n"),w(e=l.convert(e,h.settings.forced_root_block,h.settings.forced_root_block_attrs),!1)}function S(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&-1===n.indexOf(x)&&(t["text/plain"]=n)}if(e.types)for(var r=0;r<e.types.length;r++){var o=e.types[r];try{t[o]=e.getData(o)}catch(e){t[o]=""}}}return t}function T(e){return N(e,"text/html")||N(e,"text/plain")}function E(t,n,r){t&&(h.selection.setRng(t),t=null);var o,i,a,s,c=n.result,u=-1!==(i=(o=c).indexOf(","))?o.substr(i+1):null,l=C(),d=h.settings.images_reuse_filename&&r.name?(a=r.name.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i))?h.dom.encode(a[1]):null:l,f=new e;if(f.src=c,!(s=h.settings).images_dataimg_filter||s.images_dataimg_filter(f)){var m,p,g=h.editorUpload.blobCache;(p=g.findFirst(function(e){return e.base64()===u}))?m=p:(m=g.create(l,r,u,d),g.add(m)),w('<img src="'+m.blobUri()+'">',!1)}else w('<img src="'+c+'">',!1)}function R(e,t){var r=e.clipboardData||e.dataTransfer;function o(r){var o,i,a,s=!1;if(r)for(o=0;o<r.length;o++)if(/^image\/(jpeg|png|gif|bmp)$/.test((i=r[o]).type)){var c=i.getAsFile?i.getAsFile():i;(a=new n.FileReader).onload=E.bind(null,t,a,c),a.readAsDataURL(c),e.preventDefault(),s=!0}return s}if(h.settings.paste_data_images&&r)return o(r.items)||o(r.files)}function N(e,t){return t in e&&e[t].length>0}function A(e){return a.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode}v.pasteFormat=c.isPasteAsTextEnabled(h)?"text":"html",v.pasteHtml=w,v.pasteText=k,v.pasteImageData=R,v.getDataTransferItems=S,v.hasHtmlOrText=T,v.hasContentType=N,h.on("preInit",function(){(function(){function e(e,t,n,r){var o,i;N(e,"text/html")?o=e["text/html"]:(o=b.getHtml(),r=r||u.isMarked(o),b.isDefaultContent(o)&&(n=!0)),o=p.trimHtml(o),b.remove(),i=!1===r&&l.isPlainText(o),o.length&&!i||(n=!0),n&&(o=N(e,"text/plain")&&i?e["text/plain"]:p.innerText(o)),b.isDefaultContent(o)?t||h.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):n?k(o):w(o,r)}h.on("keydown",function(e){function n(e){A(e)&&!e.isDefaultPrevented()&&b.remove()}if(A(e)&&!e.isDefaultPrevented()){if((g=e.shiftKey&&86===e.keyCode)&&r.webkit&&-1!==t.userAgent.indexOf("Version/"))return;if(e.stopImmediatePropagation(),y=(new Date).getTime(),r.ie&&g)return e.preventDefault(),void s.firePaste(h,!0);b.remove(),b.create(),h.once("keyup",n),h.once("paste",function(){h.off("keyup",n)})}}),h.on("paste",function(n){var a,s,c=(new Date).getTime(),l=(a=S(n.clipboardData||h.getDoc().dataTransfer),p.isMsEdge()?i.extend(a,{"text/html":""}):a),d=(new Date).getTime()-c,f=(new Date).getTime()-y-d<1e3,m="text"===v.pasteFormat||g,x=N(l,u.internalHtmlMime());g=!1,n.isDefaultPrevented()||(s=n.clipboardData,-1!==t.userAgent.indexOf("Android")&&s&&s.items&&0===s.items.length)?b.remove():T(l)||!R(n,b.getLastRng()||h.selection.getRng())?(f||n.preventDefault(),!r.ie||f&&!n.ieFake||N(l,"text/html")||(b.create(),h.dom.bind(b.getEl(),"paste",function(e){e.stopPropagation()}),h.getDoc().execCommand("Paste",!1,null),l["text/html"]=b.getHtml()),N(l,"text/html")?(n.preventDefault(),x||(x=u.isMarked(l["text/html"])),e(l,f,m,x)):o.setEditorTimeout(h,function(){e(l,f,m,x)},0)):b.remove()})})(),h.parser.addNodeFilter("img",function(e,t,n){function o(e){e.attr("data-mce-object")||a===r.transparentSrc||e.remove()}if(!h.settings.paste_data_images&&(s=n).data&&!0===s.data.paste)for(var i=e.length;i--;){var a=e[i].attributes.map.src;a&&(0===a.indexOf("webkit-fake-url")?o(e[i]):h.settings.allow_html_data_urls||0!==a.indexOf("data:")||o(e[i]))}var s})})}}),r("global!setTimeout",setTimeout),n("tinymce.plugins.paste.core.CutCopy",["global!setTimeout","tinymce.core.Env","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Utils"],function(e,t,n,r){var o=function(){},i=function(e,o,i,a){!function(e,o,i){if(a=e,!1!==t.iOS||void 0===a||"function"!=typeof a.setData||!0===r.isMsEdge())return!1;try{return e.clearData(),e.setData("text/html",o),e.setData("text/plain",i),e.setData(n.internalHtmlMime(),o),!0}catch(e){return!1}var a}(e.clipboardData,o.html,o.text)?i(o.html,a):(e.preventDefault(),a())},a=function(t){return function(r,o){var i=n.mark(r),a=t.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),s=t.dom.create("div",{contenteditable:"true"},i);t.dom.setStyles(a,{position:"fixed",left:"-3000px",width:"1000px",overflow:"hidden"}),a.appendChild(s),t.dom.add(t.getBody(),a);var c=t.selection.getRng();s.focus();var u=t.dom.createRng();u.selectNodeContents(s),t.selection.setRng(u),e(function(){a.parentNode.removeChild(a),t.selection.setRng(c),o()},0)}},s=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}};return{register:function(t){var n,r;t.on("cut",(n=t,function(t){!1===n.selection.isCollapsed()&&i(t,s(n),a(n),function(){e(function(){n.execCommand("Delete")},0)})})),t.on("copy",(r=t,function(e){!1===r.selection.isCollapsed()&&i(e,s(r),a(r),o)}))}}}),n("tinymce.core.api.dom.RangeUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.RangeUtils")}),n("tinymce.plugins.paste.core.DragDrop",["tinymce.core.api.dom.RangeUtils","tinymce.core.util.Delay","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Utils"],function(e,t,n,r,o){var i=function(t,n){return e.getCaretRangeFromPoint(n.clientX,n.clientY,t.getDoc())},a=function(e,t){e.focus(),e.selection.setRng(t)};return{setup:function(e,s,c){n.shouldBlockDrop(e)&&e.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),n.shouldPasteDataImages(e)||e.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),e.on("drop",function(u){var l,d;if(d=i(e,u),!u.isDefaultPrevented()&&!c.get()){l=s.getDataTransferItems(u.dataTransfer);var f,m=s.hasContentType(l,r.internalHtmlMime());if((s.hasHtmlOrText(l)&&(!(f=l["text/plain"])||0!==f.indexOf("file://"))||!s.pasteImageData(u,d))&&d&&n.shouldFilterDrop(e)){var p=l["mce-internal"]||l["text/html"]||l["text/plain"];p&&(u.preventDefault(),t.setEditorTimeout(e,function(){e.undoManager.transact(function(){l["mce-internal"]&&e.execCommand("Delete"),a(e,d),p=o.trimHtml(p),l["text/html"]?s.pasteHtml(p,m):s.pasteText(p)})}))}}}),e.on("dragstart",function(e){c.set(!0)}),e.on("dragover dragend",function(t){n.shouldPasteDataImages(e)&&!1===c.get()&&(t.preventDefault(),a(e,i(e,t))),"dragend"===t.type&&c.set(!1)})}}}),n("tinymce.plugins.paste.core.PrePostProcess",["tinymce.plugins.paste.api.Settings"],function(e){return{setup:function(t){var n=t.plugins.paste,r=e.getPreProcess(t);r&&t.on("PastePreProcess",function(e){r.call(n,n,e)});var o=e.getPostProcess(t);o&&t.on("PastePostProcess",function(e){o.call(n,n,e)})}}}),n("tinymce.plugins.paste.core.Quirks",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.Utils","tinymce.plugins.paste.core.WordFilter"],function(e,t,n,r,o){function i(e,t){e.on("PastePreProcess",function(n){n.content=t(e,n.content,n.internal,n.wordContent)})}function a(e,n){if(!o.isWordContent(n))return n;var i=[];t.each(e.schema.getBlockElements(),function(e,t){i.push(t)});var a=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+i.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return n=r.filter(n,[[a,"$1"]]),r.filter(n,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function s(e,t,r,o){if(o||r)return t;var i=n.getWebkitStyles(e);if(!1===n.shouldRemoveWebKitStyles(e)||"all"===i)return t;if(i&&(i=i.split(/[, ]/)),i){var a=e.dom,s=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,t,n,r){var o=a.parseStyle(a.decode(n),"span"),c={};if("none"===i)return t+r;for(var u=0;u<i.length;u++){var l=o[i[u]],d=a.getStyle(s,i[u],!0);/color/.test(i[u])&&(l=a.toHex(l),d=a.toHex(d)),d!==l&&(c[i[u]]=l)}return(c=a.serializeStyle(c,"span"))?t+' style="'+c+'"'+r:t+r})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r})}function c(e,t){e.$("a",t).find("font,u").each(function(t,n){e.dom.remove(n,!0)})}return{setup:function(t){var n,r;e.webkit&&i(t,s),e.ie&&(i(t,a),r=c,(n=t).on("PastePostProcess",function(e){r(n,e.node)}))}}}),r("global!Array",Array),r("global!Error",Error),n("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(e){return function(){return e}};return{noop:function(){},noarg:function(e){return function(){return e()}},compose:function(e,t){return function(){return e(t.apply(null,arguments))}},constant:n,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:n(!1),always:n(!0)}}),n("tinymce.plugins.paste.ui.Buttons",["ephox.katamari.api.Fun"],function(e){var t=function(e,t,n){var r=n.control;r.active("text"===t.pasteFormat),e.on("PastePlainTextToggle",function(e){r.active(e.state)})};return{register:function(n,r){var o=e.curry(t,n,r);n.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:o}),n.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:r.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:o})}}}),n("tinymce.plugins.paste.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.paste.alien.DetectProPlugin","tinymce.plugins.paste.api.Api","tinymce.plugins.paste.api.Commands","tinymce.plugins.paste.core.Clipboard","tinymce.plugins.paste.core.CutCopy","tinymce.plugins.paste.core.DragDrop","tinymce.plugins.paste.core.PrePostProcess","tinymce.plugins.paste.core.Quirks","tinymce.plugins.paste.ui.Buttons"],function(e,t,n,r,o,i,a,s,c,u,l){var d=e(!1);return t.add("paste",function(t){if(!1===n.hasProPlugin(t)){var f=new i(t),m=u.setup(t),p=e(!1);return l.register(t,f),o.register(t,f,d),c.setup(t),a.register(t),s.setup(t,f,p),r.get(f,m)}}),function(){}}),t("tinymce.plugins.paste.Plugin")()}(),function(){var e={},t=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&function(n){for(var r=e[n],o=r.deps,i=r.defn,a=o.length,s=new Array(a),c=0;c<a;++c)s[c]=t(o[c]);var u=i.apply(null,s);if(void 0===u)throw"module ["+n+"] returned undefined";r.instance=u}(n),r.instance},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(e,t){n(e,[],function(){return t})};r("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),n("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),r("global!Array",Array),r("global!Error",Error),n("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(e){return function(){return e}};return{noop:function(){},noarg:function(e){return function(){return e()}},compose:function(e,t){return function(){return e(t.apply(null,arguments))}},constant:n,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:n(!1),always:n(!0)}}),r("global!Object",Object),n("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n,r,o,i,a=e.never,s=e.always,c=function(){return u},u=(i={fold:function(e,t){return e()},is:a,isSome:a,isNone:s,getOr:o=function(e){return e},getOrThunk:r=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:o,orThunk:r,map:c,ap:c,each:function(){},bind:c,flatten:c,exists:a,forall:s,filter:c,equals:n=function(e){return e.isNone()},equals_:n,toArray:function(){return[]},toString:e.constant("none()")},t.freeze&&t.freeze(i),i),l=function(e){var t=function(){return e},n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:s,isNone:a,getOr:t,getOrThunk:t,getOrDie:t,or:n,orThunk:n,map:function(t){return l(t(e))},ap:function(t){return t.fold(c,function(t){return l(t(e))})},each:function(t){t(e)},bind:r,flatten:t,exists:r,forall:r,filter:function(t){return t(e)?o:u},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(a,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o};return{some:l,none:c,from:function(e){return null===e||void 0===e?u:l(e)}}}),r("global!String",String),n("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,r){var o,i=void 0===(o=t.prototype.indexOf)?function(e,t){return f(e,t)}:function(e,t){return o.call(e,t)},a=function(e,t){return i(e,t)>-1},s=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++)o[i]=n(e[i],i,e);return o},c=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},u=function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n],n,e)},l=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},d=function(t,n){for(var r=0,o=t.length;r<o;r++)if(n(t[r],r,t))return e.some(r);return e.none()},f=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},m=t.prototype.push,p=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);m.apply(r,e[o])}return r},h=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0},g=t.prototype.slice;return{map:s,each:c,eachr:u,partition:function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},filter:l,groupBy:function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var s=e[i],c=t(s);c!==n&&(r.push(o),o=[]),n=c,o.push(s)}return 0!==o.length&&r.push(o),r},indexOf:function(t,n){var r=i(t,n);return-1===r?e.none():e.some(r)},foldr:function(e,t,n){return u(e,function(e){n=t(n,e)}),n},foldl:function(e,t,n){return c(e,function(e){n=t(n,e)}),n},find:function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},findIndex:d,flatten:p,bind:function(e,t){var n=s(e,t);return p(n)},forall:h,exists:function(e,t){return d(e,t).isSome()},contains:a,equal:function(e,t){return e.length===t.length&&h(e,function(e,n){return e===t[n]})},reverse:function(e){var t=g.call(e,0);return t.reverse(),t},chunk:function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},difference:function(e,t){return l(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=g.call(e,0);return n.sort(t),n},range:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},head:function(t){return 0===t.length?e.none():e.some(t[0])},last:function(t){return 0===t.length?e.none():e.some(t[t.length-1])}}}),n("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],function(e,t){var n,r=void 0===(n=t.keys)?function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}:n,o=function(e,t){for(var n=r(e),o=0,i=n.length;o<i;o++){var a=n[o];t(e[a],a,e)}},i=function(e,t){var n={};return o(e,function(r,o){var i=t(r,o,e);n[i.k]=i.v}),n},a=function(e,t){var n=[];return o(e,function(e,r){n.push(t(e,r))}),n},s=function(e){return a(e,function(e){return e})};return{bifilter:function(e,t){var n={},r={};return o(e,function(e,o){(t(e,o)?n:r)[o]=e}),{t:n,f:r}},each:o,map:function(e,t){return i(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},mapToArray:a,tupleMap:i,find:function(t,n){for(var o=r(t),i=0,a=o.length;i<a;i++){var s=o[i],c=t[s];if(n(c,s,t))return e.some(c)}return e.none()},keys:r,values:s,size:function(e){return s(e).length}}}),n("ephox.katamari.data.Immutable",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!Array","global!Error"],function(e,t,n,r){return function(){var o=arguments;return function(){for(var i=new n(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];if(o.length!==i.length)throw new r('Wrong number of arguments to struct. Expected "['+o.length+']", got '+i.length+" arguments");var s={};return e.each(o,function(e,n){s[e]=t.constant(i[n])}),s}}}),n("ephox.katamari.api.Type",["global!Array","global!String"],function(e,t){var n=function(n){return function(r){return function(n){if(null===n)return"null";var r=typeof n;return"object"===r&&e.prototype.isPrototypeOf(n)?"array":"object"===r&&t.prototype.isPrototypeOf(n)?"string":r}(r)===n}};return{isString:n("string"),isObject:n("object"),isArray:n("array"),isNull:n("null"),isBoolean:n("boolean"),isUndefined:n("undefined"),isFunction:n("function"),isNumber:n("number")}}),n("ephox.katamari.util.BagUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!Error"],function(e,t,n){var r=function(e){return e.slice(0).sort()};return{sort:r,reqMessage:function(e,t){throw new n("All required keys ("+r(e).join(", ")+") were not specified. Specified keys were: "+r(t).join(", ")+".")},unsuppMessage:function(e){throw new n("Unsupported keys for object: "+r(e).join(", "))},validateStrArr:function(r,o){if(!t.isArray(o))throw new n("The "+r+" fields must be an array. Was: "+o+".");e.each(o,function(e){if(!t.isString(e))throw new n("The value "+e+" in the "+r+" fields was not a string.")})},invalidTypeMessage:function(e,t){throw new n("All values need to be of type: "+t+". Keys ("+r(e).join(", ")+") were not.")},checkDupes:function(t){var o=r(t);e.find(o,function(e,t){return t<o.length-1&&e===o[t+1]}).each(function(e){throw new n("The field: "+e+" occurs more than once in the combined fields: ["+o.join(", ")+"].")})}}}),n("ephox.katamari.data.MixedBag",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.katamari.util.BagUtils","global!Error","global!Object"],function(e,t,n,r,o,i,a){return function(s,c){var u=s.concat(c);if(0===u.length)throw new i("You must specify at least one required or optional field.");return o.validateStrArr("required",s),o.validateStrArr("optional",c),o.checkDupes(u),function(i){var l=n.keys(i);e.forall(s,function(t){return e.contains(l,t)})||o.reqMessage(s,l);var d=e.filter(l,function(t){return!e.contains(u,t)});d.length>0&&o.unsuppMessage(d);var f={};return e.each(s,function(e){f[e]=t.constant(i[e])}),e.each(c,function(e){f[e]=t.constant(a.prototype.hasOwnProperty.call(i,e)?r.some(i[e]):r.none())}),f}}}),n("ephox.katamari.api.Struct",["ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag"],function(e,t){return{immutable:e,immutableBag:t}}),n("ephox.snooker.api.Structs",["ephox.katamari.api.Struct"],function(e){var t=e.immutable("width","height"),n=e.immutable("rows","columns"),r=e.immutable("row","column"),o=e.immutable("x","y"),i=e.immutable("element","rowspan","colspan"),a=e.immutable("element","rowspan","colspan","isNew");return{dimensions:t,grid:n,address:r,coords:o,extended:e.immutable("element","rowspan","colspan","row","column"),detail:i,detailnew:a,rowdata:e.immutable("element","cells","section"),elementnew:e.immutable("element","isNew"),rowdatanew:e.immutable("element","cells","section","isNew"),rowcells:e.immutable("cells","section"),rowdetails:e.immutable("details","section"),bounds:e.immutable("startRow","startCol","finishRow","finishCol")}}),n("global!console",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),r("global!document",document),n("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","ephox.katamari.api.Option","global!Error","global!console","global!document"],function(e,t,n,r,o){var i=function(t){if(null===t||void 0===t)throw new n("Node cannot be null or undefined");return{dom:e.constant(t)}};return{fromHtml:function(e,t){var n=(t||o).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw r.error("HTML does not have a single root node",e),"HTML must have a single root node";return i(n.childNodes[0])},fromTag:function(e,t){var n=(t||o).createElement(e);return i(n)},fromText:function(e,t){var n=(t||o).createTextNode(e);return i(n)},fromDom:i,fromPoint:function(e,n,r){return t.from(e.dom().elementFromPoint(n,r)).map(i)}}}),n("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),n("ephox.sugar.api.search.Selectors",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.node.NodeTypes","global!Error","global!document"],function(e,t,n,r,o,i){var a=r.ELEMENT,s=r.DOCUMENT,c=function(e){return e.nodeType!==a&&e.nodeType!==s||0===e.childElementCount};return{all:function(t,r){var o=void 0===r?i:r.dom();return c(o)?[]:e.map(o.querySelectorAll(t),n.fromDom)},is:function(e,t){var n=e.dom();if(n.nodeType!==a)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new o("Browser lacks native selectors")},one:function(e,r){var o=void 0===r?i:r.dom();return c(o)?t.none():t.from(o.querySelector(e)).map(n.fromDom)}}}),n("ephox.sugar.alien.Recurse",[],function(){return{toArray:function(e,t){var n=[],r=function(e){return n.push(e),t(e)},o=t(e);do{o=o.bind(r)}while(o.isSome());return n}}}),n("ephox.katamari.api.Global",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),n("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(e){var t=function(t,n){for(var r=void 0!==n?n:e,o=0;o<t.length&&void 0!==r&&null!==r;++o)r=r[t[o]];return r},n=function(t,n){for(var r,o,i=void 0!==n?n:e,a=0;a<t.length;++a)r=i,o=t[a],void 0!==r[o]&&null!==r[o]||(r[o]={}),i=r[o];return i};return{path:t,resolve:function(e,n){var r=e.split(".");return t(r,n)},forge:n,namespace:function(e,t){var r=e.split(".");return n(r,t)}}}),n("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(e){return{getOrDie:function(t,n){var r=e.resolve(t,n);if(void 0===r)throw t+" not available on this browser";return r}}}),n("ephox.sand.api.Node",["ephox.sand.util.Global"],function(e){var t=function(){return e.getOrDie("Node")},n=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)};return{documentPositionPreceding:function(e,r){return n(e,r,t().DOCUMENT_POSITION_PRECEDING)},documentPositionContainedBy:function(e,r){return n(e,r,t().DOCUMENT_POSITION_CONTAINED_BY)}}}),n("ephox.katamari.api.Thunk",[],function(){return{cached:function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(null,arguments)),t}}}}),r("global!Number",Number),n("ephox.sand.detect.Version",["ephox.katamari.api.Arr","global!Number","global!String"],function(e,t,n){var r=function(){return o(0,0)},o=function(e,t){return{major:e,minor:t}};return{nu:o,detect:function(e,i){var a=n(i).toLowerCase();return 0===e.length?r():function(n,r){var i=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,r);if(!i)return{major:0,minor:0};var a=function(e){return t(r.replace(i,"$"+e))};return o(a(1),a(2))}(0,a)},unknown:r}}),n("ephox.sand.core.Browser",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n=function(e,t){return function(){return t===e}},r=function(e){var t=e.current;return{current:t,version:e.version,isEdge:n("Edge",t),isChrome:n("Chrome",t),isIE:n("IE",t),isOpera:n("Opera",t),isFirefox:n("Firefox",t),isSafari:n("Safari",t)}};return{unknown:function(){return r({current:void 0,version:t.unknown()})},nu:r,edge:e.constant("Edge"),chrome:e.constant("Chrome"),ie:e.constant("IE"),opera:e.constant("Opera"),firefox:e.constant("Firefox"),safari:e.constant("Safari")}}),n("ephox.sand.core.OperatingSystem",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n=function(e,t){return function(){return t===e}},r=function(e){var t=e.current;return{current:t,version:e.version,isWindows:n("Windows",t),isiOS:n("iOS",t),isAndroid:n("Android",t),isOSX:n("OSX",t),isLinux:n("Linux",t),isSolaris:n("Solaris",t),isFreeBSD:n("FreeBSD",t)}};return{unknown:function(){return r({current:void 0,version:t.unknown()})},nu:r,windows:e.constant("Windows"),ios:e.constant("iOS"),android:e.constant("Android"),linux:e.constant("Linux"),osx:e.constant("OSX"),solaris:e.constant("Solaris"),freebsd:e.constant("FreeBSD")}}),n("ephox.sand.detect.DeviceType",["ephox.katamari.api.Fun"],function(e){return function(t,n,r){var o=t.isiOS()&&!0===/ipad/i.test(r),i=t.isiOS()&&!o,a=t.isAndroid()&&3===t.version.major,s=t.isAndroid()&&4===t.version.major,c=o||a||s&&!0===/mobile/i.test(r),u=t.isiOS()||t.isAndroid(),l=u&&!c,d=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(r);return{isiPad:e.constant(o),isiPhone:e.constant(i),isTablet:e.constant(c),isPhone:e.constant(l),isTouch:e.constant(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:e.constant(d)}}}),n("ephox.sand.detect.UaString",["ephox.katamari.api.Arr","ephox.sand.detect.Version","global!String"],function(e,t,n){var r=function(t,r){var o=n(r).toLowerCase();return e.find(t,function(e){return e.search(o)})};return{detectBrowser:function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})},detectOs:function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})}}}),n("ephox.katamari.str.StrAppend",[],function(){return{addToStart:function(e,t){return t+e},addToEnd:function(e,t){return e+t},removeFromStart:function(e,t){return e.substring(t)},removeFromEnd:function(e,t){return e.substring(0,e.length-t)}}}),n("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],function(e,t){return{first:function(e,t){return e.substr(0,t)},last:function(e,t){return e.substr(e.length-t,e.length)},head:function(t){return""===t?e.none():e.some(t.substr(0,1))},tail:function(t){return""===t?e.none():e.some(t.substring(1))}}}),n("ephox.katamari.api.Strings",["ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","global!Error"],function(e,t,n){var r=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},o=function(e,t){return r(e,t,0)},i=function(e,t){return r(e,t,e.length-t.length)};return{supplant:function(e,t){return e.replace(/\${([^{}]*)}/g,function(e,n){var r,o=t[n];return"string"==(r=typeof o)||"number"===r?o:e})},startsWith:o,removeLeading:function(t,n){return o(t,n)?e.removeFromStart(t,n.length):t},removeTrailing:function(t,n){return i(t,n)?e.removeFromEnd(t,n.length):t},ensureLeading:function(t,n){return o(t,n)?t:e.addToStart(t,n)},ensureTrailing:function(t,n){return i(t,n)?t:e.addToEnd(t,n)},endsWith:i,contains:function(e,t){return-1!==e.indexOf(t)},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},lTrim:function(e){return e.replace(/^\s+/g,"")},rTrim:function(e){return e.replace(/\s+$/g,"")},capitalize:function(e){return t.head(e).bind(function(n){return t.tail(e).map(function(e){return n.toUpperCase()+e})}).getOr(e)}}}),n("ephox.sand.info.PlatformInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Strings"],function(e,t){var n=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,r=function(e){return function(n){return t.contains(n,e)}},o=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return t.contains(e,"edge/")&&t.contains(e,"chrome")&&t.contains(e,"safari")&&t.contains(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,n],search:function(e){return t.contains(e,"chrome")&&!t.contains(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return t.contains(e,"msie")||t.contains(e,"trident")}},{name:"Opera",versionRegexes:[n,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:r("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:r("firefox")},{name:"Safari",versionRegexes:[n,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(t.contains(e,"safari")||t.contains(e,"mobile/"))&&t.contains(e,"applewebkit")}}],i=[{name:"Windows",search:r("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return t.contains(e,"iphone")||t.contains(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:r("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:r("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:r("linux"),versionRegexes:[]},{name:"Solaris",search:r("sunos"),versionRegexes:[]},{name:"FreeBSD",search:r("freebsd"),versionRegexes:[]}];return{browsers:e.constant(o),oses:e.constant(i)}}),n("ephox.sand.core.PlatformDetection",["ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString","ephox.sand.info.PlatformInfo"],function(e,t,n,r,o){return{detect:function(i){var a=o.browsers(),s=o.oses(),c=r.detectBrowser(a,i).fold(e.unknown,e.nu),u=r.detectOs(s,i).fold(t.unknown,t.nu);return{browser:c,os:u,deviceType:n(u,c,i)}}}}),r("global!navigator",navigator),n("ephox.sand.api.PlatformDetection",["ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection","global!navigator"],function(e,t,n){return{detect:e.cached(function(){return t.detect(n.userAgent)})}}),n("ephox.sugar.api.dom.Compare",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors"],function(e,t,n,r,o){var i=function(e,t){return e.dom()===t.dom()},a=r.detect().browser.isIE()?function(e,t){return n.documentPositionContainedBy(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)};return{eq:i,isEqualNode:function(e,t){return e.dom().isEqualNode(t.dom())},member:function(n,r){return e.exists(r,t.curry(i,n))},contains:a,is:o.is}}),n("ephox.sugar.api.search.Traverse",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.alien.Recurse","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t,n,r,o,i,a,s){var c=function(e){return s.fromDom(e.dom().ownerDocument)},u=function(e){var t=e.dom();return r.from(t.parentNode).map(s.fromDom)},l=function(e){var t=e.dom();return r.from(t.previousSibling).map(s.fromDom)},d=function(e){var t=e.dom();return r.from(t.nextSibling).map(s.fromDom)},f=function(e){var n=e.dom();return t.map(n.childNodes,s.fromDom)},m=function(e,t){var n=e.dom().childNodes;return r.from(n[t]).map(s.fromDom)},p=o.immutable("element","offset");return{owner:c,defaultView:function(e){var t=e.dom();return s.fromDom(t.ownerDocument.defaultView)},documentElement:function(e){var t=c(e);return s.fromDom(t.dom().documentElement)},parent:u,findIndex:function(e){return u(e).bind(function(n){var r=f(n);return t.findIndex(r,function(t){return a.eq(e,t)})})},parents:function(t,r){for(var o=e.isFunction(r)?r:n.constant(!1),i=t.dom(),a=[];null!==i.parentNode&&void 0!==i.parentNode;){var c=i.parentNode,u=s.fromDom(c);if(a.push(u),!0===o(u))break;i=c}return a},siblings:function(e){return u(e).map(f).map(function(n){return t.filter(n,function(t){return!a.eq(e,t)})}).getOr([])},prevSibling:l,offsetParent:function(e){var t=e.dom();return r.from(t.offsetParent).map(s.fromDom)},prevSiblings:function(e){return t.reverse(i.toArray(e,l))},nextSibling:d,nextSiblings:function(e){return i.toArray(e,d)},children:f,child:m,firstChild:function(e){return m(e,0)},lastChild:function(e){return m(e,e.dom().childNodes.length-1)},childNodesCount:function(e){return e.dom().childNodes.length},hasChildNodes:function(e){return e.dom().hasChildNodes()},leaf:function(e,t){var n=f(e);return n.length>0&&t<n.length?p(n[t],0):p(e,t)}}}),n("ephox.snooker.util.LayerSelector",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.search.Selectors","ephox.sugar.api.search.Traverse"],function(e,t,n,r){var o=function(t,i,a){return e.bind(r.children(t),function(e){return n.is(e,i)?a(e)?[e]:[]:o(e,i,a)})};return{firstLayer:function(e,n){return o(e,n,t.constant(!0))},filterFirstLayer:o}}),n("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(e){var t=function(e){return e.dom().nodeName.toLowerCase()},n=function(e){return e.dom().nodeType},r=function(e){return function(t){return n(t)===e}},o=r(e.ELEMENT),i=r(e.TEXT),a=r(e.DOCUMENT);return{name:t,type:n,value:function(e){return e.dom().nodeValue},isElement:o,isText:i,isDocument:a,isComment:function(r){return n(r)===e.COMMENT||"#comment"===t(r)}}}),n("ephox.sugar.api.properties.Attr",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.sugar.api.node.Node","global!Error","global!console"],function(e,t,n,r,o,i){var a=function(t,n,r){if(!(e.isString(r)||e.isBoolean(r)||e.isNumber(r)))throw i.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new o("Attribute value was not simple");t.setAttribute(n,r+"")},s=function(e,t,n){a(e.dom(),t,n)},c=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},u=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)};return{clone:function(e){return t.foldl(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},set:s,setAll:function(e,t){var r=e.dom();n.each(t,function(e,t){a(r,t,e)})},get:c,has:u,remove:function(e,t){e.dom().removeAttribute(t)},hasNone:function(e){var t=e.dom().attributes;return void 0===t||null===t||0===t.length},transfer:function(e,n,o){r.isElement(e)&&r.isElement(n)&&t.each(o,function(t){var r,o,i;o=n,u(r=e,i=t)&&!u(o,i)&&s(o,i,c(r,i))})}}}),n("ephox.sugar.api.node.Body",["ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","global!document"],function(e,t,n,r){var o=e.cached(function(){return i(t.fromDom(r))}),i=function(e){var n=e.dom().body;if(null===n||void 0===n)throw"Body is not available yet";return t.fromDom(n)};return{body:o,getBody:i,inBody:function(e){var t=n.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)}}}),n("ephox.sugar.api.search.PredicateFilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Body","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(t,o){var i=[];return e.each(n.children(t),function(e){o(e)&&(i=i.concat([e])),i=i.concat(r(e,o))}),i};return{all:function(e){return r(t.body(),e)},ancestors:function(t,r,o){return e.filter(n.parents(t,o),r)},siblings:function(t,r){return e.filter(n.siblings(t),r)},children:function(t,r){return e.filter(n.children(t),r)},descendants:r}}),n("ephox.sugar.api.search.SelectorFilter",["ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.Selectors"],function(e,t){return{all:function(e){return t.all(e)},ancestors:function(n,r,o){return e.ancestors(n,function(e){return t.is(e,r)},o)},siblings:function(n,r){return e.siblings(n,function(e){return t.is(e,r)})},children:function(n,r){return e.children(n,function(e){return t.is(e,r)})},descendants:function(e,n){return t.all(n,e)}}}),n("ephox.sugar.impl.ClosestOrAncestor",["ephox.katamari.api.Type","ephox.katamari.api.Option"],function(e,t){return function(n,r,o,i,a){return n(o,i)?t.some(o):e.isFunction(a)&&a(o)?t.none():r(o,i,a)}}),n("ephox.sugar.api.search.PredicateFind",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Body","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n,r,o,i,a,s){var c=function(t,o,i){for(var s=t.dom(),c=e.isFunction(i)?i:n.constant(!1);s.parentNode;){var u=a.fromDom(s=s.parentNode);if(o(u))return r.some(u);if(c(u))break}return r.none()},u=function(e,r){return t.find(e.dom().childNodes,n.compose(r,a.fromDom)).map(a.fromDom)},l=function(e,t){var n=function(e){for(var o=0;o<e.childNodes.length;o++){if(t(a.fromDom(e.childNodes[o])))return r.some(a.fromDom(e.childNodes[o]));var i=n(e.childNodes[o]);if(i.isSome())return i}return r.none()};return n(e.dom())};return{first:function(e){return l(o.body(),e)},ancestor:c,closest:function(e,t,n){return s(function(e){return t(e)},c,e,t,n)},sibling:function(e,t){var n=e.dom();return n.parentNode?u(a.fromDom(n.parentNode),function(n){return!i.eq(e,n)&&t(n)}):r.none()},child:u,descendant:l}}),n("ephox.sugar.api.search.SelectorFind",["ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n){var r=function(n,r,o){return e.ancestor(n,function(e){return t.is(e,r)},o)};return{first:function(e){return t.one(e)},ancestor:r,sibling:function(n,r){return e.sibling(n,function(e){return t.is(e,r)})},child:function(n,r){return e.child(n,function(e){return t.is(e,r)})},descendant:function(e,n){return t.one(n,e)},closest:function(e,o,i){return n(t.is,r,e,o,i)}}}),r("global!parseInt",parseInt),n("ephox.snooker.api.TableLookup",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.Structs","ephox.snooker.util.LayerSelector","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Selectors","ephox.sugar.api.search.Traverse","global!parseInt"],function(e,t,n,r,o,i,a,s,c,u,l,d){var f=function(r,o,i){var s=void 0!==i?i:t.constant(!1);return s(o)?n.none():e.contains(r,a.name(o))?n.some(o):c.ancestor(o,r.join(","),function(e){return u.is(e,"table")||s(e)})},m=function(e,t){return l.parent(t).map(function(t){return s.children(t,e)})},p=function(e,t){return d(i.get(e,t),10)};return{cell:function(e,t){return f(["td","th"],e,t)},firstCell:function(e){return c.descendant(e,"th,td")},cells:function(e){return o.firstLayer(e,"th,td")},neighbourCells:t.curry(m,"th,td"),table:function(e,t){return c.closest(e,"table",t)},row:function(e,t){return f(["tr"],e,t)},rows:function(e){return o.firstLayer(e,"tr")},notCell:function(e,t){return f(["caption","tr","tbody","tfoot","thead"],e,t)},neighbourRows:t.curry(m,"tr"),attr:p,grid:function(e,t,n){var o=p(e,t),i=p(e,n);return r.grid(o,i)}}}),n("ephox.snooker.model.DetailsList",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.api.TableLookup","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Node","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i){return{fromTable:function(a){var s=n.rows(a);return e.map(s,function(a){var s=a,c=i.parent(s).bind(function(e){var t=o.name(e);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"}),u=e.map(n.cells(a),function(e){var n=r.has(e,"rowspan")?parseInt(r.get(e,"rowspan"),10):1,o=r.has(e,"colspan")?parseInt(r.get(e,"colspan"),10):1;return t.detail(e,n,o)});return t.rowdata(s,u,c)})},fromPastedRows:function(o,i){return e.map(o,function(o){var a=e.map(n.cells(o),function(e){var n=r.has(e,"rowspan")?parseInt(r.get(e,"rowspan"),10):1,o=r.has(e,"colspan")?parseInt(r.get(e,"colspan"),10):1;return t.detail(e,n,o)});return t.rowdata(o,a,i.section())})}}}),r("global!Math",Math),n("ephox.snooker.model.Warehouse",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.Structs","global!Math"],function(e,t,n,r,o){var i=function(e,t){return e+","+t},a=function(t,n){var r=e.bind(t.all(),function(e){return e.cells()});return e.filter(r,n)};return{generate:function(n){var a={},s=[],c=n.length,u=0;e.each(n,function(t,n){var c=[];e.each(t.cells(),function(e,t){for(var s=0;void 0!==a[i(n,s)];)s++;for(var l=r.extended(e.element(),e.rowspan(),e.colspan(),n,s),d=0;d<e.colspan();d++)for(var f=0;f<e.rowspan();f++){var m=s+d,p=i(n+f,m);a[p]=l,u=o.max(u,m+1)}c.push(l)}),s.push(r.rowdata(t.element(),c,t.section()))});var l=r.grid(c,u);return{grid:t.constant(l),access:t.constant(a),all:t.constant(s)}},getAt:function(e,t,r){var o=e.access()[i(t,r)];return void 0!==o?n.some(o):n.none()},findItem:function(e,t,r){var o=a(e,function(e){return r(t,e.element())});return o.length>0?n.some(o[0]):n.none()},filterItems:a,justCells:function(t){var n=e.map(t.all(),function(e){return e.cells()});return e.flatten(n)}}}),n("ephox.sugar.impl.Style",[],function(){return{isSupported:function(e){return void 0!==e.style}}}),r("global!window",window),n("ephox.sugar.api.properties.Css",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Body","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.impl.Style","ephox.katamari.api.Strings","global!Error","global!console","global!window"],function(e,t,n,r,o,i,a,s,c,u,l,d,f){var m=function(t,n,r){if(!e.isString(r))throw d.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new l("CSS value must be a string: "+r);c.isSupported(t)&&t.style.setProperty(n,r)},p=function(e,t){c.isSupported(e)&&e.style.removeProperty(t)},h=function(e,t,n){var r=e.dom();m(r,t,n)},g=function(e,t){return c.isSupported(e)?e.style.getPropertyValue(t):""},v=function(e,t){var n=e.dom(),o=g(n,t);return r.from(o).filter(function(e){return e.length>0})};return{copy:function(e,t){var n=e.dom(),r=t.dom();c.isSupported(n)&&c.isSupported(r)&&(r.style.cssText=n.style.cssText)},set:h,preserve:function(e,t){var n=o.get(e,"style"),r=t(e);return(void 0===n?o.remove:o.set)(e,"style",n),r},setAll:function(e,t){var r=e.dom();n.each(t,function(e,t){m(r,t,e)})},setOptions:function(e,t){var r=e.dom();n.each(t,function(e,t){e.fold(function(){p(r,t)},function(e){m(r,t,e)})})},remove:function(e,t){var n=e.dom();p(n,t),o.has(e,"style")&&""===u.trim(o.get(e,"style"))&&o.remove(e,"style")},get:function(e,t){var n=e.dom(),r=f.getComputedStyle(n).getPropertyValue(t),o=""!==r||i.inBody(e)?r:g(n,t);return null===o?void 0:o},getRaw:v,getAllRaw:function(e){var t={},n=e.dom();if(c.isSupported(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);t[o]=n.style[o]}return t},isValidValue:function(e,t,n){var r=a.fromTag(e);return h(r,t,n),v(r,t).isSome()},reflow:function(e){return e.dom().offsetWidth},transfer:function(e,n,r){s.isElement(e)&&s.isElement(n)&&t.each(r,function(t){var r,o;r=n,v(e,o=t).each(function(e){v(r,o).isNone()&&h(r,o,e)})})}}}),n("ephox.sugar.api.dom.Insert",["ephox.sugar.api.search.Traverse"],function(e){var t=function(t,n){e.parent(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},n=function(e,t){e.dom().appendChild(t.dom())};return{before:t,after:function(r,o){e.nextSibling(r).fold(function(){e.parent(r).each(function(e){n(e,o)})},function(e){t(e,o)})},prepend:function(t,r){e.firstChild(t).fold(function(){n(t,r)},function(e){t.dom().insertBefore(r.dom(),e.dom())})},append:n,appendAt:function(r,o,i){e.child(r,i).fold(function(){n(r,o)},function(e){t(e,o)})},wrap:function(e,r){t(e,r),n(r,e)}}}),n("ephox.sugar.api.dom.InsertAll",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert"],function(e,t){return{before:function(n,r){e.each(r,function(e){t.before(n,e)})},after:function(n,r){e.each(r,function(e,o){t.after(0===o?n:r[o-1],e)})},prepend:function(n,r){e.each(r.slice().reverse(),function(e){t.prepend(n,e)})},append:function(n,r){e.each(r,function(e){t.append(n,e)})}}}),n("ephox.sugar.api.dom.Remove",["ephox.katamari.api.Arr","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)};return{empty:function(t){t.dom().textContent="",e.each(n.children(t),function(e){r(e)})},remove:r,unwrap:function(e){var o=n.children(e);o.length>0&&t.before(e,o),r(e)}}}),n("ephox.snooker.api.CopySelected",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Struct","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.util.LayerSelector","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Selectors"],function(e,t,n,r,o,i,a,s,c,u,l,d){var f=n.immutable("minRow","minCol","maxRow","maxCol");return{extract:function(n,m){var p,h,g,v,y,b,x,C,w,k,S=function(e){return d.is(e.element(),m)},T=r.fromTable(n),E=o.generate(T),R=(h=S,g=(p=E).grid().columns(),v=p.grid().rows(),y=g,b=0,x=0,t.each(p.access(),function(e){if(h(e)){var t=e.row(),n=t+e.rowspan()-1,r=e.column(),o=r+e.colspan()-1;t<v?v=t:n>b&&(b=n),r<y?y=r:o>x&&(x=o)}}),f(v,y,b,x)),N="th:not("+m+"),td:not("+m+")",A=i.filterFirstLayer(n,"th,td",function(e){return d.is(e,N)});return e.each(A,l.remove),function(e,t,n,r){for(var i,a,s,l=t.grid().columns(),d=t.grid().rows(),f=0;f<d;f++)for(var m=!1,p=0;p<l;p++)f<n.minRow()||f>n.maxRow()||p<n.minCol()||p>n.maxCol()||(o.getAt(t,f,p).filter(r).isNone()?(i=m,a=e[f].element(),s=c.fromTag("td"),u.append(s,c.fromTag("br")),(i?u.append:u.prepend)(a,s)):m=!0)}(T,E,R,S),w=R,k=e.filter(i.firstLayer(C=n,"tr"),function(e){return 0===e.dom().childElementCount}),e.each(k,l.remove),w.minCol()!==w.maxCol()&&w.minRow()!==w.maxRow()||e.each(i.firstLayer(C,"th,td"),function(e){a.remove(e,"rowspan"),a.remove(e,"colspan")}),a.remove(C,"width"),a.remove(C,"height"),s.remove(C,"width"),s.remove(C,"height"),n}}}),n("ephox.sugar.api.dom.Replication",["ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i){var a=function(e,n){return t.fromDom(e.dom().cloneNode(n))},s=function(e){return a(e,!0)},c=function(n,r){var o=t.fromTag(r),i=e.clone(n);return e.setAll(o,i),o};return{shallow:function(e){return a(e,!1)},shallowAs:c,deep:s,copy:function(e,t){var n=c(e,t),o=i.children(s(e));return r.append(n,o),n},mutate:function(e,t){var a=c(e,t);n.before(e,a);var s=i.children(e);return r.append(a,s),o.remove(e),a}}}),n("ephox.sugar.impl.NodeValue",["ephox.sand.api.PlatformDetection","ephox.katamari.api.Option","global!Error"],function(e,t,n){return function(r,o){var i=function(e){return r(e)?t.from(e.dom().nodeValue):t.none()},a=e.detect().browser,s=a.isIE()&&10===a.version.major?function(e){try{return i(e)}catch(e){return t.none()}}:i;return{get:function(e){if(!r(e))throw new n("Can only get "+o+" value of a "+o+" node");return s(e).getOr("")},getOption:s,set:function(e,t){if(!r(e))throw new n("Can only set raw "+o+" value of a "+o+" node");e.dom().nodeValue=t}}}}),n("ephox.sugar.api.node.Text",["ephox.sugar.api.node.Node","ephox.sugar.impl.NodeValue"],function(e,t){var n=t(e.isText,"text");return{get:function(e){return n.get(e)},getOption:function(e){return n.getOption(e)},set:function(e,t){n.set(e,t)}}}),n("ephox.sugar.api.selection.Awareness",["ephox.katamari.api.Arr","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.Traverse"],function(e,t,n,r){var o=function(e){return"img"===t.name(e)?1:n.getOption(e).fold(function(){return r.children(e).length},function(e){return e.length})},i=["img","br"];return{getEnd:o,isEnd:function(e,t){return o(e)===t},isStart:function(e,t){return 0===t},isCursorPosition:function(r){return n.getOption(r).filter(function(e){return 0!==e.trim().length||e.indexOf("\xa0")>-1}).isSome()||e.contains(i,t.name(r))}}}),n("ephox.sugar.api.selection.CursorPosition",["ephox.katamari.api.Option","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Awareness"],function(e,t,n,r){return{first:function(e){return t.descendant(e,r.isCursorPosition)},last:function(t){return o=r.isCursorPosition,(i=function(t){for(var r=n.children(t),a=r.length-1;a>=0;a--){var s=r[a];if(o(s))return e.some(s);var c=i(s);if(c.isSome())return c}return e.none()})(t);var o,i}}}),n("ephox.snooker.api.TableFill",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(e,t,n,r,o,i,a,s,c,u,l,d){var f=function(){var e=i.fromTag("td");return r.append(e,i.fromTag("br")),e},m=function(e,n,r){var i=o.copy(e,n);return t.each(r,function(e,t){null===e?s.remove(i,t):s.set(i,t,e)}),i},p=function(e){return e},h=function(e){return function(){return i.fromTag("tr",e.dom())}};return{cellOperations:function(t,s,p){return{row:h(s),cell:function(s){var f,m,h,g=l.owner(s.element()),v=i.fromTag(a.name(s.element()),g.dom()),y=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),b=y.length>0?(f=s.element(),m=v,h=y,d.first(f).map(function(t){var i=h.join(","),a=u.ancestors(t,i,function(e){return n.eq(e,f)});return e.foldr(a,function(e,t){var n=o.shallow(t);return r.append(e,n),n},m)}).getOr(m)):v;return r.append(b,i.fromTag("br")),c.copy(s.element(),v),c.remove(v,"height"),1!==s.colspan()&&c.remove(s.element(),"width"),t(s.element(),v),v},replace:m,gap:f}},paste:function(e){return{row:h(e),cell:f,replace:p,gap:f}}}}),n("ephox.sugar.api.node.Elements",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","global!document"],function(e,t,n,r){return{fromHtml:function(e,o){var i=(o||r).createElement("div");return i.innerHTML=e,n.children(t.fromDom(i))},fromTags:function(n,r){return e.map(n,function(e){return t.fromTag(e,r)})},fromText:function(n,r){return e.map(n,function(e){return t.fromText(e,r)})},fromDom:function(n){return e.map(n,t.fromDom)}}}),n("ephox.boss.common.TagBoundaries",[],function(){return["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"]}),n("ephox.boss.api.DomUniverse",["ephox.boss.common.TagBoundaries","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.properties.Attr","ephox.sugar.api.dom.Compare","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.node.Text","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p,h,g){return function(){return{up:n.constant({selector:p.ancestor,closest:p.closest,predicate:d.ancestor,all:g.parents}),down:n.constant({selector:m.descendants,predicate:l.descendants}),styles:n.constant({get:i.get,getRaw:i.getRaw,set:i.set,remove:i.remove}),attrs:n.constant({get:r.get,set:r.set,remove:r.remove,copyTo:function(e,t){var n=r.clone(e);r.setAll(t,n)}}),insert:n.constant({before:s.before,after:s.after,afterAll:c.after,append:s.append,appendAll:c.append,prepend:s.prepend,wrap:s.wrap}),remove:n.constant({unwrap:f.unwrap,remove:f.remove}),create:n.constant({nu:a.fromTag,clone:function(e){return a.fromDom(e.dom().cloneNode(!1))},text:a.fromText}),query:n.constant({comparePosition:function(e,t){return e.dom().compareDocumentPosition(t.dom())},prevSibling:g.prevSibling,nextSibling:g.nextSibling}),property:n.constant({children:g.children,name:u.name,parent:g.parent,isText:u.isText,isComment:u.isComment,isElement:u.isElement,getText:h.get,setText:h.set,isBoundary:function(n){return!!u.isElement(n)&&("body"===u.name(n)||t.contains(e,u.name(n)))},isEmptyTag:function(e){return!!u.isElement(e)&&t.contains(["br","img","hr","input"],u.name(e))}}),eq:o.eq,is:o.is}}}),n("ephox.robin.parent.Breaker",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct"],function(e,t,n,r){var o=r.immutable("left","right"),i=function(n,r,o){var i=n.property().children(r);return e.findIndex(i,t.curry(n.eq,o)).map(function(e){return{before:t.constant(i.slice(0,e)),after:t.constant(i.slice(e+1))}})};return{breakToLeft:function(e,t,n){return i(e,t,n).map(function(r){var i=e.create().clone(t);return e.insert().appendAll(i,r.before().concat([n])),e.insert().appendAll(t,r.after()),e.insert().before(t,i),o(i,t)})},breakToRight:function(e,t,n){return i(e,t,n).map(function(n){var r=e.create().clone(t);return e.insert().appendAll(r,n.after()),e.insert().after(t,r),o(t,r)})},breakPath:function(e,t,o,i){var a=r.immutable("first","second","splits"),s=function(t,r,c){var u=a(t,n.none(),c);return o(t)?a(t,r,c):e.property().parent(t).bind(function(r){return i(e,r,t).map(function(e){var t=[{first:e.left,second:e.right}],i=o(r)?r:e.left();return s(i,n.some(e.right()),c.concat(t))}).getOr(u)})};return s(t,n.none(),[])}}}),n("ephox.robin.parent.Shared",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(e,t,n){return{oneAll:function(r,o,i){return i.length>0?(a=r,s=o,c=(d=i)[0],u=d.slice(1),l=s(a,c),e.foldr(u,function(e,n){var r,o,i=s(a,n);return r=a,o=i,e.bind(function(e){return o.filter(t.curry(r.eq,e))})},l)):n.none();var a,s,c,u,l,d}}}),n("ephox.robin.parent.Subset",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","global!Math"],function(e,t,n,r){var o=function(e,n){return t.curry(e.eq,n)},i=function(n,r,i,a){var s=void 0!==a?a:t.constant(!1),c=[r].concat(n.up().all(r)),u=[i].concat(n.up().all(i)),l=function(t){return e.findIndex(t,s).fold(function(){return t},function(e){return t.slice(0,e+1)})},d=l(c),f=l(u),m=e.find(d,function(t){return e.exists(f,o(n,t))});return{firstpath:t.constant(d),secondpath:t.constant(f),shared:t.constant(m)}};return{subset:function(t,a,s){var c=i(t,a,s);return c.shared().bind(function(i){return function(t,i,a,s){var c=t.property().children(i);if(t.eq(i,a[0]))return n.some([a[0]]);if(t.eq(i,s[0]))return n.some([s[0]]);var u=function(n){var r=e.reverse(n),a=e.findIndex(r,o(t,i)).getOr(-1);return e.findIndex(c,o(t,a<r.length-1?r[a+1]:r[a]))},l=u(a),d=u(s);return l.bind(function(e){return d.map(function(t){var n=r.min(e,t),o=r.max(e,t);return c.slice(n,o+1)})})}(t,i,c.firstpath(),c.secondpath())})},ancestors:i}}),n("ephox.robin.api.general.Parent",["ephox.robin.parent.Breaker","ephox.robin.parent.Shared","ephox.robin.parent.Subset"],function(e,t,n){return{sharedOne:function(e,n,r){return t.oneAll(e,n,r)},subset:function(e,t,r){return n.subset(e,t,r)},ancestors:function(e,t,r,o){return n.ancestors(e,t,r,o)},breakToLeft:function(t,n,r){return e.breakToLeft(t,n,r)},breakToRight:function(t,n,r){return e.breakToRight(t,n,r)},breakPath:function(t,n,r,o){return e.breakPath(t,n,r,o)}}}),n("ephox.robin.api.dom.DomParent",["ephox.boss.api.DomUniverse","ephox.robin.api.general.Parent"],function(e,t){var n=e();return{sharedOne:function(e,r){return t.sharedOne(n,function(t,n){return e(n)},r)},subset:function(e,r){return t.subset(n,e,r)},ancestors:function(e,r,o){return t.ancestors(n,e,r,o)},breakToLeft:function(e,r){return t.breakToLeft(n,e,r)},breakToRight:function(e,r){return t.breakToRight(n,e,r)},breakPath:function(e,r,o){return t.breakPath(n,e,r,function(e,t,n){return o(t,n)})}}}),n("ephox.snooker.selection.CellBounds",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.model.Warehouse"],function(e,t,n){var r=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()};return{inSelection:function(e,t){var n=t.column(),r=t.column()+t.colspan()-1,o=t.row(),i=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&o<=e.finishRow()&&i>=e.startRow()},isWithin:r,isRectangular:function(o,i){for(var a=!0,s=e.curry(r,i),c=i.startRow();c<=i.finishRow();c++)for(var u=i.startCol();u<=i.finishCol();u++)a=a&&n.getAt(o,c,u).exists(s);return a?t.some(i):t.none()}}}),n("ephox.snooker.selection.CellGroup",["ephox.snooker.api.Structs","ephox.snooker.model.Warehouse","ephox.snooker.selection.CellBounds","ephox.sugar.api.dom.Compare","global!Math"],function(e,t,n,r,o){var i=function(n,i,a){var s=t.findItem(n,i,r.eq),c=t.findItem(n,a,r.eq);return s.bind(function(t){return c.map(function(n){return i=n,e.bounds(o.min((r=t).row(),i.row()),o.min(r.column(),i.column()),o.max(r.row()+r.rowspan()-1,i.row()+i.rowspan()-1),o.max(r.column()+r.colspan()-1,i.column()+i.colspan()-1));var r,i})})};return{getAnyBox:i,getBox:function(e,t,r){return i(e,t,r).bind(function(t){return n.isRectangular(e,t)})}}}),n("ephox.snooker.selection.CellFinder",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.Warehouse","ephox.snooker.selection.CellBounds","ephox.snooker.selection.CellGroup","ephox.sugar.api.dom.Compare"],function(e,t,n,r,o,i){return{moveBy:function(e,t,r,o){return n.findItem(e,t,i.eq).bind(function(t){var i=r>0?t.row()+t.rowspan()-1:t.row(),a=o>0?t.column()+t.colspan()-1:t.column();return n.getAt(e,i+r,a+o).map(function(e){return e.element()})})},intercepts:function(i,a,s){return o.getAnyBox(i,a,s).map(function(o){var a=n.filterItems(i,t.curry(r.inSelection,o));return e.map(a,function(e){return e.element()})})},parentCell:function(e,t){return n.findItem(e,t,function(e,t){return i.contains(t,e)}).bind(function(e){return e.element()})}}}),n("ephox.snooker.api.TablePositions",["ephox.snooker.api.TableLookup","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.selection.CellFinder","ephox.snooker.selection.CellGroup","ephox.sugar.api.dom.Compare"],function(e,t,n,r,o,i){var a=function(e){var r=t.fromTable(e);return n.generate(r)};return{moveBy:function(t,n,o){return e.table(t).bind(function(e){var i=a(e);return r.moveBy(i,t,n,o)})},intercepts:function(e,t,n){var o=a(e);return r.intercepts(o,t,n)},nestedIntercepts:function(e,t,n,o,s){var c=a(e),u=i.eq(e,n)?t:r.parentCell(c,t),l=i.eq(e,s)?o:r.parentCell(c,o);return r.intercepts(c,u,l)},getBox:function(e,t,n){var r=a(e);return o.getBox(r,t,n)}}}),n("ephox.darwin.selection.CellSelection",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.robin.api.dom.DomParent","ephox.snooker.api.TablePositions","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Selectors"],function(e,t,n,r,o,i,a,s,c){var u=function(e,t){return s.ancestor(e,"table")},l=function(e,t,a){return i.eq(e,t)?n.some([e]):u(e).bind(function(n){return u(t).bind(function(c){return i.eq(n,c)?o.intercepts(n,e,t):i.contains(n,c)?o.nestedIntercepts(n,e,n,t,c):i.contains(c,n)?o.nestedIntercepts(c,e,n,t,c):r.ancestors(e,t).shared().bind(function(r){return s.closest(r,"table",a).bind(function(r){return o.nestedIntercepts(r,e,n,t,c)})})})})};return{identify:l,retrieve:function(e,t){var r=a.descendants(e,t);return r.length>0?n.some(r):n.none()},shiftSelection:function(n,r,i,a,u){return(d=n,f=u,e.find(d,function(e){return c.is(e,f)})).bind(function(e){return o.moveBy(e,r,i).bind(function(e){return r=a,s.ancestor(n=e,"table").bind(function(e){return s.descendant(e,r).bind(function(e){return l(e,n).map(function(r){return{boxes:t.constant(r),start:t.constant(e),finish:t.constant(n)}})})});var n,r})});var d,f},getEdges:function(e,n,o){return s.descendant(e,n).bind(function(n){return s.descendant(e,o).bind(function(e){return r.sharedOne(u,[n,e]).map(function(r){return{first:t.constant(n),last:t.constant(e),table:t.constant(r)}})})})}}}),n("ephox.darwin.api.TableSelection",["ephox.darwin.selection.CellSelection","ephox.katamari.api.Option","ephox.snooker.api.TablePositions","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind"],function(e,t,n,r,o){return{retrieve:function(t,n){return e.retrieve(t,n)},retrieveBox:function(i,a,s){return e.getEdges(i,a,s).bind(function(e){var a=function(e){return r.eq(i,e)},s=o.ancestor(e.first(),"thead,tfoot,tbody,table",a),c=o.ancestor(e.last(),"thead,tfoot,tbody,table",a);return s.bind(function(o){return c.bind(function(i){return r.eq(o,i)?n.getBox(e.table(),e.first(),e.last()):t.none()})})})}}}),n("tinymce.plugins.table.selection.Ephemera",["ephox.katamari.api.Fun"],function(e){return{selected:e.constant("data-mce-selected"),selectedSelector:e.constant("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:e.constant("[data-mce-selected]"),firstSelected:e.constant("data-mce-first-selected"),firstSelectedSelector:e.constant("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:e.constant("data-mce-last-selected"),lastSelectedSelector:e.constant("td[data-mce-last-selected],th[data-mce-last-selected]")}}),n("ephox.katamari.api.Adt",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Type","global!Array","global!Error","global!console"],function(e,t,n,r,o,i){return{generate:function(a){if(!n.isArray(a))throw new o("cases must be an array");if(0===a.length)throw new o("there must be at least one case");var s=[],c={};return e.each(a,function(u,l){var d=t.keys(u);if(1!==d.length)throw new o("one and only one name per case");var f=d[0],m=u[f];if(void 0!==c[f])throw new o("duplicate key detected:"+f);if("cata"===f)throw new o("cannot have a case named cata (sorry)");if(!n.isArray(m))throw new o("case arguments must be an array");s.push(f),c[f]=function(){var n=arguments.length;if(n!==m.length)throw new o("Wrong number of arguments to case "+f+". Expected "+m.length+" ("+m+"), got "+n);for(var c=new r(n),u=0;u<c.length;u++)c[u]=arguments[u];return{fold:function(){if(arguments.length!==a.length)throw new o("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[l].apply(null,c)},match:function(n){var r=t.keys(n);if(s.length!==r.length)throw new o("Wrong number of arguments to match. Expected: "+s.join(",")+"\nActual: "+r.join(","));if(!e.forall(s,function(t){return e.contains(r,t)}))throw new o("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+s.join(", "));return n[f].apply(null,c)},log:function(e){i.log(e,{constructors:s,constructor:f,params:c})}}}}),c}}}),n("tinymce.plugins.table.selection.SelectionTypes",["ephox.katamari.api.Adt"],function(e){var t=e.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]);return{cata:function(e,t,n,r){return e.fold(t,n,r)},none:t.none,multiple:t.multiple,single:t.single}}),n("tinymce.plugins.table.queries.CellOperations",["ephox.darwin.api.TableSelection","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.properties.Attr","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.SelectionTypes"],function(e,t,n,r,o,i,a){var s=function(e,t){return a.cata(t.get(),n.constant([]),n.identity,n.constant([e]))};return{mergable:function(t,o){return a.cata(o.get(),r.none,function(o,a){return 0===o.length?r.none():e.retrieveBox(t,i.firstSelectedSelector(),i.lastSelectedSelector()).bind(function(e){return o.length>1?r.some({bounds:n.constant(e),cells:n.constant(o)}):r.none()})},r.none)},unmergable:function(e,n){var i=s(e,n);return i.length>0&&t.forall(i,function(e){return o.has(e,"rowspan")&&parseInt(o.get(e,"rowspan"),10)>1||o.has(e,"colspan")&&parseInt(o.get(e,"colspan"),10)>1})?r.some(i):r.none()},selection:s}}),n("tinymce.plugins.table.queries.TableTargets",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","tinymce.plugins.table.queries.CellOperations"],function(e,t,n,r){var o=function(n){return{element:e.constant(n),mergable:t.none,unmergable:t.none,selection:e.constant([n])}},i=n.immutable("element","clipboard","generators");return{noMenu:o,forMenu:function(t,n,o){return{element:e.constant(o),mergable:e.constant(r.mergable(n,t)),unmergable:e.constant(r.unmergable(o,t)),selection:e.constant(r.selection(o,t))}},notCell:function(e){return o(e)},paste:i,pasteRows:function(n,o,i,a,s){return{element:e.constant(i),mergable:t.none,unmergable:t.none,selection:e.constant(r.selection(i,n)),clipboard:e.constant(a),generators:e.constant(s)}}}}),n("tinymce.plugins.table.actions.Clipboard",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.CopySelected","ephox.snooker.api.TableFill","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.node.Elements","ephox.sugar.api.node.Node","tinymce.plugins.table.queries.TableTargets","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.SelectionTypes"],function(e,t,n,r,o,i,a,s,c,u,l,d,f){return{registerEvents:function(m,p,h,g){m.on("BeforeGetContent",function(n){!0===n.selection&&f.cata(p.get(),t.noop,function(t){var o;n.preventDefault(),(o=t,i.table(o[0]).map(a.deep).map(function(e){return[r.extract(e,d.attributeSelector())]})).each(function(t){n.content=e.map(t,function(e){return m.selection.serializer.serialize(e.dom(),{})}).join("")})},t.noop)}),m.on("BeforeSetContent",function(t){!0===t.selection&&!0===t.paste&&n.from(m.dom.getParent(m.selection.getStart(),"th,td")).each(function(n){var r=s.fromDom(n);i.table(r).bind(function(n){var i=e.filter(c.fromHtml(t.content),function(e){return"meta"!==u.name(e)});if(1===i.length&&"table"===u.name(i[0])){t.preventDefault();var a=s.fromDom(m.getDoc()),d=o.paste(a),f=l.paste(r,i[0],d);h.pasteCells(n,f).each(function(e){m.selection.setRng(e),m.focus(),g.clear(n)})}})})})}}}),n("ephox.snooker.operate.Render",["ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll"],function(e,t,n,r,o){return{render:function(i,a,s,c){var u=n.fromTag("table");t.setAll(u,{"border-collapse":"collapse",width:"100%"}),e.set(u,"border","1");var l=n.fromTag("tbody");r.append(u,l);for(var d=[],f=0;f<i;f++){for(var m=n.fromTag("tr"),p=0;p<a;p++){var h=n.fromTag(f<s||p<c?"th":"td");p<c&&e.set(h,"scope","row"),f<s&&e.set(h,"scope","col"),r.append(h,n.fromTag("br")),t.set(h,"width",100/a+"%"),r.append(m,h)}d.push(m)}return o.append(l,d),u}}}),n("ephox.snooker.api.TableRender",["ephox.snooker.operate.Render"],function(e){return{render:e.render}}),n("ephox.sugar.api.properties.Html",["ephox.sugar.api.node.Element","ephox.sugar.api.node.Elements","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i){var a=function(e){return e.dom().innerHTML};return{get:a,set:function(a,s){var c=i.owner(a).dom(),u=e.fromDom(c.createDocumentFragment()),l=t.fromHtml(s,c);r.append(u,l),o.empty(a),n.append(a,u)},getOuter:function(t){var r=e.fromTag("div"),o=e.fromDom(t.dom().cloneNode(!0));return n.append(r,o),a(r)}}}),n("tinymce.plugins.table.actions.InsertTable",["ephox.katamari.api.Fun","ephox.snooker.api.TableRender","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Html","ephox.sugar.api.search.SelectorFind"],function(e,t,n,r,o,i){var a=function(e,t){e.selection.select(t.dom(),!0),e.selection.collapse(!0)};return{insert:function(s,c,u){var l,d=t.render(u,c,0,0);r.set(d,"id","__mce");var f,m,p=o.getOuter(d);return s.insertContent(p),l=s.dom.get("__mce"),s.dom.setAttrib(l,"id",null),s.$("tr",l).each(function(e,t){s.fire("newrow",{node:t}),s.$("th,td",t).each(function(e,t){s.fire("newcell",{node:t})})}),s.dom.setAttribs(l,s.settings.table_default_attributes||{}),s.dom.setStyles(l,s.settings.table_default_styles||{}),f=s,m=n.fromDom(l),i.descendant(m,"td,th").each(e.curry(a,f)),l}}}),n("ephox.sugar.impl.Dimension",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.sugar.api.properties.Css","ephox.sugar.impl.Style"],function(e,t,n,r){return function(o,i){var a=function(e){var t=i(e);if(t<=0||null===t){var r=n.get(e,o);return parseFloat(r)||0}return t},s=function(e,r){return t.foldl(r,function(t,r){var o=n.get(e,r),i=void 0===o?0:parseInt(o,10);return isNaN(i)?t:t+i},0)};return{set:function(t,n){if(!e.isNumber(n)&&!n.match(/^[0-9]+$/))throw o+".set accepts only positive integer values. Value was "+n;var i=t.dom();r.isSupported(i)&&(i.style[o]=n+"px")},get:a,getOuter:a,aggregate:s,max:function(e,t,n){var r=s(e,n);return t>r?t-r:0}}}}),n("ephox.sugar.api.view.Height",["ephox.sugar.api.node.Body","ephox.sugar.api.properties.Css","ephox.sugar.impl.Dimension"],function(e,t,n){var r=n("height",function(t){return e.inBody(t)?t.dom().getBoundingClientRect().height:t.dom().offsetHeight});return{set:function(e,t){r.set(e,t)},get:function(e){return r.get(e)},getOuter:function(e){return r.getOuter(e)},setMax:function(e,n){var o=r.max(e,n,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);t.set(e,"max-height",o+"px")}}}),n("ephox.sugar.api.view.Width",["ephox.sugar.api.properties.Css","ephox.sugar.impl.Dimension"],function(e,t){var n=t("width",function(e){return e.dom().offsetWidth});return{set:function(e,t){n.set(e,t)},get:function(e){return n.get(e)},getOuter:function(e){return n.getOuter(e)},setMax:function(t,r){var o=n.max(t,r,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);e.set(t,"max-width",o+"px")}}}),n("ephox.snooker.resize.RuntimeSize",["ephox.sand.api.PlatformDetection","ephox.sugar.api.properties.Css","ephox.sugar.api.view.Height","ephox.sugar.api.view.Width"],function(e,t,n,r){var o=e.detect(),i=function(e,n,r){return o=t.get(e,n),i=r,a=parseFloat(o),isNaN(a)?i:a;var o,i,a};return{getWidth:function(e){return i(e,"width",r.get(e))},getHeight:function(e){return o.browser.isIE()||o.browser.isEdge()?(a=i(r=e,"padding-top",0),s=i(r,"padding-bottom",0),c=i(r,"border-top-width",0),u=i(r,"border-bottom-width",0),l=r.dom().getBoundingClientRect().height,"border-box"===t.get(r,"box-sizing")?l:l-a-s-(c+u)):i(e,"height",n.get(e));var r,a,s,c,u,l}}}),n("ephox.snooker.resize.Sizes",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Strings","ephox.snooker.api.TableLookup","ephox.snooker.resize.RuntimeSize","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.view.Height","ephox.sugar.api.view.Width","global!Math","global!parseInt"],function(e,t,n,r,o,i,a,s,c,u,l,d){var f=/(\d+(\.\d+)?)(\w|%)*/,m=/(\d+(\.\d+)?)%/,p=/(\d+(\.\d+)?)px|em/,h=function(e,t){s.set(e,"height",t+"px")},g=function(e){return s.getRaw(e,"width").fold(function(){return t.from(a.get(e,"width"))},function(e){return t.some(e)})},v=function(e,t){return e/t.pixelWidth()*100};return{percentageBasedSizeRegex:e.constant(m),pixelBasedSizeRegex:e.constant(p),setPixelWidth:function(e,t){s.set(e,"width",t+"px")},setPercentageWidth:function(e,t){s.set(e,"width",t+"%")},setHeight:h,getPixelWidth:function(e,t){return g(e).fold(function(){var t=u.get(e);return d(t,10)},function(n){return function(e,t,n){if(p.test(t)){var r=p.exec(t);return d(r[1],10)}if(m.test(t)){var o=m.exec(t);return parseFloat(o[1],10)/100*n.pixelWidth()}var i=u.get(e);return d(i,10)}(e,n,t)})},getPercentageWidth:function(e,t){return g(e).fold(function(){var n=u.get(e),r=d(n,10);return v(r,t)},function(n){return function(e,t,n){if(m.test(t)){var r=m.exec(t);return parseFloat(r[1],10)}var o=u.get(e),i=d(o,10);return v(i,n)}(e,n,t)})},getGenericWidth:function(n){return g(n).bind(function(n){if(f.test(n)){var r=f.exec(n);return t.some({width:e.constant(r[1]),unit:e.constant(r[3])})}return t.none()})},setGenericWidth:function(e,t,n){s.set(e,"width",t+n)},getHeight:function(e){return t=T=e,((k=s.getRaw(u=t,"height").getOrThunk(function(){return o.getHeight(u)+"px"}))?(m=t,p=c.get,g=h,w=d(f=k,10),n.endsWith(f,"%")&&"table"!==i.name(m)?(y=w,b=p,x=g,C=r.table(v=m).map(function(e){var t=b(e);return l.floor(y/100*t)}).getOr(y),x(v,C),C):w):c.get(t))/(a.has(S=T,"rowspan")?d(a.get(S,"rowspan"),10):1);var t,u,f,m,p,g,v,y,b,x,C,w,k,S,T},getRawWidth:g}}),n("ephox.snooker.api.CellMutations",["ephox.snooker.resize.Sizes"],function(e){return{halve:function(t,n){e.getGenericWidth(t).each(function(r){var o=r.width()/2;e.setGenericWidth(t,o,r.unit()),e.setGenericWidth(n,o,r.unit())})}}}),n("ephox.sugar.api.view.Position",["ephox.katamari.api.Fun"],function(e){var t=function(n,r){return{left:e.constant(n),top:e.constant(r),translate:function(e,o){return t(n+e,r+o)}}};return t}),n("ephox.sugar.api.dom.Dom",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","global!document"],function(e,t,n,r,o,i){return{attached:function(r,a){var s=a||n.fromDom(i.documentElement);return o.ancestor(r,e.curry(t.eq,s)).isSome()},windowOf:function(e){var t=e.dom();return t===t.window?e:r.isDocument(e)?t.defaultView||t.parentWindow:null}}}),n("ephox.sugar.api.view.Location",["ephox.sugar.api.view.Position","ephox.sugar.api.dom.Dom","ephox.sugar.api.node.Element"],function(e,t,n){var r=function(e,t){return void 0!==e?e:void 0!==t?t:0},o=function(r){var o,i=r.dom(),a=i.ownerDocument,s=a.body,c=n.fromDom(a.documentElement);return s===i?e(s.offsetLeft,s.offsetTop):t.attached(r,c)?(o=i.getBoundingClientRect(),e(o.left,o.top)):e(0,0)};return{absolute:function(e){var i=e.dom().ownerDocument,a=i.body,s=t.windowOf(n.fromDom(i)),c=i.documentElement,u=r(s.pageYOffset,c.scrollTop),l=r(s.pageXOffset,c.scrollLeft),d=r(c.clientTop,a.clientTop),f=r(c.clientLeft,a.clientLeft);return o(e).translate(l-f,u-d)},relative:function(t){var n=t.dom();return e(n.offsetLeft,n.offsetTop)},viewport:o}}),n("ephox.snooker.resize.BarPositions",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Struct","ephox.sugar.api.view.Height","ephox.sugar.api.view.Location","ephox.sugar.api.view.Width"],function(e,t,n,r,o,i){var a=n.immutable("row","y"),s=n.immutable("col","x"),c=function(e){return o.absolute(e).left()+i.getOuter(e)},u=function(e){return o.absolute(e).left()},l=function(e,t){return s(e,u(t))},d=function(e,t){return s(e,c(t))},f=function(e){return o.absolute(e).top()},m=function(t,n,r){if(0===r.length)return[];var o=e.map(r.slice(1),function(e,n){return e.map(function(e){return t(n,e)})}),i=r[r.length-1].map(function(e){return n(r.length-1,e)});return o.concat([i])},p={delta:t.identity,positions:t.curry(m,function(e,t){return a(e,f(t))},function(e,t){return a(e,f(t)+r.getOuter(t))}),edge:f},h={delta:t.identity,edge:u,positions:t.curry(m,l,d)};return{height:p,rtl:{delta:function(e,t){return-e},edge:c,positions:t.curry(m,d,l)},ltr:h}}),n("ephox.snooker.api.ResizeDirection",["ephox.snooker.resize.BarPositions"],function(e){return{ltr:e.ltr,rtl:e.rtl}}),n("ephox.snooker.api.TableDirection",["ephox.snooker.api.ResizeDirection"],function(e){return function(t){var n=function(n){return t(n).isRtl()?e.rtl:e.ltr};return{delta:function(e,t){return n(t).delta(e,t)},edge:function(e){return n(e).edge(e)},positions:function(e,t){return n(t).positions(e,t)}}}}),n("ephox.snooker.api.TableGridSize",["ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse"],function(e,t){return{getGridSize:function(n){var r=e.fromTable(n);return t.generate(r).grid()}}}),n("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),n("ephox.katamari.api.Contracts",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Type","ephox.katamari.util.BagUtils","global!Error"],function(e,t,n,r,o,i){var a=function(e,t){return s(e,t,{validate:r.isFunction,label:"function"})},s=function(t,r,a){if(0===r.length)throw new i("You must specify at least one required field.");return o.validateStrArr("required",r),o.checkDupes(r),function(i){var s=n.keys(i);e.forall(r,function(t){return e.contains(s,t)})||o.reqMessage(r,s),t(r,s);var c=e.filter(r,function(e){return!a.validate(i[e],e)});return c.length>0&&o.invalidTypeMessage(c,a.label),i}},c=t.noop;return{exactly:t.curry(a,function(t,n){var r=e.filter(n,function(n){return!e.contains(t,n)});r.length>0&&o.unsuppMessage(r)}),ensure:t.curry(a,c),ensureWith:t.curry(s,c)}}),n("ephox.snooker.api.Generators",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Cell","ephox.katamari.api.Contracts","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","global!parseInt"],function(e,t,n,r,o,i,a,s){var c=function(e){var n=i.has(e,"colspan")?s(i.get(e,"colspan"),10):1,r=i.has(e,"rowspan")?s(i.get(e,"rowspan"),10):1;return{element:t.constant(e),colspan:t.constant(n),rowspan:t.constant(r)}},u=o.exactly(["cell","row","replace","gap"]);return{modification:function(e,t){u(e);var o=r(n.none()),i=void 0!==t?t:c,a=function(t){var r,a=(r=i(t),e.cell(r));return o.get().isNone()&&o.set(n.some(a)),s=n.some({item:t,replacement:a}),a},s=n.none();return{getOrInit:function(e,t){return s.fold(function(){return a(e)},function(n){return t(e,n.item)?n.replacement:a(e)})},cursor:o.get}},transform:function(t,o){return function(i){var a=r(n.none());u(i);var s=[],c=function(e){var r=i.replace(e,o,{scope:t});return s.push({item:e,sub:r}),a.get().isNone()&&a.set(n.some(r)),r};return{replaceOrInit:function(t,n){return(r=t,o=n,e.find(s,function(e){return o(e.item,r)})).fold(function(){return c(t)},function(e){return n(t,e.item)?e.sub:c(t)});var r,o},cursor:a.get}}},merging:function(e){u(e);var o=r(n.none());return{combine:function(r){return o.get().isNone()&&o.set(n.some(r)),function(){var n=e.cell({element:t.constant(r),colspan:t.constant(1),rowspan:t.constant(1)});return a.remove(n,"width"),a.remove(r,"width"),n}},cursor:o.get}}}}),n("ephox.robin.api.general.Structure",["ephox.katamari.api.Arr"],function(e){var t=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],n=function(n,r){var o=n.property().name(r);return e.contains(t,o)},r=function(t,n){return e.contains(["br","img","hr","input"],t.property().name(n))};return{isBlock:n,isList:function(t,n){var r=t.property().name(n);return e.contains(["ol","ul"],r)},isFormatting:function(t,n){var r=t.property().name(n);return e.contains(["address","pre","p","h1","h2","h3","h4","h5","h6"],r)},isHeading:function(t,n){var r=t.property().name(n);return e.contains(["h1","h2","h3","h4","h5","h6"],r)},isContainer:function(t,n){return e.contains(["div","li","td","th","blockquote","body","caption"],t.property().name(n))},isEmptyTag:r,isFrame:function(e,t){return"iframe"===e.property().name(t)},isInline:function(e,t){return!(n(e,t)||r(e,t))&&"li"!==e.property().name(t)}}}),n("ephox.robin.api.dom.DomStructure",["ephox.boss.api.DomUniverse","ephox.robin.api.general.Structure"],function(e,t){var n=e();return{isBlock:function(e){return t.isBlock(n,e)},isList:function(e){return t.isList(n,e)},isFormatting:function(e){return t.isFormatting(n,e)},isHeading:function(e){return t.isHeading(n,e)},isContainer:function(e){return t.isContainer(n,e)},isEmptyTag:function(e){return t.isEmptyTag(n,e)},isFrame:function(e){return t.isFrame(n,e)},isInline:function(e){return t.isInline(n,e)}}}),n("ephox.snooker.api.TableContent",["ephox.katamari.api.Arr","ephox.robin.api.dom.DomStructure","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(e,t,n,r,o,i,a,s,c,u,l){return{merge:function(d){var f,m=function(e){return"br"===a.name(e)},p=0===(f=e.bind(d,function(r){var o,d=u.children(r);return e.forall(d,function(e){return m(e)||a.isText(e)&&0===s.get(e).trim().length})?[]:d.concat(l.last(o=r).bind(function(e){var r=u.nextSibling(e).map(function(e){return!!t.isBlock(e)||(t.isEmptyTag(e)?"img"!==a.name(e):void 0)}).getOr(!1);return u.parent(e).map(function(s){return!0===r||"li"===a.name(u=s)||c.ancestor(u,t.isList).isSome()||m(e)||t.isBlock(s)&&!n.eq(o,s)?[]:[i.fromTag("br")];var u})}).getOr([]))})).length?[i.fromTag("br")]:f;o.empty(d[0]),r.append(d[0],p)}}}),n("ephox.snooker.model.GridRow",["ephox.katamari.api.Arr","ephox.snooker.api.Structs"],function(e,t){var n=function(e,n){return t.rowcells(n,e.section())},r=function(e,t){return e.cells()[t]};return{addCell:function(e,t,r){var o=e.cells(),i=o.slice(0,t),a=o.slice(t),s=i.concat([r]).concat(a);return n(e,s)},setCells:n,mutateCell:function(e,t,n){e.cells()[t]=n},getCell:r,getCellElement:function(e,t){return r(e,t).element()},mapCells:function(n,r){var o=n.cells(),i=e.map(o,r);return t.rowcells(i,n.section())},cellLength:function(e){return e.cells().length}}}),n("ephox.katamari.api.Merger",["ephox.katamari.api.Type","global!Array","global!Error"],function(e,t,n){var r=function(e){return function(){for(var r=new t(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];if(0===r.length)throw new n("Can't merge zero objects");for(var i={},a=0;a<r.length;a++){var s=r[a];for(var c in s)s.hasOwnProperty(c)&&(i[c]=e(i[c],s[c]))}return i}},o=r(function(t,n){return e.isObject(t)&&e.isObject(n)?o(t,n):n}),i=r(function(e,t){return t});return{deepMerge:o,merge:i}}),n("ephox.katamari.api.Options",["ephox.katamari.api.Option"],function(e){return{cat:function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},findMap:function(t,n){for(var r=0;r<t.length;r++){var o=n(t[r],r);if(o.isSome())return o}return e.none()},liftN:function(t,n){for(var r=[],o=0;o<t.length;o++){var i=t[o];if(!i.isSome())return e.none();r.push(i.getOrDie())}return e.some(n.apply(null,r))}}}),n("ephox.snooker.model.TableGrid",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.GridRow"],function(e,t,n){var r=function(t,n){if(0===t.length)return 0;var r=t[0];return e.findIndex(t,function(e){return!n(r.element(),e.element())}).fold(function(){return t.length},function(e){return e})};return{subgrid:function(o,i,a,s){var c,u,l,d,f=(c=o,u=i,c[u]).cells().slice(a),m=r(f,s),p=(l=o,d=a,e.map(l,function(e){return n.getCell(e,d)})).slice(i),h=r(p,s);return{colspan:t.constant(m),rowspan:t.constant(h)}}}}),n("ephox.snooker.model.Transitions",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.TableGrid","ephox.snooker.model.Warehouse"],function(e,t,n,r){return{toDetails:function(r,o){var i=e.map(r,function(t,n){return e.map(t.cells(),function(e,t){return!1})});return e.map(r,function(a,s){var c=e.bind(a.cells(),function(e,a){if(!1===i[s][a]){var c=n.subgrid(r,s,a,o);return function(e,t,n,r){for(var o=e;o<e+n;o++)for(var a=t;a<t+r;a++)i[o][a]=!0}(s,a,c.rowspan(),c.colspan()),[t.detailnew(e.element(),c.rowspan(),c.colspan(),e.isNew())]}return[]});return t.rowdetails(c,a.section())})},toGrid:function(e,n,o){for(var i=[],a=0;a<e.grid().rows();a++){for(var s=[],c=0;c<e.grid().columns();c++){var u=r.getAt(e,a,c).map(function(e){return t.elementnew(e.element(),o)}).getOrThunk(function(){return t.elementnew(n.gap(),!0)});s.push(u)}var l=t.rowcells(s,e.all()[a].section());i.push(l)}return i}}}),n("ephox.snooker.operate.Redraw",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.dom.Replication","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i,a,s,c,u){var l=function(e,t,r,o){r===o?n.remove(e,t):n.set(e,t,r)};return{render:function(n,s){var d=[],f=[],m=function(t,s){t.length>0?function(t,s){var m=c.child(n,s).getOrThunk(function(){var e=r.fromTag(s,u.owner(n).dom());return o.append(n,e),e});a.empty(m);var p=e.map(t,function(t){t.isNew()&&d.push(t.element());var n=t.element();return a.empty(n),e.each(t.cells(),function(e){e.isNew()&&f.push(e.element()),l(e.element(),"colspan",e.colspan(),1),l(e.element(),"rowspan",e.rowspan(),1),o.append(n,e.element())}),n});i.append(m,p)}(t,s):c.child(n,s).bind(a.remove)},p=[],h=[],g=[];return e.each(s,function(e){switch(e.section()){case"thead":p.push(e);break;case"tbody":h.push(e);break;case"tfoot":g.push(e)}}),m(p,"thead"),m(h,"tbody"),m(g,"tfoot"),{newRows:t.constant(d),newCells:t.constant(f)}},copy:function(t){return e.map(t,function(t){var n=s.shallow(t.element());return e.each(t.cells(),function(e){var t=s.deep(e.element());l(t,"colspan",e.colspan(),1),l(t,"rowspan",e.rowspan(),1),o.append(n,t)}),n})}}}),n("ephox.snooker.util.Util",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.katamari.api.Options","global!Math"],function(e,t,n,r){return{repeat:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},range:function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n},unique:function(t,n){var r=[];return e.each(t,function(e,o){o<t.length-1&&!n(e,t[o+1])?r.push(e):o===t.length-1&&r.push(e)}),r},deduce:function(o,i){if(i<0||i>=o.length-1)return t.none();var a=o[i].fold(function(){var t=e.reverse(o.slice(0,i));return n.findMap(t,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return t.some({value:e,delta:0})}),s=o[i+1].fold(function(){var e=o.slice(i+1);return n.findMap(e,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return t.some({value:e,delta:1})});return a.bind(function(e){return s.map(function(t){var n=t.delta+e.delta;return r.abs(t.value-e.value)/n})})}}}),n("ephox.snooker.lookup.Blocks",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.model.Warehouse","ephox.snooker.util.Util"],function(e,t,n,r,o){var i=function(t,r,o){var i=t();return e.find(i,r).orThunk(function(){return n.from(i[0]).orThunk(o)}).map(function(e){return e.element()})};return{columns:function(n){var a=n.grid(),s=o.range(0,a.columns()),c=o.range(0,a.rows());return e.map(s,function(o){return i(function(){return e.bind(c,function(e){return r.getAt(n,e,o).filter(function(e){return e.column()===o}).fold(t.constant([]),function(e){return[e]})})},function(e){return 1===e.colspan()},function(){return r.getAt(n,0,o)})})},rows:function(n){var a=n.grid(),s=o.range(0,a.rows()),c=o.range(0,a.columns());return e.map(s,function(o){return i(function(){return e.bind(c,function(e){return r.getAt(n,o,e).filter(function(e){return e.row()===o}).fold(t.constant([]),function(e){return[e]})})},function(e){return 1===e.rowspan()},function(){return r.getAt(n,o,0)})})}}}),n("ephox.snooker.resize.Bar",["ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element"],function(e,t,n){return{col:function(r,o,i,a,s){var c=n.fromTag("div");return t.setAll(c,{position:"absolute",left:o-a/2+"px",top:i+"px",height:s+"px",width:a+"px"}),e.set(c,"data-column",r),c},row:function(r,o,i,a,s){var c=n.fromTag("div");return t.setAll(c,{position:"absolute",left:o+"px",top:i-s/2+"px",height:s+"px",width:a+"px"}),e.set(c,"data-row",r),c}}}),n("ephox.katamari.api.Namespace",[],function(){return{css:function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}}}}),n("ephox.snooker.style.Styles",["ephox.katamari.api.Namespace"],function(e){return{resolve:e.css("ephox-snooker").resolve}}),n("ephox.sugar.api.properties.Toggler",[],function(){return function(e,t,n){var r=n||!1,o=function(){t(),r=!0},i=function(){e(),r=!1};return{on:o,off:i,toggle:function(){(r?i:o)()},isOn:function(){return r}}}}),n("ephox.sugar.api.properties.AttrList",["ephox.katamari.api.Arr","ephox.sugar.api.properties.Attr"],function(e,t){var n=function(e,n){var r=t.get(e,n);return void 0===r||""===r?[]:r.split(" ")};return{read:n,add:function(e,r,o){var i=n(e,r).concat([o]);t.set(e,r,i.join(" "))},remove:function(r,o,i){var a=e.filter(n(r,o),function(e){return e!==i});a.length>0?t.set(r,o,a.join(" ")):t.remove(r,o)}}}),n("ephox.sugar.impl.ClassList",["ephox.katamari.api.Arr","ephox.sugar.api.properties.AttrList"],function(e,t){var n=function(e){return t.read(e,"class")},r=function(e,n){return t.add(e,"class",n)},o=function(e,n){return t.remove(e,"class",n)};return{get:n,add:r,remove:o,toggle:function(t,i){e.contains(n(t),i)?o(t,i):r(t,i)},supports:function(e){return void 0!==e.dom().classList}}}),n("ephox.sugar.api.properties.Class",["ephox.sugar.api.properties.Toggler","ephox.sugar.api.properties.Attr","ephox.sugar.impl.ClassList"],function(e,t,n){var r=function(e,t){return n.supports(e)&&e.dom().classList.contains(t)};return{add:function(e,t){n.supports(e)?e.dom().classList.add(t):n.add(e,t)},remove:function(e,r){var o;n.supports(e)?e.dom().classList.remove(r):n.remove(e,r),0===(n.supports(o=e)?o.dom().classList:n.get(o)).length&&t.remove(o,"class")},toggle:function(e,t){return n.supports(e)?e.dom().classList.toggle(t):n.toggle(e,t)},toggler:function(t,o){var i=n.supports(t),a=t.dom().classList;return e(function(){i?a.remove(o):n.remove(t,o)},function(){i?a.add(o):n.add(t,o)},r(t,o))},has:r}}),n("ephox.snooker.resize.Bars",["ephox.katamari.api.Arr","ephox.snooker.lookup.Blocks","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.resize.Bar","ephox.snooker.style.Styles","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Css","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.view.Height","ephox.sugar.api.view.Location","ephox.sugar.api.view.Width"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m){var p=i.resolve("resizer-bar"),h=i.resolve("resizer-rows"),g=i.resolve("resizer-cols"),v=function(t){var n=l.descendants(t.parent(),"."+p);e.each(n,s.remove)},y=function(t,n,r){var o=t.origin();e.each(n,function(e,n){e.each(function(e){var n=r(o,e);c.add(n,p),a.append(t.parent(),n)})})},b=function(t,n){var r=l.descendants(t.parent(),"."+p);e.each(r,n)};return{refresh:function(e,i,a,s){v(e);var u,l,p,b,x,C,w,k,S,T,E,R,N,A,D,P=n.fromTable(i),B=r.generate(P);u=e,p=t.rows(B),b=t.columns(B),x=a,C=s,D=f.absolute(l=i),w=u,k=p.length>0?x.positions(p,l):[],S=D,T=m.getOuter(l),y(w,k,function(e,t){var n=o.row(t.row(),S.left()-e.left(),t.y()-e.top(),T,7);return c.add(n,h),n}),E=u,R=b.length>0?C.positions(b,l):[],N=D,A=d.getOuter(l),y(E,R,function(e,t){var n=o.col(t.col(),t.x()-e.left(),N.top()-e.top(),7,A);return c.add(n,g),n})},hide:function(e){b(e,function(e){u.set(e,"display","none")})},show:function(e){b(e,function(e){u.set(e,"display","block")})},destroy:v,isRowBar:function(e){return c.has(e,h)},isColBar:function(e){return c.has(e,g)}}}),n("ephox.snooker.model.RunOperation",["ephox.katamari.api.Arr","ephox.katamari.api.Merger","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.snooker.api.Structs","ephox.snooker.api.TableLookup","ephox.snooker.model.DetailsList","ephox.snooker.model.Transitions","ephox.snooker.model.Warehouse","ephox.snooker.operate.Redraw","ephox.snooker.resize.BarPositions","ephox.snooker.resize.Bars","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p){var h=function(t,n){var r,a=c.toDetails(t,m.eq);return r=n,e.map(a,function(e){var t,n=(t=e.details(),o.findMap(t,function(e){return p.parent(e.element()).map(function(e){var t=p.parent(e).isNone();return i.elementnew(e,t)})}).getOrThunk(function(){return i.elementnew(r.row(),!0)}));return i.rowdatanew(n.element(),e.details(),e.section(),n.isNew())})},g=function(t,n){var r=e.flatten(e.map(t.all(),function(e){return e.cells()}));return e.find(r,function(e){return m.eq(n,e.element())})};return{run:function(e,t,o,i,a){return function(p,g,v,y,b){var x=s.fromTable(g),C=u.generate(x);return t(C,v).map(function(t){var r=c.toGrid(C,y,!1),o=e(r,t,m.eq,a(y)),i=h(o.grid(),y);return{grid:n.constant(i),cursor:o.cursor}}).fold(function(){return r.none()},function(e){var t=l.render(g,e.grid());return o(g,e.grid(),b),i(g),f.refresh(p,g,d.height,b),r.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}},toDetailList:h,onCell:function(e,t){return a.cell(t.element()).bind(function(t){return g(e,t)})},onCells:function(t,n){var i=e.map(n.selection(),function(e){return a.cell(e).bind(function(e){return g(t,e)})}),s=o.cat(i);return s.length>0?r.some(s):r.none()},onPaste:function(e,n){return a.cell(n.element()).bind(function(r){return g(e,r).map(function(e){return t.merge(e,{generators:n.generators,clipboard:n.clipboard})})})},onPasteRows:function(n,i){var s=e.map(i.selection(),function(e){return a.cell(e).bind(function(e){return g(n,e)})}),c=o.cat(s);return c.length>0?r.some(t.merge({cells:c},{generators:i.generators,clipboard:i.clipboard})):r.none()},onMergable:function(e,t){return t.mergable()},onUnmergable:function(e,t){return t.unmergable()}}}),n("ephox.katamari.api.Result",["ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(e,t){var n=function(r){return{is:function(e){return r===e},isValue:e.constant(!0),isError:e.constant(!1),getOr:e.constant(r),getOrThunk:e.constant(r),getOrDie:e.constant(r),or:function(e){return n(r)},orThunk:function(e){return n(r)},fold:function(e,t){return t(r)},map:function(e){return n(e(r))},each:function(e){e(r)},bind:function(e){return e(r)},exists:function(e){return e(r)},forall:function(e){return e(r)},toOption:function(){return t.some(r)}}},r=function(n){return{is:e.constant(!1),isValue:e.constant(!1),isError:e.constant(!0),getOr:e.identity,getOrThunk:function(e){return e()},getOrDie:function(){return e.die(n)()},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return r(n)},each:e.noop,bind:function(e){return r(n)},exists:e.constant(!1),forall:e.constant(!0),toOption:t.none}};return{value:n,error:r}}),n("ephox.snooker.model.Fitment",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Result","ephox.snooker.api.Structs","ephox.snooker.model.GridRow","ephox.snooker.util.Util","global!Array","global!Error","global!Math"],function(e,t,n,r,o,i,a,s,c){var u=function(t,n){return e.map(t,function(){return r.elementnew(n.cell(),!0)})},l=function(t,n,r){return e.map(t,function(e){return o.setCells(e,e.cells().concat(u(i.range(0,n),r)))})};return{measure:function(e,r,i){if(e.row()>=r.length||e.column()>o.cellLength(r[0]))return n.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column());var a=r.slice(e.row()),s=a[0].cells().slice(e.column()),c=o.cellLength(i[0]);return n.value({rowDelta:t.constant(a.length-i.length),colDelta:t.constant(s.length-c)})},measureWidth:function(e,n){var r=o.cellLength(e[0]),i=o.cellLength(n[0]);return{rowDelta:t.constant(0),colDelta:t.constant(r-i)}},tailor:function(e,n,r){var a=n.colDelta()<0?l:t.identity;return(n.rowDelta()<0?function(e,t,n){return e.concat(i.repeat(t,function(t){return o.setCells(e[e.length-1],u(e[e.length-1].cells(),n))}))}:t.identity)(a(e,c.abs(n.colDelta()),r),c.abs(n.rowDelta()),r)}}}),n("ephox.snooker.operate.MergingOperations",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(e,t,n,r){return{merge:function(e,t,o,i){if(0===e.length)return e;for(var a=t.startRow();a<=t.finishRow();a++)for(var s=t.startCol();s<=t.finishCol();s++)r.mutateCell(e[a],s,n.elementnew(i(),!1));return e},unmerge:function(e,t,o,i){for(var a=!0,s=0;s<e.length;s++)for(var c=0;c<r.cellLength(e[0]);c++){var u=o(r.getCellElement(e[s],c),t);!0===u&&!1===a?r.mutateCell(e[s],c,n.elementnew(i(),!0)):!0===u&&(a=!1)}return e},splitRows:function(o,i,a,s){if(i>0&&i<o.length){var c=o[i-1].cells(),u=(l=a,e.foldl(c,function(t,n){return e.exists(t,function(e){return l(e.element(),n.element())})?t:t.concat([n])},[]));e.each(u,function(e){for(var c=t.none(),u=i;u<o.length;u++)for(var l=0;l<r.cellLength(o[0]);l++){var d=o[u].cells()[l];a(d.element(),e.element())&&(c.isNone()&&(c=t.some(s())),c.each(function(e){r.mutateCell(o[u],l,n.elementnew(e,!0))}))}})}var l;return o}}}),n("ephox.snooker.model.TableMerge",["ephox.katamari.api.Fun","ephox.snooker.api.Structs","ephox.snooker.model.Fitment","ephox.snooker.model.GridRow","ephox.snooker.operate.MergingOperations"],function(e,t,n,r,o){return{merge:function(i,a,s,c,u){return n.measure(i,a,s).map(function(l){var d=n.tailor(a,l,c);return function(n,i,a,s,c){for(var u,l,d,f,m,p,h,g=n.row(),v=n.column(),y=g+a.length,b=v+r.cellLength(a[0]),x=g;x<y;x++)for(var C=v;C<b;C++){f=c,m=void 0,p=void 0,m=r.getCell((u=i)[l=x],d=C),p=e.curry(f,m.element()),h=u[l],u.length>1&&r.cellLength(h)>1&&(d>0&&p(r.getCellElement(h,d-1))||d<h.length-1&&p(r.getCellElement(h,d+1))||l>0&&p(r.getCellElement(u[l-1],d))||l<u.length-1&&p(r.getCellElement(u[l+1],d)))&&o.unmerge(i,r.getCellElement(i[x],C),c,s.cell);var w=r.getCellElement(a[x-g],C-v),k=s.replace(w);r.mutateCell(i[x],C,t.elementnew(k,!0))}return i}(i,d,s,c,u)})},insert:function(e,t,r,i,a){o.splitRows(t,e,a,i.cell);var s=n.measureWidth(r,t),c=n.tailor(r,s,i),u=n.measureWidth(t,c),l=n.tailor(t,u,i);return l.slice(0,e).concat(c).concat(l.slice(e,l.length))}}}),n("ephox.snooker.operate.ModificationOperations",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(e,t,n){return{insertRowAt:function(e,r,o,i,a){var s=e.slice(0,r),c=e.slice(r),u=n.mapCells(e[o],function(o,s){return r>0&&r<e.length&&i(n.getCellElement(e[r-1],s),n.getCellElement(e[r],s))?n.getCell(e[r],s):t.elementnew(a(o.element(),i),!0)});return s.concat([u]).concat(c)},insertColumnAt:function(r,o,i,a,s){return e.map(r,function(e){var r=o>0&&o<n.cellLength(e)&&a(n.getCellElement(e,o-1),n.getCellElement(e,o))?n.getCell(e,o):t.elementnew(s(n.getCellElement(e,i),a),!0);return n.addCell(e,o,r)})},splitCellIntoColumns:function(r,o,i,a,s){var c=i+1;return e.map(r,function(e,r){var u=r===o?t.elementnew(s(n.getCellElement(e,i),a),!0):n.getCell(e,i);return n.addCell(e,c,u)})},splitCellIntoRows:function(e,r,o,i,a){var s=r+1,c=e.slice(0,s),u=e.slice(s),l=n.mapCells(e[r],function(e,n){return n===o?t.elementnew(a(e.element(),i),!0):e});return c.concat([l]).concat(u)},deleteRowsAt:function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))},deleteColumnsAt:function(n,r,o){var i=e.map(n,function(e){var n=e.cells().slice(0,r).concat(e.cells().slice(o+1));return t.rowcells(n,e.section())});return e.filter(i,function(e){return e.cells().length>0})}}}),n("ephox.snooker.operate.TransformOperations",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(e,t,n){var r=function(r,o,i,a){return e.map(r,function(r){return n.mapCells(r,function(n){return r=n,e.exists(o,function(e){return i(r.element(),e.element())})?t.elementnew(a(n.element(),i),!0):n;var r})})},o=function(e,t,r,o){return void 0!==n.getCellElement(e[t],r)&&t>0&&o(n.getCellElement(e[t-1],r),n.getCellElement(e[t],r))},i=function(e,t,r){return t>0&&r(n.getCellElement(e,t-1),n.getCellElement(e,t))};return{replaceColumn:function(t,a,s,c){var u=e.bind(t,function(e,r){return o(t,r,a,s)||i(e,a,s)?[]:[n.getCell(e,a)]});return r(t,u,s,c)},replaceRow:function(t,n,a,s){var c=t[n],u=e.bind(c.cells(),function(e,r){return o(t,n,r,a)||i(c,r,a)?[]:[e]});return r(t,u,a,s)}}}),n("ephox.snooker.calc.ColumnContext",[],function(){var e=function(e){return{fold:e}};return{none:function(){return e(function(e,t,n,r,o){return e()})},only:function(t){return e(function(e,n,r,o,i){return n(t)})},left:function(t,n){return e(function(e,r,o,i,a){return o(t,n)})},middle:function(t,n,r){return e(function(e,o,i,a,s){return a(t,n,r)})},right:function(t,n){return e(function(e,r,o,i,a){return a(t,n)})}}}),n("ephox.snooker.calc.Deltas",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.calc.ColumnContext","global!Math"],function(e,t,n,r){return{determine:function(o,i,a,s){var c,u,l=o.slice(0),d=(u=i,0===(c=o).length?n.none():1===c.length?n.only(0):0===u?n.left(0,1):u===c.length-1?n.right(u-1,u):u>0&&u<c.length-1?n.middle(u-1,u,u+1):n.none()),f=function(n){return e.map(n,t.constant(0))},m=t.constant(f(l)),p=function(e,t){if(a>=0){var n=r.max(s.minCellWidth(),l[t]-a);return f(l.slice(0,e)).concat([a,n-l[t]]).concat(f(l.slice(t+1)))}var o=r.max(s.minCellWidth(),l[e]+a),i=l[e]-o;return f(l.slice(0,e)).concat([o-l[e],i]).concat(f(l.slice(t+1)))};return d.fold(m,function(e){return s.singleColumnWidth(l[e],a)},p,function(e,t,n){return p(t,n)},function(e,t){if(a>=0)return f(l.slice(0,t)).concat([a]);var n=r.max(s.minCellWidth(),l[t]+a);return f(l.slice(0,t)).concat([n-l[t]])})}}}),n("ephox.snooker.util.CellUtils",["ephox.katamari.api.Fun","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","global!parseInt"],function(e,t,n,r){var o=function(e,n){return t.has(e,n)&&r(t.get(e,n),10)>1};return{hasColspan:function(e){return o(e,"colspan")},hasRowspan:function(e){return o(e,"rowspan")},minWidth:e.constant(10),minHeight:e.constant(10),getInt:function(e,t){return r(n.get(e,t),10)}}}),n("ephox.snooker.resize.ColumnSizes",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.lookup.Blocks","ephox.snooker.resize.Sizes","ephox.snooker.util.CellUtils","ephox.snooker.util.Util","ephox.sugar.api.properties.Css"],function(e,t,n,r,o,i,a){var s=function(e,t,n){return a.getRaw(e,t).fold(function(){return n(e)+"px"},function(e){return e})},c=function(e){return s(e,"width",r.getPixelWidth)},u=function(e){return s(e,"height",r.getHeight)},l=function(r,a,s,c,u){var l=n.columns(r),d=e.map(l,function(e){return e.map(a.edge)});return e.map(l,function(e,n){return e.filter(t.not(o.hasColspan)).fold(function(){var e=i.deduce(d,n);return c(e)},function(e){return s(e,u)})})},d=function(e){return e.map(function(e){return e+"px"}).getOr("")},f=function(r,a,s,c){var u=n.rows(r),l=e.map(u,function(e){return e.map(a.edge)});return e.map(u,function(e,n){return e.filter(t.not(o.hasRowspan)).fold(function(){var e=i.deduce(l,n);return c(e)},function(e){return s(e)})})};return{getRawWidths:function(e,t){return l(e,t,c,d)},getPixelWidths:function(e,t,n){return l(e,t,r.getPixelWidth,function(e){return e.getOrThunk(n.minCellWidth)},n)},getPercentageWidths:function(e,t,n){return l(e,t,r.getPercentageWidth,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})},n)},getPixelHeights:function(e,t){return f(e,t,r.getHeight,function(e){return e.getOrThunk(o.minHeight)})},getRawHeights:function(e,t){return f(e,t,u,d)}}}),n("ephox.snooker.resize.Recalculations",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.Warehouse","global!parseInt"],function(e,t,n,r){var o=function(e,t,n){for(var r=0,o=e;o<t;o++)r+=void 0!==n[o]?n[o]:0;return r};return{recalculateWidth:function(r,i){var a=n.justCells(r);return e.map(a,function(e){var n=o(e.column(),e.column()+e.colspan(),i);return{element:e.element,width:t.constant(n),colspan:e.colspan}})},recalculateHeight:function(r,i){var a=n.justCells(r);return e.map(a,function(e){var n=o(e.row(),e.row()+e.rowspan(),i);return{element:e.element,height:t.constant(n),rowspan:e.rowspan}})},matchRowHeight:function(n,r){return e.map(n.all(),function(e,n){return{element:e.element,height:t.constant(r[n])}})}}}),n("ephox.snooker.resize.TableSize",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.resize.ColumnSizes","ephox.snooker.resize.Sizes","ephox.snooker.util.CellUtils","ephox.sugar.api.view.Width","global!Math"],function(e,t,n,r,o,i,a){var s=function(i){var s=parseInt(i,10),c=t.identity;return{width:t.constant(s),pixelWidth:t.constant(s),getWidths:n.getPixelWidths,getCellDelta:c,singleColumnWidth:function(e,t){return[a.max(o.minWidth(),e+t)-e]},minCellWidth:o.minWidth,setElementWidth:r.setPixelWidth,setTableWidth:function(t,n,o){var i=e.foldr(n,function(e,t){return e+t},0);r.setPixelWidth(t,i)}}};return{getTableSize:function(e){return r.getRawWidth(e).fold(function(){var t=i.get(e);return s(t)},function(a){return function(e,a){if(r.percentageBasedSizeRegex().test(a)){var c=r.percentageBasedSizeRegex().exec(a);return l=e,d=parseFloat(c[1],10),f=i.get(l),{width:t.constant(d),pixelWidth:t.constant(f),getWidths:n.getPercentageWidths,getCellDelta:function(e){return e/f*100},singleColumnWidth:function(e,t){return[100-e]},minCellWidth:function(){return o.minWidth()/f*100},setElementWidth:r.setPercentageWidth,setTableWidth:function(e,t,n){r.setPercentageWidth(e,d+n)}}}if(r.pixelBasedSizeRegex().test(a)){var u=r.pixelBasedSizeRegex().exec(a);return s(u[1])}var l,d,f,m=i.get(e);return s(m)}(e,a)})}}}),n("ephox.snooker.resize.Adjustments",["ephox.katamari.api.Arr","ephox.snooker.calc.Deltas","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.resize.ColumnSizes","ephox.snooker.resize.Recalculations","ephox.snooker.resize.Sizes","ephox.snooker.resize.TableSize","ephox.snooker.util.CellUtils","global!Math"],function(e,t,n,r,o,i,a,s,c,u){var l=function(e){return r.generate(e)},d=function(e){var t=n.fromTable(e);return l(t)};return{adjustWidth:function(n,r,o,a){var c=s.getTableSize(n),u=c.getCellDelta(r),l=d(n),f=c.getWidths(l,a,c),m=t.determine(f,o,u,c),p=e.map(m,function(e,t){return e+f[t]}),h=i.recalculateWidth(l,p);e.each(h,function(e){c.setElementWidth(e.element(),e.width())}),o===l.grid().columns()-1&&c.setTableWidth(n,p,u)},adjustHeight:function(t,n,r,s){var l=d(t),f=o.getPixelHeights(l,s),m=e.map(f,function(e,t){return r===t?u.max(n+e,c.minHeight()):e}),p=i.recalculateHeight(l,m),h=i.matchRowHeight(l,m);e.each(h,function(e){a.setHeight(e.element(),e.height())}),e.each(p,function(e){a.setHeight(e.element(),e.height())});var g=e.foldr(m,function(e,t){return e+t},0);a.setHeight(t,g)},adjustWidthTo:function(t,n,r){var o=s.getTableSize(t),a=l(n),c=o.getWidths(a,r,o),u=i.recalculateWidth(a,c);e.each(u,function(e){o.setElementWidth(e.element(),e.width())});var d=e.foldr(c,function(e,t){return t+e},0);u.length>0&&o.setElementWidth(t,d)}}}),n("ephox.snooker.api.TableOperations",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.snooker.api.Generators","ephox.snooker.api.Structs","ephox.snooker.api.TableContent","ephox.snooker.api.TableLookup","ephox.snooker.model.DetailsList","ephox.snooker.model.GridRow","ephox.snooker.model.RunOperation","ephox.snooker.model.TableMerge","ephox.snooker.model.Transitions","ephox.snooker.model.Warehouse","ephox.snooker.operate.MergingOperations","ephox.snooker.operate.ModificationOperations","ephox.snooker.operate.TransformOperations","ephox.snooker.resize.Adjustments","ephox.sugar.api.dom.Remove"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p,h,g,v,y){var b=function(e){0===s.cells(e).length&&y.remove(e)},x=r.immutable("grid","cursor"),C=function(e,t,n){return w(e,t,n).orThunk(function(){return w(e,0,0)})},w=function(e,t,r){return n.from(e[t]).bind(function(e){return n.from(e.cells()[r]).bind(function(e){return n.from(e.element())})})},k=function(e,t,n){return x(e,w(e,t,n))},S=function(t){return e.foldl(t,function(t,n){return e.exists(t,function(e){return e.row()===n.row()})?t:t.concat([n])},[]).sort(function(e,t){return e.row()-t.row()})},T=function(t){return e.foldl(t,function(t,n){return e.exists(t,function(e){return e.column()===n.column()})?t:t.concat([n])},[]).sort(function(e,t){return e.column()-t.column()})},E=function(e,t,n){var r=c.fromPastedRows(e,n),o=m.generate(r);return f.toGrid(o,t,!0)},R=v.adjustWidthTo;return{insertRowBefore:l.run(function(e,t,n,r){var o=t.row(),i=t.row(),a=h.insertRowAt(e,i,o,n,r.getOrInit);return k(a,i,t.column())},l.onCell,t.noop,t.noop,o.modification),insertRowsBefore:l.run(function(t,n,r,o){var i=n[0].row(),a=n[0].row(),s=S(n),c=e.foldl(s,function(e,t){return h.insertRowAt(e,a,i,r,o.getOrInit)},t);return k(c,a,n[0].column())},l.onCells,t.noop,t.noop,o.modification),insertRowAfter:l.run(function(e,t,n,r){var o=t.row(),i=t.row()+t.rowspan(),a=h.insertRowAt(e,i,o,n,r.getOrInit);return k(a,i,t.column())},l.onCell,t.noop,t.noop,o.modification),insertRowsAfter:l.run(function(t,n,r,o){var i=S(n),a=i[i.length-1].row(),s=i[i.length-1].row()+i[i.length-1].rowspan(),c=e.foldl(i,function(e,t){return h.insertRowAt(e,s,a,r,o.getOrInit)},t);return k(c,s,n[0].column())},l.onCells,t.noop,t.noop,o.modification),insertColumnBefore:l.run(function(e,t,n,r){var o=t.column(),i=t.column(),a=h.insertColumnAt(e,i,o,n,r.getOrInit);return k(a,t.row(),i)},l.onCell,R,t.noop,o.modification),insertColumnsBefore:l.run(function(t,n,r,o){var i=T(n),a=i[0].column(),s=i[0].column(),c=e.foldl(i,function(e,t){return h.insertColumnAt(e,s,a,r,o.getOrInit)},t);return k(c,n[0].row(),s)},l.onCells,R,t.noop,o.modification),insertColumnAfter:l.run(function(e,t,n,r){var o=t.column(),i=t.column()+t.colspan(),a=h.insertColumnAt(e,i,o,n,r.getOrInit);return k(a,t.row(),i)},l.onCell,R,t.noop,o.modification),insertColumnsAfter:l.run(function(t,n,r,o){var i=n[n.length-1].column(),a=n[n.length-1].column()+n[n.length-1].colspan(),s=T(n),c=e.foldl(s,function(e,t){return h.insertColumnAt(e,a,i,r,o.getOrInit)},t);return k(c,n[0].row(),a)},l.onCells,R,t.noop,o.modification),splitCellIntoColumns:l.run(function(e,t,n,r){var o=h.splitCellIntoColumns(e,t.row(),t.column(),n,r.getOrInit);return k(o,t.row(),t.column())},l.onCell,R,t.noop,o.modification),splitCellIntoRows:l.run(function(e,t,n,r){var o=h.splitCellIntoRows(e,t.row(),t.column(),n,r.getOrInit);return k(o,t.row(),t.column())},l.onCell,t.noop,t.noop,o.modification),eraseColumns:l.run(function(e,t,n,r){var o=T(t),i=h.deleteColumnsAt(e,o[0].column(),o[o.length-1].column()),a=C(i,t[0].row(),t[0].column());return x(i,a)},l.onCells,R,b,o.modification),eraseRows:l.run(function(e,t,n,r){var o=S(t),i=h.deleteRowsAt(e,o[0].row(),o[o.length-1].row()),a=C(i,t[0].row(),t[0].column());return x(i,a)},l.onCells,t.noop,b,o.modification),makeColumnHeader:l.run(function(e,t,n,r){var o=g.replaceColumn(e,t.column(),n,r.replaceOrInit);return k(o,t.row(),t.column())},l.onCell,t.noop,t.noop,o.transform("row","th")),unmakeColumnHeader:l.run(function(e,t,n,r){var o=g.replaceColumn(e,t.column(),n,r.replaceOrInit);return k(o,t.row(),t.column())},l.onCell,t.noop,t.noop,o.transform(null,"td")),makeRowHeader:l.run(function(e,t,n,r){var o=g.replaceRow(e,t.row(),n,r.replaceOrInit);return k(o,t.row(),t.column())},l.onCell,t.noop,t.noop,o.transform("col","th")),unmakeRowHeader:l.run(function(e,t,n,r){var o=g.replaceRow(e,t.row(),n,r.replaceOrInit);return k(o,t.row(),t.column())},l.onCell,t.noop,t.noop,o.transform(null,"td")),mergeCells:l.run(function(e,r,o,i){var s=r.cells();a.merge(s);var c=p.merge(e,r.bounds(),o,t.constant(s[0]));return x(c,n.from(s[0]))},l.onMergable,t.noop,t.noop,o.merging),unmergeCells:l.run(function(t,r,o,i){var a=e.foldr(r,function(e,t){return p.unmerge(e,t,o,i.combine(t))},t);return x(a,n.from(r[0]))},l.onUnmergable,R,t.noop,o.merging),pasteCells:l.run(function(e,t,r,o){var a,s,u,l,p=(a=t.clipboard(),s=t.generators(),u=c.fromTable(a),l=m.generate(u),f.toGrid(l,s,!0)),h=i.address(t.row(),t.column());return d.merge(h,e,p,t.generators(),r).fold(function(){return x(e,n.some(t.element()))},function(e){var n=C(e,t.row(),t.column());return x(e,n)})},l.onPaste,R,t.noop,o.modification),pasteRowsBefore:l.run(function(e,t,n,r){var o=e[t.cells[0].row()],i=t.cells[0].row(),a=E(t.clipboard(),t.generators(),o),s=d.insert(i,e,a,t.generators(),n),c=C(s,t.cells[0].row(),t.cells[0].column());return x(s,c)},l.onPasteRows,t.noop,t.noop,o.modification),pasteRowsAfter:l.run(function(e,t,n,r){var o=e[t.cells[0].row()],i=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),a=E(t.clipboard(),t.generators(),o),s=d.insert(i,e,a,t.generators(),n),c=C(s,t.cells[0].row(),t.cells[0].column());return x(s,c)},l.onPasteRows,t.noop,t.noop,o.modification)}}),n("tinymce.plugins.table.alien.Util",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t){var n=function(e){return t.fromDom(e.getBody())};return{getBody:n,getIsRoot:function(t){return function(r){return e.eq(r,n(t))}},addSizeSuffix:function(e){return/^[0-9]+$/.test(e)&&(e+="px"),e},removePxSuffix:function(e){return e?e.replace(/px$/,""):""}}}),n("ephox.sugar.api.properties.Direction",["ephox.sugar.api.properties.Css"],function(e){var t=function(t){return"rtl"===e.get(t,"direction")?"rtl":"ltr"};return{onDirection:function(e,n){return function(r){return"rtl"===t(r)?n:e}},getDirection:t}}),n("tinymce.plugins.table.queries.Direction",["ephox.katamari.api.Fun","ephox.sugar.api.properties.Direction"],function(e,t){var n={isRtl:e.constant(!1)},r={isRtl:e.constant(!0)};return{directionAt:function(e){return"rtl"===t.getDirection(e)?r:n}}}),n("tinymce.plugins.table.actions.TableActions",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.CellMutations","ephox.snooker.api.TableDirection","ephox.snooker.api.TableFill","ephox.snooker.api.TableGridSize","ephox.snooker.api.TableOperations","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.SelectorFilter","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.Direction"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m){return function(p,h){var g,v=function(e){return"table"===u.name(f.getBody(e))};!1!==p.settings.table_clone_elements&&("string"==typeof p.settings.table_clone_elements?g=p.settings.table_clone_elements.split(/[ ,]/):Array.isArray(p.settings.table_clone_elements)&&(g=p.settings.table_clone_elements));var y=n.from(g),b=function(t,r,a,s){return function(u,f){var h=d.descendants(u,"td[data-mce-style],th[data-mce-style]");e.each(h,function(e){l.remove(e,"data-mce-style")});var g=s(),v=c.fromDom(p.getDoc()),b=o(m.directionAt),x=i.cellOperations(a,v,y);return r(u)?t(g,u,f,x,b).bind(function(t){return e.each(t.newRows(),function(e){var t;p.fire("newrow",{node:(t=e).dom()}),t.dom()}),e.each(t.newCells(),function(e){var t;p.fire("newcell",{node:(t=e).dom()}),t.dom()}),t.cursor().map(function(e){var t=p.dom.createRng();return t.setStart(e.dom(),0),t.setEnd(e.dom(),0),t})}):n.none()}};return{deleteRow:b(s.eraseRows,function(e){var t=a.getGridSize(e);return!1===v(p)||t.rows()>1},t.noop,h),deleteColumn:b(s.eraseColumns,function(e){var t=a.getGridSize(e);return!1===v(p)||t.columns()>1},t.noop,h),insertRowsBefore:b(s.insertRowsBefore,t.always,t.noop,h),insertRowsAfter:b(s.insertRowsAfter,t.always,t.noop,h),insertColumnsBefore:b(s.insertColumnsBefore,t.always,r.halve,h),insertColumnsAfter:b(s.insertColumnsAfter,t.always,r.halve,h),mergeCells:b(s.mergeCells,t.always,t.noop,h),unmergeCells:b(s.unmergeCells,t.always,t.noop,h),pasteRowsBefore:b(s.pasteRowsBefore,t.always,t.noop,h),pasteRowsAfter:b(s.pasteRowsAfter,t.always,t.noop,h),pasteCells:b(s.pasteCells,t.always,t.noop,h)}}}),n("ephox.snooker.api.CopyRows",["ephox.snooker.model.DetailsList","ephox.snooker.model.RunOperation","ephox.snooker.model.Transitions","ephox.snooker.model.Warehouse","ephox.snooker.operate.Redraw"],function(e,t,n,r,o){return{copyRows:function(i,a,s){var c=e.fromTable(i),u=r.generate(c);return t.onCells(u,a).map(function(e){var r=n.toGrid(u,s,!1).slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan()),i=t.toDetailList(r,s);return o.copy(i)})}}}),n("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),n("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),n("tinymce.plugins.table.actions.Styles",["tinymce.core.util.Tools"],function(e){return{applyAlign:function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},applyVAlign:function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)},unApplyAlign:function(t,n){e.each("left center right".split(" "),function(e){t.formatter.remove("align"+e,{},n)})},unApplyVAlign:function(t,n){e.each("top middle bottom".split(" "),function(e){t.formatter.remove("valign"+e,{},n)})},getTDTHOverallStyle:function(e,t,n){return function(t,r){for(var o=0;o<r.length;o++){var i=e.getStyle(r[o],n);if("undefined"==typeof t&&(t=i),t!=i)return""}return t}(void 0,e.select("td,th",t))}}}),n("tinymce.plugins.table.ui.Helpers",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.alien.Util"],function(e,t,n){var r=function(e,t){var r=e.dom,o=t.control.rootControl,i=o.toJSON(),a=r.parseStyle(i.style);"style"===t.control.name()?(o.find("#borderStyle").value(a["border-style"]||"")[0].fire("select"),o.find("#borderColor").value(a["border-color"]||"")[0].fire("change"),o.find("#backgroundColor").value(a["background-color"]||"")[0].fire("change"),o.find("#width").value(a.width||"").fire("change"),o.find("#height").value(a.height||"").fire("change")):(a["border-style"]=i.borderStyle,a["border-color"]=i.borderColor,a["background-color"]=i.backgroundColor,a.width=i.width?n.addSizeSuffix(i.width):"",a.height=i.height?n.addSizeSuffix(i.height):""),o.find("#style").value(r.serializeStyle(r.parseStyle(r.serializeStyle(a))))};return{createStyleForm:function(t){var n=function(){var e=t.settings.color_picker_callback;if(e)return function(n){return e.call(t,function(e){n.control.value(e).fire("change")},n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:e.curry(r,t)},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:e.curry(r,t),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:n()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:n()}]}]}},buildListItems:function(e,n,r){var o=function(e,r){return r=r||[],t.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=o(e.menu):(t.value=e.value,n&&n(t)),r.push(t)}),r};return o(e,r||[])},updateStyleField:r,extractAdvancedStyles:function(e,t){var n=e.parseStyle(e.getAttrib(t,"style")),r={};return n["border-style"]&&(r.borderStyle=n["border-style"]),n["border-color"]&&(r.borderColor=n["border-color"]),n["background-color"]&&(r.backgroundColor=n["background-color"]),r.style=e.serializeStyle(n),r}}}),n("tinymce.plugins.table.ui.TableDialog",["ephox.katamari.api.Fun","tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.table.actions.InsertTable","tinymce.plugins.table.actions.Styles","tinymce.plugins.table.alien.Util","tinymce.plugins.table.ui.Helpers"],function(e,t,n,r,o,i,a){function s(e,t,n,r){if("TD"===t.tagName||"TH"===t.tagName)e.setStyle(t,n,r);else if(t.children)for(var o=0;o<t.children.length;o++)s(e,t.children[o],n,r)}var c=function(e,c,u){var l,d,f=e.dom;a.updateStyleField(e,u),!1===(d=u.control.rootControl.toJSON()).class&&delete d.class,e.undoManager.transact(function(){c||(c=r.insert(e,d.cols||1,d.rows||1)),function(e,t,r){var o=e.dom,a={},c={};if(a.class=r.class,c.height=i.addSizeSuffix(r.height),o.getAttrib(t,"width")&&!e.settings.table_style_by_css?a.width=i.removePxSuffix(r.width):c.width=i.addSizeSuffix(r.width),e.settings.table_style_by_css?(c["border-width"]=i.addSizeSuffix(r.border),c["border-spacing"]=i.addSizeSuffix(r.cellspacing),n.extend(a,{"data-mce-border-color":r.borderColor,"data-mce-cell-padding":r.cellpadding,"data-mce-border":r.border})):n.extend(a,{border:r.border,cellpadding:r.cellpadding,cellspacing:r.cellspacing}),e.settings.table_style_by_css&&t.children)for(var u=0;u<t.children.length;u++)s(o,t.children[u],{"border-width":i.addSizeSuffix(r.border),"border-color":r.borderColor,padding:i.addSizeSuffix(r.cellpadding)});r.style?n.extend(c,o.parseStyle(r.style)):c=n.extend({},o.parseStyle(o.getAttrib(t,"style")),c),a.style=o.serializeStyle(c),o.setAttribs(t,a)}(e,c,d),(l=f.select("caption",c)[0])&&!d.caption&&f.remove(l),!l&&d.caption&&((l=f.create("caption")).innerHTML=t.ie?"\xa0":'<br data-mce-bogus="1"/>',c.insertBefore(l,c.firstChild)),o.unApplyAlign(e,c),d.align&&o.applyAlign(e,c,d.align),e.focus(),e.addVisual()})};return{open:function(t,r){var i,s,u,l,d,f,m,p,h,g={};!0===r?(i=t.dom.getParent(t.selection.getStart(),"table"))&&(h={width:(p=(f=t).dom).getStyle(m=i,"width")||p.getAttrib(m,"width"),height:p.getStyle(m,"height")||p.getAttrib(m,"height"),cellspacing:p.getStyle(m,"border-spacing")||p.getAttrib(m,"cellspacing"),cellpadding:p.getAttrib(m,"data-mce-cell-padding")||p.getAttrib(m,"cellpadding")||o.getTDTHOverallStyle(f.dom,m,"padding"),border:p.getAttrib(m,"data-mce-border")||p.getAttrib(m,"border")||o.getTDTHOverallStyle(f.dom,m,"border"),borderColor:p.getAttrib(m,"data-mce-border-color"),caption:!!p.select("caption",m)[0],class:p.getAttrib(m,"class")},n.each("left center right".split(" "),function(e){f.formatter.matchNode(m,"align"+e)&&(h.align=e)}),!1!==f.settings.table_advtab&&n.extend(h,a.extractAdvancedStyles(p,m)),g=h):(s={label:"Cols",name:"cols"},u={label:"Rows",name:"rows"}),t.settings.table_class_list&&(g.class&&(g.class=g.class.replace(/\s*mce\-item\-table\s*/g,"")),l={name:"class",type:"listbox",label:"Class",values:a.buildListItems(t.settings.table_class_list,function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[e.value]})})})}),d={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==t.settings.table_appearance_options?[s,u,{label:"Width",name:"width",onchange:e.curry(a.updateStyleField,t)},{label:"Height",name:"height",onchange:e.curry(a.updateStyleField,t)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[s,u,{label:"Width",name:"width",onchange:e.curry(a.updateStyleField,t)},{label:"Height",name:"height",onchange:e.curry(a.updateStyleField,t)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},l]},t.windowManager.open(!1!==t.settings.table_advtab?{title:"Table properties",data:g,bodyType:"tabpanel",body:[{title:"General",type:"form",items:d},a.createStyleForm(t)],onsubmit:e.curry(c,t,i)}:{title:"Table properties",data:g,body:d,onsubmit:e.curry(c,t,i)})}}}),n("tinymce.plugins.table.ui.RowDialog",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.actions.Styles","tinymce.plugins.table.alien.Util","tinymce.plugins.table.ui.Helpers"],function(e,t,n,r,o){var i=function(e,t,n){var r=e.getParent(t,"table"),o=t.parentNode,i=e.select(n,r)[0];i||(i=e.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?e.insertAfter(i,r.firstChild):r.insertBefore(i,r.firstChild):r.appendChild(i)),i.appendChild(t),o.hasChildNodes()||e.remove(o)};function a(e,a,s){var c,u=e.dom;function l(e,t,n){n&&u.setAttrib(e,t,n)}o.updateStyleField(e,s),c=s.control.rootControl.toJSON(),e.undoManager.transact(function(){t.each(a,function(t){var o,s;l(t,"scope",c.scope),l(t,"style",c.style),l(t,"class",c.class),o=t,(s=r.addSizeSuffix(c.height))&&u.setStyle(o,"height",s),c.type!==t.parentNode.nodeName.toLowerCase()&&i(e.dom,t,c.type),1===a.length&&n.unApplyAlign(e,t),c.align&&n.applyAlign(e,t,c.align)}),e.focus()})}return{open:function(n){var r,i,s,c,u,l,d,f,m,p,h=n.dom,g=[];r=n.dom.getParent(n.selection.getStart(),"table"),i=n.dom.getParent(n.selection.getStart(),"td,th"),t.each(r.rows,function(e){t.each(e.cells,function(t){if(h.getAttrib(t,"data-mce-selected")||t==i)return g.push(e),!1})}),(s=g[0])&&(g.length>1?u={height:"",scope:"",class:"",align:"",type:s.parentNode.nodeName.toLowerCase()}:((p={height:(m=(d=n).dom).getStyle(f=s,"height")||m.getAttrib(f,"height"),scope:m.getAttrib(f,"scope"),class:m.getAttrib(f,"class")}).type=f.parentNode.nodeName.toLowerCase(),t.each("left center right".split(" "),function(e){d.formatter.matchNode(f,"align"+e)&&(p.align=e)}),!1!==d.settings.table_row_advtab&&t.extend(p,o.extractAdvancedStyles(m,f)),u=p),n.settings.table_row_class_list&&(c={name:"class",type:"listbox",label:"Class",values:o.buildListItems(n.settings.table_row_class_list,function(e){e.value&&(e.textStyle=function(){return n.formatter.getCssText({block:"tr",classes:[e.value]})})})}),l={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},c]},n.windowManager.open(!1!==n.settings.table_row_advtab?{title:"Row properties",data:u,bodyType:"tabpanel",body:[{title:"General",type:"form",items:l},o.createStyleForm(h)],onsubmit:e.curry(a,n,g)}:{title:"Row properties",data:u,body:l,onsubmit:e.curry(a,n,g)}))}}}),n("tinymce.plugins.table.ui.CellDialog",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.actions.Styles","tinymce.plugins.table.alien.Util","tinymce.plugins.table.ui.Helpers"],function(e,t,n,r,o){var i=function(e,i,a){var s,c=e.dom;function u(e,t,n){n&&c.setAttrib(e,t,n)}function l(e,t,n){n&&c.setStyle(e,t,n)}o.updateStyleField(e,a),s=a.control.rootControl.toJSON(),e.undoManager.transact(function(){t.each(i,function(t){u(t,"scope",s.scope),1===i.length?u(t,"style",s.style):t.style.cssText+=";"+s.style,u(t,"class",s.class),l(t,"width",r.addSizeSuffix(s.width)),l(t,"height",r.addSizeSuffix(s.height)),s.type&&t.nodeName.toLowerCase()!==s.type&&(t=c.rename(t,s.type)),1===i.length&&(n.unApplyAlign(e,t),n.unApplyVAlign(e,t)),s.align&&n.applyAlign(e,t,s.align),s.valign&&n.applyVAlign(e,t,s.valign)}),e.focus()})};return{open:function(n){var r,a,s,c=[];if(c=n.dom.select("td[data-mce-selected],th[data-mce-selected]"),r=n.dom.getParent(n.selection.getStart(),"td,th"),!c.length&&r&&c.push(r),r=r||c[0]){var u,l,d,f;c.length>1?a={width:"",height:"",scope:"",class:"",align:"",style:"",type:r.nodeName.toLowerCase()}:((f={width:(d=(u=n).dom).getStyle(l=r,"width")||d.getAttrib(l,"width"),height:d.getStyle(l,"height")||d.getAttrib(l,"height"),scope:d.getAttrib(l,"scope"),class:d.getAttrib(l,"class")}).type=l.nodeName.toLowerCase(),t.each("left center right".split(" "),function(e){u.formatter.matchNode(l,"align"+e)&&(f.align=e)}),t.each("top middle bottom".split(" "),function(e){u.formatter.matchNode(l,"valign"+e)&&(f.valign=e)}),!1!==u.settings.table_cell_advtab&&t.extend(f,o.extractAdvancedStyles(d,l)),a=f),n.settings.table_cell_class_list&&(s={name:"class",type:"listbox",label:"Class",values:o.buildListItems(n.settings.table_cell_class_list,function(e){e.value&&(e.textStyle=function(){return n.formatter.getCssText({block:"td",classes:[e.value]})})})});var m={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:e.curry(o.updateStyleField,n)},{label:"Height",name:"height",onchange:e.curry(o.updateStyleField,n)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},s]};n.windowManager.open(!1!==n.settings.table_cell_advtab?{title:"Cell properties",bodyType:"tabpanel",data:a,body:[{title:"General",type:"form",items:m},o.createStyleForm(n)],onsubmit:e.curry(i,n,c)}:{title:"Cell properties",data:a,body:m,onsubmit:e.curry(i,n,c)})}}}}),n("tinymce.plugins.table.actions.TableCommands",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.CopyRows","ephox.snooker.api.TableFill","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","tinymce.core.util.Tools","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.TableTargets","tinymce.plugins.table.ui.TableDialog","tinymce.plugins.table.ui.RowDialog","tinymce.plugins.table.ui.CellDialog"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p,h){var g=l.each,v=n.none();return{registerCommands:function(l,y,b,x){var C=d.getIsRoot(l),w=function(){return u.fromDom(l.dom.getParent(l.selection.getStart(),"th,td"))},k=function(e){return i.table(e,C)},S=function(e){var t=w();k(t).each(function(n){var r=f.forMenu(x,n,t);e(n,r).each(function(e){l.selection.setRng(e),l.focus(),b.clear(n)})})},T=function(e){var i=w();return k(i).bind(function(e){var a=u.fromDom(l.getDoc()),s=f.forMenu(x,e,i),c=o.cellOperations(t.noop,a,n.none());return r.copyRows(e,s,c)})},E=function(t){v.each(function(n){var r=e.map(n,function(e){return c.deep(e)}),i=w();k(i).bind(function(e){var n=u.fromDom(l.getDoc()),a=o.paste(n),s=f.pasteRows(x,e,i,r,a);t(e,s).each(function(t){l.selection.setRng(t),l.focus(),b.clear(e)})})})};g({mceTableSplitCells:function(){S(y.unmergeCells)},mceTableMergeCells:function(){S(y.mergeCells)},mceTableInsertRowBefore:function(){S(y.insertRowsBefore)},mceTableInsertRowAfter:function(){S(y.insertRowsAfter)},mceTableInsertColBefore:function(){S(y.insertColumnsBefore)},mceTableInsertColAfter:function(){S(y.insertColumnsAfter)},mceTableDeleteCol:function(){S(y.deleteColumn)},mceTableDeleteRow:function(){S(y.deleteRow)},mceTableCutRow:function(e){v=T(),S(y.deleteRow)},mceTableCopyRow:function(e){v=T()},mceTablePasteRowBefore:function(e){E(y.pasteRowsBefore)},mceTablePasteRowAfter:function(e){E(y.pasteRowsAfter)},mceTableDelete:function(){var e=u.fromDom(l.dom.getParent(l.selection.getStart(),"th,td"));i.table(e,C).filter(t.not(C)).each(function(e){var t=u.fromText("");a.after(e,t),s.remove(e);var n=l.dom.createRng();n.setStart(t.dom(),0),n.setEnd(t.dom(),0),l.selection.setRng(n)})}},function(e,t){l.addCommand(t,e)}),g({mceInsertTable:t.curry(m.open,l),mceTableProps:t.curry(m.open,l,!0),mceTableRowProps:t.curry(p.open,l),mceTableCellProps:t.curry(h.open,l)},function(e,t){l.addCommand(t,function(t,n){e(n)})})},getClipboardRows:function(){return v.fold(function(){},function(t){return e.map(t,function(e){return e.dom()})})},setClipboardRows:function(t){var r=e.map(t,u.fromDom);v=n.from(r)}}}),n("ephox.snooker.api.ResizeWire",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.view.Location","ephox.sugar.api.view.Position"],function(e,t,n,r,o){return{only:function(r){var i=t.from(r.dom().documentElement).map(n.fromDom).getOr(r);return{parent:e.constant(i),view:e.constant(r),origin:e.constant(o(0,0))}},detached:function(t,n){var o=e.curry(r.absolute,n);return{parent:e.constant(n),view:e.constant(t),origin:o}},body:function(t,n){return{parent:e.constant(n),view:e.constant(t),origin:e.constant(o(0,0))}}}}),n("ephox.porkbun.Event",["ephox.katamari.api.Arr","ephox.katamari.api.Struct"],function(e,t){return function(n){var r=t.immutable.apply(null,n),o=[];return{bind:function(e){if(void 0===e)throw"Event bind error: undefined handler";o.push(e)},unbind:function(t){o=e.filter(o,function(e){return e!==t})},trigger:function(){var t=r.apply(null,arguments);e.each(o,function(e){e(t)})}}}}),n("ephox.porkbun.Events",["ephox.katamari.api.Obj"],function(e){return{create:function(t){return{registry:e.map(t,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:e.map(t,function(e){return e.trigger})}}}}),n("ephox.dragster.api.DragApis",["ephox.katamari.api.Contracts"],function(e){return{mode:e.exactly(["compare","extract","mutate","sink"]),sink:e.exactly(["element","start","stop","destroy"]),api:e.exactly(["forceDrop","drop","move","delayDrop"])}}),n("ephox.dragster.style.Styles",["ephox.katamari.api.Namespace"],function(e){return{resolve:e.css("ephox-dragster").resolve}}),n("ephox.dragster.detect.Blocker",["ephox.dragster.style.Styles","ephox.katamari.api.Merger","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Remove"],function(e,t,n,r,o,i){return function(a){var s=t.merge({layerClass:e.resolve("blocker")},a),c=o.fromTag("div");return r.setAll(c,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),n.add(c,e.resolve("blocker")),n.add(c,s.layerClass),{element:function(){return c},destroy:function(){i.remove(c)}}}}),n("ephox.sugar.impl.FilteredEvent",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element"],function(e,t){var n=function(n,o,i,a,s){var c,u,l=(c=i,u=a,function(n){if(c(n)){var r,o,i,a,s,l,d=t.fromDom(n.target),f=function(){n.stopPropagation()},m=function(){n.preventDefault()},p=e.compose(m,f),h=(r=n.clientX,o=n.clientY,i=f,a=m,s=p,l=n,{target:e.constant(d),x:e.constant(r),y:e.constant(o),stop:i,prevent:a,kill:s,raw:e.constant(l)});u(h)}});return n.dom().addEventListener(o,l,s),{unbind:e.curry(r,n,o,l,s)}},r=function(e,t,n,r){e.dom().removeEventListener(t,n,r)};return{bind:function(e,t,r,o){return n(e,t,r,o,!1)},capture:function(e,t,r,o){return n(e,t,r,o,!0)}}}),n("ephox.sugar.api.events.DomEvent",["ephox.katamari.api.Fun","ephox.sugar.impl.FilteredEvent"],function(e,t){var n=e.constant(!0);return{bind:function(e,r,o){return t.bind(e,r,n,o)},capture:function(e,r,o){return t.capture(e,r,n,o)}}}),n("ephox.dragster.api.MouseDrag",["ephox.dragster.api.DragApis","ephox.dragster.detect.Blocker","ephox.katamari.api.Option","ephox.sugar.api.view.Position","ephox.sugar.api.events.DomEvent","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove"],function(e,t,n,r,o,i,a){return e.mode({compare:function(e,t){return r(t.left()-e.left(),t.top()-e.top())},extract:function(e){return n.some(r(e.x(),e.y()))},sink:function(n,r){var s=t(r),c=o.bind(s.element(),"mousedown",n.forceDrop),u=o.bind(s.element(),"mouseup",n.drop),l=o.bind(s.element(),"mousemove",n.move),d=o.bind(s.element(),"mouseout",n.delayDrop);return e.sink({element:s.element,start:function(e){i.append(e,s.element())},stop:function(){a.remove(s.element())},destroy:function(){s.destroy(),u.unbind(),l.unbind(),d.unbind(),c.unbind()}})},mutate:function(e,t){e.mutate(t.left(),t.top())}})}),n("ephox.dragster.detect.InDrag",["ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events"],function(e,t,n){return function(){var r=e.none(),o=n.create({move:t(["info"])});return{onEvent:function(t,n){n.extract(t).each(function(t){var i,a,s;(i=n,a=t,s=r.map(function(e){return i.compare(e,a)}),r=e.some(a),s).each(function(e){o.trigger.move(e)})})},reset:function(){r=e.none()},events:o.registry}}}),n("ephox.dragster.detect.NoDrag",["ephox.katamari.api.Fun"],function(e){return function(t){return{onEvent:function(e,t){},reset:e.noop}}}),n("ephox.dragster.detect.Movement",["ephox.dragster.detect.InDrag","ephox.dragster.detect.NoDrag"],function(e,t){return function(){var n=t(),r=e(),o=n;return{on:function(){o.reset(),o=r},off:function(){o.reset(),o=n},isOn:function(){return o===r},onEvent:function(e,t){o.onEvent(e,t)},events:r.events}}}),r("global!clearTimeout",clearTimeout),r("global!setTimeout",setTimeout),n("ephox.katamari.api.Throttler",["global!clearTimeout","global!setTimeout"],function(e,t){return{adaptable:function(n,r){var o=null,i=null;return{cancel:function(){null!==o&&(e(o),o=null,i=null)},throttle:function(){i=arguments,null===o&&(o=t(function(){n.apply(null,i),o=null,i=null},r))}}},first:function(n,r){var o=null;return{cancel:function(){null!==o&&(e(o),o=null)},throttle:function(){var e=arguments;null===o&&(o=t(function(){n.apply(null,e),o=null,e=null},r))}}},last:function(n,r){var o=null;return{cancel:function(){null!==o&&(e(o),o=null)},throttle:function(){var i=arguments;null!==o&&e(o),o=t(function(){n.apply(null,i),o=null,i=null},r)}}}}}),n("ephox.dragster.core.Dragging",["ephox.dragster.api.DragApis","ephox.dragster.detect.Movement","ephox.katamari.api.Throttler","ephox.porkbun.Event","ephox.porkbun.Events","global!Array"],function(e,t,n,r,o,i){return{setup:function(a,s,c){var u=!1,l=o.create({start:r([]),stop:r([])}),d=t(),f=function(){h.stop(),d.isOn()&&(d.off(),l.trigger.stop())},m=n.last(f,200);d.events.move.bind(function(e){s.mutate(a,e.info())});var p=function(e){return function(){var t=i.prototype.slice.call(arguments,0);if(u)return e.apply(null,t)}},h=s.sink(e.api({forceDrop:f,drop:p(f),move:p(function(e,t){m.cancel(),d.onEvent(e,s)}),delayDrop:p(m.throttle)}),c);return{element:h.element,go:function(e){h.start(e),d.on(),l.trigger.start()},on:function(){u=!0},off:function(){u=!1},destroy:function(){h.destroy()},events:l.registry}}}}),n("ephox.dragster.api.Dragger",["ephox.dragster.api.MouseDrag","ephox.dragster.core.Dragging","global!Array"],function(e,t,n){return{transform:function(n,r){var o=void 0!==r?r:{};return t.setup(n,void 0!==o.mode?o.mode:e,r)}}}),n("ephox.snooker.resize.Mutation",["ephox.porkbun.Event","ephox.porkbun.Events"],function(e,t){return function(){var n=t.create({drag:e(["xDelta","yDelta"])});return{mutate:function(e,t){n.trigger.drag(e,t)},events:n.registry}}}),n("ephox.snooker.resize.BarMutation",["ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.Mutation"],function(e,t,n,r){return function(){var o=n.create({drag:t(["xDelta","yDelta","target"])}),i=e.none(),a=r();return a.events.drag.bind(function(e){i.each(function(t){o.trigger.drag(e.xDelta(),e.yDelta(),t)})}),{assign:function(t){i=e.some(t)},get:function(){return i},mutate:a.mutate,events:o.registry}}}),n("ephox.sugar.api.search.SelectorExists",["ephox.sugar.api.search.SelectorFind"],function(e){return{any:function(t){return e.first(t).isSome()},ancestor:function(t,n,r){return e.ancestor(t,n,r).isSome()},sibling:function(t,n){return e.sibling(t,n).isSome()},child:function(t,n){return e.child(t,n).isSome()},descendant:function(t,n){return e.descendant(t,n).isSome()},closest:function(t,n,r){return e.closest(t,n,r).isSome()}}}),n("ephox.snooker.resize.BarManager",["ephox.dragster.api.Dragger","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.BarMutation","ephox.snooker.resize.Bars","ephox.snooker.style.Styles","ephox.snooker.util.CellUtils","ephox.sugar.api.dom.Compare","ephox.sugar.api.events.DomEvent","ephox.sugar.api.node.Body","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Css","ephox.sugar.api.search.SelectorExists","ephox.sugar.api.search.SelectorFind","global!parseInt"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p,h,g,v,y){var b=s.resolve("resizer-bar-dragging");return function(s,x,C){var w=i(),k=e.transform(w,{}),S=n.none(),T=function(e,t){return n.from(m.get(e,t))};w.events.drag.bind(function(e){T(e.target(),"data-row").each(function(t){var n=c.getInt(e.target(),"top");h.set(e.target(),"top",n+e.yDelta()+"px")}),T(e.target(),"data-column").each(function(t){var n=c.getInt(e.target(),"left");h.set(e.target(),"left",n+e.xDelta()+"px")})});var E=function(e,t){return c.getInt(e,t)-y(m.get(e,"data-initial-"+t),10)};k.events.stop.bind(function(){w.get().each(function(e){S.each(function(t){T(e,"data-row").each(function(n){var r=E(e,"top");m.remove(e,"data-initial-top"),P.trigger.adjustHeight(t,r,y(n,10))}),T(e,"data-column").each(function(n){var r=E(e,"left");m.remove(e,"data-initial-left"),P.trigger.adjustWidth(t,r,y(n,10))}),a.refresh(s,t,C,x)})})});var R=function(e,t){P.trigger.startAdjust(),w.assign(e),m.set(e,"data-initial-"+t,y(h.get(e,t),10)),p.add(e,b),h.set(e,"opacity","0.2"),k.go(s.parent())},N=l.bind(s.parent(),"mousedown",function(e){a.isRowBar(e.target())&&R(e.target(),"top"),a.isColBar(e.target())&&R(e.target(),"left")}),A=function(e){return u.eq(e,s.view())},D=l.bind(s.view(),"mouseover",function(e){"table"===f.name(e.target())||g.ancestor(e.target(),"table",A)?(S="table"===f.name(e.target())?n.some(e.target()):v.ancestor(e.target(),"table",A)).each(function(e){a.refresh(s,e,C,x)}):d.inBody(e.target())&&a.destroy(s)}),P=o.create({adjustHeight:r(["table","delta","row"]),adjustWidth:r(["table","delta","column"]),startAdjust:r([])});return{destroy:function(){N.unbind(),D.unbind(),k.destroy(),a.destroy(s)},refresh:function(e){a.refresh(s,e,C,x)},on:k.on,off:k.off,hideBars:t.curry(a.hide,s),showBars:t.curry(a.show,s),events:P.registry}}}),n("ephox.snooker.api.TableResize",["ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.Adjustments","ephox.snooker.resize.BarManager","ephox.snooker.resize.BarPositions"],function(e,t,n,r,o){return function(i,a){var s=o.height,c=r(i,a,s),u=t.create({beforeResize:e(["table"]),afterResize:e(["table"]),startDrag:e([])});return c.events.adjustHeight.bind(function(e){u.trigger.beforeResize(e.table());var t=s.delta(e.delta(),e.table());n.adjustHeight(e.table(),t,e.row(),s),u.trigger.afterResize(e.table())}),c.events.startAdjust.bind(function(e){u.trigger.startDrag()}),c.events.adjustWidth.bind(function(e){u.trigger.beforeResize(e.table());var t=a.delta(e.delta(),e.table());n.adjustWidth(e.table(),t,e.column(),a),u.trigger.afterResize(e.table())}),{on:c.on,off:c.off,hideBars:c.hideBars,showBars:c.showBars,destroy:c.destroy,events:u.registry}}}),n("tinymce.plugins.table.actions.TableWire",["ephox.snooker.api.ResizeWire","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Body","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Css","tinymce.plugins.table.alien.Util"],function(e,t,n,r,o,i,a){return{get:function(n,s){return n.inline?e.body(a.getBody(n),(c=o.fromTag("div"),i.setAll(c,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),t.append(r.body(),c),c)):e.only(o.fromDom(n.getDoc()));var c},remove:function(e,t){e.inline&&n.remove(t.parent())}}}),n("tinymce.plugins.table.actions.ResizeHandler",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.ResizeWire","ephox.snooker.api.TableDirection","ephox.snooker.api.TableResize","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.SelectorFilter","tinymce.plugins.table.actions.TableWire","tinymce.plugins.table.queries.Direction","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,s,c,u,l){return function(d){var f,m,p=t.none(),h=t.none(),g=t.none(),v=/(\d+(\.\d+)?)%/,y=function(e){return"TABLE"===e.nodeName};return d.on("init",function(){var n=r(u.directionAt),i=c.get(d);if(g=t.some(i),d.settings.object_resizing&&!1!==d.settings.table_resize_bars&&(!0===d.settings.object_resizing||"table"===d.settings.object_resizing)){var l=o(i,n);l.on(),l.events.startDrag.bind(function(e){p=t.some(d.selection.getRng())}),l.events.afterResize.bind(function(t){var n=t.table(),r=s.descendants(n,"td[data-mce-style],th[data-mce-style]");e.each(r,function(e){a.remove(e,"data-mce-style")}),p.each(function(e){d.selection.setRng(e),d.focus()}),d.undoManager.add()}),h=t.some(l)}}),d.on("ObjectResizeStart",function(e){var t;y(e.target)&&(f=e.width,m=d.dom.getStyle(t=e.target,"width")||d.dom.getAttrib(t,"width"))}),d.on("ObjectResized",function(e){if(y(e.target)){var t=e.target;if(v.test(m)){var n=parseFloat(v.exec(m)[1],10);d.dom.setStyle(t,"width",e.width*n/f+"%")}else{var r=[];l.each(t.rows,function(e){l.each(e.cells,function(e){var t=d.dom.getStyle(e,"width",!0);r.push({cell:e,width:t})})}),l.each(r,function(e){d.dom.setStyle(e.cell,"width",e.width),d.dom.setAttrib(e.cell,"width",null)})}}}),{lazyResize:function(){return h},lazyWire:function(){return g.getOr(n.only(i.fromDom(d.getBody())))},destroy:function(){h.each(function(e){e.destroy()}),g.each(function(e){c.remove(d,e)})}}}}),n("ephox.snooker.api.CellLocation",[],function(){var e=function(e){return{fold:e}};return{none:function(t){return e(function(e,n,r,o){return e(t)})},first:function(t){return e(function(e,n,r,o){return n(t)})},middle:function(t,n){return e(function(e,r,o,i){return o(t,n)})},last:function(t){return e(function(e,n,r,o){return o(t)})}}}),n("ephox.snooker.api.CellNavigation",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.api.CellLocation","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Compare"],function(e,t,n,r,o){var i=function(n,i){return r.table(n,i).bind(function(i){var a=r.cells(i);return e.findIndex(a,function(e){return o.eq(n,e)}).map(function(e){return{index:t.constant(e),all:t.constant(a)}})})};return{next:function(e,t){return i(e,t).fold(function(){return n.none(e)},function(t){return t.index()+1<t.all().length?n.middle(e,t.all()[t.index()+1]):n.last(e)})},prev:function(e,t){return i(e,t).fold(function(){return n.none()},function(t){return t.index()-1>=0?n.middle(e,t.all()[t.index()-1]):n.first(e)})}}}),n("ephox.sugar.api.selection.Situ",["ephox.katamari.api.Adt","ephox.katamari.api.Fun"],function(e,t){var n=e.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]);return{before:n.before,on:n.on,after:n.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(t.identity,t.identity,t.identity)}}}),n("ephox.sugar.api.selection.Selection",["ephox.katamari.api.Adt","ephox.katamari.api.Struct","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Situ"],function(e,t,n,r,o){var i=e.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),a=t.immutable("start","soffset","finish","foffset");return{domRange:i.domRange,relative:i.relative,exact:i.exact,exactFromRange:function(e){return i.exact(e.start(),e.soffset(),e.finish(),e.foffset())},range:a,getWin:function(e){var t=e.match({domRange:function(e){return n.fromDom(e.startContainer)},relative:function(e,t){return o.getStart(e)},exact:function(e,t,n,r){return e}});return r.defaultView(t)}}}),n("ephox.sugar.api.dom.DocumentPosition",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(e,t,r,o){var i=n.owner(e).dom().createRange();return i.setStart(e.dom(),t),i.setEnd(r.dom(),o),i};return{after:function(t,n,o,i){var a=r(t,n,o,i),s=e.eq(t,o)&&n===i;return a.collapsed&&!s},commonAncestorContainer:function(e,n,o,i){var a=r(e,n,o,i);return t.fromDom(a.commonAncestorContainer)}}}),n("ephox.sugar.api.node.Fragment",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","global!document"],function(e,t,n){return{fromElements:function(r,o){var i=(o||n).createDocumentFragment();return e.each(r,function(e){i.appendChild(e.dom())}),t.fromDom(i)}}}),n("ephox.sugar.selection.core.NativeRange",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t,n,r){var o=function(e,t){e.selectNodeContents(t.dom())},i=function(e){e.deleteContents()},a=function(t){return{left:e.constant(t.left),top:e.constant(t.top),right:e.constant(t.right),bottom:e.constant(t.bottom),width:e.constant(t.width),height:e.constant(t.height)}};return{create:function(e){return e.document.createRange()},replaceWith:function(e,t){i(e),e.insertNode(t.dom())},selectNodeContents:function(e,t){var n=e.document.createRange();return o(n,t),n},selectNodeContentsUsing:o,isCollapsed:function(e,t,r,o){return n.eq(e,r)&&t===o},relativeToNative:function(e,t,n){var r,o,i=e.document.createRange();return r=i,t.fold(function(e){r.setStartBefore(e.dom())},function(e,t){r.setStart(e.dom(),t)},function(e){r.setStartAfter(e.dom())}),o=i,n.fold(function(e){o.setEndBefore(e.dom())},function(e,t){o.setEnd(e.dom(),t)},function(e){o.setEndAfter(e.dom())}),i},exactToNative:function(e,t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},deleteContents:i,cloneFragment:function(e){var t=e.cloneContents();return r.fromDom(t)},getFirstRect:function(e){var n=e.getClientRects(),r=n.length>0?n[0]:e.getBoundingClientRect();return r.width>0||r.height>0?t.some(r).map(a):t.none()},getBounds:function(e){var n=e.getBoundingClientRect();return n.width>0||n.height>0?t.some(n).map(a):t.none()},isWithin:function(e,t){return t.compareBoundaryPoints(e.END_TO_START,e)<1&&t.compareBoundaryPoints(e.START_TO_END,e)>-1},toString:function(e){return e.toString()}}}),n("ephox.sugar.selection.core.SelectionDirection",["ephox.katamari.api.Adt","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.selection.core.NativeRange"],function(e,t,n,r,o,i){var a=e.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),s=function(e,t,n){return t(o.fromDom(n.startContainer),n.startOffset,o.fromDom(n.endContainer),n.endOffset)},c=function(e,c){var u,l,d,f=(u=e,c.match({domRange:function(e){return{ltr:t.constant(e),rtl:n.none}},relative:function(e,t){return{ltr:r.cached(function(){return i.relativeToNative(u,e,t)}),rtl:r.cached(function(){return n.some(i.relativeToNative(u,t,e))})}},exact:function(e,t,o,a){return{ltr:r.cached(function(){return i.exactToNative(u,e,t,o,a)}),rtl:r.cached(function(){return n.some(i.exactToNative(u,o,a,e,t))})}}}));return(d=(l=f).ltr()).collapsed?l.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return a.rtl(o.fromDom(e.endContainer),e.endOffset,o.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return s(0,a.ltr,d)}):s(0,a.ltr,d)};return{ltr:a.ltr,rtl:a.rtl,diagnose:c,asLtrRange:function(e,t){return c(e,t).match({ltr:function(t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},rtl:function(t,n,r,o){var i=e.document.createRange();return i.setStart(r.dom(),o),i.setEnd(t.dom(),n),i}})}}}),n("ephox.sugar.selection.alien.Geometry",["global!Math"],function(e){return{inRect:function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},searchForPoint:function(t,n,r,o,i){if(0===i)return 0;if(n===o)return i-1;for(var a=o,s=1;s<i;s++){var c=t(s),u=e.abs(n-c.left);if(r>c.bottom);else{if(r<c.top||u>a)return s-1;a=u}}return 0}}}),n("ephox.sugar.selection.query.TextPoint",["ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Text","ephox.sugar.selection.alien.Geometry","global!Math"],function(e,t,n,r,o){return{locate:function(o,i,a,s){var c=o.dom().createRange();c.selectNode(i.dom());var u=c.getClientRects();return t.findMap(u,function(t){return r.inRect(t,a,s)?e.some(t):e.none()}).map(function(e){return t=o,u=a,l=s,d=e,f=function(e){var n=t.dom().createRange();return n.setStart(c.dom(),e),n.collapse(!0),n},m=n.get(c=i).length,p=r.searchForPoint(function(e){return f(e).getBoundingClientRect()},u,l,d.right,m),f(p);var t,c,u,l,d,f,m,p})}}}),n("ephox.sugar.selection.query.ContainerPoint",["ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Node","ephox.sugar.api.search.Traverse","ephox.sugar.selection.alien.Geometry","ephox.sugar.selection.query.TextPoint","global!Math"],function(e,t,n,r,o,i,a){var s=function(a,c,u,l){return(n.isText(c)?i.locate:function(n,i,a,c){var u=n.dom().createRange(),l=r.children(i);return t.findMap(l,function(t){return u.selectNode(t.dom()),o.inRect(u.getBoundingClientRect(),a,c)?s(n,t,a,c):e.none()})})(a,c,u,l)};return{locate:function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),c=a.max(i.left,a.min(i.right,n)),u=a.max(i.top,a.min(i.bottom,r));return s(e,t,c,u)}}}),n("ephox.sugar.selection.query.EdgePoint",["ephox.katamari.api.Option","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(e,t,n){var r=function(e,t){return t-e.left<e.right-t},o=function(e,t,n){var r=e.dom().createRange();return r.selectNode(t.dom()),r.collapse(n),r};return{search:function(i,a,s){return(0===t.children(a).length?function(t,n,i){var a=n.dom().getBoundingClientRect(),s=r(a,i);return e.some(o(t,n,s))}:function(e,t,i){var a=e.dom().createRange();a.selectNode(t.dom());var s=a.getBoundingClientRect(),c=r(s,i);return(!0===c?n.first:n.last)(t).map(function(t){return o(e,t,c)})})(i,a,s)}}}),n("ephox.sugar.selection.query.CaretRange",["ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Selection","ephox.sugar.selection.query.ContainerPoint","ephox.sugar.selection.query.EdgePoint","global!document","global!Math"],function(e,t,n,r,o,i,a,s){var c=a.caretPositionFromPoint?function(t,n,r){return e.from(t.dom().caretPositionFromPoint(n,r)).bind(function(n){if(null===n.offsetNode)return e.none();var r=t.dom().createRange();return r.setStart(n.offsetNode,n.offset),r.collapse(),e.some(r)})}:a.caretRangeFromPoint?function(t,n,r){return e.from(t.dom().caretRangeFromPoint(n,r))}:function(e,r,a){return t.fromPoint(e,r,a).bind(function(t){var c=function(){return i.search(e,t,r)};return 0===n.children(t).length?c():function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var a=i.getBoundingClientRect(),c=s.max(a.left,s.min(a.right,n)),u=s.max(a.top,s.min(a.bottom,r));return o.locate(e,t,c,u)}(e,t,r,a).orThunk(c)})};return{fromPoint:function(e,n,o){var i=t.fromDom(e.document);return c(i,n,o).map(function(e){return r.range(t.fromDom(e.startContainer),e.startOffset,t.fromDom(e.endContainer),e.endOffset)})}}}),n("ephox.sugar.selection.query.Within",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.Selectors","ephox.sugar.selection.core.NativeRange","ephox.sugar.selection.core.SelectionDirection"],function(e,t,n,r,o,i,a){return{find:function(s,c,u){var l,d,f,m,p,h=a.asLtrRange(s,c),g=t.fromDom(h.commonAncestorContainer);return n.isElement(g)?(l=g,d=h,f=u,m=i.create(s),p=(o.is(l,f)?[l]:[]).concat(r.descendants(l,f)),e.filter(p,function(e){return i.selectNodeContentsUsing(m,e),i.isWithin(d,m)})):[]}}}),n("ephox.sugar.selection.quirks.Prefilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ"],function(e,t,n,r,o){var i=function(t,r){var i=n.name(t);return"input"===i?o.after(t):e.contains(["br","img"],i)?0===r?o.before(t):o.after(t):o.on(t,r)},a=function(e,t){var n=e.fold(o.before,i,o.after),a=t.fold(o.before,i,o.after);return r.relative(n,a)},s=function(e,t,n,o){var a=i(e,t),s=i(n,o);return r.relative(a,s)};return{beforeSpecial:i,preprocess:function(e){return e.match({domRange:function(e){var n=t.fromDom(e.startContainer),r=t.fromDom(e.endContainer);return s(n,e.startOffset,r,e.endOffset)},relative:a,exact:s})},preprocessRelative:a,preprocessExact:s}}),n("ephox.sugar.api.selection.WindowSelection",["ephox.katamari.api.Option","ephox.sugar.api.dom.DocumentPosition","ephox.sugar.api.node.Element","ephox.sugar.api.node.Fragment","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Selection","ephox.sugar.selection.core.NativeRange","ephox.sugar.selection.core.SelectionDirection","ephox.sugar.selection.query.CaretRange","ephox.sugar.selection.query.Within","ephox.sugar.selection.quirks.Prefilter"],function(e,t,n,r,o,i,a,s,c,u,l){var d=function(t,n){e.from(t.getSelection()).each(function(e){e.removeAllRanges(),e.addRange(n)})},f=function(e,t,n,r,o){var i=a.exactToNative(e,t,n,r,o);d(e,i)},m=function(e,t){return s.diagnose(e,t).match({ltr:function(t,n,r,o){f(e,t,n,r,o)},rtl:function(t,n,r,o){var i=e.getSelection();i.extend?(i.collapse(t.dom(),n),i.extend(r.dom(),o)):f(e,r,o,t,n)}})},p=function(r){var o,a,s,c=r.getSelection();return c.rangeCount>0?(a=n.fromDom((o=c).anchorNode),s=n.fromDom(o.focusNode),t.after(a,o.anchorOffset,s,o.focusOffset)?e.some(i.range(n.fromDom(o.anchorNode),o.anchorOffset,n.fromDom(o.focusNode),o.focusOffset)):function(t){if(t.rangeCount>0){var r=t.getRangeAt(0),o=t.getRangeAt(t.rangeCount-1);return e.some(i.range(n.fromDom(r.startContainer),r.startOffset,n.fromDom(o.endContainer),o.endOffset))}return e.none()}(o)):e.none()};return{setExact:function(e,t,n,r,o){var i=l.preprocessExact(t,n,r,o);m(e,i)},getExact:p,get:function(e){return p(e).map(function(e){return i.exact(e.start(),e.soffset(),e.finish(),e.foffset())})},setRelative:function(e,t,n){var r=l.preprocessRelative(t,n);m(e,r)},toNative:function(e){var t=i.getWin(e).dom(),n=function(e,n,r,o){return a.exactToNative(t,e,n,r,o)},r=l.preprocess(e);return s.diagnose(t,r).match({ltr:n,rtl:n})},setToElement:function(e,t){var n=a.selectNodeContents(e,t);d(e,n)},clear:function(e){e.getSelection().removeAllRanges()},clone:function(e,t){var n=s.asLtrRange(e,t);return a.cloneFragment(n)},replace:function(e,t,n){var o=s.asLtrRange(e,t),i=r.fromElements(n,e.document);a.replaceWith(o,i)},deleteAt:function(e,t){var n=s.asLtrRange(e,t);a.deleteContents(n)},forElement:function(e,t){var r=a.selectNodeContents(e,t);return i.range(n.fromDom(r.startContainer),r.startOffset,n.fromDom(r.endContainer),r.endOffset)},getFirstRect:function(e,t){var n=s.asLtrRange(e,t);return a.getFirstRect(n)},getBounds:function(e,t){var n=s.asLtrRange(e,t);return a.getBounds(n)},getAtPoint:function(e,t,n){return c.fromPoint(e,t,n)},findWithin:function(e,t,n){return u.find(e,t,n)},getAsString:function(e,t){var n=s.asLtrRange(e,t);return a.toString(n)}}}),n("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),n("tinymce.plugins.table.queries.TabContext",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.CellNavigation","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.selection.CursorPosition","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.WindowSelection","tinymce.core.util.VK","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.TableTargets"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p){var h=function(e,t){var n=l.exact(t,0,t,0);return d.toNative(n)},g=function(n,o,i,a,l){return i.fold(t.none,t.none,function(e,t){return u.first(t).map(function(e){return h(0,e)})},function(t){return r.table(t,o).bind(function(r){var o,i=p.noMenu(t);return n.undoManager.transact(function(){a.insertRowsAfter(r,i)}),o=s.descendants(r,"tr"),e.last(o).bind(function(e){return c.descendant(e,"td,th").map(function(e){return h(0,e)})})})})},v=["table","li","dl"];return{handle:function(t,s,c,u){if(t.keyCode===f.TAB){var l=m.getBody(s),d=function(t){var n=a.name(t);return o.eq(t,l)||e.contains(v,n)},p=s.selection.getRng();if(p.collapsed){var h=i.fromDom(p.startContainer);r.cell(h,d).each(function(e){t.preventDefault(),(t.shiftKey?function(e,t,r,o){return g(e,t,n.prev(r),o)}:function(e,t,r,o){return g(e,t,n.next(r),o)})(s,d,e,c,u).each(function(e){s.selection.setRng(e)})})}}}}}),n("ephox.darwin.api.Responses",["ephox.katamari.api.Struct"],function(e){return{response:e.immutable("selection","kill")}}),n("ephox.darwin.api.SelectionKeys",[],function(){var e=function(e){return function(t){return t===e}},t=e(38),n=e(40);return{ltr:{isBackward:e(37),isForward:e(39)},rtl:{isBackward:e(39),isForward:e(37)},isUp:t,isDown:n,isNavigation:function(e){return e>=37&&e<=40}}}),n("ephox.darwin.selection.Util",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.selection.Situ","ephox.sugar.selection.core.SelectionDirection"],function(e,t,n,r){return{convertToRange:function(n,o){var i=r.asLtrRange(n,o);return{start:e.constant(t.fromDom(i.startContainer)),soffset:e.constant(i.startOffset),finish:e.constant(t.fromDom(i.endContainer)),foffset:e.constant(i.endOffset)}},makeSitus:function(t,r,o,i){return{start:e.constant(n.on(t,r)),finish:e.constant(n.on(o,i))}}}}),n("ephox.darwin.api.WindowBridge",["ephox.darwin.selection.Util","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ","ephox.sugar.api.selection.WindowSelection"],function(e,t,n,r,o,i,a,s){return function(c){return{elementFromPoint:function(e,t){return r.from(c.document.elementFromPoint(e,t)).map(o.fromDom)},getRect:function(e){return e.dom().getBoundingClientRect()},getRangedRect:function(e,r,o,a){var u=i.exact(e,r,o,a);return s.getFirstRect(c,u).map(function(e){return n.map(e,t.apply)})},getSelection:function(){return s.get(c).map(function(t){return e.convertToRange(c,t)})},fromSitus:function(t){var n=i.relative(t.start(),t.finish());return e.convertToRange(c,n)},situsFromPoint:function(e,n){return s.getAtPoint(c,e,n).map(function(e){return{start:t.constant(a.on(e.start(),e.soffset())),finish:t.constant(a.on(e.finish(),e.foffset()))}})},clearSelection:function(){s.clear(c)},setSelection:function(e){s.setExact(c,e.start(),e.soffset(),e.finish(),e.foffset())},setRelativeSelection:function(e,t){s.setRelative(c,e,t)},selectContents:function(e){s.setToElement(c,e)},getInnerHeight:function(){return c.innerHeight},getScrollY:function(){return c.scrollY},scrollBy:function(e,t){c.scrollBy(e,t)}}}}),n("ephox.darwin.keyboard.KeySelection",["ephox.darwin.api.Responses","ephox.darwin.selection.CellSelection","ephox.darwin.selection.Util","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.selection.Awareness","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ"],function(e,t,n,r,o,i,a,s,c,u){var l=function(r,a,c,u,l){if(!i.eq(c,u)){var d=t.identify(c,u,a).getOr([]);if(d.length>0)return l(r,d,c,u),o.some(e.response(o.some(n.makeSitus(c,0,c,s.getEnd(c))),!0))}return o.none()};return{sync:function(e,t,n,r,s,c,u){return i.eq(n,s)&&r===c?o.none():a.closest(n,"td,th",t).bind(function(n){return a.closest(s,"td,th",t).bind(function(r){return l(e,t,n,r,u)})})},detect:l,update:function(e,n,r,o,i){return t.shiftSelection(o,e,n,i.firstSelectedSelector(),i.lastSelectedSelector()).map(function(e){return i.clear(r),i.selectRange(r,e.boxes(),e.start(),e.finish()),e.boxes()})}}}),n("ephox.darwin.keyboard.Carets",["ephox.katamari.api.Struct"],function(e){var t=e.immutableBag(["left","top","right","bottom"],[]);return{nu:t,moveUp:function(e,n){return t({left:e.left(),top:e.top()-n,right:e.right(),bottom:e.bottom()-n})},moveDown:function(e,n){return t({left:e.left(),top:e.top()+n,right:e.right(),bottom:e.bottom()+n})},moveBottomTo:function(e,n){var r=e.bottom()-e.top();return t({left:e.left(),top:n-r,right:e.right(),bottom:n})},moveTopTo:function(e,n){var r=e.bottom()-e.top();return t({left:e.left(),top:n,right:e.right(),bottom:n+r})},getTop:function(e){return e.top()},getBottom:function(e){return e.bottom()},translate:function(e,n,r){return t({left:e.left()+n,top:e.top()+r,right:e.right()+n,bottom:e.bottom()+r})},toString:function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"}}}),n("ephox.darwin.keyboard.Rectangles",["ephox.darwin.keyboard.Carets","ephox.katamari.api.Option","ephox.sugar.api.node.Node","ephox.sugar.api.selection.Awareness"],function(e,t,n,r){var o=function(t){return e.nu({left:t.left,top:t.top,right:t.right,bottom:t.bottom})},i=function(e,n){return t.some(e.getRect(n))};return{getBoxAt:function(e,a,s){return n.isElement(a)?i(e,a).map(o):n.isText(a)?(c=e,u=a,l=s,l>=0&&l<r.getEnd(u)?c.getRangedRect(u,l,u,l+1):l>0?c.getRangedRect(u,l-1,u,l):t.none()).map(o):t.none();var c,u,l},getEntireBox:function(e,a){return n.isElement(a)?i(e,a).map(o):n.isText(a)?e.getRangedRect(a,0,a,r.getEnd(a)).map(o):t.none()}}}),n("ephox.phoenix.gather.Walker",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.katamari.api.Struct"],function(e,t,n){var r=n.immutable("item","mode"),o=function(e,t,n,o){var a=void 0!==o?o:i;return e.property().parent(t).map(function(e){return r(e,a)})},i=function(e,t,n,o){var i=void 0!==o?o:a;return n.sibling(e,t).map(function(e){return r(e,i)})},a=function(e,t,n,o){var i=void 0!==o?o:a,s=e.property().children(t);return n.first(s).map(function(e){return r(e,i)})},s=[{current:o,next:i,fallback:t.none()},{current:i,next:a,fallback:t.some(o)},{current:a,next:a,fallback:t.some(i)}],c=function(t,n,r,o,i){return e.find(void 0!==i?i:s,function(e){return e.current===r}).bind(function(e){return e.current(t,n,o,e.next).orThunk(function(){return e.fallback.bind(function(e){return c(t,n,e,o)})})})};return{backtrack:o,sidestep:i,advance:a,go:c}}),n("ephox.phoenix.gather.Walkers",["ephox.katamari.api.Option"],function(e){return{left:function(){return{sibling:function(e,t){return e.query().prevSibling(t)},first:function(t){return t.length>0?e.some(t[t.length-1]):e.none()}}},right:function(){return{sibling:function(e,t){return e.query().nextSibling(t)},first:function(t){return t.length>0?e.some(t[0]):e.none()}}}}}),n("ephox.phoenix.gather.Seeker",["ephox.katamari.api.Option","ephox.phoenix.gather.Walker","ephox.phoenix.gather.Walkers"],function(e,t,n){var r=function(n,o,i,a,s,c){return t.go(n,o,a,s).bind(function(t){return c(t.item())?e.none():i(t.item())?e.some(t.item()):r(n,t.item(),i,t.mode(),s,c)})};return{left:function(e,o,i,a){return r(e,o,i,t.sidestep,n.left(),a)},right:function(e,o,i,a){return r(e,o,i,t.sidestep,n.right(),a)}}}),n("ephox.phoenix.api.general.Gather",["ephox.katamari.api.Fun","ephox.phoenix.gather.Seeker","ephox.phoenix.gather.Walker","ephox.phoenix.gather.Walkers"],function(e,t,n,r){var o=function(e,t){return 0===e.property().children(t).length},i=function(e,n,r,o){return t.left(e,n,r,o)},a=function(e,n,r,o){return t.right(e,n,r,o)};return{before:function(t,n,r){return i(t,n,e.curry(o,t),r)},after:function(t,n,r){return a(t,n,e.curry(o,t),r)},seekLeft:i,seekRight:a,walkers:function(){return{left:r.left,right:r.right}},walk:function(e,t,r,o,i){return n.go(e,t,r,o,i)},backtrack:n.backtrack,sidestep:n.sidestep,advance:n.advance}}),n("ephox.phoenix.api.dom.DomGather",["ephox.boss.api.DomUniverse","ephox.phoenix.api.general.Gather"],function(e,t){var n=e();return{gather:function(e,r,o){return t.gather(n,e,r,o)},before:function(e,r){return t.before(n,e,r)},after:function(e,r){return t.after(n,e,r)},seekLeft:function(e,r,o){return t.seekLeft(n,e,r,o)},seekRight:function(e,r,o){return t.seekRight(n,e,r,o)},walkers:function(){return t.walkers()},walk:function(e,r,o,i){return t.walk(n,e,r,o,i)}}}),n("ephox.darwin.keyboard.Retries",["ephox.darwin.keyboard.Carets","ephox.darwin.keyboard.Rectangles","ephox.katamari.api.Adt","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.phoenix.api.dom.DomGather","ephox.robin.api.dom.DomStructure","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","global!Math"],function(e,t,n,r,o,i,a,s,c,u){var l=n.generate([{none:[]},{retry:["caret"]}]),d=function(e,n,o){return c.closest(n,a.isBlock).fold(r.constant(!1),function(n){return t.getEntireBox(e,n).exists(function(e){return n=e,(t=o).left()<n.left()||u.abs(n.right()-t.left())<1||t.left()>n.right();var t,n})})},f={point:e.getBottom,adjuster:function(t,n,r,o,i){var a=e.moveDown(i,5);return u.abs(r.bottom()-o.bottom())<1?l.retry(a):r.top()>i.bottom()?l.retry(a):r.top()===i.bottom()?l.retry(e.moveDown(i,1)):d(t,n,i)?l.retry(e.translate(a,5,0)):l.none()},move:e.moveDown,gather:i.after},m=function(e,n,r,i,a){return 0===a?o.some(i):(l=e,d=i.left(),f=n.point(i),l.elementFromPoint(d,f).filter(function(e){return"table"===s.name(e)}).isSome()?(u=a-1,m(e,c=n,r,c.move(i,5),u)):e.situsFromPoint(i.left(),n.point(i)).bind(function(s){return s.start().fold(o.none,function(s,c){return t.getEntireBox(e,s,c).bind(function(t){return n.adjuster(e,s,t,r,i).fold(o.none,function(t){return m(e,n,r,t,a-1)})}).orThunk(function(){return o.some(i)})},o.none)}));var c,u,l,d,f},p=function(e,t,n){var r,i,a,s=e.move(n,5),c=m(t,e,n,s,100).getOr(s);return(r=e,i=c,a=t,r.point(i)>a.getInnerHeight()?o.some(r.point(i)-a.getInnerHeight()):r.point(i)<0?o.some(-r.point(i)):o.none()).fold(function(){return t.situsFromPoint(c.left(),e.point(c))},function(n){return t.scrollBy(0,n),t.situsFromPoint(c.left(),e.point(c)-n)})};return{tryUp:r.curry(p,{point:e.getTop,adjuster:function(t,n,r,o,i){var a=e.moveUp(i,5);return u.abs(r.top()-o.top())<1?l.retry(a):r.bottom()<i.top()?l.retry(a):r.bottom()===i.top()?l.retry(e.moveUp(i,1)):d(t,n,i)?l.retry(e.translate(a,5,0)):l.none()},move:e.moveUp,gather:i.before}),tryDown:r.curry(p,f),ieTryUp:function(e,t){return e.situsFromPoint(t.left(),t.top()-5)},ieTryDown:function(e,t){return e.situsFromPoint(t.left(),t.bottom()+5)},getJumpSize:r.constant(5)}}),n("ephox.darwin.navigation.BeforeAfter",["ephox.katamari.api.Adt","ephox.robin.api.dom.DomParent","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.selection.Awareness"],function(e,t,n,r,o){var i=e.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),a=function(e){return r.closest(e,"tr")};return{verify:function(e,s,c,u,l,d,f){return r.closest(u,"td,th",f).bind(function(c){return r.closest(s,"td,th",f).map(function(r){return n.eq(c,r)?n.eq(u,c)&&o.getEnd(c)===l?d(r):i.none("in same cell"):t.sharedOne(a,[c,r]).fold(function(){return n=c,o=(t=e).getRect(r),(a=t.getRect(n)).right>o.left&&a.left<o.right?i.success():d(r);var t,n,o,a},function(e){return d(r)})})}).getOr(i.none("default"))},cata:function(e,t,n,r,o){return e.fold(t,n,r,o)},adt:i}}),n("ephox.phoenix.api.data.Spot",["ephox.katamari.api.Struct"],function(e){return{point:e.immutable("element","offset"),delta:e.immutable("element","deltaOffset"),range:e.immutable("element","start","finish"),points:e.immutable("begin","end"),text:e.immutable("element","text")}}),n("ephox.sugar.api.search.ElementAddress",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i,a,s,c){var u=r.immutable("ancestor","descendants","element","index"),l=r.immutable("parent","children","element","index"),d=function(n,r){return e.findIndex(n,t.curry(o.eq,r))};return{childOf:function(e,t){return i.closest(e,function(e){return c.parent(e).exists(function(e){return o.eq(e,t)})})},indexOf:d,indexInParent:function(e){return c.parent(e).bind(function(t){var n=c.children(t);return d(n,e).map(function(r){return l(t,n,e,r)})})},selectorsInParent:function(e,t){return c.parent(e).bind(function(n){var r=a.children(n,t);return d(r,e).map(function(t){return l(n,r,e,t)})})},descendantsInAncestor:function(e,t,n){return s.closest(e,t).bind(function(t){var r=a.descendants(t,n);return d(r,e).map(function(n){return u(t,r,e,n)})})}}}),n("ephox.darwin.navigation.BrTags",["ephox.darwin.navigation.BeforeAfter","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.phoenix.api.data.Spot","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.ElementAddress","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Awareness","ephox.sugar.api.selection.Situ"],function(e,t,n,r,o,i,a,s,c,u){var l=function(e){return"br"===o.name(e)},d=function(e,t,r){return t(e,r).bind(function(e){return o.isText(e)&&0===i.get(e).trim().length?d(e,t,r):n.some(e)})};return{tryBr:function(e,n,r,o){var i,c,f,m,p,h,g,v,y;return(l(n)?(i=e,(f=o).traverse(c=n).orThunk(function(){return d(c,f.gather,i)}).map(f.relative)):(m=e,p=n,h=r,g=o,(v=p,y=h,s.child(v,y).filter(l).orThunk(function(){return s.child(v,y-1).filter(l)})).bind(function(e){return g.traverse(e).fold(function(){return d(e,g.gather,m).map(g.relative)},function(e){return a.indexInParent(e).map(function(e){return u.on(e.parent(),e.index())})})}))).map(function(e){return{start:t.constant(e),finish:t.constant(e)}})},process:function(t){return e.cata(t,function(e){return n.none("BR ADT: none")},function(){return n.none()},function(e){return n.some(r.point(e,0))},function(e){return n.some(r.point(e,c.getEnd(e)))})}}}),n("ephox.darwin.keyboard.TableKeys",["ephox.darwin.keyboard.Carets","ephox.darwin.keyboard.Rectangles","ephox.darwin.keyboard.Retries","ephox.darwin.navigation.BeforeAfter","ephox.darwin.navigation.BrTags","ephox.katamari.api.Option","ephox.phoenix.api.data.Spot","ephox.sand.api.PlatformDetection","ephox.sugar.api.dom.Compare","ephox.sugar.api.selection.Awareness"],function(e,t,n,r,o,i,a,s,c,u){var l=s.detect(),d=function(t,n,o,a,s,l){return 0===l?i.none():p(t,n,o,a,s).bind(function(m){var p=t.fromSitus(m),h=r.verify(t,o,a,p.finish(),p.foffset(),s.failure,n);return r.cata(h,function(){return i.none()},function(){return i.some(m)},function(r){return c.eq(o,r)&&0===a?f(t,o,a,e.moveUp,s):d(t,n,r,0,s,l-1)},function(r){return c.eq(o,r)&&a===u.getEnd(r)?f(t,o,a,e.moveDown,s):d(t,n,r,u.getEnd(r),s,l-1)})})},f=function(e,r,o,i,a){return t.getBoxAt(e,r,o).bind(function(t){return m(e,a,i(t,n.getJumpSize()))})},m=function(e,t,n){return l.browser.isChrome()||l.browser.isSafari()||l.browser.isFirefox()||l.browser.isEdge()?t.otherRetry(e,n):l.browser.isIE()?t.ieRetry(e,n):i.none()},p=function(e,n,r,o,i){return t.getBoxAt(e,r,o).bind(function(t){return m(e,i,t)})};return{handle:function(e,t,n){return(s=e,c=t,u=n,s.getSelection().bind(function(e){return o.tryBr(c,e.finish(),e.foffset(),u).fold(function(){return i.some(a.point(e.finish(),e.foffset()))},function(t){var n=s.fromSitus(t),i=r.verify(s,e.finish(),e.foffset(),n.finish(),n.foffset(),u.failure,c);return o.process(i)})})).bind(function(r){return d(e,t,r.element(),r.offset(),n,20).map(e.fromSitus)});var s,c,u}}}),n("ephox.sugar.api.search.PredicateExists",["ephox.sugar.api.search.PredicateFind"],function(e){return{any:function(t){return e.first(t).isSome()},ancestor:function(t,n,r){return e.ancestor(t,n,r).isSome()},closest:function(t,n,r){return e.closest(t,n,r).isSome()},sibling:function(t,n){return e.sibling(t,n).isSome()},child:function(t,n){return e.child(t,n).isSome()},descendant:function(t,n){return e.descendant(t,n).isSome()}}}),n("ephox.darwin.keyboard.VerticalMovement",["ephox.darwin.api.Responses","ephox.darwin.keyboard.KeySelection","ephox.darwin.keyboard.TableKeys","ephox.darwin.selection.Util","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sand.api.PlatformDetection","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.PredicateExists","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Awareness","ephox.sugar.api.selection.CursorPosition"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p){var h=s.detect(),g=function(e,t,r,o,s){return d.closest(o,"td,th",t).bind(function(o){return d.closest(o,"table",t).bind(function(l){return m=l,u.ancestor(s,function(e){return f.parent(e).exists(function(e){return c.eq(e,m)})})?n.handle(e,t,r).bind(function(e){return d.closest(e.finish(),"td,th",t).map(function(t){return{start:i.constant(o),finish:i.constant(t),range:i.constant(e)}})}):a.none();var m})})};return{navigate:function(t,n,o,i,s,c){return h.browser.isIE()?a.none():c(i,n).orThunk(function(){return g(t,n,o,i,s).map(function(t){var n=t.range();return e.response(a.some(r.makeSitus(n.start(),n.soffset(),n.finish(),n.foffset())),!0)})})},select:function(e,n,r,o,i,a,s){return g(e,r,o,i,a).bind(function(e){return t.detect(n,r,e.start(),e.finish(),s)})},firstUpCheck:function(t,n){return d.closest(t,"tr",n).bind(function(t){return d.closest(t,"table",n).bind(function(n){var o=l.descendants(n,"tr");return c.eq(t,o[0])?f.prevSibling(n).bind(p.last).map(function(t){var n=m.getEnd(t);return e.response(a.some(r.makeSitus(t,n,t,n)),!0)}):a.none()})})},lastDownCheck:function(t,n){return d.closest(t,"tr",n).bind(function(t){return d.closest(t,"table",n).bind(function(n){var o=l.descendants(n,"tr");return c.eq(t,o[o.length-1])?f.nextSibling(n).bind(p.first).map(function(t){return e.response(a.some(r.makeSitus(t,0,t,0)),!0)}):a.none()})})}}}),n("ephox.darwin.mouse.MouseSelection",["ephox.darwin.selection.CellSelection","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind"],function(e,t,n,r){var o=function(e,t){return r.closest(e,"td,th",t)};return function(r,i,a,s){var c=t.none(),u=function(){c=t.none()};return{mousedown:function(e){s.clear(i),c=o(e.target(),a)},mouseover:function(t){c.each(function(c){s.clear(i),o(t.target(),a).each(function(t){var o=e.identify(c,t,a).getOr([]);(o.length>1||1===o.length&&!n.eq(c,t))&&(s.selectRange(i,o,c,t),r.selectContents(t))})})},mouseup:function(){c.each(u)}}}}),n("ephox.darwin.navigation.KeyDirection",["ephox.darwin.keyboard.Retries","ephox.darwin.navigation.BeforeAfter","ephox.phoenix.api.dom.DomGather","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Situ"],function(e,t,n,r,o){return{down:{traverse:r.nextSibling,gather:n.after,relative:o.before,otherRetry:e.tryDown,ieRetry:e.ieTryDown,failure:t.adt.failedDown},up:{traverse:r.prevSibling,gather:n.before,relative:o.before,otherRetry:e.tryUp,ieRetry:e.ieTryUp,failure:t.adt.failedUp}}}),n("ephox.darwin.api.InputHandlers",["ephox.darwin.api.Responses","ephox.darwin.api.SelectionKeys","ephox.darwin.api.WindowBridge","ephox.darwin.keyboard.KeySelection","ephox.darwin.keyboard.VerticalMovement","ephox.darwin.mouse.MouseSelection","ephox.darwin.navigation.KeyDirection","ephox.darwin.selection.CellSelection","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.katamari.api.Struct","ephox.sugar.api.selection.Situ"],function(e,t,n,r,o,i,a,s,c,u,l,d,f){var m=d.immutable("rows","cols");return{mouse:function(e,t,r,o){var a=n(e),s=i(a,t,r,o);return{mousedown:s.mousedown,mouseover:s.mouseover,mouseup:s.mouseup}},keyboard:function(i,d,p,h){var g=n(i),v=function(){return h.clear(d),u.none()};return{keydown:function(n,i,y,b,x,C){var w=n.raw().which,k=!0===n.raw().shiftKey;return s.retrieve(d,h.selectedSelector()).fold(function(){return t.isDown(w)&&k?c.curry(o.select,g,d,p,a.down,b,i,h.selectRange):t.isUp(w)&&k?c.curry(o.select,g,d,p,a.up,b,i,h.selectRange):t.isDown(w)?c.curry(o.navigate,g,p,a.down,b,i,o.lastDownCheck):t.isUp(w)?c.curry(o.navigate,g,p,a.up,b,i,o.firstUpCheck):u.none},function(n){var o=function(o){return function(){return l.findMap(o,function(e){return r.update(e.rows(),e.cols(),d,n,h)}).fold(function(){return s.getEdges(d,h.firstSelectedSelector(),h.lastSelectedSelector()).map(function(n){var r=t.isDown(w)||C.isForward(w)?f.after:f.before;return g.setRelativeSelection(f.on(n.first(),0),r(n.table())),h.clear(d),e.response(u.none(),!0)})},function(t){return u.some(e.response(u.none(),!0))})}};return t.isDown(w)&&k?o([m(1,0)]):t.isUp(w)&&k?o([m(-1,0)]):C.isBackward(w)&&k?o([m(0,-1),m(-1,0)]):C.isForward(w)&&k?o([m(0,1),m(1,0)]):t.isNavigation(w)&&!1===k?v:u.none})()},keyup:function(e,n,o,i,a){return s.retrieve(d,h.selectedSelector()).fold(function(){var s=e.raw().which;return 0==(!0===e.raw().shiftKey)?u.none():t.isNavigation(s)?r.sync(d,p,n,o,i,a,h.selectRange):u.none()},u.none)}}}}}),n("ephox.sugar.api.properties.Classes",["ephox.katamari.api.Arr","ephox.sugar.api.properties.Class","ephox.sugar.impl.ClassList","global!Array"],function(e,t,n,r){return{add:function(n,r){e.each(r,function(e){t.add(n,e)})},remove:function(n,r){e.each(r,function(e){t.remove(n,e)})},toggle:function(n,r){e.each(r,function(e){t.toggle(n,e)})},hasAll:function(n,r){return e.forall(r,function(e){return t.has(n,e)})},hasAny:function(n,r){return e.exists(r,function(e){return t.has(n,e)})},get:function(e){return n.supports(e)?function(t){for(var n=e.dom().classList,o=new r(n.length),i=0;i<n.length;i++)o[i]=n.item(i);return o}():n.get(e)}}}),n("ephox.sugar.api.properties.OnNode",["ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Classes"],function(e,t){return{addClass:function(t){return function(n){e.add(n,t)}},removeClass:function(t){return function(n){e.remove(n,t)}},removeClasses:function(e){return function(n){t.remove(n,e)}},hasClass:function(t){return function(n){return e.has(n,t)}}}}),n("ephox.darwin.api.SelectionAnnotation",["ephox.katamari.api.Arr","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.OnNode","ephox.sugar.api.search.SelectorFilter"],function(e,t,n,r,o){return{byClass:function(t){var i=r.addClass(t.selected()),a=r.removeClasses([t.selected(),t.lastSelected(),t.firstSelected()]),s=function(n){var r=o.descendants(n,t.selectedSelector());e.each(r,a)};return{clear:s,selectRange:function(r,o,a,c){s(r),e.each(o,i),n.add(a,t.firstSelected()),n.add(c,t.lastSelected())},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},byAttr:function(n){var r=function(e){t.remove(e,n.selected()),t.remove(e,n.firstSelected()),t.remove(e,n.lastSelected())},i=function(e){t.set(e,n.selected(),"1")},a=function(t){var i=o.descendants(t,n.selectedSelector());e.each(i,r)};return{clear:a,selectRange:function(r,o,s,c){a(r),e.each(o,i),t.set(s,n.firstSelected(),"1"),t.set(c,n.lastSelected(),"1")},selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}}}}),n("tinymce.plugins.table.selection.CellSelection",["ephox.darwin.api.InputHandlers","ephox.darwin.api.SelectionAnnotation","ephox.darwin.api.SelectionKeys","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Selection","ephox.sugar.selection.core.SelectionDirection","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.Direction","tinymce.plugins.table.selection.Ephemera"],function(e,t,n,r,o,i,a,s,c,u,l,d,f,m,p,h,g,v){return function(y,b){var x=i.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]),C=o.none(),w=t.byAttr(v);return y.on("init",function(t){var i=y.getWin(),v=h.getBody(y),k=h.getIsRoot(y),S=e.mouse(i,v,k,w),T=e.keyboard(i,v,k,w),E=function(e,t){t.kill()&&e.kill(),t.selection().each(function(e){var t=m.relative(e.start(),e.finish()),n=p.asLtrRange(i,t);y.selection.setRng(n)})},R=function(e){var t=D(e);if(t.raw().shiftKey&&n.isNavigation(t.raw().which)){var r=y.selection.getRng(),o=c.fromDom(r.startContainer),i=c.fromDom(r.endContainer);T.keyup(t,o,r.startOffset,i,r.endOffset).each(function(e){E(t,e)})}},N=function(e){return!(d.has(e,"data-mce-bogus")||"br"===u.name(e)||u.isText(e)&&0===l.get(e).length)},A=function(e){var t,r,i=D(e);b().each(function(e){e.hideBars()}),40===e.which&&(t=c.fromDom(y.getBody()),r=function(e){return f.prevSibling(e).bind(function(e){return N(e)?o.some(e):r(e)})},f.lastChild(t).bind(function(e){return N(e)?o.some(e):r(e)})).each(function(e){"table"===u.name(e)&&(y.settings.forced_root_block?y.dom.add(y.getBody(),y.settings.forced_root_block,y.settings.forced_root_block_attrs,"<br/>"):y.dom.add(y.getBody(),"br"))});var a=y.selection.getRng(),s=c.fromDom(y.selection.getStart()),l=c.fromDom(a.startContainer),d=c.fromDom(a.endContainer),m=g.directionAt(s).isRtl()?n.rtl:n.ltr;T.keydown(i,l,a.startOffset,d,a.endOffset,m).each(function(e){E(i,e)}),b().each(function(e){e.showBars()})},D=function(e){var t=c.fromDom(e.target),n=function(){e.stopPropagation()},o=function(){e.preventDefault()},i=r.compose(o,n);return{target:r.constant(t),x:r.constant(e.x),y:r.constant(e.y),stop:n,prevent:o,kill:i,raw:r.constant(e)}},P=function(e){return 0===e.button},B=function(e){P(e)&&S.mousedown(D(e))},_=function(e){var t;(void 0===(t=e).buttons||0!=(1&t.buttons))&&S.mouseover(D(e))},O=function(e){P&&S.mouseup(D(e))};y.on("mousedown",B),y.on("mouseover",_),y.on("mouseup",O),y.on("keyup",R),y.on("keydown",A),y.on("nodechange",function(){var e=y.selection,t=c.fromDom(e.getStart()),n=c.fromDom(e.getEnd()),i=a.table(t),u=a.table(n);i.bind(function(e){return u.bind(function(t){return s.eq(e,t)?o.some(!0):o.none()})}).fold(function(){w.clear(v)},r.noop)}),C=o.some(x({mousedown:B,mouseover:_,mouseup:O,keyup:R,keydown:A}))}),{clear:w.clear,destroy:function(){C.each(function(e){})}}}}),n("tinymce.plugins.table.selection.Selections",["ephox.darwin.api.TableSelection","tinymce.plugins.table.alien.Util","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.SelectionTypes"],function(e,t,n,r){return function(o){return{get:function(){var i=t.getBody(o);return e.retrieve(i,n.selectedSelector()).fold(function(){return void 0===o.selection.getStart()?r.none():r.single(o.selection)},function(e){return r.multiple(e)})}}}}),n("tinymce.plugins.table.ui.Buttons",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.ui.TableDialog"],function(e,t,n){var r=t.each;return{addButtons:function(t){var o=[];function i(e){return function(){t.execCommand(e)}}r("inserttable tableprops deletetable | cell row column".split(" "),function(e){o.push("|"==e?{text:"-"}:t.menuItems[e])}),t.addButton("table",{type:"menubutton",title:"Table",menu:o}),t.addButton("tableprops",{title:"Table properties",onclick:e.curry(n.open,t,!0),icon:"table"}),t.addButton("tabledelete",{title:"Delete table",onclick:i("mceTableDelete")}),t.addButton("tablecellprops",{title:"Cell properties",onclick:i("mceTableCellProps")}),t.addButton("tablemergecells",{title:"Merge cells",onclick:i("mceTableMergeCells")}),t.addButton("tablesplitcells",{title:"Split cell",onclick:i("mceTableSplitCells")}),t.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:i("mceTableInsertRowBefore")}),t.addButton("tableinsertrowafter",{title:"Insert row after",onclick:i("mceTableInsertRowAfter")}),t.addButton("tabledeleterow",{title:"Delete row",onclick:i("mceTableDeleteRow")}),t.addButton("tablerowprops",{title:"Row properties",onclick:i("mceTableRowProps")}),t.addButton("tablecutrow",{title:"Cut row",onclick:i("mceTableCutRow")}),t.addButton("tablecopyrow",{title:"Copy row",onclick:i("mceTableCopyRow")}),t.addButton("tablepasterowbefore",{title:"Paste row before",onclick:i("mceTablePasteRowBefore")}),t.addButton("tablepasterowafter",{title:"Paste row after",onclick:i("mceTablePasteRowAfter")}),t.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:i("mceTableInsertColBefore")}),t.addButton("tableinsertcolafter",{title:"Insert column after",onclick:i("mceTableInsertColAfter")}),t.addButton("tabledeletecol",{title:"Delete column",onclick:i("mceTableDeleteCol")})},addToolbars:function(e){var t=e.settings.table_toolbar;""!==t&&!1!==t&&(t||(t="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),e.addContextToolbar(function(t){return e.dom.is(t,"table")&&e.getBody().contains(t)},t))}}}),n("tinymce.plugins.table.ui.MenuItems",["ephox.katamari.api.Fun","ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.TableLookup","ephox.sugar.api.node.Element","tinymce.plugins.table.actions.InsertTable","tinymce.plugins.table.queries.TableTargets","tinymce.plugins.table.ui.TableDialog"],function(e,t,n,r,o,i,a,s){return{addMenuItems:function(c,u){var l=n.none(),d=[],f=[],m=[],p=[],h=function(e){e.disabled(!0)},g=function(e){e.disabled(!1)},v=function(){var e=this;d.push(e),l.fold(function(){h(e)},function(t){g(e)})},y=function(){var e=this;f.push(e),l.fold(function(){h(e)},function(t){g(e)})};c.on("init",function(){c.on("nodechange",function(e){var i=n.from(c.dom.getParent(c.selection.getStart(),"th,td"));(l=i.bind(function(e){var t=o.fromDom(e);return r.table(t).map(function(e){return a.forMenu(u,e,t)})})).fold(function(){t.each(d,h),t.each(f,h),t.each(m,h),t.each(p,h)},function(e){t.each(d,g),t.each(f,g),t.each(m,function(t){t.disabled(e.mergable().isNone())}),t.each(p,function(t){t.disabled(e.unmergable().isNone())})})})});var b=function(e,t,n,r){var o,i,a,s,c,u=r.getEl().getElementsByTagName("table")[0],l=r.isRtl()||"tl-tr"==r.parent().rel;for(u.nextSibling.innerHTML=t+1+" x "+(n+1),l&&(t=9-t),i=0;i<10;i++)for(o=0;o<10;o++)e.dom.toggleClass(s=u.rows[i].childNodes[o].firstChild,"mce-active",c=(l?o>=t:o<=t)&&i<=n),c&&(a=s);return a.parentNode},x=!1===c.settings.table_grid?{text:"Table",icon:"table",context:"table",onclick:e.curry(s.open,c)}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),s.open(c))},onshow:function(){b(c,0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");c.dom.removeClass(e,"mce-active"),c.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return(e+="</table>")+'<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t,n,r=e.target;"A"==r.tagName.toUpperCase()&&(t=parseInt(r.getAttribute("data-mce-x"),10),n=parseInt(r.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(t=9-t),t===this.lastX&&n===this.lastY||(b(c,t,n,e.control),this.lastX=t,this.lastY=n))},onclick:function(e){var t=this;"A"==e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),t.parent().cancel(),c.undoManager.transact(function(){i.insert(c,t.lastX+1,t.lastY+1)}),c.addVisual())}}]};function C(e){return function(){c.execCommand(e)}}var w={text:"Table properties",context:"table",onPostRender:v,onclick:e.curry(s.open,c,!0)},k={text:"Delete table",context:"table",onPostRender:v,cmd:"mceTableDelete"},S={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:C("mceTableInsertRowBefore"),onPostRender:y},{text:"Insert row after",onclick:C("mceTableInsertRowAfter"),onPostRender:y},{text:"Delete row",onclick:C("mceTableDeleteRow"),onPostRender:y},{text:"Row properties",onclick:C("mceTableRowProps"),onPostRender:y},{text:"-"},{text:"Cut row",onclick:C("mceTableCutRow"),onPostRender:y},{text:"Copy row",onclick:C("mceTableCopyRow"),onPostRender:y},{text:"Paste row before",onclick:C("mceTablePasteRowBefore"),onPostRender:y},{text:"Paste row after",onclick:C("mceTablePasteRowAfter"),onPostRender:y}]},T={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:C("mceTableInsertColBefore"),onPostRender:y},{text:"Insert column after",onclick:C("mceTableInsertColAfter"),onPostRender:y},{text:"Delete column",onclick:C("mceTableDeleteCol"),onPostRender:y}]},E={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:C("mceTableCellProps"),onPostRender:y},{text:"Merge cells",onclick:C("mceTableMergeCells"),onPostRender:function(){var e=this;m.push(e),l.fold(function(){h(e)},function(t){e.disabled(t.mergable().isNone())})}},{text:"Split cell",onclick:C("mceTableSplitCells"),onPostRender:function(){var e=this;p.push(e),l.fold(function(){h(e)},function(t){e.disabled(t.unmergable().isNone())})}}]};c.addMenuItem("inserttable",x),c.addMenuItem("tableprops",w),c.addMenuItem("deletetable",k),c.addMenuItem("row",S),c.addMenuItem("column",T),c.addMenuItem("cell",E)}}}),n("tinymce.plugins.table.Plugin",["tinymce.core.PluginManager","tinymce.plugins.table.actions.Clipboard","tinymce.plugins.table.actions.InsertTable","tinymce.plugins.table.actions.TableActions","tinymce.plugins.table.actions.TableCommands","tinymce.plugins.table.actions.ResizeHandler","tinymce.plugins.table.queries.TabContext","tinymce.plugins.table.selection.CellSelection","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.Selections","tinymce.plugins.table.ui.Buttons","tinymce.plugins.table.ui.MenuItems"],function(e,t,n,r,o,i,a,s,c,u,l,d){return e.add("table",function(e){var f=i(e),m=s(e,f.lazyResize),p=r(e,f.lazyWire),h=u(e);o.registerCommands(e,p,m,h),t.registerEvents(e,h,p,m),d.addMenuItems(e,h),l.addButtons(e),l.addToolbars(e),e.on("PreInit",function(){e.serializer.addTempAttr(c.firstSelected()),e.serializer.addTempAttr(c.lastSelected())}),!1!==e.settings.table_tab_navigation&&e.on("keydown",function(t){a.handle(t,e,p,f.lazyWire)}),e.on("remove",function(){f.destroy(),m.destroy()}),this.insertTable=function(t,r){return n.insert(e,t,r)},this.setClipboardRows=o.setClipboardRows,this.getClipboardRows=o.getClipboardRows}),function(){}}),t("tinymce.plugins.table.Plugin")()}();